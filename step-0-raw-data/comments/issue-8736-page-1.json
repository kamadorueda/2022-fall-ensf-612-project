[
  {
    "author_association": "CONTRIBUTOR",
    "body": "I believe this actually the same issue as #7618\r\n\r\nwe do not send UTF-8 by default, it would need to be defined in the Content-type charset but doing that now results in an error.\r\n\r\nThe difference in encoding type used to encode the byte stream for transport would explain the difference in content-length",
    "created_at": "2019-01-25T00:36:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8736#issuecomment-457411637",
    "id": 457411637,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8736",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzQxMTYzNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457411637/reactions"
    },
    "updated_at": "2019-01-25T00:37:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457411637",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "Ok, it seems plausible. I need to pass utf-8 in PS 5.1 or it will fail with similar symptoms. On top of chunking this is what I send in PS 5.1\r\nInvoke-RestMethod -Method Post -Headers $apikey -Uri $URI -ContentType \"application/json; charset=utf-8\" -Body $body",
    "created_at": "2019-01-25T08:12:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8736#issuecomment-457490561",
    "id": 457490561,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8736",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzQ5MDU2MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457490561/reactions"
    },
    "updated_at": "2019-01-25T08:12:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457490561",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/35916806?v=4",
      "events_url": "https://api.github.com/users/jonnords/events{/privacy}",
      "followers_url": "https://api.github.com/users/jonnords/followers",
      "following_url": "https://api.github.com/users/jonnords/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonnords/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jonnords",
      "id": 35916806,
      "login": "jonnords",
      "node_id": "MDQ6VXNlcjM1OTE2ODA2",
      "organizations_url": "https://api.github.com/users/jonnords/orgs",
      "received_events_url": "https://api.github.com/users/jonnords/received_events",
      "repos_url": "https://api.github.com/users/jonnords/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jonnords/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonnords/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jonnords"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@jonnords for issues with 5.1, you will need to open or vote on an issue at [UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell). This repository is only for issues with 6.0.0 and up (PowerShell Core). Issues with the web cmdlets on windows would be in a completely different .NET API.",
    "created_at": "2019-01-25T12:53:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8736#issuecomment-457563853",
    "id": 457563853,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8736",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzU2Mzg1Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457563853/reactions"
    },
    "updated_at": "2019-01-25T12:53:07Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457563853",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@markekraus What is status the Issue after #8742?",
    "created_at": "2019-01-26T07:51:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8736#issuecomment-457811206",
    "id": 457811206,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8736",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzgxMTIwNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457811206/reactions"
    },
    "updated_at": "2019-01-26T07:51:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457811206",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@iSazonov I was waiting for #8742 to have @jonnords try with fix in place to ensure it is the same issue.\r\n\r\n@jonnords If could download the latest nightly build and test. You will need to supply `-ContentType 'application/json; charset=utf-8' -TransferEncoding chuncked` and do not include a content-length header (it should be calculated for you)",
    "created_at": "2019-01-26T14:24:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8736#issuecomment-457835209",
    "id": 457835209,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8736",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzgzNTIwOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457835209/reactions"
    },
    "updated_at": "2019-01-26T14:24:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457835209",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "Downloaded the latest build and it worked like a charm.\r\n\r\nInvoke-RestMethod -Method Put -Headers $APIKey -Uri $uri -ContentType \"application/json; charset=utf-8\" -Body $publish -TransferEncoding Chunked\r\n\r\nThank you for the swift response.\r\n\r\nFrom: Mark Kraus <notifications@github.com>\r\nSent: Saturday, January 26, 2019 3:25 PM\r\nTo: PowerShell/PowerShell <PowerShell@noreply.github.com>\r\nCc: Jon Nordström <jonnords@microsoft.com>; Mention <mention@noreply.github.com>\r\nSubject: Re: [PowerShell/PowerShell] invoke-restmethod and invoke-webrequest Content-Length incorrectly calculated (#8736)\r\n\r\n\r\n@iSazonov<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FiSazonov&data=02%7C01%7Cjonnords%40microsoft.com%7C9433838b5bfa4052ef2108d6839a117c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636841095085244352&sdata=4rOBCz730lIiEoOTXJb9%2FUZM0HhBihYAhx%2BRyI2gr5Y%3D&reserved=0> I was waiting for #8742<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPowerShell%2FPowerShell%2Fpull%2F8742&data=02%7C01%7Cjonnords%40microsoft.com%7C9433838b5bfa4052ef2108d6839a117c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636841095085254357&sdata=7Kj3u0thcs1mc3ies77Vx1FUHmHgKyRV%2BdP8ZayoaGQ%3D&reserved=0> to have @jonnords<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fjonnords&data=02%7C01%7Cjonnords%40microsoft.com%7C9433838b5bfa4052ef2108d6839a117c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636841095085264361&sdata=D9%2FMA5vndujHYsFjmcYBinl%2B1T26E%2BE8zGQ05qe64Qc%3D&reserved=0> try with fix in place to ensure it is the same issue.\r\n\r\n@jonnords<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fjonnords&data=02%7C01%7Cjonnords%40microsoft.com%7C9433838b5bfa4052ef2108d6839a117c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636841095085274371&sdata=x5RZ8fr6U8vS1Mr8iXHxMiS3KWGfr0Sqm%2BDvt9dbmbM%3D&reserved=0> If could download the latest nightly build and test. You will need to supply -ContentType 'application/json; charset=utf-8' -TransferEncoding chuncked and do not include a content-length header (it should be calculated for you)\r\n\r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FPowerShell%2FPowerShell%2Fissues%2F8736%23issuecomment-457835209&data=02%7C01%7Cjonnords%40microsoft.com%7C9433838b5bfa4052ef2108d6839a117c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636841095085284380&sdata=nx5IDNvCiEr21dAWnfpjztP3RaZi%2FPu4pj5qwRC6uuE%3D&reserved=0>, or mute the thread<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAiQMBnipR9F5Dc0piGfcLQRx_QiE_W3iks5vHGVBgaJpZM4aRiTM&data=02%7C01%7Cjonnords%40microsoft.com%7C9433838b5bfa4052ef2108d6839a117c%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636841095085294385&sdata=oyp5SwXSev7U7E1HrUl9YGcKHODmYnaxwuM98D6sJBQ%3D&reserved=0>.\r\n",
    "created_at": "2019-01-28T11:03:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8736#issuecomment-458086626",
    "id": 458086626,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8736",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODA4NjYyNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/458086626/reactions"
    },
    "updated_at": "2019-01-28T11:03:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/458086626",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/35916806?v=4",
      "events_url": "https://api.github.com/users/jonnords/events{/privacy}",
      "followers_url": "https://api.github.com/users/jonnords/followers",
      "following_url": "https://api.github.com/users/jonnords/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonnords/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jonnords",
      "id": 35916806,
      "login": "jonnords",
      "node_id": "MDQ6VXNlcjM1OTE2ODA2",
      "organizations_url": "https://api.github.com/users/jonnords/orgs",
      "received_events_url": "https://api.github.com/users/jonnords/received_events",
      "repos_url": "https://api.github.com/users/jonnords/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jonnords/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonnords/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jonnords"
    }
  }
]
