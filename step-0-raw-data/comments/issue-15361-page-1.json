[
  {
    "author_association": "CONTRIBUTOR",
    "body": "There are two behaviors at play:\r\n\r\n* The CLI outputs _strings_ by default (the representations created by the formatting system), even when called from PowerShell itself.\r\n\r\n  * To get CLIXML output that PowerShell automatically deserializes, you have two choices:\r\n     * Pass `-OutputFormat xml`\r\n       * There's currently a related display bug: #15363 \r\n     * Only when you pass a _script block_ to `-Command` / `-c` is `-OutputFormat xml` _implicitly_ applied, because the command line is transformed behind the scenes as described by in https://github.com/PowerShell/PowerShell/issues/3319#issuecomment-286291861\r\n\r\n* `-Command -` / `File -`, i.e. providing commands / a script _via the pipeline_ (stdin) unexpectedly changes the CLI's behavior fundamentally, exhibiting pseudo-interactive behavior: see #3223 and near-duplicate #15331.\r\n\r\n  * That is, even if you add `-OutputFormat xml` to your tests, the ones that use `-Command -` / `-File -` will still fail, due to _extra output_.\r\n\r\n",
    "created_at": "2021-05-07T21:05:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15361#issuecomment-834779454",
    "id": 834779454,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15361",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNDc3OTQ1NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/834779454/reactions"
    },
    "updated_at": "2021-05-07T21:05:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/834779454",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "The inconsistency happens when calling the PowerShell CLI from within PowerShell, but not otherwise (calling from `cmd` or `bash` for example). It's good to have a consistent behavior, but it would be a breaking change. And it's likely not in bucket 3 because the chance for either behavior (deserializing to PSObject or returning text) to be depended on in some scripts is relatively high.\r\n\r\nThe Engine working group discussed this today. Given the consideration above, we decide to resolve this issue as `Won't Fix`, unless it's proven causing problems in real world scenarios.",
    "created_at": "2021-05-28T02:01:56Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15361#issuecomment-850057327",
    "id": 850057327,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15361",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDA1NzMyNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/850057327/reactions"
    },
    "updated_at": "2021-05-28T02:01:56Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/850057327",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "In that case, the documentation needs to be updated. Pwsh.exe does not work as stated in the docs.\r\n```\r\nThe value of Command can be \"-\", a script block, or a string. \r\nIf the value  of Command is \"-\", the command text is read from standard input.\r\n```\r\nand\r\n\r\n```text \r\n    When called from within an existing PowerShell session, the results are\r\n    returned to the parent shell as deserialized XML objects, not live objects.\r\n    For other shells, the results are returned as strings.\r\n```\r\n\r\nCould a parameter be added to force a behaviour? I really want the serialization behaviour between powershell sessions, but it seems to be impossible in some of the scenarios (like commands on pipeline input)\r\n\r\n",
    "created_at": "2021-07-05T14:52:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15361#issuecomment-874170810",
    "id": 874170810,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15361",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDE3MDgxMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/874170810/reactions"
    },
    "updated_at": "2021-07-05T14:52:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/874170810",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3505151?v=4",
      "events_url": "https://api.github.com/users/powercode/events{/privacy}",
      "followers_url": "https://api.github.com/users/powercode/followers",
      "following_url": "https://api.github.com/users/powercode/following{/other_user}",
      "gists_url": "https://api.github.com/users/powercode/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/powercode",
      "id": 3505151,
      "login": "powercode",
      "node_id": "MDQ6VXNlcjM1MDUxNTE=",
      "organizations_url": "https://api.github.com/users/powercode/orgs",
      "received_events_url": "https://api.github.com/users/powercode/received_events",
      "repos_url": "https://api.github.com/users/powercode/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/powercode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/powercode/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/powercode"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as won't fix and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
    "created_at": "2021-07-08T21:00:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15361#issuecomment-876742640",
    "id": 876742640,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15361",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3Njc0MjY0MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/876742640/reactions"
    },
    "updated_at": "2021-07-08T21:00:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/876742640",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
