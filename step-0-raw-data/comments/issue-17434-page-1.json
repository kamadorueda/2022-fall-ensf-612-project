[
  {
    "author_association": "COLLABORATOR",
    "body": "@jberkers42 Could you please point an public site we could use to reproduce the issue with?",
    "created_at": "2022-05-25T05:11:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17434#issuecomment-1136733179",
    "id": 1136733179,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17434",
    "node_id": "IC_kwDOAvT7bc5DwSv7",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136733179/reactions"
    },
    "updated_at": "2022-05-25T05:11:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136733179",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "@iSazonov I'll see what I can find.  The specific application we are encountering this with is not exposed to the public Internet, and requires a valid Bearer token for authentication.",
    "created_at": "2022-05-25T05:21:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17434#issuecomment-1136738619",
    "id": 1136738619,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17434",
    "node_id": "IC_kwDOAvT7bc5DwUE7",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136738619/reactions"
    },
    "updated_at": "2022-05-25T05:21:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136738619",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7709917?v=4",
      "events_url": "https://api.github.com/users/jberkers42/events{/privacy}",
      "followers_url": "https://api.github.com/users/jberkers42/followers",
      "following_url": "https://api.github.com/users/jberkers42/following{/other_user}",
      "gists_url": "https://api.github.com/users/jberkers42/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jberkers42",
      "id": 7709917,
      "login": "jberkers42",
      "node_id": "MDQ6VXNlcjc3MDk5MTc=",
      "organizations_url": "https://api.github.com/users/jberkers42/orgs",
      "received_events_url": "https://api.github.com/users/jberkers42/received_events",
      "repos_url": "https://api.github.com/users/jberkers42/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jberkers42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jberkers42/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jberkers42"
    }
  },
  {
    "author_association": "NONE",
    "body": "@iSazonov There is a public site at [httpbin.org](https://httpbing.org) with a test web page at [RestTestTest](https://resttesttest.com/) that can be used to simulate REST requests and validate what is received.\r\n\r\nI have just tested from a Mac as well:\r\n\r\n## PowerShell 7.2.3\r\n\r\n```\r\nPS> $PsVersionTable\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.2.3\r\nPSEdition                      Core\r\nGitCommitId                    7.2.3\r\nOS                             Darwin 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0…}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n\r\nPS> $Headers = @{}\r\nPS> $Headers.Add('Content-Type','application/json')\r\nPS> $response = Invoke-RestMethod -Uri $TestUri -Headers $Headers -Verbose -SkipHeaderValidation\r\nVERBOSE: GET with 0-byte payload\r\nVERBOSE: received 452-byte response of content type application/json\r\nVERBOSE: Content encoding: utf-8\r\nPS> $response.headers\r\n\r\nContent-Length  : 0\r\nContent-Type    : application/json\r\nHost            : httpbin.org\r\nUser-Agent      : Mozilla/5.0 (Macintosh; Darwin 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64; en-GB) PowerShell/7.2.3\r\nX-Amzn-Trace-Id : Root=1-628dc175-17c33fa26e5fe7936519c890\r\n```\r\n\r\n## PowerShell 7.2.4\r\n\r\n```\r\nPS>$psversiontable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.2.4\r\nPSEdition                      Core\r\nGitCommitId                    7.2.4\r\nOS                             Darwin 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0…}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n\r\nPS> $Headers = @{}\r\nPS> $Headers.Add('Content-Type','application/json')\r\nPS> $response = Invoke-RestMethod -Uri $TestUri -Headers $Headers -Verbose -SkipHeaderValidation\r\nVERBOSE: GET with 0-byte payload\r\nVERBOSE: received 383-byte response of content type application/json\r\nVERBOSE: Content encoding: utf-8\r\nPS> > $response.headers                                                                           \r\n\r\nHost        User-Agent                                                                                                                                                       X-Amzn-Trace-Id\r\n----        ----------                                                                                                                                                       ---------------\r\nhttpbin.org Mozilla/5.0 (Macintosh; Darwin 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64; en-GB) PowerShell/7.2.4 Root=1-628dc458-393be3cd1d064af72af5d66f\r\n```\r\n\r\nHopefully this will assist you with testing also.",
    "created_at": "2022-05-25T05:54:42Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17434#issuecomment-1136759391",
    "id": 1136759391,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17434",
    "node_id": "IC_kwDOAvT7bc5DwZJf",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136759391/reactions"
    },
    "updated_at": "2022-05-25T05:54:42Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136759391",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7709917?v=4",
      "events_url": "https://api.github.com/users/jberkers42/events{/privacy}",
      "followers_url": "https://api.github.com/users/jberkers42/followers",
      "following_url": "https://api.github.com/users/jberkers42/following{/other_user}",
      "gists_url": "https://api.github.com/users/jberkers42/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jberkers42",
      "id": 7709917,
      "login": "jberkers42",
      "node_id": "MDQ6VXNlcjc3MDk5MTc=",
      "organizations_url": "https://api.github.com/users/jberkers42/orgs",
      "received_events_url": "https://api.github.com/users/jberkers42/received_events",
      "repos_url": "https://api.github.com/users/jberkers42/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jberkers42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jberkers42/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jberkers42"
    }
  },
  {
    "author_association": "NONE",
    "body": "Also, FWIW, when supplying the **-ContentType** argument we get the following behaviour:\r\n\r\n```\r\nPS> $response = Invoke-RestMethod -Uri $TestUri -Verbose -SkipHeaderValidation -ContentType $Headers.'Content-Type'\r\nVERBOSE: GET with 0-byte payload\r\nVERBOSE: received 452-byte response of content type application/json\r\nVERBOSE: Content encoding: utf-8\r\nPS /Users/jberkers> $response.headers                                                                                              \r\n\r\nContent-Length  : 0\r\nContent-Type    : application/json\r\nHost            : httpbin.org\r\nUser-Agent      : Mozilla/5.0 (Macintosh; Darwin 21.4.0 Darwin Kernel Version 21.4.0: Fri Mar 18 00:45:05 PDT 2022; root:xnu-8020.101.4~15/RELEASE_X86_64; en-GB) PowerShell/7.2.4\r\nX-Amzn-Trace-Id : Root=1-628dc73c-5d46de286d51aa7150f8b4fb\r\n```",
    "created_at": "2022-05-25T06:07:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17434#issuecomment-1136767628",
    "id": 1136767628,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17434",
    "node_id": "IC_kwDOAvT7bc5DwbKM",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136767628/reactions"
    },
    "updated_at": "2022-05-25T06:07:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1136767628",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7709917?v=4",
      "events_url": "https://api.github.com/users/jberkers42/events{/privacy}",
      "followers_url": "https://api.github.com/users/jberkers42/followers",
      "following_url": "https://api.github.com/users/jberkers42/following{/other_user}",
      "gists_url": "https://api.github.com/users/jberkers42/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jberkers42",
      "id": 7709917,
      "login": "jberkers42",
      "node_id": "MDQ6VXNlcjc3MDk5MTc=",
      "organizations_url": "https://api.github.com/users/jberkers42/orgs",
      "received_events_url": "https://api.github.com/users/jberkers42/received_events",
      "repos_url": "https://api.github.com/users/jberkers42/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jberkers42/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jberkers42/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jberkers42"
    }
  }
]
