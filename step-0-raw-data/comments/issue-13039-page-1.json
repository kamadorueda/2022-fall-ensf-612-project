[
  {
    "author_association": "COLLABORATOR",
    "body": "> Red Error Message:\r\n>    Move-Item: Invalid cross-device link\r\n\r\nThe full error message would help a lot more here. You can get this with `Get-Error`",
    "created_at": "2020-06-26T21:29:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-650410254",
    "id": 650410254,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDQxMDI1NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650410254/reactions"
    },
    "updated_at": "2020-06-26T21:29:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650410254",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I have a repro:\r\n\r\n```\r\nPS /home/sambauser/share> df\r\nFilesystem      1K-blocks       Used  Available Use% Mounted on\r\nudev              8141164          0    8141164   0% /dev\r\ntmpfs             1631196      21620    1609576   2% /run\r\n/dev/sda2       228167084    6241540  210265616   3% /\r\ntmpfs             8155972         20    8155952   1% /dev/shm\r\ntmpfs                5120          0       5120   0% /run/lock\r\ntmpfs             8155972          0    8155972   0% /sys/fs/cgroup\r\n/dev/sda1          523248      13152     510096   3% /boot/efi\r\n/dev/sdc1      3844641568 1158717308 2490556952  32% /home/sambauser/share/4tb\r\n/dev/sdb1      1921803492 1556889988  267221396  86% /home/sambauser/share/newhd\r\ntmpfs             1631192          0    1631192   0% /run/user/1000\r\n\r\nPS /home/sambauser/share> move-item /home/rob/Library_Copy/* /home/sambauser/share/4tb/Library_Destination/\r\nMove-Item: Invalid cross-device link\r\nMove-Item: Invalid cross-device link\r\n\r\nPS /home/sambauser/share> get-error\r\n\r\nException             :\r\n    Type       : System.IO.IOException\r\n    TargetSite :\r\n        Name          : MoveDirectory\r\n        DeclaringType : System.IO.FileSystem, System.IO.FileSystem, Version=4.1.2.0,\r\nCulture=neutral, PublicKeyToken=b03f5f7f11d50a3a\r\n        MemberType    : Method\r\n        Module        : System.IO.FileSystem.dll\r\n    StackTrace :\r\n   at System.IO.FileSystem.MoveDirectory(String sourceFullPath, String destFullPath)\r\n   at System.IO.DirectoryInfo.MoveTo(String destDirName)\r\n   at Microsoft.PowerShell.Commands.FileSystemProvider.MoveDirectoryInfoItem(DirectoryInfo\r\ndirectory, String destination, Boolean force)\r\n    Message    : Invalid cross-device link\r\n    Source     : System.IO.FileSystem\r\n    HResult    : 18\r\nTargetObject          : /home/rob/Library_Copy/Logs\r\nCategoryInfo          : WriteError: (/home/rob/Library_Copy/Logs:DirectoryInfo) [Move-Item],\r\nIOException\r\nFullyQualifiedErrorId : MoveDirectoryItemIOError,Microsoft.PowerShell.Commands.MoveItemCommand\r\nInvocationInfo        :\r\n    MyCommand        : Move-Item\r\n    ScriptLineNumber : 1\r\n    OffsetInLine     : 1\r\n    HistoryId        : 9\r\n    Line             : move-item /home/rob/Library_Copy/*\r\n/home/sambauser/share/4tb/Library_Destination/\r\n    PositionMessage  : At line:1 char:1\r\n                       + move-item /home/rob/Library_Copy/* /home/sambauser/share/4tb/Library_ â€¦\r\n                       + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    InvocationName   : move-item\r\n    CommandOrigin    : Internal\r\nScriptStackTrace      : at <ScriptBlock>, <No file>: line 1\r\nPipelineIterationInfo :\r\n\r\n```",
    "created_at": "2020-06-27T16:13:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-650580594",
    "id": 650580594,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDU4MDU5NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650580594/reactions"
    },
    "updated_at": "2020-06-27T16:14:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650580594",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Looks like this happens [here](https://github.com/dotnet/runtime/blob/4965d3463cd3e65d59cb2ce59e5ce4a4cf2b4b94/src/libraries/System.IO.FileSystem/src/System/IO/FileSystem.Unix.cs#L392-L393), and the cause for the error is in the Unix implementation [here](https://github.com/dotnet/runtime/blob/a547d4178cd2d71d9b6a7a99600e20a3211d4436/src/libraries/Native/Unix/System.Native/pal_io.c#L994-L999), which uses the [rename](https://man7.org/linux/man-pages/man2/rename.2.html) syscall.\r\n\r\nThis occurs because `rename` [does not support renaming across filesystems](https://unix.stackexchange.com/a/452624).\r\n\r\nThe `mv` coreutil handles this by trying `rename` first but if not, [copying the file](https://github.com/wertarbyte/coreutils/blob/f70c7b785b93dd436788d34827b209453157a6f2/src/mv.c#L165) and deleting it later.\r\n\r\nUnsure if .NET would consider this a bug, but the solution for us is probably to do the same as `mv`. It turns out we already try to do this:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/9212aac0fa020b657454ef4f9ff2fdd6fc6d759c/src/System.Management.Automation/namespaces/FileSystemProvider.cs#L5991-L5999\r\n\r\nBut the test we use is primitive and Windows-specific:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/9212aac0fa020b657454ef4f9ff2fdd6fc6d759c/src/System.Management.Automation/namespaces/FileSystemProvider.cs#L6097-L6103\r\n\r\nWe should improve this test to distinguish Unix mounts.",
    "created_at": "2020-06-27T18:15:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-650595255",
    "id": 650595255,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDU5NTI1NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 1,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650595255/reactions"
    },
    "updated_at": "2020-06-27T18:15:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650595255",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": ".Net uses MOVEFILE_COPY_ALLOWED  flag for MoveFileEx() and this works cross volumes.\r\n\r\nFor Unixes it should be fixed in .Net. Please vote in https://github.com/dotnet/runtime/issues/31149",
    "created_at": "2020-06-29T03:51:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-650890135",
    "id": 650890135,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDg5MDEzNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650890135/reactions"
    },
    "updated_at": "2020-06-29T04:07:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/650890135",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@rjmholt @daxian-dbw Will we keep the issue open and track https://github.com/dotnet/runtime/issues/31149?",
    "created_at": "2020-07-07T03:30:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-654577671",
    "id": 654577671,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NDU3NzY3MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/654577671/reactions"
    },
    "updated_at": "2020-07-07T03:30:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/654577671",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I've opened #13126 to track that ",
    "created_at": "2020-07-07T17:18:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-655007081",
    "id": 655007081,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTAwNzA4MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/655007081/reactions"
    },
    "updated_at": "2020-07-07T17:18:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/655007081",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "NONE",
    "body": ":tada:This issue was addressed in #13044, which has now been successfully released as `v7.1.0-preview.6`.:tada:\n\nHandy links:\n* [Release Notes](https://github.com/PowerShell/PowerShell/releases/tag/v7.1.0-preview.6)\n",
    "created_at": "2020-08-17T22:19:58Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13039#issuecomment-675143703",
    "id": 675143703,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13039",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NTE0MzcwMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/675143703/reactions"
    },
    "updated_at": "2020-08-17T22:19:58Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/675143703",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
