[
  {
    "author_association": "MEMBER",
    "body": "We definitely wouldn't accept your proposed syntax, but to keep this discussion in line with what you want, it might look something more like:\r\n\r\n```PowerShell\r\nfunction Get-Info ()\r\n    param(\r\n        [Alias(\"name\")]\r\n        [Parameter(MandatoryIfEnvVarNotSet = 'Project_Name', ValueFromPipelineByPropertyName=$true)]\r\n        [string] $projectName)\r\n{\r\n}\r\n```\r\n\r\nOr maybe\r\n\r\n```PowerShell\r\nfunction Get-Info ()\r\n    param(\r\n        [Alias(\"name\")]\r\n        [Parameter(Mandatory=$true, DefaultFromEnvironment='Project_Name', ValueFromPipelineByPropertyName=$true)]\r\n        [string] $projectName)\r\n{\r\n}\r\n```\r\n\r\nIn my opinion, this idea is too much of a special case and would unnecessarily complicate the already overly complicated parameter binder.",
    "created_at": "2016-12-02T19:14:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-264537370",
    "id": 264537370,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDUzNzM3MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/264537370/reactions"
    },
    "updated_at": "2016-12-02T19:14:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/264537370",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Environment variables are not the only use case for Mandatory + Default values. See original post on \r\n[UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell/suggestions/17235506-allow-environment-variable-as-default-value-for-fu)",
    "created_at": "2016-12-03T08:38:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-264626176",
    "id": 264626176,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDYyNjE3Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/264626176/reactions"
    },
    "updated_at": "2016-12-03T08:38:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/264626176",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3853405?v=4",
      "events_url": "https://api.github.com/users/DarqueWarrior/events{/privacy}",
      "followers_url": "https://api.github.com/users/DarqueWarrior/followers",
      "following_url": "https://api.github.com/users/DarqueWarrior/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarqueWarrior/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/DarqueWarrior",
      "id": 3853405,
      "login": "DarqueWarrior",
      "node_id": "MDQ6VXNlcjM4NTM0MDU=",
      "organizations_url": "https://api.github.com/users/DarqueWarrior/orgs",
      "received_events_url": "https://api.github.com/users/DarqueWarrior/received_events",
      "repos_url": "https://api.github.com/users/DarqueWarrior/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/DarqueWarrior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarqueWarrior/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/DarqueWarrior"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I see - you're asking for a change to when we evaluate default arguments in the parameter binder so that defaults get used before prompting for mandatory parameters.\r\n\r\nThis might be tricky to get right. Some questions that come to mind:\r\n* If a parameter is mandatory in one parameter set but not another, what should happen?\r\n* If the parameter has a validation attribute\r\n  * Should validation be performed on the default? (That doesn't happen today.)\r\n  * Should validation failure result in prompting?\r\n\r\nI'm sure more questions will come to mind if we consider this further.",
    "created_at": "2016-12-05T17:40:38Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-264921892",
    "id": 264921892,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDkyMTg5Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/264921892/reactions"
    },
    "updated_at": "2016-12-05T17:40:38Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/264921892",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "If the parameter validation does not happen today I would not expect this to behave any different.  My natural instinct was to set the default value to a env var and it simply did not work.  \r\n\r\nI expected this to work similar to the Docker cli.  If you set the Docker Host as in Env Var you don't have to pass it to each and every command because it will read the Env Var instead.  I was looking for a similar feature with PowerShell. I think the closest thing is the $PSDefaultParameterValues.  However, when I tried to set that value via an Advanced Function it did not seem to \"stick\"  after I ran the function my values were not there.  The only way that worked is if I set them on the cmd line then tried to run a function.  I hope I did something wrong and will research further.\r\n\r\nIn a nut shell I did not expect any new rules for how defaults were handled I just wanted to be able to set the default to an Env Var.  If the Env Var is !NullOrEmpty use it.  If it NullOrEmpty behave as if the value was not passed.  For mandatory you would prompt if not you would not.",
    "created_at": "2016-12-08T10:20:34Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-265705252",
    "id": 265705252,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NTcwNTI1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/265705252/reactions"
    },
    "updated_at": "2016-12-08T10:20:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/265705252",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3853405?v=4",
      "events_url": "https://api.github.com/users/DarqueWarrior/events{/privacy}",
      "followers_url": "https://api.github.com/users/DarqueWarrior/followers",
      "following_url": "https://api.github.com/users/DarqueWarrior/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarqueWarrior/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/DarqueWarrior",
      "id": 3853405,
      "login": "DarqueWarrior",
      "node_id": "MDQ6VXNlcjM4NTM0MDU=",
      "organizations_url": "https://api.github.com/users/DarqueWarrior/orgs",
      "received_events_url": "https://api.github.com/users/DarqueWarrior/received_events",
      "repos_url": "https://api.github.com/users/DarqueWarrior/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/DarqueWarrior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarqueWarrior/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/DarqueWarrior"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "$PSDefaultParameterValues work as expected:\r\n\r\n```powershell\r\n$PSDefaultParameterValues = @{\"Get-Info:projectName\" = \"TestProject\"}\r\nfunction Get-Info ([Alias(\"name\")] [Parameter(Mandatory=$true, ValueFromPipelineByPropertyName=$true)] [string] $projectName)\r\n {\r\n   $projectName\r\n }\r\n\r\n>Get-Info\r\n\r\nTestProject\r\n```",
    "created_at": "2016-12-08T12:52:29Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-265733031",
    "id": 265733031,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NTczMzAzMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/265733031/reactions"
    },
    "updated_at": "2016-12-08T12:52:29Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/265733031",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "The only difference in my use case was the setting of $PSDefaultParameterValues was in a different function than where it was used. Second I use add not = so I did not overwrite existing entries. I had a convenience function that added entries to $PSDefaultParameterValues but when I then called a function the values were not in $PSDefaultParameterValue. It was as if they were only scoped and existed where they were set not outside. I will have time today to try again. ",
    "created_at": "2016-12-09T06:04:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-265940847",
    "id": 265940847,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NTk0MDg0Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/265940847/reactions"
    },
    "updated_at": "2016-12-09T06:04:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/265940847",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3853405?v=4",
      "events_url": "https://api.github.com/users/DarqueWarrior/events{/privacy}",
      "followers_url": "https://api.github.com/users/DarqueWarrior/followers",
      "following_url": "https://api.github.com/users/DarqueWarrior/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarqueWarrior/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/DarqueWarrior",
      "id": 3853405,
      "login": "DarqueWarrior",
      "node_id": "MDQ6VXNlcjM4NTM0MDU=",
      "organizations_url": "https://api.github.com/users/DarqueWarrior/orgs",
      "received_events_url": "https://api.github.com/users/DarqueWarrior/received_events",
      "repos_url": "https://api.github.com/users/DarqueWarrior/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/DarqueWarrior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarqueWarrior/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/DarqueWarrior"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "For example the code below does not appear to work as expected.  Once Set-Project is called I would expect $PSDefaultParametersValues to have a new entry.  But if I output $PSDefaultParameterValues it appears empty.  But if I call Set-Project again I get an error that the key already exist. It only appears to exist in that function and not globally.\r\n\r\n```\r\nfunction Set-Project {\r\n    param(\r\n        # The name of the project to cache\r\n        [Parameter(Mandatory=$true)]\r\n        [string]\r\n        $project\r\n    )\r\n\r\n    $PSDefaultParameterValues.Add(\"*:projectName\", $project)\r\n}\r\n\r\nfunction Clear-Project {\r\n    $PSDefaultParameterValues.Remove(\"*:projectName\")\r\n}\r\n```\r\n\r\nBut when you use it strange things happen.\r\n\r\n```\r\nPS > Set-Project -project 'MyProject'\r\nPS > $PSDefaultParameterValues\r\nPS > Set-Project -project 'MyProject'\r\nException calling \"Add\" with \"2\" argument(s): \"The key '*:projectName' has already been added to the dictionary.\"\r\nAt D:\\Repos\\VSTSPowerShell\\src\\vsts.psm1:72 char:5\r\n+     $PSDefaultParameterValues.Add(\"*:projectName\", $project)\r\n+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException\r\n    + FullyQualifiedErrorId : PSArgumentException\r\n\r\nPS > $PSDefaultParameterValues.Add(\"*:projectName\", 'MyProject')\r\nPS > $PSDefaultParameterValues\r\n\r\nName                           Value\r\n----                           -----\r\n*:projectName                  MyProject\r\n```\r\n\r\nWhat is the scoping behavior of $PSDefaultParameterValues?",
    "created_at": "2016-12-13T20:37:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-266854595",
    "id": 266854595,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg1NDU5NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/266854595/reactions"
    },
    "updated_at": "2016-12-13T20:39:46Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/266854595",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3853405?v=4",
      "events_url": "https://api.github.com/users/DarqueWarrior/events{/privacy}",
      "followers_url": "https://api.github.com/users/DarqueWarrior/followers",
      "following_url": "https://api.github.com/users/DarqueWarrior/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarqueWarrior/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/DarqueWarrior",
      "id": 3853405,
      "login": "DarqueWarrior",
      "node_id": "MDQ6VXNlcjM4NTM0MDU=",
      "organizations_url": "https://api.github.com/users/DarqueWarrior/orgs",
      "received_events_url": "https://api.github.com/users/DarqueWarrior/received_events",
      "repos_url": "https://api.github.com/users/DarqueWarrior/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/DarqueWarrior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarqueWarrior/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/DarqueWarrior"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "I was able to get the code to work but setting $Global:PSDefaultParameterValues instead.",
    "created_at": "2016-12-13T20:51:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-266858239",
    "id": 266858239,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Njg1ODIzOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/266858239/reactions"
    },
    "updated_at": "2016-12-13T20:51:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/266858239",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3853405?v=4",
      "events_url": "https://api.github.com/users/DarqueWarrior/events{/privacy}",
      "followers_url": "https://api.github.com/users/DarqueWarrior/followers",
      "following_url": "https://api.github.com/users/DarqueWarrior/following{/other_user}",
      "gists_url": "https://api.github.com/users/DarqueWarrior/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/DarqueWarrior",
      "id": 3853405,
      "login": "DarqueWarrior",
      "node_id": "MDQ6VXNlcjM4NTM0MDU=",
      "organizations_url": "https://api.github.com/users/DarqueWarrior/orgs",
      "received_events_url": "https://api.github.com/users/DarqueWarrior/received_events",
      "repos_url": "https://api.github.com/users/DarqueWarrior/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/DarqueWarrior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DarqueWarrior/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/DarqueWarrior"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Yes, you need use `scope`.",
    "created_at": "2016-12-14T03:59:06Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2834#issuecomment-266936528",
    "id": 266936528,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2834",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjkzNjUyOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/266936528/reactions"
    },
    "updated_at": "2016-12-14T03:59:06Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/266936528",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  }
]
