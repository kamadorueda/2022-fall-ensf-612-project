[
  {
    "author_association": "COLLABORATOR",
    "body": "Isn't this available as `$something.HasFlag($flags)`? ðŸ™‚ ",
    "created_at": "2019-10-25T02:10:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546170597",
    "id": 546170597,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjE3MDU5Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546170597/reactions"
    },
    "updated_at": "2019-10-25T02:10:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546170597",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> Isn't this available as $something.HasFlag($flags)? \r\n\r\nYes, it is first question - how frequently do we manipulate enum flags?\r\n\r\nProposed names is cryptic. -bset implies \"set\", not \"check/test\" flag. I'd expect that the names is derived  from \"the enum has flags\", ex.: -flags, -hasflags, -enumflags, -enumhasflag\r\n\r\nWhat is preffered syntax:\r\n```\r\n$enumVar -flags Flag1,Flag2,Flag3\r\n$enumVar -flags Flag1+Flag2+Flag3\r\n$enumVar -flags [EnumType]::Flag1,[EnumType]::Flag2,[EnumType]::Flag3\r\n$enumVar -flags [EnumType]::Flag1+[EnumType]::Flag2+[EnumType]::Flag3\r\n```",
    "created_at": "2019-10-25T03:41:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546188207",
    "id": 546188207,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjE4ODIwNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546188207/reactions"
    },
    "updated_at": "2019-10-25T03:41:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546188207",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "> Isn't this available as `$something.HasFlag($flags)`? ðŸ™‚\r\n\r\nYou're assuming that you actually have an enumeration to work with. Sometimes you don't. In the case of IIS and the example I provided, I don't have the `HasFlag` method available to me.\r\n\r\n> Proposed names is cryptic. -bset implies \"set\", not \"check/test\" flag. I'd expect that the names is derived from \"the enum has flags\", ex.: -flags, -hasflags, -enumflags, -enumhasflag\r\n\r\nPowerShell already uses many short operator names, and since this is a bitwise operation it made sense (to me at least) to keep the same prefix as `-band`, `-bor`, `-bxor`, and `-bnot`. In the context of bitwise operations, `-bor` is already \"set (bit)\". The proposal of `-bset` was meant to represent \"bit (is) set\", not \"set bit\". I also considered `-btest`, but when looking at the negative check (if a bit is not set), I didn't like `-bntest` as much as I liked `-bnset` (\"bit (is) not set\").\r\n\r\nUltimately I would like to keep these short, without the word \"enum\" in them (because they are not necessarily enumerations), consistent with other bitwise operators, and with both positive and negative test variants. With those goals in mind I still prefer `-bset` and `-bnset` over the other proposals you suggested @iSazonov, but I'm not attached to those operator names personally.\r\n\r\nOne alternative that just came to mind: `-bon` and `-boff`. I think I still prefer `-bset` and `-bnset` over this alternative as well though.\r\n\r\nRegardless of which name we choose, these are conditional bitwise operators, and a quick check of the docs will identify them as such. Since they are conditional, they don't change any values. They just check values for a condition. That's a really simple concept to learn and remember, so I don't think the operator name has to be really long and descriptive just to stop someone from learning that concept once and then having that knowledge in hand to apply it when required.",
    "created_at": "2019-10-25T10:53:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546306357",
    "id": 546306357,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjMwNjM1Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546306357/reactions"
    },
    "updated_at": "2019-10-25T11:06:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546306357",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "> Yes, it is first question - how frequently do we manipulate enum flags?\r\n\r\nPersonally for me, not very frequently. Yet we have `-band`, `-bor`, `-bnot`, and `-bxor` operators to work with flags because ultimately, it comes up in programming. And when it does, if you don't have an enumerated type to work with or if you don't realize that there is a `HasFlags` method available to you when you do have an enumerated type to work with, testing if flags are set (or not set) is a pain.",
    "created_at": "2019-10-25T10:55:58Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546307146",
    "id": 546307146,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjMwNzE0Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546307146/reactions"
    },
    "updated_at": "2019-10-25T10:56:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546307146",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> Yet we have `-band`, `-bor`, `-bnot`, and `-bxor` operators to work with flags\r\n\r\nThose make sense to me because without them, you just can't do that operation.  Even as someone who uses them *very* frequently, I have a hard time seeing the benefit in adding syntactic sugar for it directly in the language. ",
    "created_at": "2019-10-25T12:11:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546328840",
    "id": 546328840,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjMyODg0MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546328840/reactions"
    },
    "updated_at": "2019-10-25T12:11:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546328840",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/24977523?v=4",
      "events_url": "https://api.github.com/users/SeeminglyScience/events{/privacy}",
      "followers_url": "https://api.github.com/users/SeeminglyScience/followers",
      "following_url": "https://api.github.com/users/SeeminglyScience/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeeminglyScience/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SeeminglyScience",
      "id": 24977523,
      "login": "SeeminglyScience",
      "node_id": "MDQ6VXNlcjI0OTc3NTIz",
      "organizations_url": "https://api.github.com/users/SeeminglyScience/orgs",
      "received_events_url": "https://api.github.com/users/SeeminglyScience/received_events",
      "repos_url": "https://api.github.com/users/SeeminglyScience/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SeeminglyScience/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeeminglyScience/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SeeminglyScience"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "> Those make sense to me because without them, you just can't do that operation. Even as someone who uses them _very_ frequently, I have a hard time seeing the benefit in adding syntactic sugar for it directly in the language.\r\n\r\nThis is more than syntactic sugar.\r\n\r\nLet me share a short, non-contrived transcript that demonstrates exactly why I think the combination of the current set of bitwise operators and the `HasFlag` enumeration method is insufficient for general scripters when they need to work with flags.\r\n\r\n```none\r\n# Create a flag\r\nPS C:\\> $x = [System.Management.Automation.CommandTypes]'Cmdlet,Alias'\r\n\r\n# Get the full type name of the flag\r\nPS C:\\> $x.GetType().FullName\r\nSystem.Management.Automation.CommandTypes\r\n\r\n# Use the HasFlag method to check if multiple flags are set on the flag\r\nPS C:\\> $x.HasFlag('Cmdlet,Function')\r\nCannot convert argument \"flag\", with value: \"Cmdlet,Function\", for \"HasFlag\" to type \"System.Enum\": \"Cannot convert value \"Cmdlet,Function\" to type \"System.Enum\". Error: \"Late bound operations cannot be performed on types or methods for which ContainsGenericParameters is true.\"\"\r\nAt line:1 char:1\r\n+ $x.HasFlag('Cmdlet,Function')\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : NotSpecified: (:) [], MethodException\r\n+ FullyQualifiedErrorId : MethodArgumentConversionInvalidCastArgument\r\n\r\n# Since that didn't work, look at HasFlag to see why\r\nPS C:\\> $x.HasFlag\r\n\r\nOverloadDefinitions\r\n-------------------\r\nbool HasFlag(System.Enum flag)\r\n\r\n# Peachy, it isn't a generic method, so you can't just use string enumeration\r\n# values in PowerShell like you can in most other places. :|\r\n\r\n# Ok, let's just use the bitwise operators to check if our flags are set\r\nPS C:\\> $x -band 'Cmdlet,Function'\r\nCmdlet\r\n\r\n# Ok, I see that one of them is set. Now let's try that in an if statement\r\nPS C:\\> if ($x -band 'Cmdlet,Function') {'They are set'}\r\nThey are set\r\n\r\n# Well, that's not sufficient because that tells me they're set, but really only\r\n# one of them is set, so I really should check if the result is the set of\r\n# enumerations that I need to test\r\nPS C:\\> if ($x -band 'Cmdlet,Function' -eq 'Cmdlet,Function') {'They are set'}\r\nThey are set\r\n\r\n# Ok, so what's going on now? It says they are set, but they're clearly not.\r\n\r\n# Let's look more closely\r\nPS C:\\> $x -band 'Cmdlet,Function' -eq 'Cmdlet,Function'\r\nAlias\r\n\r\n# Huh?\r\n# This looks like I just identified the flags that are not set.\r\n\r\n# I suppose I should test to see if the flags are not set, since that's really\r\n# what I want to know\r\nPS C:\\> if ($x -band 'Cmdlet,Function' -ne 'Cmdlet,Function') {'They are not set'}\r\n\r\n# Looking more closely again\r\nPS C:\\> $x -band 'Cmdlet,Function' -ne 'Cmdlet,Function'\r\n0\r\n\r\n# Now it looks like none of the flags are set.\r\n\r\n# At some point in the commands above the scripter may realize that\r\n# their -eq and -ne operators appear to be returning non-boolean values,\r\n# and discover that they have a higher precedence than the bitwise\r\n# operators, realizing they need to use parentheses.\r\n\r\nPS C:\\> ($x -band 'Cmdlet,Function') -ne 'Cmdlet,Function'\r\nTrue\r\n\r\nPS C:\\> if (($x -band 'Cmdlet,Function') -ne 'Cmdlet,Function') {'They are not set'}\r\nThey are not set\r\n\r\nPS C:\\> ($x -band 'Cmdlet,Function') -eq 'Cmdlet,Function'\r\nFalse\r\n\r\nPS C:\\> if (($x -band 'Cmdlet,Function') -eq 'Cmdlet,Function') {'They are set'}\r\n\r\nPS C:\\>\r\n```\r\n\r\nThis is a realistic scenario that a scripter might go through when working with bitwise flags in PowerShell. We focus on so many things to make scripting easier, but these operators are definitely not the easiest to work with. It would be much easier and less error prone (especially since certain scenarios demonstrated above show how easy it could be to have conditional tests pass incorrectly) if we had:\r\n\r\n1. A conditional operator that returns true if a collection of bits are set in a flag.\r\n1. A conditional operator that returns true if a collection of bits are not set in a flag.\r\n\r\nThat's my opinion on this, but I fully respect if others disagree.\r\n",
    "created_at": "2019-10-25T15:07:58Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546392558",
    "id": 546392558,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjM5MjU1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546392558/reactions"
    },
    "updated_at": "2019-10-25T15:10:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546392558",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I should have phrased that differently - I definitely see the potential benefit, but it's going to be pretty rare for a scripter to require exhaustive checks of bit flags.  Personally I do not think the impact would be broad enough to warrant additional operators.\r\n\r\nSide note, `HasFlag` does work as long you explicitly type the string, e.g. `$flags.HasFlag([Reflection.BindingFlags]'Public, Instance')` (which is my preference to do in general as I find the string by itself kind of hard to follow).  Also I almost never use multiple flags on the RHS, this type of pattern seems to work well:\r\n\r\n```powershell\r\nif (($flags -band 'Instance') -ne 0 -and ($flags -band 'NonPublic') -ne 0)\r\n{\r\n}\r\n```",
    "created_at": "2019-10-25T15:48:30Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10888#issuecomment-546407883",
    "id": 546407883,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10888",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjQwNzg4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546407883/reactions"
    },
    "updated_at": "2019-10-25T15:48:30Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546407883",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/24977523?v=4",
      "events_url": "https://api.github.com/users/SeeminglyScience/events{/privacy}",
      "followers_url": "https://api.github.com/users/SeeminglyScience/followers",
      "following_url": "https://api.github.com/users/SeeminglyScience/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeeminglyScience/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SeeminglyScience",
      "id": 24977523,
      "login": "SeeminglyScience",
      "node_id": "MDQ6VXNlcjI0OTc3NTIz",
      "organizations_url": "https://api.github.com/users/SeeminglyScience/orgs",
      "received_events_url": "https://api.github.com/users/SeeminglyScience/received_events",
      "repos_url": "https://api.github.com/users/SeeminglyScience/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SeeminglyScience/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeeminglyScience/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SeeminglyScience"
    }
  }
]
