[
  {
    "author_association": "MEMBER",
    "body": "It has nothing to do with steppable pipeline, but only because the customized `out-default` is a script cmdlet. See the below example:\r\n```\r\nfunction Out-Default {\r\n    process {\r\n        [Console]::WriteLine($_.ToString())\r\n    }\r\n    end {\r\n        # non-op\r\n        $null = 1+1\r\n    }\r\n}\r\n\r\nPS:2> ll\r\nThe term 'll' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.\r\nPS:3> $?\r\nTrue\r\n```\r\nSo basically, when the end block of this `Out-Default` runs, it's a script block execution. For a script execution, if it runs successfully, `$?` gets set to `true`, which overrides the previous `false` value.\r\n\r\nThis only happens when you override `Out-Default` with a script implementation, due to the specialty of this command -- it's automatically added to the top level pipeline as the downstream command, which means its end block will always run as long as no terminating exception is thrown from the script/command that was typed in by the user.",
    "created_at": "2021-09-16T21:18:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15858#issuecomment-921251510",
    "id": 921251510,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15858",
    "node_id": "IC_kwDOAvT7bc426S62",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/921251510/reactions"
    },
    "updated_at": "2021-09-21T17:29:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/921251510",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "The Engine WG discussed this issue today. It may be possible to fix this issue by saving the `$?` value before executing `Out-Default` and restoring the value after execution -- we should do this only for the top level pipeline, so we would need to check if the current pipeline is the only one in the pipeline stack, and if that's the case, we assume the `out-default` command is automatically added by the host, and thus make it not affect `$?` value.\r\n\r\nHowever, it's not clear if this behavior change would cause unexpected issue elsewhere, especially to the other host implementations such as in PowerShell VSCode extension and PowerShell Jupyter sub-kernel. We are open to further discussion, but we'd need substantial extra validation before we go changing things.",
    "created_at": "2021-09-16T23:40:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15858#issuecomment-921335137",
    "id": 921335137,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15858",
    "node_id": "IC_kwDOAvT7bc426nVh",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/921335137/reactions"
    },
    "updated_at": "2021-09-16T23:40:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/921335137",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  }
]
