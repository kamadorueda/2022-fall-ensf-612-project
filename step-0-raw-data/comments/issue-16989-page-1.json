[
  {
    "author_association": "NONE",
    "body": "Silly question, how are you starting the new session. ?\r\nIf you run PowerShell from an app which was opened before the path changed (e.g. create a new tab in Windows terminal, run PowerShell from PowerShell this is expected behaviour because it it inherits that app's (unchanged) environment. If you run it from explorer it does pick up the change (at least in my experience having had to manually add paths to the environment on my work machine). \r\n ",
    "created_at": "2022-03-12T23:49:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1065986253",
    "id": 1065986253,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_iajN",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1065986253/reactions"
    },
    "updated_at": "2022-03-12T23:49:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1065986253",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "NONE",
    "body": "@jhoneill I am using Windows Server 2016 Datacenter VM (in an Azure Stack environment), not sure if that might have anything to do with this. I know to restart the PowerShell console after installing new software and adding new paths. Hence I reported saying that it worked in Windows PowerShell 5 (without restart, it wouldn't work on Windows PowerShell 5 either). As far as how I restart the app, I close the PowerShell Core app, then I right-click the PowerShell Core icon pinned to task bar and run as administrator.\r\n\r\n",
    "created_at": "2022-03-14T20:47:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1067271456",
    "id": 1067271456,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_nUUg",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1067271456/reactions"
    },
    "updated_at": "2022-03-14T20:53:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1067271456",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19400755?v=4",
      "events_url": "https://api.github.com/users/TheOnlyWei/events{/privacy}",
      "followers_url": "https://api.github.com/users/TheOnlyWei/followers",
      "following_url": "https://api.github.com/users/TheOnlyWei/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheOnlyWei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TheOnlyWei",
      "id": 19400755,
      "login": "TheOnlyWei",
      "node_id": "MDQ6VXNlcjE5NDAwNzU1",
      "organizations_url": "https://api.github.com/users/TheOnlyWei/orgs",
      "received_events_url": "https://api.github.com/users/TheOnlyWei/received_events",
      "repos_url": "https://api.github.com/users/TheOnlyWei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TheOnlyWei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheOnlyWei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TheOnlyWei"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> I close the PowerShell Core app, then I right-click the PowerShell Core icon pinned to task bar and run as administrator.\r\n\r\nIf you installed the app in another user profile and installer changed PATH env variable on user level you will do not see this in other user profiles.\r\nYou can look `$env:PATH` for diagnostic.",
    "created_at": "2022-03-15T05:28:02Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1067579176",
    "id": 1067579176,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_ofco",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1067579176/reactions"
    },
    "updated_at": "2022-03-15T05:28:02Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1067579176",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "@iSazonov I never changed profiles when installing. I always do everything from the administrator account. The `C:\\Program Files\\Go\\bin` is also in both the user and system paths as in the screenshot above (although I would only need it in system path, I added it to user path to see if the command would now be recognized, but it wasn't).\r\n\r\nI can reproduce this in windows server 2019 datacenter and windows server 2016 datacenter.\r\n\r\nAs mentioned in my original post. The commands worked in Windows PowerShell but does not in PowerShell Core 7.2.1. Here is a screenshot of the exact commands run in Windows PowerShell and PowerShell Core 7.2.1. The former worked and the latter didn't:\r\n![inaccurate-envpath](https://user-images.githubusercontent.com/19400755/158463828-1281ea2e-4a1a-461e-b13f-a89bc8472cb2.PNG)\r\n\r\nI did not specially configure Windows PowerShell in any way.\r\n\r\n",
    "created_at": "2022-03-15T20:05:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1068417588",
    "id": 1068417588,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_rsI0",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068417588/reactions"
    },
    "updated_at": "2022-03-15T20:15:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068417588",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19400755?v=4",
      "events_url": "https://api.github.com/users/TheOnlyWei/events{/privacy}",
      "followers_url": "https://api.github.com/users/TheOnlyWei/followers",
      "following_url": "https://api.github.com/users/TheOnlyWei/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheOnlyWei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TheOnlyWei",
      "id": 19400755,
      "login": "TheOnlyWei",
      "node_id": "MDQ6VXNlcjE5NDAwNzU1",
      "organizations_url": "https://api.github.com/users/TheOnlyWei/orgs",
      "received_events_url": "https://api.github.com/users/TheOnlyWei/received_events",
      "repos_url": "https://api.github.com/users/TheOnlyWei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TheOnlyWei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheOnlyWei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TheOnlyWei"
    }
  },
  {
    "author_association": "NONE",
    "body": "can you try running cmd.... \r\nIn cmd run `path`    \r\nthen run `pwsh -noprofile`    \r\nand `$env:path`    ",
    "created_at": "2022-03-16T00:07:50Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1068586748",
    "id": 1068586748,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_sVb8",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068586748/reactions"
    },
    "updated_at": "2022-03-16T00:07:50Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068586748",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "NONE",
    "body": "@jhoneill Attached output in screenshot below (this is from a windows server 2019 datacenter VM. The details in my main post above is from a windows server 2016 datacenter VM):\r\n![cmd-path-output](https://user-images.githubusercontent.com/19400755/158492586-aa595fd2-1c0b-45cc-b880-02d39fb6fe5d.JPG)\r\n",
    "created_at": "2022-03-16T00:15:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1068591661",
    "id": 1068591661,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_sWot",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068591661/reactions"
    },
    "updated_at": "2022-03-16T00:41:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068591661",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19400755?v=4",
      "events_url": "https://api.github.com/users/TheOnlyWei/events{/privacy}",
      "followers_url": "https://api.github.com/users/TheOnlyWei/followers",
      "following_url": "https://api.github.com/users/TheOnlyWei/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheOnlyWei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TheOnlyWei",
      "id": 19400755,
      "login": "TheOnlyWei",
      "node_id": "MDQ6VXNlcjE5NDAwNzU1",
      "organizations_url": "https://api.github.com/users/TheOnlyWei/orgs",
      "received_events_url": "https://api.github.com/users/TheOnlyWei/received_events",
      "repos_url": "https://api.github.com/users/TheOnlyWei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TheOnlyWei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheOnlyWei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TheOnlyWei"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Does reboot resolve the issue?",
    "created_at": "2022-03-16T04:06:34Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1068709382",
    "id": 1068709382,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_szYG",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068709382/reactions"
    },
    "updated_at": "2022-03-16T04:06:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068709382",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "@TheOnlyWei  So that screen shot shows when you start pwsh with -noprofile it is getting    \r\n`<pwsh path> + <Existing path>`    \r\nAnd this includes C:\\users\\administrator\\go\\bin   (last item)  and c:\\program files \\go\\bin  (end of line 4)\r\nIf you try running go there should work. \r\n\r\nThe next thing to do is run  `pwsh` without `-noprofile` and see if the path is the same. I suspect there is something in a profile which is changing the path.\r\n\r\n\r\n\r\n",
    "created_at": "2022-03-16T08:29:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1068861350",
    "id": 1068861350,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_tYem",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068861350/reactions"
    },
    "updated_at": "2022-03-16T08:29:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1068861350",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "NONE",
    "body": "The same issue happens with uninstalling a software. When Golang is uninstalled, it should remove the environment variables. But the administrator mode of PowerShell Core still has the old Golang environment paths. \r\nIt also seems depending on how you open PowerShell Core, it gives you different `$env:path` as well. In the screenshot below, the top window is opened by just left-clicking the PowerShell Core icon in the task bar, and the bottom window is opened by right-clicking the PowerShell Core icon in the task bar and then clicking \"Run as Administrator\". Note that I am on the local administrator account. Both windows have administrator privileges.\r\n\r\n![powershellcore-window-comparison](https://user-images.githubusercontent.com/19400755/158667048-fe42181c-5d2c-46ce-b9e0-beb85971f92e.PNG)\r\n\r\n@iSazonov Restarting seems to fix the issue.\r\n@jhoneill Running pwsh without -noprofile gives same output.",
    "created_at": "2022-03-16T18:58:37Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16989#issuecomment-1069487272",
    "id": 1069487272,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16989",
    "node_id": "IC_kwDOAvT7bc4_vxSo",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1069487272/reactions"
    },
    "updated_at": "2022-03-16T21:13:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1069487272",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19400755?v=4",
      "events_url": "https://api.github.com/users/TheOnlyWei/events{/privacy}",
      "followers_url": "https://api.github.com/users/TheOnlyWei/followers",
      "following_url": "https://api.github.com/users/TheOnlyWei/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheOnlyWei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TheOnlyWei",
      "id": 19400755,
      "login": "TheOnlyWei",
      "node_id": "MDQ6VXNlcjE5NDAwNzU1",
      "organizations_url": "https://api.github.com/users/TheOnlyWei/orgs",
      "received_events_url": "https://api.github.com/users/TheOnlyWei/received_events",
      "repos_url": "https://api.github.com/users/TheOnlyWei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TheOnlyWei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheOnlyWei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TheOnlyWei"
    }
  }
]
