[
  {
    "author_association": "MEMBER",
    "body": "> Question: can we keep simple cherry-pick workflow, but teach it to map root folder into src\\monad?\n\nThis is actually where Git subtree shines. I encourage you try [it out](https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt) and read up on [subtree merging](https://git-scm.com/book/en/v1/Git-Tools-Subtree-Merging) to see if it's what you all would like.\n\nEssentially, `git subtree` let's you map one repository into another as a simple folder. You maintain one repo. You can `git subtree split -P src/monad` to obtain patches in that folder as if it were the root; yet the patches themselves can originally be committed to the \"superproject\" (in quotes because it is now one repo). You still _should_ create separate commits for changes to the subtree and other trees, but this is the case regardless.\n\nThis also merges the history together, which is a lot more difficult, as we need to get an all-clear from legal to do this. As of now, the superproject only has code that the PSL team has written since last summer, and so is not subject to any potential PowerShell \"patents.\" If we merge the history, this will no longer be true.\n\n> We can achieve the desired result with a simple merge of two repos:\n\nI wouldn't encourage this, as you lose the meta-information that using the `git subtree` script gives you. However, the end result is similar; we would just have to perform more complex subtree (not the script) merges later.\n",
    "created_at": "2016-03-12T00:47:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-195618212",
    "id": 195618212,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NTYxODIxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/195618212/reactions"
    },
    "updated_at": "2016-03-12T00:47:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/195618212",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Thank you, I will play around with subtrees, they may solve the problem for us.\n\n@SteveL-MSFT for LCA stuff, is Andy's concern about merge a problem?\n",
    "created_at": "2016-03-12T00:56:29Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-195619725",
    "id": 195619725,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NTYxOTcyNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/195619725/reactions"
    },
    "updated_at": "2016-03-12T00:56:29Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/195619725",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/816680?v=4",
      "events_url": "https://api.github.com/users/vors/events{/privacy}",
      "followers_url": "https://api.github.com/users/vors/followers",
      "following_url": "https://api.github.com/users/vors/following{/other_user}",
      "gists_url": "https://api.github.com/users/vors/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vors",
      "id": 816680,
      "login": "vors",
      "node_id": "MDQ6VXNlcjgxNjY4MA==",
      "organizations_url": "https://api.github.com/users/vors/orgs",
      "received_events_url": "https://api.github.com/users/vors/received_events",
      "repos_url": "https://api.github.com/users/vors/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vors/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vors"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I've created an example repository with every submodule replaced with subtree imports. If you want to play with it, it is [PowerShell/PowerShell-Subtree](https://github.com/PowerShell/PowerShell-Subtree).\n\nThe Pester, GoogleTest, and windows-build were squashed upon import. The OMI and provider submodules haven't been imported (unneeded for testing so far).\n\nDoing this for real would require more planning. The psl-monad code would need to be vetted and squashed upon import. OMI and the provider should probably not be included. I would hope that windows-build can be eliminated.\n",
    "created_at": "2016-03-16T19:02:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-197491925",
    "id": 197491925,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzQ5MTkyNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197491925/reactions"
    },
    "updated_at": "2016-03-16T19:06:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197491925",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Thanks for putting it together.\nI played a little bit: tried to update `src\\monad` subtree.\n\nWhat's the good way to put changes from subtree into the original repo (psl-monad)?\n\nThe workflow that I have in mind:\n- We replace submodule by subtree (let's do psl-monad first, the rest is not mandatory).\n- PS team switch to GitHub\n- We still want to periodically update psl-monad from `source-depot` and integrate this changes to subtree (with `subtree pull`)\n- Do we even need subtree -> psl-monad way? There is not much difference, when you trying to integrate changes back to sd.\n",
    "created_at": "2016-03-17T01:55:50Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-197647746",
    "id": 197647746,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzY0Nzc0Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197647746/reactions"
    },
    "updated_at": "2016-03-17T01:55:50Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197647746",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/816680?v=4",
      "events_url": "https://api.github.com/users/vors/events{/privacy}",
      "followers_url": "https://api.github.com/users/vors/followers",
      "following_url": "https://api.github.com/users/vors/following{/other_user}",
      "gists_url": "https://api.github.com/users/vors/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vors",
      "id": 816680,
      "login": "vors",
      "node_id": "MDQ6VXNlcjgxNjY4MA==",
      "organizations_url": "https://api.github.com/users/vors/orgs",
      "received_events_url": "https://api.github.com/users/vors/received_events",
      "repos_url": "https://api.github.com/users/vors/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vors/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vors"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Also `rebase` after subtree seems like a PITA http://stackoverflow.com/questions/12858199/how-to-rebase-after-git-subtree-add\n",
    "created_at": "2016-03-17T01:57:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-197648928",
    "id": 197648928,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzY0ODkyOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197648928/reactions"
    },
    "updated_at": "2016-03-17T01:57:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197648928",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/816680?v=4",
      "events_url": "https://api.github.com/users/vors/events{/privacy}",
      "followers_url": "https://api.github.com/users/vors/followers",
      "following_url": "https://api.github.com/users/vors/following{/other_user}",
      "gists_url": "https://api.github.com/users/vors/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vors",
      "id": 816680,
      "login": "vors",
      "node_id": "MDQ6VXNlcjgxNjY4MA==",
      "organizations_url": "https://api.github.com/users/vors/orgs",
      "received_events_url": "https://api.github.com/users/vors/received_events",
      "repos_url": "https://api.github.com/users/vors/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vors/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vors"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Nah, it's really not too bad. You probably won't _ever_ want to rebase the `add` merge commit itself (though you can with `git rebase -i -p`, I've used it to undo them no problem). We likely won't have any subtree commits that need rebasing (which is the problematic part), since we'll squash the initial import. Commits that are descendents of the subtree merge commit can be rebased no problem; they're regular \"superproject\" repository commits.\n",
    "created_at": "2016-03-17T06:55:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-197732520",
    "id": 197732520,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzczMjUyMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197732520/reactions"
    },
    "updated_at": "2016-03-17T06:55:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/197732520",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@lzybkr suggested something better then go thru the inventarisation:\n- pull code that we use for building into the appropriate assemblies subfolders\n- have a mapping script to do the integration (i.e. merge new changes from `source-depot` branch of `psl-monad`)\n- pull more code if we need it in future\n\nIf we do this, I think we skip the subtree step.\n",
    "created_at": "2016-03-18T01:22:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-198152265",
    "id": 198152265,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODE1MjI2NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/198152265/reactions"
    },
    "updated_at": "2016-03-18T01:22:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/198152265",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/816680?v=4",
      "events_url": "https://api.github.com/users/vors/events{/privacy}",
      "followers_url": "https://api.github.com/users/vors/followers",
      "following_url": "https://api.github.com/users/vors/following{/other_user}",
      "gists_url": "https://api.github.com/users/vors/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vors",
      "id": 816680,
      "login": "vors",
      "node_id": "MDQ6VXNlcjgxNjY4MA==",
      "organizations_url": "https://api.github.com/users/vors/orgs",
      "received_events_url": "https://api.github.com/users/vors/received_events",
      "repos_url": "https://api.github.com/users/vors/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vors/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vors"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Yes, that's a viable option. I like the immediate move to an organized tree.\n",
    "created_at": "2016-03-18T01:57:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-198162371",
    "id": 198162371,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODE2MjM3MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/198162371/reactions"
    },
    "updated_at": "2016-03-18T01:57:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/198162371",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I prepared a preview under\n\nhttps://github.com/PowerShell/PowerShell-Subtree/tree/new-master\nhttps://github.com/PowerShell/PowerShell-Subtree/tree/new-source-depot\nhttps://github.com/PowerShell/PowerShell-Subtree/tree/new-server2016\n\nPlease, take a look\n@SteveL-MSFT @FawcettJohnW @andschwa @lzybkr \n",
    "created_at": "2016-03-23T00:03:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/656#issuecomment-200087207",
    "id": 200087207,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/656",
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDA4NzIwNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/200087207/reactions"
    },
    "updated_at": "2016-03-23T01:17:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/200087207",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/816680?v=4",
      "events_url": "https://api.github.com/users/vors/events{/privacy}",
      "followers_url": "https://api.github.com/users/vors/followers",
      "following_url": "https://api.github.com/users/vors/following{/other_user}",
      "gists_url": "https://api.github.com/users/vors/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vors",
      "id": 816680,
      "login": "vors",
      "node_id": "MDQ6VXNlcjgxNjY4MA==",
      "organizations_url": "https://api.github.com/users/vors/orgs",
      "received_events_url": "https://api.github.com/users/vors/received_events",
      "repos_url": "https://api.github.com/users/vors/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vors/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vors"
    }
  }
]
