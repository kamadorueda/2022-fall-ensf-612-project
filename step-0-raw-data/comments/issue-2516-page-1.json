[
  {
    "author_association": "COLLABORATOR",
    "body": "@Sarafian Thanks for feature request.\n\nI think may be better define new _global_ const as:\n\n``` powershell\n$isRunAsAdministrator = ([Security.Principal.WindowsPrincipal] [Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole] \"Administrator\")\n```\n\n(Today we already have similar variables: $isWindows, $PID, $HOME...)\n",
    "created_at": "2016-10-21T12:41:47Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255368627",
    "id": 255368627,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTM2ODYyNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255368627/reactions"
    },
    "updated_at": "2016-10-21T12:41:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255368627",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "@iSazonov  those global consts are nice and yes the `$isRunAsAdministrator` would be a very useful one. But I still think you need to consistency in the experience that Powershell offers with the `#Requires` meta language. I find them great but I do not like how they are identified in the script's body. \n\nI would prefer them to get executed like any other command. That means even as part of a script block anywhere the script block executes.\n",
    "created_at": "2016-10-22T18:35:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255545846",
    "id": 255545846,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTU0NTg0Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255545846/reactions"
    },
    "updated_at": "2016-10-22T18:35:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255545846",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/743467?v=4",
      "events_url": "https://api.github.com/users/Sarafian/events{/privacy}",
      "followers_url": "https://api.github.com/users/Sarafian/followers",
      "following_url": "https://api.github.com/users/Sarafian/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarafian/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Sarafian",
      "id": 743467,
      "login": "Sarafian",
      "node_id": "MDQ6VXNlcjc0MzQ2Nw==",
      "organizations_url": "https://api.github.com/users/Sarafian/orgs",
      "received_events_url": "https://api.github.com/users/Sarafian/received_events",
      "repos_url": "https://api.github.com/users/Sarafian/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Sarafian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarafian/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Sarafian"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "This proposal is incompatible with the current design of `#requires` - processing of `#requires` happens at parse time before any of the script executes.\n\nIf we changed this behavior, I can imagine scripts doing weird things trying to execute in ways they weren't designed for.\n",
    "created_at": "2016-10-24T15:20:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255771929",
    "id": 255771929,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTc3MTkyOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255771929/reactions"
    },
    "updated_at": "2016-10-24T15:20:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255771929",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "NONE",
    "body": "@lzybkr I was expecting something like that. But still I have a question.\n\nIf I execute a script block, shouldn't the parser do the same thing at the beginning? I would expect that a script block and a script file are loaded somehow similarly into the memory. Scripts are verified for signing but once that is ok, parsing starts. Shouldn't that be applies for the script block, especially when executed remotely? If that was possible, a `#requires` in the script or script block beginning should do the trick. \nCurrently the parser is not even checking for only the biggining. Anywhere in the body of the script, the `#requires` gets captured\n",
    "created_at": "2016-10-24T15:51:29Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255781034",
    "id": 255781034,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTc4MTAzNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255781034/reactions"
    },
    "updated_at": "2016-10-24T15:51:29Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255781034",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/743467?v=4",
      "events_url": "https://api.github.com/users/Sarafian/events{/privacy}",
      "followers_url": "https://api.github.com/users/Sarafian/followers",
      "following_url": "https://api.github.com/users/Sarafian/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarafian/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Sarafian",
      "id": 743467,
      "login": "Sarafian",
      "node_id": "MDQ6VXNlcjc0MzQ2Nw==",
      "organizations_url": "https://api.github.com/users/Sarafian/orgs",
      "received_events_url": "https://api.github.com/users/Sarafian/received_events",
      "repos_url": "https://api.github.com/users/Sarafian/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Sarafian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarafian/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Sarafian"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Most script blocks come from files and `#requires` is enforced at the file level. Checking at the script block level would be expensive (e.g. it would slow down `foreach-object` or `where-object` unnecessarily.\n\nThat said, it could be useful remotely, but I would not encourage the use of `#requires` in that way if we supported it for remoting, instead I would encourage the use of `Invoke-Command -FilePath`.\n",
    "created_at": "2016-10-24T17:51:46Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255814513",
    "id": 255814513,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTgxNDUxMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255814513/reactions"
    },
    "updated_at": "2016-10-24T17:51:46Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255814513",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "NONE",
    "body": "Didn't know `Invoke-Command -FilePath was possible. Hadn't noticed. Thanks for the tip.\nI understand the reasoning. Is there anyway to force PowerShell to verify and throw the same error message without code duplication? That could be a helpful alternative always mapping to the same user experience\n",
    "created_at": "2016-10-24T19:57:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255847852",
    "id": 255847852,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTg0Nzg1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255847852/reactions"
    },
    "updated_at": "2016-10-24T19:57:24Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255847852",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/743467?v=4",
      "events_url": "https://api.github.com/users/Sarafian/events{/privacy}",
      "followers_url": "https://api.github.com/users/Sarafian/followers",
      "following_url": "https://api.github.com/users/Sarafian/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarafian/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Sarafian",
      "id": 743467,
      "login": "Sarafian",
      "node_id": "MDQ6VXNlcjc0MzQ2Nw==",
      "organizations_url": "https://api.github.com/users/Sarafian/orgs",
      "received_events_url": "https://api.github.com/users/Sarafian/received_events",
      "repos_url": "https://api.github.com/users/Sarafian/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Sarafian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarafian/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Sarafian"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I wouldn't be surprised if `Invoke-Command -FilePath` did not report any errors from `#requires` today (I didn't test it), but in my opinion, that's the scenario that should enable what you're asking for.\n\nThe api to validate script requirements is internal and expects a file, so duplicating that experience would require (pun not intended) a new api.\n",
    "created_at": "2016-10-24T20:31:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255857149",
    "id": 255857149,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTg1NzE0OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255857149/reactions"
    },
    "updated_at": "2016-10-24T20:31:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255857149",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "NONE",
    "body": "Ok. From my perspectieve the subject is exhausted. I have not other arguments to support my idea :). Thank you all. \n",
    "created_at": "2016-10-24T21:16:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2516#issuecomment-255868660",
    "id": 255868660,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2516",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTg2ODY2MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255868660/reactions"
    },
    "updated_at": "2016-10-24T21:16:49Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/255868660",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/743467?v=4",
      "events_url": "https://api.github.com/users/Sarafian/events{/privacy}",
      "followers_url": "https://api.github.com/users/Sarafian/followers",
      "following_url": "https://api.github.com/users/Sarafian/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sarafian/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Sarafian",
      "id": 743467,
      "login": "Sarafian",
      "node_id": "MDQ6VXNlcjc0MzQ2Nw==",
      "organizations_url": "https://api.github.com/users/Sarafian/orgs",
      "received_events_url": "https://api.github.com/users/Sarafian/received_events",
      "repos_url": "https://api.github.com/users/Sarafian/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Sarafian/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sarafian/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Sarafian"
    }
  }
]
