[
  {
    "author_association": "NONE",
    "body": "Windows 11 + PS7.2.4 - no errors\r\n\r\ndoes this work as a workaround?\r\n`pwsh -NoProfile -File t.ps1 (-1)`",
    "created_at": "2022-06-11T16:27:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1152959913",
    "id": 1152959913,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5EuMWp",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1152959913/reactions"
    },
    "updated_at": "2022-06-11T16:27:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1152959913",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/17237559?v=4",
      "events_url": "https://api.github.com/users/scriptingstudio/events{/privacy}",
      "followers_url": "https://api.github.com/users/scriptingstudio/followers",
      "following_url": "https://api.github.com/users/scriptingstudio/following{/other_user}",
      "gists_url": "https://api.github.com/users/scriptingstudio/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/scriptingstudio",
      "id": 17237559,
      "login": "scriptingstudio",
      "node_id": "MDQ6VXNlcjE3MjM3NTU5",
      "organizations_url": "https://api.github.com/users/scriptingstudio/orgs",
      "received_events_url": "https://api.github.com/users/scriptingstudio/received_events",
      "repos_url": "https://api.github.com/users/scriptingstudio/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/scriptingstudio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scriptingstudio/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/scriptingstudio"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "That's surprising, because the error is related to PowerShell's parameter parsing, which isn't OS-specific. I don't have Windows 11, but I see the error in  WinPS, 7.2.4, and  v7.3.0-preview.4, both on Windows 10 and macOS 12.4.\r\n\r\nYour attempted workaround is syntactically only an option from _inside_ PowerShell, where there's rarely a need to call the CLI (if you needed to, you would use `pwsh -NoProfile { ./t.ps1 -1 }`, which avoids the problem); even there, however, it isn't effective, because the `(1)` gets translated to a _string_ with value `1`, given that a call to an _external program_ is being made.\r\n\r\n",
    "created_at": "2022-06-11T16:45:36Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1152962151",
    "id": 1152962151,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5EuM5n",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1152962151/reactions"
    },
    "updated_at": "2022-06-11T16:45:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1152962151",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "Tested it on another Windows 11 box - no errors.\r\ntested on Windows Server 2016 - no errors.",
    "created_at": "2022-06-11T16:59:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1152964592",
    "id": 1152964592,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5EuNfw",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1152964592/reactions"
    },
    "updated_at": "2022-06-11T16:59:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1152964592",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/17237559?v=4",
      "events_url": "https://api.github.com/users/scriptingstudio/events{/privacy}",
      "followers_url": "https://api.github.com/users/scriptingstudio/followers",
      "following_url": "https://api.github.com/users/scriptingstudio/following{/other_user}",
      "gists_url": "https://api.github.com/users/scriptingstudio/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/scriptingstudio",
      "id": 17237559,
      "login": "scriptingstudio",
      "node_id": "MDQ6VXNlcjE3MjM3NTU5",
      "organizations_url": "https://api.github.com/users/scriptingstudio/orgs",
      "received_events_url": "https://api.github.com/users/scriptingstudio/received_events",
      "repos_url": "https://api.github.com/users/scriptingstudio/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/scriptingstudio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scriptingstudio/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/scriptingstudio"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@scriptingstudio, just to narrow things down and rule out that you're not accidentally testing something different from the repro in the OP:\r\n\r\nIn a shell started with  `powershell.exe -NoProfile`, i.e., _Windows PowerShell_, I see the error too - do you not?\r\n(The specific WinPS version is v5.1.19041.1682, though the specific version is unlikely to matter, given that Windows PowerShell is unlikely to have received a fix.)\r\n\r\nI see the error on Windows 10, macOS 12.4, and Ubuntu 18.04 - again suggesting that the OS is incidental.\r\n\r\n\r\n",
    "created_at": "2022-06-13T01:50:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1153374310",
    "id": 1153374310,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5Evxhm",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1153374310/reactions"
    },
    "updated_at": "2022-06-13T01:50:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1153374310",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "@mklement0  I got it, could repro. I think it is `pwsh`/`powershell` parameter binder problem (or something like that). It considers an argument with `-` as a parameter ",
    "created_at": "2022-06-13T06:20:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1153518142",
    "id": 1153518142,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5EwUo-",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1153518142/reactions"
    },
    "updated_at": "2022-06-13T06:20:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1153518142",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/17237559?v=4",
      "events_url": "https://api.github.com/users/scriptingstudio/events{/privacy}",
      "followers_url": "https://api.github.com/users/scriptingstudio/followers",
      "following_url": "https://api.github.com/users/scriptingstudio/following{/other_user}",
      "gists_url": "https://api.github.com/users/scriptingstudio/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/scriptingstudio",
      "id": 17237559,
      "login": "scriptingstudio",
      "node_id": "MDQ6VXNlcjE3MjM3NTU5",
      "organizations_url": "https://api.github.com/users/scriptingstudio/orgs",
      "received_events_url": "https://api.github.com/users/scriptingstudio/received_events",
      "repos_url": "https://api.github.com/users/scriptingstudio/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/scriptingstudio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scriptingstudio/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/scriptingstudio"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Unfortunately, it appears to be `by design` based on this code https://github.com/PowerShell/PowerShell/blob/master/src/Microsoft.PowerShell.ConsoleHost/host/msh/CommandLineParameterParser.cs#L1352-L1383.  It's doing a simple parameter binding which is a subset of the actual PS parameter binder.\r\n\r\nI'd be worried what scenarios would break if we try to change this.\n\n<blockquote><img src=\"https://repository-images.githubusercontent.com/49609581/aad0ad80-cdec-11ea-8248-a37bc0571bfd\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/PowerShell/PowerShell\">PowerShell/CommandLineParameterParser.cs at master Â· PowerShell/PowerShell</a></strong></div><div>PowerShell for every system! Contribute to PowerShell/PowerShell development by creating an account on GitHub.</div></blockquote>",
    "created_at": "2022-07-25T17:02:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1194357857",
    "id": 1194357857,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5HMHRh",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1194357857/reactions"
    },
    "updated_at": "2022-07-25T17:02:29Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1194357857",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@SteveL-MSFT, calling an _implementation shortcut_ that is inconsistent with how parameter names are normally parsed _by design_  strikes me as overly generous (unavoidable differences between `-File`-based and in-session / `-Command` notwithstanding).\r\n\r\nAs for what could break if something like `-1` were no longer considered a parameter _name_ but a _positional argument_ (which is how it's interpreted in-session):\r\n\r\n* Note that _in-session_ / with `-Command`, a script's parameter that looks like a negative number, such as `-1` (`$1`) cannot be bound by a _named_ argument.\r\n\r\n   * That is, such a parameter can only be bound _positionally_, except via splatting - an inconsistency in its own right; see #17767\r\n\r\n```powershell\r\n# !! BREAKS: \"-1\" is interpreted as a positional argument:\r\n# !!   -> A positional parameter cannot be found that accepts argument 'foo'\r\n & { [CmdletBinding()] param([string]$1) \"[$1]\" } -1 foo\r\n```\r\n\r\n* However, because of the bug at hand, this _does_ work - but arguably shouldn't - when called via the CLI's `-File` parameter.\r\n\r\n```powershell\r\n'[CmdletBinding()] param([string]$1) \"[$1]\"' > t.ps1\r\n\r\n# -> 'really?'\r\npwsh -nop -file t.ps1 -1 really?\r\n```\r\n\r\nIn other words: the following code could break:\r\n\r\n* calls to scripts declared with ill-advised parameter names such as `-1` (parameter variable `$1`)\r\n* _if_ they are called with a _named_ argument binding such a parameter _but only ever via the CLI's `-File` parameter_, given that this otherwise doesn't work.\r\n\r\nPerhaps needless to say, the existence of such scripts / calls seems very unlikely.\r\n\r\nConversely, not being able to pass a negative number via `-File` is an unnecessary restriction, especially given that the functionality that implicitly prevents it shouldn't exist to begin with: if `-1 foo` doesn't work in a PowerShell session, neither should it via `-File`\r\n\r\n\r\n\r\n\r\n",
    "created_at": "2022-07-25T19:51:47Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1194549187",
    "id": 1194549187,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5HM1_D",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1194549187/reactions"
    },
    "updated_at": "2022-07-25T19:51:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1194549187",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as by-design and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
    "created_at": "2022-07-26T21:01:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17519#issuecomment-1195977050",
    "id": 1195977050,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17519",
    "node_id": "IC_kwDOAvT7bc5HSSla",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1195977050/reactions"
    },
    "updated_at": "2022-07-26T21:01:15Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1195977050",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
