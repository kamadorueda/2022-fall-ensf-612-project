[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for writing this up; a couple of suggestions:\r\n\r\n> if there is an `-Encoding` parameter, use that\r\n\r\nTo be consistent with current behavior, `-Encoding` should only be respected _if there's no BOM_. \r\nFor instance, currently, if you have a UTF-8-with-BOM file and try to read it with `Get-Content -Encoding utf32`, the `-Encoding` argument is ignored.\r\n\r\n> not sure if viable, but nice to have: if there are decode errors, rewind stream & assume system default ANSI encoding as fallback (might already happen, I haven't checked)\r\n\r\nGiven that we don't do that currently, I don't think we need to worry about this case (and if we did, ANSI would be an awkward, platform-specific fallback; that PowerShell Core still doesn't support `-Encoding Ansi` (which in _Windows PowerShell_ is `-Encoding Default`, and the default for `Get-Content` / `Set-Content` as well as source code) is a separate story - see #6562).\r\n\r\n`Get-Content` simply uses `�` (REPLACEMENT CHARACTER, [`U+FFFD`](http://www.fileformat.info/info/unicode/char/fffd)) to replace invalid-as-UTF-8 byte sequences (which would happen with a by-definition BOM-less ANSI-encoded file with non-ASCII chars.), and I don't think doing something special for XML files is called for (as you point out, the proposed accommodation is motivated by pragmatism, not conceptual purity).\r\n\r\nSeparately, however, we may want to think about generically introducing a switch such as `-Strict` on `Get-Content` and `Set-Content` (possibly others, but for comprehensive coverage you'd either need a for-file-processing-cmdlets-only common parameter or a preference variable, which comes with dynamic-scoping challenges) that _errors out_ on decoding/encoding errors.\r\n\r\n\r\n",
    "created_at": "2020-12-29T14:17:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-752091663",
    "id": 752091663,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjA5MTY2Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752091663/reactions"
    },
    "updated_at": "2020-12-29T14:17:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752091663",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "@mklement0 Amended the checklist accordingly.\r\n\r\nThe \"ANSI fallback\" is certainly up for debate. I've had my share of situations where trying UTF-8 and falling back to Windows-1252 was a successful strategy, but I admit this can hardly be generalized.\r\n\r\nWhen `�` appears in the output, it pretty much means that the file is a single-byte encoding wrongly interpreted as UTF-8, and optimistically falling back to the system default encoding has a good chance of producing the right result, pragmatically speaking.\r\n\r\nThe bigger question is if baking such a hidden assumption into the standard behavior of `Get-Content` is a good idea in the first place, or if leaving errors in the output (or throwing exceptions) and letting the user explicitly nail it down is better.\r\n\r\nPersonally, if `Get-Content` silently fixes it for me, I'm happier than when it silently breaks it for me. And when I did not bother to specify an `-Encoding`, then one wrong character is as good as another. Falling back to the wrong single-byte encoding probably does not wreak more havoc than not falling back at all.",
    "created_at": "2020-12-29T16:04:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-752136933",
    "id": 752136933,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjEzNjkzMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752136933/reactions"
    },
    "updated_at": "2020-12-29T16:07:21Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752136933",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/28300?v=4",
      "events_url": "https://api.github.com/users/Tomalak/events{/privacy}",
      "followers_url": "https://api.github.com/users/Tomalak/followers",
      "following_url": "https://api.github.com/users/Tomalak/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tomalak/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Tomalak",
      "id": 28300,
      "login": "Tomalak",
      "node_id": "MDQ6VXNlcjI4MzAw",
      "organizations_url": "https://api.github.com/users/Tomalak/orgs",
      "received_events_url": "https://api.github.com/users/Tomalak/received_events",
      "repos_url": "https://api.github.com/users/Tomalak/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Tomalak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tomalak/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Tomalak"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Interesting questions, @Tomalak, but if we wanted to make changes in this area, they wouldn't be specific to the XML accommodation, so it would again call for a _new_ proposal - assuming you feel strongly enough about this.\r\n\r\nA few more thoughts, but we should probably continue any discussion in a new proposal, should one be created:\r\n\r\n* A simple test for the presence of `�` when using the default encoding is ``Select-String -Quiet \"`u{fffd}\"  file.txt``\r\n\r\n* As stated, having an opt-in to explicitly _fail_ on encountering decoding errors might be helpful - not least because a properly decoded file could contain `�` as an actual character, in which case the `Select-String` test would yield a false positive.\r\n\r\n* While falling back to ANSI on Windows is probably helpful more often than not, such magic can also lead to subtle failures, such as when a Windows-1251-encoded file is read on a system where Windows-1252 is the active ANSI code page. By contrast, `�` has the advantage of being a single, visually conspicuous indicator that something went wrong.\r\n\r\n",
    "created_at": "2020-12-29T21:20:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-752245257",
    "id": 752245257,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjI0NTI1Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752245257/reactions"
    },
    "updated_at": "2020-12-29T21:20:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752245257",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "@mklement0 Yeah, I don't feel strongly enough about this to make yet another proposal out of it. It's a messy topic and there is no way my assumptions aren't biased. The more complex this gets, the higher the chance to introduce unpredictable behavior or new bugs.",
    "created_at": "2020-12-30T08:28:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-752373117",
    "id": 752373117,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjM3MzExNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752373117/reactions"
    },
    "updated_at": "2020-12-30T08:28:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/752373117",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/28300?v=4",
      "events_url": "https://api.github.com/users/Tomalak/events{/privacy}",
      "followers_url": "https://api.github.com/users/Tomalak/followers",
      "following_url": "https://api.github.com/users/Tomalak/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tomalak/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Tomalak",
      "id": 28300,
      "login": "Tomalak",
      "node_id": "MDQ6VXNlcjI4MzAw",
      "organizations_url": "https://api.github.com/users/Tomalak/orgs",
      "received_events_url": "https://api.github.com/users/Tomalak/received_events",
      "repos_url": "https://api.github.com/users/Tomalak/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Tomalak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tomalak/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Tomalak"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "The Cmdlet Working Group recognizes the challenge in this issue. However, after deliberation and testing, feel that the best course of action is a change to the `[xml]` type accelerator to introduce a new `Load()` method, which could be used to handle the XML document type. No changes would be made to `Get-Content` and this would not affect `[xml.document]`, only the `[xml]` type accelerator.",
    "created_at": "2022-01-20T18:43:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-1017809370",
    "id": 1017809370,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "IC_kwDOAvT7bc48qona",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1017809370/reactions"
    },
    "updated_at": "2022-01-20T18:43:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1017809370",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12089920?v=4",
      "events_url": "https://api.github.com/users/jdhitsolutions/events{/privacy}",
      "followers_url": "https://api.github.com/users/jdhitsolutions/followers",
      "following_url": "https://api.github.com/users/jdhitsolutions/following{/other_user}",
      "gists_url": "https://api.github.com/users/jdhitsolutions/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jdhitsolutions",
      "id": 12089920,
      "login": "jdhitsolutions",
      "node_id": "MDQ6VXNlcjEyMDg5OTIw",
      "organizations_url": "https://api.github.com/users/jdhitsolutions/orgs",
      "received_events_url": "https://api.github.com/users/jdhitsolutions/received_events",
      "repos_url": "https://api.github.com/users/jdhitsolutions/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jdhitsolutions/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jdhitsolutions/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jdhitsolutions"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@jdhitsolutions Should we open new issue for `[xml]` type accelerator with more clear specifications what we should add?",
    "created_at": "2022-01-21T03:41:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-1018139385",
    "id": 1018139385,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "IC_kwDOAvT7bc48r5L5",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1018139385/reactions"
    },
    "updated_at": "2022-01-21T03:41:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1018139385",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "A type accelerator is merely a short type-name alias for convenience; `[xml]` is short for `[System.Xml.XmlDocument]` - in other words: the two are - and should remain - equivalent.\r\n\r\nSaid type already has a `.Load()` method, and _avoiding its awkwardness in PowerShell_:\r\n* `$x = [xml]::new(); $x.Load((Convert-Path 'file.xml'))` (note the need to resolve to a _full path_) \r\n*  vs. making the existing (PowerShell-idiomatic and convenient) widespread practice, `[xml] (Get-Content file.xml)`, _robust_ \r\n\r\nis the motivation for this feature request.",
    "created_at": "2022-01-23T21:19:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-1019569735",
    "id": 1019569735,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "IC_kwDOAvT7bc48xWZH",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1019569735/reactions"
    },
    "updated_at": "2022-01-23T21:19:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1019569735",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "From the WG conclusion it is not clear what is new suggestion to resolve the issue.",
    "created_at": "2022-01-24T03:49:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14508#issuecomment-1019688897",
    "id": 1019688897,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14508",
    "node_id": "IC_kwDOAvT7bc48xzfB",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1019688897/reactions"
    },
    "updated_at": "2022-01-24T03:49:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1019688897",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  }
]
