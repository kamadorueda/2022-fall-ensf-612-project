[
  {
    "author_association": "MEMBER",
    "body": "From what I can tell, the current implementation is simply relying on .NET which calls the [native `clock_gettime()` function](https://github.com/dotnet/runtime/blob/c4341d45acca3ea662cd8d71e7d71094450dd045/src/coreclr/gc/unix/gcenv.unix.cpp#L1474-L1512).  However, it may request `CLOCK_MONOTONIC` which gives the time since the system booted, but does NOT include any time when the system was suspended.  It seems that it should be `CLOCK_BOOTTIME` which includes any suspended time.  Looking through the .NET source, they only use `CLOCK_BOOTTIME` to calculate the start time of processes and is not public.  So it seems the best option is to P/Invoke the API on non-Windows.",
    "created_at": "2022-11-05T01:05:02Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304364489",
    "id": 1304364489,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5NvwXJ",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304364489/reactions"
    },
    "updated_at": "2022-11-05T01:05:02Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304364489",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I think it might depend on your distro as the reference code does have different API calls depending on what is available on the system.  On my Ubuntu 22.04 install, `uptime -p` and `get-uptime` match.",
    "created_at": "2022-11-05T02:25:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304380282",
    "id": 1304380282,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5Nv0N6",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304380282/reactions"
    },
    "updated_at": "2022-11-05T02:25:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304380282",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "> but does NOT include any time when the system was suspended.\r\n\r\nYes, after reboot values was identical, when I closed the lid of laptop for three minutes I got the difference in values.\r\nPerhaps it would be correct to take timespan from the last boot time?\r\n```\r\n $ who -b\r\n         system boot  2022-11-05 11:39\r\n\r\n $ (last -x reboot)[0]\r\nreboot   system boot  6.0.7-arch1-1    Sat Nov  5 11:39   still running\r\n```",
    "created_at": "2022-11-05T09:17:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304452820",
    "id": 1304452820,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5NwF7U",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304452820/reactions"
    },
    "updated_at": "2022-11-05T09:27:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304452820",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> Looking through the .NET source, they only use `CLOCK_BOOTTIME` to calculate the start time of processes and is not public. So it seems the best option is to P/Invoke the API on non-Windows.\r\n\r\nThis doesn't work on all platforms.\r\n\r\nBest option is to request new API in .Net `System.Environment.Uptime`.\r\nUntil that, since it is not critical, we could add a workaround for Linux systems and use `/proc/uptime`.",
    "created_at": "2022-11-05T09:41:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304459470",
    "id": 1304459470,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5NwHjO",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304459470/reactions"
    },
    "updated_at": "2022-11-05T09:41:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304459470",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "> we could add a workaround for Linux systems and use /proc/uptime\r\n\r\nThis works.\r\n```powershell\r\n $ [timespan]::FromMilliseconds(([int](gc /proc/uptime).Split()[0] * 1000)).ToString()\r\n01:33:18\r\n \r\n $ uptime -p\r\nup 1 hour, 33 minutes\r\n```",
    "created_at": "2022-11-05T10:16:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304475963",
    "id": 1304475963,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5NwLk7",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304475963/reactions"
    },
    "updated_at": "2022-11-05T10:16:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304475963",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "We use `Stopwatch.GetTimestamp()` and if it takes into account suspend time on Windows but not on Unix this looks like a bug. It makes sense to open new issue in .Net Runtime repository.",
    "created_at": "2022-11-05T14:51:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304560999",
    "id": 1304560999,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5NwgVn",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304560999/reactions"
    },
    "updated_at": "2022-11-05T14:51:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304560999",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@iSazonov I tend to agree that this seems like a bug that should be fixed in .NET",
    "created_at": "2022-11-07T02:00:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/18469#issuecomment-1304984999",
    "id": 1304984999,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/18469",
    "node_id": "IC_kwDOAvT7bc5NyH2n",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304984999/reactions"
    },
    "updated_at": "2022-11-07T02:00:21Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1304984999",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  }
]
