[
  {
    "author_association": "COLLABORATOR",
    "body": "We already support casting from PSObject to a concrete type so try this:\r\n`$result = [MyClass] ($json | ConvertFrom-Json) `\r\nIt should do what you want.",
    "created_at": "2018-03-08T20:57:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-371621955",
    "id": 371621955,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTYyMTk1NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371621955/reactions"
    },
    "updated_at": "2018-03-08T20:57:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371621955",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I run into performance problems when deserializing into PSObject. \r\n400Mb takes 10 minuts and 10Gb, and lots of GC.\r\n\r\nThat seems to be done more efficiently when deserializing to a known type.\r\n",
    "created_at": "2018-03-08T23:00:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-371654489",
    "id": 371654489,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTY1NDQ4OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371654489/reactions"
    },
    "updated_at": "2018-03-08T23:00:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371654489",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3505151?v=4",
      "events_url": "https://api.github.com/users/powercode/events{/privacy}",
      "followers_url": "https://api.github.com/users/powercode/followers",
      "following_url": "https://api.github.com/users/powercode/following{/other_user}",
      "gists_url": "https://api.github.com/users/powercode/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/powercode",
      "id": 3505151,
      "login": "powercode",
      "node_id": "MDQ6VXNlcjM1MDUxNTE=",
      "organizations_url": "https://api.github.com/users/powercode/orgs",
      "received_events_url": "https://api.github.com/users/powercode/received_events",
      "repos_url": "https://api.github.com/users/powercode/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/powercode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/powercode/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/powercode"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@BrucePay As I mentioned, type casting doesn't always work. If you have  a constructor that accepts a `PSObject` then you cannot simply type case a `convertfrom-json` results because the constructor will be called. \r\n\r\n```powershell\r\nClass MyClass {\r\n    [string]$Property1 = 'default1'\r\n    [string]$Property2 = 'default2'\r\n    MyClass([PSObject]$Foo) {\r\n        $this.Property1 = $Foo.Bar\r\n        $this.Property2 = $Foo.Baz\r\n    }\r\n}\r\n\r\nClass MyClass2 {\r\n    [string]$Property1 = 'default1'\r\n    [string]$Property2 = 'default2'\r\n    MyClass() {}\r\n}\r\n\r\n$Json = @'\r\n{\r\n    \"Property1\": \"json1\",\r\n    \"Property2\": \"json2\"\r\n}\r\n'@\r\n\r\nDescribe \"Type casting a ConvertFrom-Json result\" {\r\n    It \"Works when a PSObject constructor is present\" {\r\n        $result = [MyClass] ($json | ConvertFrom-Json)\r\n\r\n        $result.Property1 | Should -BeExactly \"json1\"\r\n        $result.Property2 | Should -BeExactly \"json2\"\r\n    }\r\n\r\n    It \"Works when a PSObject constructor is not present\" {\r\n        $result = [MyClass2] ($json | ConvertFrom-Json)\r\n\r\n        $result.Property1 | Should -BeExactly \"json1\"\r\n        $result.Property2 | Should -BeExactly \"json2\"\r\n    }\r\n}\r\n```\r\n\r\nresults:\r\n\r\n```none\r\nDescribing Type casting a ConvertFrom-Json result\r\n  [-] Works when a PSObject constructor is present 39ms\r\n    Expected strings to be the same, but they were different.\r\n    Expected length: 5\r\n    Actual length:   0\r\n    Strings differ at index 0.\r\n    Expected: 'json1'\r\n    But was:  ''\r\n    -----------^\r\n    5:         $result.Property1 | Should -BeExactly \"json1\"\r\n  [+] Works when a PSObject constructor is not present 26ms\r\n```\r\n\r\nI find I often need PSObject constructors because I'm working with outputs from cmdlets and such where the author has chosen PSObjects instead of classes for the output type.  \r\n\r\nThis also breaks when a nested object type also has a PSObject constructor. However, Newtonsoft does work:\r\n\r\n\r\n```powershell\r\nclass MyNestedClass {\r\n    [string]$NestedProperty = 'NestedDefault'\r\n    MyNestedClass ([PSObject]$Foo) {\r\n        $this.NestedProperty = $Foo.Bar\r\n    }\r\n}\r\n\r\nClass MyClass {\r\n    [String]$Property = 'Propertydeafult'\r\n    [MyNestedClass[]]$NestedObjects\r\n    MyClass () {}\r\n}\r\n\r\n$json = @'\r\n{\r\n    \"Property\": \"value\",\r\n    \"NestedObjects\": [\r\n        {\r\n            \"NestedProperty\": \"NestedValue1\"\r\n        },\r\n        {\r\n            \"NestedProperty\": \"NestedValue2\"\r\n        }\r\n    ]\r\n}\r\n'@\r\n\r\nDescribe \"Type casting a ConvertFrom-Json result\" {\r\n    it \"Works with nested objects that have a PSObject constructor\" {\r\n        $Result = [MyClass] ($json | ConvertFrom-Json)\r\n        $Result.NestedObjects.Count | Should -Be 2\r\n        $Result.NestedObjects[0].NestedProperty | Should -BeExactly \"NestedValue1\"\r\n        $Result.NestedObjects[1].NestedProperty | Should -BeExactly \"NestedValue2\"\r\n    }\r\n}\r\n\r\nDescribe \"Newtonsoft Class Model\" {\r\n    it \"Works with nested objects that have a PSObject constructor\" {\r\n        $Result = [Newtonsoft.Json.JsonConvert]::DeserializeObject($json,[MyClass])\r\n        $Result.NestedObjects.Count | Should -Be 2\r\n        $Result.NestedObjects[0].NestedProperty | Should -BeExactly \"NestedValue1\"\r\n        $Result.NestedObjects[1].NestedProperty | Should -BeExactly \"NestedValue2\"\r\n    }\r\n}\r\n```\r\n\r\nresult:\r\n\r\n```none\r\nDescribing Type casting a ConvertFrom-Json result\r\n  [-] Works with nested objects that have a PSObject constructor 52ms\r\n    Expected strings to be the same, but they were different.\r\n    Expected length: 12\r\n    Actual length:   0\r\n    Strings differ at index 0.\r\n    Expected: 'NestedValue1'\r\n    But was:  ''\r\n    -----------^\r\n    5:         $Result.NestedObjects[0].NestedProperty | Should -BeExactly \"NestedValue1\"\r\n\r\nDescribing Newtonsoft Class Model\r\n  [+] Works with nested objects that have a PSObject constructor 25ms\r\n```\r\n\r\n",
    "created_at": "2018-03-09T03:34:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-371703206",
    "id": 371703206,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTcwMzIwNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371703206/reactions"
    },
    "updated_at": "2018-03-09T03:34:01Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371703206",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "The performance difference for me is considerable -- in my tests using convertfrom-json -ashashtable results in memory usage about 10x the size of the json but using a class and \"[Newtonsoft.Json.JsonConvert]::DeserializeObject\" results in about memory usage about 2x the size of the json string.\r\n\r\nIf ConvertFrom-Json could take an object declaration that would be awesome!",
    "created_at": "2018-10-25T04:40:47Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-432912411",
    "id": 432912411,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjkxMjQxMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/432912411/reactions"
    },
    "updated_at": "2018-10-25T04:40:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/432912411",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6384545?v=4",
      "events_url": "https://api.github.com/users/strawgate/events{/privacy}",
      "followers_url": "https://api.github.com/users/strawgate/followers",
      "following_url": "https://api.github.com/users/strawgate/following{/other_user}",
      "gists_url": "https://api.github.com/users/strawgate/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/strawgate",
      "id": 6384545,
      "login": "strawgate",
      "node_id": "MDQ6VXNlcjYzODQ1NDU=",
      "organizations_url": "https://api.github.com/users/strawgate/orgs",
      "received_events_url": "https://api.github.com/users/strawgate/received_events",
      "repos_url": "https://api.github.com/users/strawgate/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/strawgate/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/strawgate/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/strawgate"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Seems fine to support an optional parameter.  Perhaps just call it `-TypeName`?",
    "created_at": "2018-10-25T19:18:34Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-433173238",
    "id": 433173238,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzE3MzIzOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/433173238/reactions"
    },
    "updated_at": "2018-10-25T19:18:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/433173238",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I'd be more inclined to go with something like `-AsType` perhaps?\n\n```powershell\n$JsonData | ConvertFrom-Json -AsType MyType\n```",
    "created_at": "2018-10-25T20:15:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-433190237",
    "id": 433190237,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMzE5MDIzNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 12,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 12,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/433190237/reactions"
    },
    "updated_at": "2018-10-25T20:15:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/433190237",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": ".Net Core 3.0 gets System.Text.Json https://github.com/dotnet/corefx/issues/33115\r\nPlan there is to get new fast implementation. We could consider using it in the repo and create feedbacks to enhance System.Text.Json while it is under active development. ",
    "created_at": "2019-01-12T09:38:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-453733858",
    "id": 453733858,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzczMzg1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/453733858/reactions"
    },
    "updated_at": "2019-01-12T09:53:32Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/453733858",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "I second this:\r\n\r\n    $JsonData | ConvertFrom-Json -AsType MyType",
    "created_at": "2019-02-22T04:27:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-466269333",
    "id": 466269333,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjI2OTMzMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/466269333/reactions"
    },
    "updated_at": "2019-02-22T04:27:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/466269333",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10966749?v=4",
      "events_url": "https://api.github.com/users/InteXX/events{/privacy}",
      "followers_url": "https://api.github.com/users/InteXX/followers",
      "following_url": "https://api.github.com/users/InteXX/following{/other_user}",
      "gists_url": "https://api.github.com/users/InteXX/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/InteXX",
      "id": 10966749,
      "login": "InteXX",
      "node_id": "MDQ6VXNlcjEwOTY2NzQ5",
      "organizations_url": "https://api.github.com/users/InteXX/orgs",
      "received_events_url": "https://api.github.com/users/InteXX/received_events",
      "repos_url": "https://api.github.com/users/InteXX/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/InteXX/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/InteXX/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/InteXX"
    }
  },
  {
    "author_association": "NONE",
    "body": "I'll chime in here, too, that this use case would be a great feature add",
    "created_at": "2019-11-04T18:27:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6177#issuecomment-549485064",
    "id": 549485064,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6177",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ4NTA2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549485064/reactions"
    },
    "updated_at": "2019-11-04T18:27:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549485064",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/451585?v=4",
      "events_url": "https://api.github.com/users/rondefreitas/events{/privacy}",
      "followers_url": "https://api.github.com/users/rondefreitas/followers",
      "following_url": "https://api.github.com/users/rondefreitas/following{/other_user}",
      "gists_url": "https://api.github.com/users/rondefreitas/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rondefreitas",
      "id": 451585,
      "login": "rondefreitas",
      "node_id": "MDQ6VXNlcjQ1MTU4NQ==",
      "organizations_url": "https://api.github.com/users/rondefreitas/orgs",
      "received_events_url": "https://api.github.com/users/rondefreitas/received_events",
      "repos_url": "https://api.github.com/users/rondefreitas/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rondefreitas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rondefreitas/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rondefreitas"
    }
  }
]
