[
  {
    "author_association": "NONE",
    "body": "After doing more research and reading through the source code it looks like the behavior that I'm seeing is the intended behavior.  Also, it appears that you can't specify .\\Filename.dll on the command line when the file is in the catalog as Filename.dll.\r\n\r\nI was able to get the test I wrote to work by using the FilesToSkip option:\r\n\r\nPS D:\\Learn\\TestCat\\Test02> Test-FileCatalog -CatalogFilePath .\\PeteThe02.cat -Detailed -Path Red.dll -FilesToSkip Green.dll\r\n\r\nStatus        : Valid\r\nHashAlgorithm : SHA256\r\nCatalogItems  : {[Red.dll, 23B1EE3F3D67F403E092BC88B2BCFCC19087EFCE142A2D071B737F9FF59C5411]}\r\nPathItems     : {[Red.dll, 23B1EE3F3D67F403E092BC88B2BCFCC19087EFCE142A2D071B737F9FF59C5411]}\r\nSignature     : System.Management.Automation.Signature\r\n\r\nThis is really not very practical when you have a catalog with 100+ files and you want to verify one specific file in the catalog.  How about adding a -VerifyOneFile option that would skip over all the files in the catalog except for the single file being verified.\r\n\r\nMy company is evaluating the use of software catalogs for generating a catalog of unsigned 3rd party dll's that we sign and ship with our products.  We need to give our customers an easy method for verifying that the hashes for the files installed are correct using the (signed) catalog we provide.  \r\n\r\nOur current thinking is to create the files in the catalog during the build process on Azure DevOps pipelines by accumulating 3rd party unsigned dll's over many folders from the build and copying those files to a temporary location to create the catalog.  Therefore the relative paths of the files from where the software will be installed will not match the relative paths of the files in the catalog.  For our purposes, an option of -IgnoreRelativeFilePath or -VerifyHashOnly would be useful.  \r\n\r\nApologies for creating this as a defect if it is more appropriate as a feature request.\r\n",
    "created_at": "2022-08-03T01:08:56Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17824#issuecomment-1203370131",
    "id": 1203370131,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17824",
    "node_id": "IC_kwDOAvT7bc5HufiT",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1203370131/reactions"
    },
    "updated_at": "2022-08-03T01:08:56Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1203370131",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/9277839?v=4",
      "events_url": "https://api.github.com/users/kcbowhunter/events{/privacy}",
      "followers_url": "https://api.github.com/users/kcbowhunter/followers",
      "following_url": "https://api.github.com/users/kcbowhunter/following{/other_user}",
      "gists_url": "https://api.github.com/users/kcbowhunter/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/kcbowhunter",
      "id": 9277839,
      "login": "kcbowhunter",
      "node_id": "MDQ6VXNlcjkyNzc4Mzk=",
      "organizations_url": "https://api.github.com/users/kcbowhunter/orgs",
      "received_events_url": "https://api.github.com/users/kcbowhunter/received_events",
      "repos_url": "https://api.github.com/users/kcbowhunter/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/kcbowhunter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kcbowhunter/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/kcbowhunter"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@WG-Security\r\nThe `Test-FileCatalog` is intended to validate an entire catalog directory and not a single file.  It might make sense to have another cmdlet, or parameter set, that is intended to validate specific files in a catalog, similar to what Windows API does.",
    "created_at": "2022-08-08T20:42:30Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17824#issuecomment-1208590601",
    "id": 1208590601,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17824",
    "node_id": "IC_kwDOAvT7bc5ICaEJ",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1208590601/reactions"
    },
    "updated_at": "2022-08-08T20:42:30Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1208590601",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14019529?v=4",
      "events_url": "https://api.github.com/users/PaulHigin/events{/privacy}",
      "followers_url": "https://api.github.com/users/PaulHigin/followers",
      "following_url": "https://api.github.com/users/PaulHigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulHigin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PaulHigin",
      "id": 14019529,
      "login": "PaulHigin",
      "node_id": "MDQ6VXNlcjE0MDE5NTI5",
      "organizations_url": "https://api.github.com/users/PaulHigin/orgs",
      "received_events_url": "https://api.github.com/users/PaulHigin/received_events",
      "repos_url": "https://api.github.com/users/PaulHigin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PaulHigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulHigin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PaulHigin"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I wonder what is Path parameter semantic? ",
    "created_at": "2022-08-09T03:44:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17824#issuecomment-1208875898",
    "id": 1208875898,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17824",
    "node_id": "IC_kwDOAvT7bc5IDft6",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1208875898/reactions"
    },
    "updated_at": "2022-08-09T03:44:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1208875898",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "My example above shows that when there are two files in the catalog and you use the Path parameter to try and validate only one file the result is that the validation fails.\r\n\r\nOur plan is to create a catalog of unsigned 3rd party dll's on our ADO build pipeline.  During the software build process all of the unsigned 3rd party dlls found in the build artifacts are copied  to a temporary folder on the build agent.  The catalog is created using New-FileCatalog from that folder.  \r\n\r\nWe don't include the dll's we create because we apply our digital signature to our dll's.  \r\n\r\nWe were hoping to use Test-FileCatalog to allow our customers to verify that the unsigned 3rd party dll's installed as part of installing one of our software products have not been tampered with.  \r\n\r\nBecause the unsigned 3rd party dlls are collected into a common folder and signed during the build process, the dll's in the catalog will not be found in the same folders when installed via our .msi installer.\r\n\r\nThis gives some of the background why it would be useful to us to for Test-FileCatalog to easily test / validate a single file in the catalog.  Thanks for reading! :-)\r\n",
    "created_at": "2022-08-11T21:20:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17824#issuecomment-1212505688",
    "id": 1212505688,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17824",
    "node_id": "IC_kwDOAvT7bc5IRV5Y",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1212505688/reactions"
    },
    "updated_at": "2022-08-11T21:20:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1212505688",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/9277839?v=4",
      "events_url": "https://api.github.com/users/kcbowhunter/events{/privacy}",
      "followers_url": "https://api.github.com/users/kcbowhunter/followers",
      "following_url": "https://api.github.com/users/kcbowhunter/following{/other_user}",
      "gists_url": "https://api.github.com/users/kcbowhunter/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/kcbowhunter",
      "id": 9277839,
      "login": "kcbowhunter",
      "node_id": "MDQ6VXNlcjkyNzc4Mzk=",
      "organizations_url": "https://api.github.com/users/kcbowhunter/orgs",
      "received_events_url": "https://api.github.com/users/kcbowhunter/received_events",
      "repos_url": "https://api.github.com/users/kcbowhunter/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/kcbowhunter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kcbowhunter/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/kcbowhunter"
    }
  }
]
