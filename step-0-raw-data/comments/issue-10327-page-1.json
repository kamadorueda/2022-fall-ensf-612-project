[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Just for context, using the `read` built-in with bash (wsl or native linux), we'd use something like `read < <(echo -e -n \"\\e[6n\"); echo \"The reply is ${REPLY}\"` \r\n\r\n(`REPLY` is the default token when you don't specify one in `read`)",
    "created_at": "2019-08-08T23:14:46Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10327#issuecomment-519720258",
    "id": 519720258,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10327",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTcyMDI1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519720258/reactions"
    },
    "updated_at": "2019-08-08T23:14:46Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519720258",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1844001?v=4",
      "events_url": "https://api.github.com/users/oising/events{/privacy}",
      "followers_url": "https://api.github.com/users/oising/followers",
      "following_url": "https://api.github.com/users/oising/following{/other_user}",
      "gists_url": "https://api.github.com/users/oising/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/oising",
      "id": 1844001,
      "login": "oising",
      "node_id": "MDQ6VXNlcjE4NDQwMDE=",
      "organizations_url": "https://api.github.com/users/oising/orgs",
      "received_events_url": "https://api.github.com/users/oising/received_events",
      "repos_url": "https://api.github.com/users/oising/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/oising/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oising/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/oising"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> But when I try to run the same code on linux (even in the WSL terminal) the $Host.UI.RawUI seems to echo no matter what I do, so the terminal's response is completely unsuppressable.\r\n\r\nBefore core 3.0, terminal input echo was always enabled on Unix, unless `ReadKey(intercept: true)` was running.  We had a similar issue in PowerShellEditorServices, so I stripped out the native code corefx uses to disable echo (and otherwise prep `termios`) and put it in the [UnixConsoleEcho](https://github.com/SeeminglyScience/UnixConsoleEcho) package.  That works, but I'd recommend just requiring PowerShell 7 instead, shipping native binaries isn't fun. Plus you have to be *very* careful about reverting, because it'll affect child processes.\r\n\r\nNote that the problem isn't `$Host.UI.RawUI.ReadKey`, it's that `ReadKey` isn't running when input is pressed.  Since you're waiting until a key is available to read it, input will still be enabled at the time of the key press.\r\n\r\nAlso, can't text on *nix atm, but avoiding `KeyAvailable` should work:\r\n\r\n```powershell\r\n$Host.UI.Write(\"$([char]27)[6n\")\r\n$chars = while (($key = $Host.UI.RawUI.ReadKey('NoEcho, IncludeKeyDown')).Character -ne 'R') {\r\n    $key.Character\r\n}\r\n\r\n$y, $x = -join $chars.Where($null, 'Skip', 2) -split ';'\r\n```",
    "created_at": "2019-08-09T13:40:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10327#issuecomment-519922964",
    "id": 519922964,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10327",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTkyMjk2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519922964/reactions"
    },
    "updated_at": "2019-08-09T13:40:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519922964",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/24977523?v=4",
      "events_url": "https://api.github.com/users/SeeminglyScience/events{/privacy}",
      "followers_url": "https://api.github.com/users/SeeminglyScience/followers",
      "following_url": "https://api.github.com/users/SeeminglyScience/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeeminglyScience/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SeeminglyScience",
      "id": 24977523,
      "login": "SeeminglyScience",
      "node_id": "MDQ6VXNlcjI0OTc3NTIz",
      "organizations_url": "https://api.github.com/users/SeeminglyScience/orgs",
      "received_events_url": "https://api.github.com/users/SeeminglyScience/received_events",
      "repos_url": "https://api.github.com/users/SeeminglyScience/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SeeminglyScience/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeeminglyScience/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SeeminglyScience"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Nice workaround Patrick. Pity about needing to know about a terminating character. I suppose another alternative would be to make it timeout based, but spinning up threads while blocking on input causes hell on corefx on windows. I tried to make psreadline's argumentcompleters more robust by having them timeout some years ago but it was deadlock prone and flaky AF.",
    "created_at": "2019-08-09T15:44:48Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10327#issuecomment-519967968",
    "id": 519967968,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10327",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTk2Nzk2OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519967968/reactions"
    },
    "updated_at": "2019-08-09T15:44:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519967968",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1844001?v=4",
      "events_url": "https://api.github.com/users/oising/events{/privacy}",
      "followers_url": "https://api.github.com/users/oising/followers",
      "following_url": "https://api.github.com/users/oising/following{/other_user}",
      "gists_url": "https://api.github.com/users/oising/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/oising",
      "id": 1844001,
      "login": "oising",
      "node_id": "MDQ6VXNlcjE4NDQwMDE=",
      "organizations_url": "https://api.github.com/users/oising/orgs",
      "received_events_url": "https://api.github.com/users/oising/received_events",
      "repos_url": "https://api.github.com/users/oising/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/oising/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oising/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/oising"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> I suppose another alternative would be to make it timeout based, but spinning up threads while blocking on input causes hell on corefx on windows.\r\n\r\nThat has some fun side effects on unix too ðŸ˜„  ([More info](https://github.com/PowerShell/PSReadLine/pull/626#issue-165255865))\r\n",
    "created_at": "2019-08-09T17:14:48Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10327#issuecomment-519996092",
    "id": 519996092,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10327",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTk5NjA5Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519996092/reactions"
    },
    "updated_at": "2019-08-09T17:14:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/519996092",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/24977523?v=4",
      "events_url": "https://api.github.com/users/SeeminglyScience/events{/privacy}",
      "followers_url": "https://api.github.com/users/SeeminglyScience/followers",
      "following_url": "https://api.github.com/users/SeeminglyScience/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeeminglyScience/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SeeminglyScience",
      "id": 24977523,
      "login": "SeeminglyScience",
      "node_id": "MDQ6VXNlcjI0OTc3NTIz",
      "organizations_url": "https://api.github.com/users/SeeminglyScience/orgs",
      "received_events_url": "https://api.github.com/users/SeeminglyScience/received_events",
      "repos_url": "https://api.github.com/users/SeeminglyScience/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SeeminglyScience/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeeminglyScience/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SeeminglyScience"
    }
  }
]
