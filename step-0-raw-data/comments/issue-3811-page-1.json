[
  {
    "author_association": "COLLABORATOR",
    "body": "@JasonRitchie Thanks for your report!",
    "created_at": "2017-05-18T15:15:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3811#issuecomment-302435073",
    "id": 302435073,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3811",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjQzNTA3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 1,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302435073/reactions"
    },
    "updated_at": "2017-05-18T15:15:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302435073",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@JasonRitchie is there a specific scenario/api that fails because we don't allow body on DELETE?  I'm trying to prioritize this work.  Thanks.",
    "created_at": "2017-05-18T21:52:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3811#issuecomment-302551973",
    "id": 302551973,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3811",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjU1MTk3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302551973/reactions"
    },
    "updated_at": "2017-05-18T21:52:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302551973",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@SteveL-MSFT This appears to be fixed (likely due to upstream changes). I can no longer repro this.\r\n@JasonRitchie  Can you confirm this is no longer an issue?\r\n\r\n```powershell\r\n$Body = \"Test\"\r\nInvoke-WebRequest -Method DELETE -Body $Body -uri https://httpbin.org/delete\r\nInvoke-RestMethod -Method DELETE -Body $Body -uri https://httpbin.org/delete\r\n```\r\n\r\nResult:\r\n\r\n```none\r\nStatusCode        : 200\r\nStatusDescription : OK\r\nContent           : {\r\n                      \"args\": {},\r\n                      \"data\": \"Test\",\r\n                      \"files\": {},\r\n                      \"form\": {},\r\n                      \"headers\": {\r\n                        \"Connection\": \"close\",\r\n                        \"Content-Length\": \"4\",\r\n                        \"Host\": \"httpbin.org\",\r\n                        \"User-Agent\": \"Mozilla/5.0 (Wi...\r\nRawContent        : HTTP/1.1 200 OK\r\n                    Connection: keep-alive\r\n                    Date: Tue, 03 Oct 2017 09:23:03 GMT\r\n                    Via: 1.1 vegur\r\n                    Server: meinheld/0.6.1\r\n                    Access-Control-Allow-Origin: *\r\n                    Access-Control-Allow-Credentials: true\r\n                    X-Powered-...\r\nForms             :\r\nHeaders           : {[Connection, System.String[]], [Date, System.String[]], [Via, System.String[]], [Server,\r\n                    System.String[]]...}\r\nImages            : {}\r\nInputFields       : {}\r\nLinks             : {}\r\nParsedHtml        :\r\nRawContentLength  : 360\r\nRelationLink      : {}\r\n\r\nargs    :\r\ndata    : Test\r\nfiles   :\r\nform    :\r\nheaders : @{Connection=close; Content-Length=4; Host=httpbin.org; User-Agent=Mozilla/5.0 (Windows NT; Microsoft\r\n          Windows 10.0.15063 ; en-US) PowerShell/6.0.0}\r\njson    :\r\norigin  : 173.239.232.67\r\nurl     : https://httpbin.org/delete\r\n```\r\n\r\n`$PSversionTable`:\r\n```none\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.0.0-beta.7\r\nPSEdition                      Core\r\nGitCommitId                    v6.0.0-beta.7-83-g417e9889399e2e0e6a90d52ff58ae08ec08b1cf2\r\nOS                             Microsoft Windows 10.0.15063\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```",
    "created_at": "2017-10-03T09:27:42Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3811#issuecomment-333788646",
    "id": 333788646,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3811",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzc4ODY0Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/333788646/reactions"
    },
    "updated_at": "2017-10-03T09:27:42Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/333788646",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "I believe this was a lack of understanding on my part.\r\n\r\nI dug back into this and tried to reproduce it, and I was able to, but resolving it was as simple as setting -ContentType correctly. This worked even when I rolled back to beta.1.\r\n\r\nI'll give the details here for anyone else who may come across this.\r\n\r\nIn my initial naive attempt, you can see the body content is sent in query string format as the \"data\" content. The application I was hitting, tumblr collins, would have none of this. I have to admit I spent far too long stuck on this and I didn't have the understanding back then to identify the real issue.\r\n```\r\nInvoke-WebRequest -Method DELETE -Body $Body -uri https://httpbin.org/delete -Headers @{'authorization'='basic thing'}\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    StatusCode        : 200                                                                                                                                                                                                                                                   StatusDescription : OK\r\nContent           : {\r\n                      \"args\": {},\r\n                      \"data\": \"baz=qux&reason=no+reason&foo=bar\",\r\n                      \"files\": {},\r\n                      \"form\": {},\r\n                      \"headers\": {\r\n                        \"Accept\": \"*/*\",\r\n                        \"Authorization\": \"basic thing\",\r\n                        \"Connection\": \"close\",\r\n                       ...\r\nRawContent        : HTTP/1.1 200 OK\r\n                    Connection: keep-alive\r\n                    Server: meinheld/0.6.1\r\n                    Date: Tue, 03 Oct 2017 14:01:03 GMT\r\n                    Access-Control-Allow-Origin: *\r\n                    Access-Control-Allow-Credentials: true\r\n                    X-Powered-By: Flask\r\n                    X-Processed-...\r\nForms             :\r\nHeaders           : {[Connection, System.String[]], [Server, System.String[]], [Date, System.String[]], [Access-Control-Allow-Origin, System.String[]]...}\r\nImages            : {}\r\nInputFields       : {}\r\nLinks             : {}\r\nParsedHtml        :\r\nRawContentLength  : 535\r\n```\r\n\r\nToday as I revisited this I compared the behavior of POST to DELETE. DELETE doesn't set a content type by default. I have no problem with this behavior. In fact, I found this behavior defined in the official documentation.\r\n\r\nhttps://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest?view=powershell-6 \r\n`If this parameter is omitted and the request method is POST, Invoke-WebRequest sets the content type to application/x-www-form-urlencoded. Otherwise, the content type is not specified in the call.`\r\n\r\nHere is all it took:\r\n```\r\nInvoke-WebRequest -Method DELETE -Body $Body -uri https://httpbin.org/delete -Headers @{'authorization'='basic thing'} -ContentType 'application/x-www-form-urlencoded'\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    StatusCode        : 200                                                                                                                                                                                                                                                   StatusDescription : OK\r\nContent           : {\r\n                      \"args\": {},\r\n                      \"data\": \"\",\r\n                      \"files\": {},\r\n                      \"form\": {\r\n                        \"baz\": \"qux\",\r\n                        \"foo\": \"bar\",\r\n                        \"reason\": \"no reason\"\r\n                      },\r\n                      \"headers\": {\r\n                        \"Accept\": \"*/*\",\r\n                        \"Authorization\": \"basic thing...\r\nRawContent        : HTTP/1.1 200 OK\r\n                    Connection: keep-alive\r\n                    Server: meinheld/0.6.1\r\n                    Date: Tue, 03 Oct 2017 14:13:48 GMT\r\n                    Access-Control-Allow-Origin: *\r\n                    Access-Control-Allow-Credentials: true\r\n                    X-Powered-By: Flask\r\n                    X-Processed-...\r\nForms             :\r\nHeaders           : {[Connection, System.String[]], [Server, System.String[]], [Date, System.String[]], [Access-Control-Allow-Origin, System.String[]]...}\r\nImages            : {}\r\nInputFields       : {}\r\nLinks             : {}\r\nParsedHtml        :\r\nRawContentLength  : 628\r\nRelationLink      : {}\r\n```\r\n\r\nI'll try to learn from this. I appreciate your time. I personally have no reason for this request to remain open.",
    "created_at": "2017-10-03T14:17:30Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3811#issuecomment-333856173",
    "id": 333856173,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3811",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMzg1NjE3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 3,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 3,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/333856173/reactions"
    },
    "updated_at": "2017-10-03T14:17:30Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/333856173",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2144273?v=4",
      "events_url": "https://api.github.com/users/MadelineRitchie/events{/privacy}",
      "followers_url": "https://api.github.com/users/MadelineRitchie/followers",
      "following_url": "https://api.github.com/users/MadelineRitchie/following{/other_user}",
      "gists_url": "https://api.github.com/users/MadelineRitchie/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/MadelineRitchie",
      "id": 2144273,
      "login": "MadelineRitchie",
      "node_id": "MDQ6VXNlcjIxNDQyNzM=",
      "organizations_url": "https://api.github.com/users/MadelineRitchie/orgs",
      "received_events_url": "https://api.github.com/users/MadelineRitchie/received_events",
      "repos_url": "https://api.github.com/users/MadelineRitchie/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/MadelineRitchie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MadelineRitchie/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/MadelineRitchie"
    }
  }
]
