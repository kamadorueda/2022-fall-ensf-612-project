[
  {
    "author_association": "CONTRIBUTOR",
    "body": "This is blocked by several issues (that I have found so far):\n1. LoadUserProfile doesn't work on Linux, and PoweShell executable does not have \".exe\" suffix on Linux:\n\n--- a/monad/src/engine/hostifaces/PowerShellProcessInstance.cs\n+++ b/monad/src/engine/hostifaces/PowerShellProcessInstance.cs\n@@ -37,8 +37,9 @@ namespace System.Management.Automation.Runspaces\n         /// </summary>\n\n\n         static PowerShellProcessInstance()\n         {\n-            string executable = Platform.IsWindows() ? \"powershell.exe\" : \"powershell\";^M\n           PSExePath = Path.Combine(Utils.GetApplicationBase(Utils.DefaultPowerShellShellID),\n-                            \"powershell.exe\");\n- ```\n                         executable);^M\n   }\n  \n   /// <summary>\n  ```\n  \n  @@ -112,9 +113,13 @@ namespace System.Management.Automation.Runspaces\n                               RedirectStandardOutput = true,\n                               RedirectStandardError = true,\n                               CreateNoWindow = true,\n- ```\n                             LoadUserProfile = true,\n                       };\n  ```\n- ```\n         if (Platform.IsWindows())^M\n  ```\n-            {^M\n-                _startInfo.LoadUserProfile = true;^M\n- ```\n         }^M\n  ```\n  \n  +^M\n1.  PowerShell is invoked with -s and -EncodedCommand, neither of which is supported by PSL.  The \"-s\" option is undocumented.  From PSCore Slack group:\n\nandrew [4:18 PM]  \nServerMode aka 'OutOfProcessServer'\nps_dev\\admin\\monad\\src\\host\\msh\\CommandLineParameterParser.cs(393):                else if (MatchSwitch(switchKey, \"servermode\", \"s\"))\n\nandrew [4:25 PM]  \nbasically this option runs\nSystem.Management.Automation.Remoting.Server.OutOfProcessMediator.Run(cpp.InitialCommand);\nin ps_dev\\admin\\monad\\src\\host\\msh\\ConsoleHost.cs\n\npaulhi [7:28 AM]  \nThe -s option is to run PowerShell in server mode for out of process (background) jobs.  There are two other server modes: socketservermode (-so), namedpipeservermode (-nam) that are used for Hyper-V/Container remoting.  These modes are only used internally and so the switches are undocumented.\n1. To implement \"-s\" option mentioned in #2 above, you will hit a dependency on native WindowsIdentify.  This is one possible workaround:\n   \n   --- a/monad/src/engine/remoting/server/OutOfProcServerMediator.cs\n   +++ b/monad/src/engine/remoting/server/OutOfProcServerMediator.cs\n   @@ -298,8 +298,20 @@ namespace System.Management.Automation.Remoting.Server\n   \n   ```\n    protected OutOfProcessServerSessionTransportManager CreateSessionTransportManager(string configurationName)\n    {\n   ```\n2.            WindowsIdentity currentIdentity = WindowsIdentity.GetCurrent();\n3.            PSPrincipal userPrincipal = new PSPrincipal(new PSIdentity(\"\", true, currentIdentity.Name, null),\n4.            string name;^M\n5.            WindowsIdentity currentIdentity;^M\n6.            if (Platform.IsWindows())^M\n7.            {^M\n8.                currentIdentity = WindowsIdentity.GetCurrent();^M\n9.                name = currentIdentity.Name;^M\n10.            }^M\n11.            else^M\n12.            {^M\n13.                currentIdentity = null;^M\n14.                name = Platform.NonWindowsGetUserName();^M\n15.            }^M\n    +^M\n16. ```\n           PSPrincipal userPrincipal = new PSPrincipal(new PSIdentity(\"\", true, name, null),^M\n    ```\n17. Another native WIndows problem to be hit is related to CryptoLibrary.  In monad/src/utils/CryptoUtils.cs, the constructor PSRSACryptoServiceProvider pinvokes Windows's CrytoAcquireContext().  The ideal way around this is to re-write the PSCrytoNativeUtils class with System.Security.Crytography.AesCryptoServiceProvider.\n",
    "created_at": "2016-02-02T23:24:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-178883342",
    "id": 178883342,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODg4MzM0Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/178883342/reactions"
    },
    "updated_at": "2016-02-02T23:24:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/178883342",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16566935?v=4",
      "events_url": "https://api.github.com/users/palladia/events{/privacy}",
      "followers_url": "https://api.github.com/users/palladia/followers",
      "following_url": "https://api.github.com/users/palladia/following{/other_user}",
      "gists_url": "https://api.github.com/users/palladia/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/palladia",
      "id": 16566935,
      "login": "palladia",
      "node_id": "MDQ6VXNlcjE2NTY2OTM1",
      "organizations_url": "https://api.github.com/users/palladia/orgs",
      "received_events_url": "https://api.github.com/users/palladia/received_events",
      "repos_url": "https://api.github.com/users/palladia/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/palladia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/palladia/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/palladia"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "It looks like Waffle totally messed up the formatting of the comment.\n",
    "created_at": "2016-02-02T23:26:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-178884042",
    "id": 178884042,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDE3ODg4NDA0Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/178884042/reactions"
    },
    "updated_at": "2016-02-02T23:26:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/178884042",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16566935?v=4",
      "events_url": "https://api.github.com/users/palladia/events{/privacy}",
      "followers_url": "https://api.github.com/users/palladia/followers",
      "following_url": "https://api.github.com/users/palladia/following{/other_user}",
      "gists_url": "https://api.github.com/users/palladia/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/palladia",
      "id": 16566935,
      "login": "palladia",
      "node_id": "MDQ6VXNlcjE2NTY2OTM1",
      "organizations_url": "https://api.github.com/users/palladia/orgs",
      "received_events_url": "https://api.github.com/users/palladia/received_events",
      "repos_url": "https://api.github.com/users/palladia/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/palladia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/palladia/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/palladia"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@joeyaiello This is the issue tracking start/stop job.\n",
    "created_at": "2016-04-08T17:30:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-207527204",
    "id": 207527204,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwNzUyNzIwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/207527204/reactions"
    },
    "updated_at": "2016-04-08T17:30:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/207527204",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "We have `-EncodedCommand` now (I think) in #712. \n",
    "created_at": "2016-04-20T23:47:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-212654339",
    "id": 212654339,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjY1NDMzOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/212654339/reactions"
    },
    "updated_at": "2016-04-20T23:47:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/212654339",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@palladia Is this still blocked?\n",
    "created_at": "2016-04-20T23:47:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-212654381",
    "id": 212654381,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjY1NDM4MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/212654381/reactions"
    },
    "updated_at": "2016-04-20T23:47:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/212654381",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "The main blocking thing is the dependency on Windows's Crypto library.\n",
    "created_at": "2016-04-21T14:54:54Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-212958155",
    "id": 212958155,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxMjk1ODE1NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/212958155/reactions"
    },
    "updated_at": "2016-04-21T14:54:54Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/212958155",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16566935?v=4",
      "events_url": "https://api.github.com/users/palladia/events{/privacy}",
      "followers_url": "https://api.github.com/users/palladia/followers",
      "following_url": "https://api.github.com/users/palladia/following{/other_user}",
      "gists_url": "https://api.github.com/users/palladia/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/palladia",
      "id": 16566935,
      "login": "palladia",
      "node_id": "MDQ6VXNlcjE2NTY2OTM1",
      "organizations_url": "https://api.github.com/users/palladia/orgs",
      "received_events_url": "https://api.github.com/users/palladia/received_events",
      "repos_url": "https://api.github.com/users/palladia/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/palladia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/palladia/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/palladia"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "With #939:\n\n``` powershell\n> ./src/Microsoft.PowerShell.ConsoleHost/bin/Linux/netcoreapp1.0/osx.10.11-x64/powershell\nWindows PowerShell \nCopyright (C) 2016 Microsoft Corporation. All rights reserved.\n\nLoading personal and system profiles took 595ms.\n~/src/PowerShell |-/ start-job -scriptblock {get-process}                             \n\nId     Name            PSJobTypeName   State         HasMoreData     Location        \n--     ----            -------------   -----         -----------     --------        \n1      Job1            BackgroundJob   Failed        False           localhost       \n```\n\nFails, but not as badly.\n",
    "created_at": "2016-05-05T21:34:12Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-217286674",
    "id": 217286674,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxNzI4NjY3NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/217286674/reactions"
    },
    "updated_at": "2016-05-05T21:34:12Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/217286674",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "According to @jeffbi, this works fine now. He should be adding tests soon. ",
    "created_at": "2017-02-08T23:53:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/452#issuecomment-278501862",
    "id": 278501862,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/452",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3ODUwMTg2Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/278501862/reactions"
    },
    "updated_at": "2017-02-08T23:53:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/278501862",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1255187?v=4",
      "events_url": "https://api.github.com/users/joeyaiello/events{/privacy}",
      "followers_url": "https://api.github.com/users/joeyaiello/followers",
      "following_url": "https://api.github.com/users/joeyaiello/following{/other_user}",
      "gists_url": "https://api.github.com/users/joeyaiello/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/joeyaiello",
      "id": 1255187,
      "login": "joeyaiello",
      "node_id": "MDQ6VXNlcjEyNTUxODc=",
      "organizations_url": "https://api.github.com/users/joeyaiello/orgs",
      "received_events_url": "https://api.github.com/users/joeyaiello/received_events",
      "repos_url": "https://api.github.com/users/joeyaiello/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/joeyaiello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joeyaiello/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/joeyaiello"
    }
  }
]
