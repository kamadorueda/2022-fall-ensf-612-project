[
  {
    "author_association": "NONE",
    "body": "Actual behavior:\r\nAutocompletion doesn't work for $testarray variable",
    "created_at": "2017-05-18T12:01:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-302383885",
    "id": 302383885,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjM4Mzg4NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302383885/reactions"
    },
    "updated_at": "2017-05-18T12:01:15Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302383885",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12292115?v=4",
      "events_url": "https://api.github.com/users/luctalpe/events{/privacy}",
      "followers_url": "https://api.github.com/users/luctalpe/followers",
      "following_url": "https://api.github.com/users/luctalpe/following{/other_user}",
      "gists_url": "https://api.github.com/users/luctalpe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/luctalpe",
      "id": 12292115,
      "login": "luctalpe",
      "node_id": "MDQ6VXNlcjEyMjkyMTE1",
      "organizations_url": "https://api.github.com/users/luctalpe/orgs",
      "received_events_url": "https://api.github.com/users/luctalpe/received_events",
      "repos_url": "https://api.github.com/users/luctalpe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/luctalpe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luctalpe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/luctalpe"
    }
  },
  {
    "author_association": "NONE",
    "body": "Hi @luctalpe,\r\n\r\nLooking at the sample you provided, seems to me you are trying to access the array variable after the script has executed.  If this is the case, then $testarray won't be available any more.\r\n\r\nYou may need to use $global:testarray in order for the variable to be accessible after the script has ended. Only then the autocompletion should work.\r\n\r\nI'm hoping this makes sense. \r\n\r\n![posh_array_2017-05-18_8-54-19](https://cloud.githubusercontent.com/assets/19892435/26203041/ae945e06-3ba7-11e7-8f9d-fe2f460ee210.jpg)\r\n\r\n\r\n\r\n\r\n\r\n",
    "created_at": "2017-05-18T12:55:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-302395328",
    "id": 302395328,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjM5NTMyOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302395328/reactions"
    },
    "updated_at": "2017-05-18T12:55:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302395328",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19892435?v=4",
      "events_url": "https://api.github.com/users/MaximoTrinidad/events{/privacy}",
      "followers_url": "https://api.github.com/users/MaximoTrinidad/followers",
      "following_url": "https://api.github.com/users/MaximoTrinidad/following{/other_user}",
      "gists_url": "https://api.github.com/users/MaximoTrinidad/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/MaximoTrinidad",
      "id": 19892435,
      "login": "MaximoTrinidad",
      "node_id": "MDQ6VXNlcjE5ODkyNDM1",
      "organizations_url": "https://api.github.com/users/MaximoTrinidad/orgs",
      "received_events_url": "https://api.github.com/users/MaximoTrinidad/received_events",
      "repos_url": "https://api.github.com/users/MaximoTrinidad/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/MaximoTrinidad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MaximoTrinidad/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/MaximoTrinidad"
    }
  },
  {
    "author_association": "NONE",
    "body": "Hi Maximo,\r\n\r\nThanks but there is a misunderstanding . The issue is during script execution, not after script execution.\r\n\r\nWhen we are in the nested mode ( see >> prompt), you can display the variable typing $testarray, but if you try to expand it at this point (and not after script  has executed), tab completion doesn't work.\r\n\r\n",
    "created_at": "2017-05-18T17:01:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-302471770",
    "id": 302471770,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjQ3MTc3MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302471770/reactions"
    },
    "updated_at": "2017-05-18T17:01:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302471770",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12292115?v=4",
      "events_url": "https://api.github.com/users/luctalpe/events{/privacy}",
      "followers_url": "https://api.github.com/users/luctalpe/followers",
      "following_url": "https://api.github.com/users/luctalpe/following{/other_user}",
      "gists_url": "https://api.github.com/users/luctalpe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/luctalpe",
      "id": 12292115,
      "login": "luctalpe",
      "node_id": "MDQ6VXNlcjEyMjkyMTE1",
      "organizations_url": "https://api.github.com/users/luctalpe/orgs",
      "received_events_url": "https://api.github.com/users/luctalpe/received_events",
      "repos_url": "https://api.github.com/users/luctalpe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/luctalpe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luctalpe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/luctalpe"
    }
  },
  {
    "author_association": "NONE",
    "body": "@luctalpe,\r\n\r\nMy apologies! Now I understand what you're talking about. I haven't had the need for it but I gave it a test. \r\nTab completion won't work!\r\n\r\nBy the way, the behavior is in both Windows PowerShell (Ver. 5.1.16193.1001) and PowerShell Core (Ver. 6.0.0-beta.1).  I'm on Windows Insider Build 16193.\r\n\r\nI may suggest to also post this incident at Windows PowerShell UserVoice site at: https://windowsserver.uservoice.com/forums/301869-powershell/category/148044-powershell-engine\r\n\r\n![nestedtab_2017-05-18_13-45-48](https://cloud.githubusercontent.com/assets/19892435/26216084/cff5d8c6-3bd0-11e7-8996-fda2bf1b1082.jpg)\r\n",
    "created_at": "2017-05-18T17:51:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-302489362",
    "id": 302489362,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjQ4OTM2Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302489362/reactions"
    },
    "updated_at": "2017-05-18T17:52:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302489362",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19892435?v=4",
      "events_url": "https://api.github.com/users/MaximoTrinidad/events{/privacy}",
      "followers_url": "https://api.github.com/users/MaximoTrinidad/followers",
      "following_url": "https://api.github.com/users/MaximoTrinidad/following{/other_user}",
      "gists_url": "https://api.github.com/users/MaximoTrinidad/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/MaximoTrinidad",
      "id": 19892435,
      "login": "MaximoTrinidad",
      "node_id": "MDQ6VXNlcjE5ODkyNDM1",
      "organizations_url": "https://api.github.com/users/MaximoTrinidad/orgs",
      "received_events_url": "https://api.github.com/users/MaximoTrinidad/received_events",
      "repos_url": "https://api.github.com/users/MaximoTrinidad/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/MaximoTrinidad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MaximoTrinidad/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/MaximoTrinidad"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "I am trying to resolve this issue, and I believe I understand what is causing the problem but I would **appreciate some direction on were to look** to resolve it.\r\n\r\nWhat I found so far is that normally with command prompt, the `global` and `local` (and `script`) **variables scopes** are the same.  However, when a script is run, a separate `local` variables scope is used.  Therefore, in the suspend mode of `Write-Debug`, the command prompt is using **separate** `local` and `global` scopes.\r\n\r\nIt seems that when `ReadLine` is called, a **new** `local` variable scope and the `global` scope are passed to it.  Therefore, `ReadLine` does **not** have access to the local variables defined by the script.\r\n\r\nSince the **tab-completion** is done **from `ReadLine`**, it also does **not** have access to the script's `local` variables.\r\n\r\nMy issue is that I am not able to find where the `local` variables scope for `ReadLine` is defined, assuming that this is where a change can be done to resolve this issue.  **Any help in identifying where this is done will be appreciated**.",
    "created_at": "2021-05-26T15:58:03Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-848895945",
    "id": 848895945,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0ODg5NTk0NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/848895945/reactions"
    },
    "updated_at": "2021-05-26T15:58:03Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/848895945",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/61089727?v=4",
      "events_url": "https://api.github.com/users/davidBar-On/events{/privacy}",
      "followers_url": "https://api.github.com/users/davidBar-On/followers",
      "following_url": "https://api.github.com/users/davidBar-On/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidBar-On/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/davidBar-On",
      "id": 61089727,
      "login": "davidBar-On",
      "node_id": "MDQ6VXNlcjYxMDg5NzI3",
      "organizations_url": "https://api.github.com/users/davidBar-On/orgs",
      "received_events_url": "https://api.github.com/users/davidBar-On/received_events",
      "repos_url": "https://api.github.com/users/davidBar-On/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/davidBar-On/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidBar-On/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/davidBar-On"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> Since the **tab-completion** is done **from `ReadLine`**\r\n\r\nThere are two code paths - PowerShell implementation and PSReadline implementation - see using TryInvokeUserDefinedReadLine method.\r\n",
    "created_at": "2021-05-26T18:28:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-849019444",
    "id": 849019444,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0OTAxOTQ0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/849019444/reactions"
    },
    "updated_at": "2021-05-26T18:28:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/849019444",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "> There are two code paths - PowerShell implementation and PSReadline implementation - see using TryInvokeUserDefinedReadLine method.\r\n\r\nThanks for the help.  I believe I found the root cause of the issue and submitted PR #15529 with a suggested fix.",
    "created_at": "2021-06-07T10:12:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3810#issuecomment-855799207",
    "id": 855799207,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3810",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NTc5OTIwNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/855799207/reactions"
    },
    "updated_at": "2021-06-07T10:12:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/855799207",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/61089727?v=4",
      "events_url": "https://api.github.com/users/davidBar-On/events{/privacy}",
      "followers_url": "https://api.github.com/users/davidBar-On/followers",
      "following_url": "https://api.github.com/users/davidBar-On/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidBar-On/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/davidBar-On",
      "id": 61089727,
      "login": "davidBar-On",
      "node_id": "MDQ6VXNlcjYxMDg5NzI3",
      "organizations_url": "https://api.github.com/users/davidBar-On/orgs",
      "received_events_url": "https://api.github.com/users/davidBar-On/received_events",
      "repos_url": "https://api.github.com/users/davidBar-On/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/davidBar-On/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidBar-On/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/davidBar-On"
    }
  }
]
