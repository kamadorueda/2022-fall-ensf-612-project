[
  {
    "author_association": "NONE",
    "body": "steps: \r\nrequest a file not on server from *.vod.com (see powershell transcript)\r\n404 info is returned in stdlist (or stderr),\r\nstack trace in -errorvariable output\r\nno results returned into return variable  (i.e. $returnvar=invoke-webrequest ...)\r\n\r\nexpected to be able to see $returnvar.statuscode =404\r\ninspecting the returned header, you can see:\r\n**server | AmazonS3\r\nx-cache | Error from cloudfront**\r\n\r\n\r\n\r\n'\r\n ---> Microsoft.PowerShell.Commands.HttpResponseException: Response status code does not indicate success: 404 (Not Found).\r\n   at System.Management.Automation.MshCommandRuntime.ThrowTerminatingError(ErrorRecord errorRecord)\r\n   --- End of inner exception stack trace ---\r\n[1.txt](https://github.com/PowerShell/PowerShell/files/2915176/1.txt)\r\n'\r\n",
    "created_at": "2019-02-28T13:35:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468274283",
    "id": 468274283,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODI3NDI4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468274283/reactions"
    },
    "updated_at": "2019-02-28T13:35:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468274283",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/465722?v=4",
      "events_url": "https://api.github.com/users/qt3m45su0najc7/events{/privacy}",
      "followers_url": "https://api.github.com/users/qt3m45su0najc7/followers",
      "following_url": "https://api.github.com/users/qt3m45su0najc7/following{/other_user}",
      "gists_url": "https://api.github.com/users/qt3m45su0najc7/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/qt3m45su0najc7",
      "id": 465722,
      "login": "qt3m45su0najc7",
      "node_id": "MDQ6VXNlcjQ2NTcyMg==",
      "organizations_url": "https://api.github.com/users/qt3m45su0najc7/orgs",
      "received_events_url": "https://api.github.com/users/qt3m45su0najc7/received_events",
      "repos_url": "https://api.github.com/users/qt3m45su0najc7/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/qt3m45su0najc7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qt3m45su0najc7/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/qt3m45su0najc7"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@qt3m45su0najc7 Please use issue template to push issue.",
    "created_at": "2019-02-28T19:30:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468405676",
    "id": 468405676,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODQwNTY3Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468405676/reactions"
    },
    "updated_at": "2019-02-28T19:30:49Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468405676",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "/cc @markekraus Could you please look the issue?",
    "created_at": "2019-02-28T19:32:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468406143",
    "id": 468406143,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODQwNjE0Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468406143/reactions"
    },
    "updated_at": "2019-02-28T19:32:07Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468406143",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "This is `By Design`. A non-success HTTP status message throws terminating errors and does not return any output. You must do something like this:\r\n\r\n```powershell\r\ntry {\r\n    $response = invoke-WebRequest -Uri $Uri -ErrorAction Stop\r\n    $StatusCode = $Response.StatusCode\r\n} catch {\r\n    $StatusCode = $_.Exception.Response.StatusCode.value__\r\n}\r\n```",
    "created_at": "2019-03-01T00:01:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468488707",
    "id": 468488707,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODQ4ODcwNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468488707/reactions"
    },
    "updated_at": "2019-03-01T00:01:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468488707",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "Ok, @markekraus  , but I did mention that the $response= returns nothing, so there is no $response.statuscode to evaluate.  Please confirm using the example in the transcript or fake one for that domain to verify.",
    "created_at": "2019-03-01T01:50:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468510732",
    "id": 468510732,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODUxMDczMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468510732/reactions"
    },
    "updated_at": "2019-03-01T01:50:07Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468510732",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/465722?v=4",
      "events_url": "https://api.github.com/users/qt3m45su0najc7/events{/privacy}",
      "followers_url": "https://api.github.com/users/qt3m45su0najc7/followers",
      "following_url": "https://api.github.com/users/qt3m45su0najc7/following{/other_user}",
      "gists_url": "https://api.github.com/users/qt3m45su0najc7/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/qt3m45su0najc7",
      "id": 465722,
      "login": "qt3m45su0najc7",
      "node_id": "MDQ6VXNlcjQ2NTcyMg==",
      "organizations_url": "https://api.github.com/users/qt3m45su0najc7/orgs",
      "received_events_url": "https://api.github.com/users/qt3m45su0najc7/received_events",
      "repos_url": "https://api.github.com/users/qt3m45su0najc7/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/qt3m45su0najc7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qt3m45su0najc7/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/qt3m45su0najc7"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@qt3m45su0najc7 \r\n\r\nyou can use what i posted before:\r\n\r\n```powershell\r\n$Uri = 'https://img.vod.com/secret_recipe.jpg'\r\ntry {\r\n    $response = invoke-WebRequest -Uri $Uri -ErrorAction Stop\r\n    $StatusCode = $Response.StatusCode\r\n} catch {\r\n    $StatusCode = $_.Exception.Response.StatusCode.value__\r\n}\r\n```\r\n\r\n`$Response` will not be fully populated unless you get a success code (e.g. `200`). However, you can process the `$_.Exception.Response` in the `catch{}` block which is a `System.Net.Http.HttpResponseMessage` object. \r\n\r\nIn my example, ` $StatusCode = $Response.StatusCode` will be hit when the status is successful and `$StatusCode = $_.Exception.Response.StatusCode.value__` will be hit when it is not and in the end, `$StatusCode` will have the status code regardless of whether the request was successful or not.\r\n\r\nIn other words, you need to write your code in such a way to handle the errors as `$Response` will not be populated when a non-succes status message is returned.",
    "created_at": "2019-03-01T02:09:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468514325",
    "id": 468514325,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODUxNDMyNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468514325/reactions"
    },
    "updated_at": "2019-03-01T02:09:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468514325",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "@markekraus  works as you advertised. Thank you.",
    "created_at": "2019-03-01T13:03:36Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468657972",
    "id": 468657972,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODY1Nzk3Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468657972/reactions"
    },
    "updated_at": "2019-03-01T13:03:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468657972",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/465722?v=4",
      "events_url": "https://api.github.com/users/qt3m45su0najc7/events{/privacy}",
      "followers_url": "https://api.github.com/users/qt3m45su0najc7/followers",
      "following_url": "https://api.github.com/users/qt3m45su0najc7/following{/other_user}",
      "gists_url": "https://api.github.com/users/qt3m45su0najc7/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/qt3m45su0najc7",
      "id": 465722,
      "login": "qt3m45su0najc7",
      "node_id": "MDQ6VXNlcjQ2NTcyMg==",
      "organizations_url": "https://api.github.com/users/qt3m45su0najc7/orgs",
      "received_events_url": "https://api.github.com/users/qt3m45su0najc7/received_events",
      "repos_url": "https://api.github.com/users/qt3m45su0najc7/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/qt3m45su0najc7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qt3m45su0najc7/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/qt3m45su0najc7"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@markekraus I imagine this scenario might be common enough that perhaps adding that example to the [docs page](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest?view=powershell-6) may be warranted? 🙂 ",
    "created_at": "2019-03-01T13:07:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468659077",
    "id": 468659077,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODY1OTA3Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468659077/reactions"
    },
    "updated_at": "2019-03-01T13:07:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468659077",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@vexx32 If you think so, please open an issue in [PowerShell/PowerShell-Docs](https://github.com/MicrosoftDocs/PowerShell-Docs)",
    "created_at": "2019-03-01T13:14:48Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9009#issuecomment-468660901",
    "id": 468660901,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9009",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODY2MDkwMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468660901/reactions"
    },
    "updated_at": "2019-03-01T13:14:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/468660901",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  }
]
