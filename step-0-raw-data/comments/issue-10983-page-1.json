[
  {
    "author_association": "MEMBER",
    "body": "What you are seeing is calls for update notification as detailed in this RFC: https://github.com/PowerShell/PowerShell-RFC/pull/162/files which includes instructions on how to disable it.  Please don't state or imply any \"spying\" is going on.  We deliberately publish RFCs being completely transparent on all data that is sent from the product.  Since PowerShell is Open Source, you can see exactly what is being sent and where.\r\n\r\nAlso, the first cold start of PowerShell, it spends time building the module analysis cache so it knows what commands and cmdlets are available.  This is only on the first cold start.\r\n\n\n<blockquote><img src=\"https://avatars2.githubusercontent.com/u/127450?s=400&v=4\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicon.ico\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/PowerShell/PowerShell-RFC/pull/162\">Support notification on `pwsh` startup when a new update is available by daxian-dbw · Pull Request #162 · PowerShell/PowerShell-RFC</a></strong></div><div>Support notification on pwsh startup when a new update is available.\nToday, to find out whether a new version of PowerShell is available, one has to check the release page of the PowerShell\\PowerSh...</div></blockquote>",
    "created_at": "2019-11-04T17:30:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-549462369",
    "id": 549462369,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ2MjM2OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549462369/reactions"
    },
    "updated_at": "2019-11-04T17:30:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549462369",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "Thanks for the quick response.\r\n\r\nHowever, setting POWERSHELL_UPDATECHECK to \"Off\" as a system environment variable does not decrease the startup time of pwsh, it's still about 8 seconds.  Disabling the VM's network interface reduces launch time to less than 1 second.  Is it a different setting?  Am I reading the RFC correctly? \r\n\r\n(Regarding telemetry on non-beta products: if it's opt-in, it's feedback; if it's out-out, it's spying.  But this isn't the place for another debate on the issue, I'm only interested here in the startup delay.)",
    "created_at": "2019-11-04T18:38:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-549489635",
    "id": 549489635,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ4OTYzNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549489635/reactions"
    },
    "updated_at": "2019-11-04T18:38:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549489635",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Looks like the code currently expects `POWERSHELL_UPDATECHECK_OPTOUT=1` to disable.  However, that check is supposed to run on a background thread not impact startup perf.  cc @daxian-dbw \r\n",
    "created_at": "2019-11-04T20:13:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-549527221",
    "id": 549527221,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTUyNzIyMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549527221/reactions"
    },
    "updated_at": "2019-11-04T20:13:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/549527221",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "Also it getting worse when you load some modules such as posh-git in the profile.",
    "created_at": "2019-11-07T08:15:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-550971632",
    "id": 550971632,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDk3MTYzMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/550971632/reactions"
    },
    "updated_at": "2019-11-07T08:15:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/550971632",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22220356?v=4",
      "events_url": "https://api.github.com/users/xsoheilalizadeh/events{/privacy}",
      "followers_url": "https://api.github.com/users/xsoheilalizadeh/followers",
      "following_url": "https://api.github.com/users/xsoheilalizadeh/following{/other_user}",
      "gists_url": "https://api.github.com/users/xsoheilalizadeh/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/xsoheilalizadeh",
      "id": 22220356,
      "login": "xsoheilalizadeh",
      "node_id": "MDQ6VXNlcjIyMjIwMzU2",
      "organizations_url": "https://api.github.com/users/xsoheilalizadeh/orgs",
      "received_events_url": "https://api.github.com/users/xsoheilalizadeh/received_events",
      "repos_url": "https://api.github.com/users/xsoheilalizadeh/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/xsoheilalizadeh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xsoheilalizadeh/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/xsoheilalizadeh"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@JasonFossen The RFC was updated after preview.5 to make the update check behavior more than just on and off, but the code in preview.5 was using [`POWERSHELL_UPDATECHECK_OPTOUT`](https://github.com/PowerShell/PowerShell/pull/10689/files#diff-23609a2c381a43118fc584abed0c7126R23) similar as the telemetry, so you can set `POWERSHELL_UPDATECHECK_OPTOUT` to 1 to disable the update notification functionality.\r\n\r\nBut at any rate, the network query to `GitHub.com` happens on a background thread and shouldn't affect the startup time. I will setup the environment as you described and try to repro the issue. At the same time, hopefully setting `POWERSHELL_UPDATECHECK_OPTOUT` to 1 can help you work around the problem.",
    "created_at": "2019-11-07T19:23:02Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551225821",
    "id": 551225821,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTIyNTgyMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551225821/reactions"
    },
    "updated_at": "2019-11-07T19:24:01Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551225821",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "NONE",
    "body": "@daxian-dbw  Thank you.  Btw, setting POWERSHELL_UPDATECHECK_OPTOUT to 1 as a system environment variable makes no difference on my VM.  However, disabling recursion on my DNS service in my VM (DNS properties > Advanced tab) also reduces the pwsh startup delay to less than 1 second.  My VM is a DNS client to itself.  Disabling the VM's network interface has the same effect. ",
    "created_at": "2019-11-07T20:06:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551242229",
    "id": 551242229,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTI0MjIyOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551242229/reactions"
    },
    "updated_at": "2019-11-07T20:06:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551242229",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@JasonFossen Please share follow information after you run pwsh:\r\n```powershell\r\n [environment]::GetEnvironmentVariables()\r\n```\r\n\r\n```powershell\r\n[environment]::GetEnvironmentVariable(\"POWERSHELL_UPDATECHECK_OPTOUT\")\r\n[environment]::GetEnvironmentVariable(\"POWERSHELL_TELEMETRY_OPTOUT\")\r\n```\r\n\r\nAlso you could enable tracing on DNS and catch the slow request - what is a dns name in the request?",
    "created_at": "2019-11-08T05:03:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551385879",
    "id": 551385879,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTM4NTg3OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551385879/reactions"
    },
    "updated_at": "2019-11-08T05:08:42Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551385879",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "@iSazonov \r\n\r\nHello Ilya, these are the names being queried most consistently after launching \"pwsh.exe -noprofile\":\r\n\r\n- ctldl.windowsupdate.com\r\n- checkappexec.microsoft.com\r\n- az764295.vo.msecnd.net\r\n\r\nHowever, when I disable recursion support on the DNS server, only the first name is queried (ctldl.windowsupdate.com), then, when the DNS server refuses to resolve it, pwsh immediately displays a working cursor/prompt, no delay.  When recursion support is enabled on the DNS server again, ctldl.windowsupdate.com is queried repeatedly until lookup failure, and then pwsh displays a working cursor/prompt.  The other two names are not as consistently queried.  Earlier, I saw a query for api.github.com too, but I don't see that anymore.  \r\n\r\nThe DNS server is the local VM on which pwsh is running.  The VM is air-gapped from the physical LAN.  Queries were captured with Wireshark on the VM.  The VM is running Windows Server 2019 Datacenter Evaluation v1809, OS build 17763.737, installed on 3-Nov.2019 as a VM in VirtualBox 6.0.14.\r\n\r\n\r\n `[environment]::GetEnvironmentVariables() | Select *`\r\n\r\nNUMBER_OF_PROCESSORS            : 4\r\nHOMEPATH                        : \\Users\\Administrator\r\nDriverData                      : C:\\Windows\\System32\\Drivers\\DriverData\r\nFPS_BROWSER_APP_PROFILE_STRING  : Internet Explorer\r\nUSERNAME                        : Administrator\r\nwindir                          : C:\\Windows\r\nCommonProgramFiles(x86)         : C:\\Program Files (x86)\\Common Files\r\nPROCESSOR_REVISION              : 3c03\r\nPROCESSOR_IDENTIFIER            : Intel64 Family 6 Model 60 Stepping 3, GenuineIntel\r\nUSERDNSDOMAIN                   : TESTING.LOCAL\r\n**POWERSHELL_UPDATECHECK_OPTOUT   : 1**\r\nFPS_BROWSER_USER_PROFILE_STRING : Default\r\nPUBLIC                          : C:\\Users\\Public\r\nPOWERSHELL_DISTRIBUTION_CHANNEL : MSI:Windows Server 2019 Datacenter Evaluation\r\nPATHEXT                         : .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL\r\nProgramFiles                    : C:\\Program Files\r\nPROCESSOR_ARCHITECTURE          : AMD64\r\nSystemRoot                      : C:\\Windows\r\nCOMPUTERNAME                    : WIN-F8ANUMHVJH5\r\nLOGONSERVER                     : \\\\WIN-F8ANUMHVJH5\r\nHOMEDRIVE                       : C:\r\nTMP                             : C:\\Users\\ADMINI~1\\AppData\\Local\\Temp\r\nProgramFiles(x86)               : C:\\Program Files (x86)\r\nAPPDATA                         : C:\\Users\\Administrator\\AppData\\Roaming\r\nPROCESSOR_LEVEL                 : 6\r\nCommonProgramW6432              : C:\\Program Files\\Common Files\r\nProgramData                     : C:\\ProgramData\r\nLOCALAPPDATA                    : C:\\Users\\Administrator\\AppData\\Local\r\nSystemDrive                     : C:\r\nPsNotificationPreference        : Off\r\nProgramW6432                    : C:\\Program Files\r\n**POWERSHELL_TELEMETRY_OPTOUT     : 1**\r\nUSERDOMAIN_ROAMINGPROFILE       : TESTING\r\nCommonProgramFiles              : C:\\Program Files\\Common Files\r\nOS                              : Windows_NT\r\nTEMP                            : C:\\Users\\ADMINI1\\AppData\\Local\\Temp\r\nPSModulePath                    : C:\\Users\\Administrator\\Documents\\PowerShell\\Modules;C:\\Program Files\\PowerShell\\Modules;c:\\program files\\powershell\\7-preview\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\r\nUSERPROFILE                     : C:\\Users\\Administrator\r\nALLUSERSPROFILE                 : C:\\ProgramData\r\nPath                            : C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files\\PowerShell\\7-preview\\preview;C:\\Program Files\\Microsoft VS Code\\bin;C:\\Users\\Administrator\\AppData\\Local\\Microsoft\\WindowsApps\r\nComSpec                         : C:\\Windows\\system32\\cmd.exe\r\nUSERDOMAIN                      : TESTING\r\n\r\n\r\n\r\n",
    "created_at": "2019-11-08T12:58:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551750872",
    "id": 551750872,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTc1MDg3Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551750872/reactions"
    },
    "updated_at": "2019-11-08T12:58:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551750872",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> ctldl.windowsupdate.com\r\n\r\nThis site is used for updating root certificates.\r\n\r\nI guess there are three issue:\r\n1. DNS. If you enable recursion your DNS service does all work itself. Perhaps you need to update root DNS site list. Or you get a broken response from a stolen DNS.\r\n2. You could look logs (CAPI) to discover why your server has not an updated root certificate list.\r\n3.  I don't know why pwsh causes the request every time. I guess it could be third-party AV soft. You could remove the AV and look a result.",
    "created_at": "2019-11-08T13:43:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551815005",
    "id": 551815005,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTgxNTAwNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551815005/reactions"
    },
    "updated_at": "2019-11-08T13:43:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551815005",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "pwsh calls into [AMSI](https://docs.microsoft.com/en-us/windows/win32/amsi/antimalware-scan-interface-portal) API (anti-malware) to validate scripts which calls into the AV software that's installed.  This is probably triggering the attempt to see if there's new certs for @iSazonov's 3rd point.",
    "created_at": "2019-11-08T16:59:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551907901",
    "id": 551907901,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTkwNzkwMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551907901/reactions"
    },
    "updated_at": "2019-11-08T17:00:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551907901",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "Note that, in the VM, the only AV is the built-in Windows Defender and its realtime scanning had been disabled with:\r\n\r\n`Set-MpPreference -DisableRealtimeMonitoring $True -Force`\r\n\r\nPowerShell Core is being launched with \"pwsh.exe -noprofile\" and no third-party modules are installed.  \r\n\r\nDNS is the symptom, not the cause, of the startup delay.  Like Dongbo mentioned, it's probably a thread in pwsh launch/init that is supposed to be running in the background, but is blocking instead.  I assume this is what Dongbo is looking into now.",
    "created_at": "2019-11-08T17:28:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551918281",
    "id": 551918281,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTkxODI4MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551918281/reactions"
    },
    "updated_at": "2019-11-08T17:28:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551918281",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "What I was looking into was whether the updates notification query to `GitHub.com`, which happens on a background thread, could be the cause.\r\nHowever, given that the long delay remains after you opt'ed out the update notification (`pwsh` won't query for `GitHub.com` at all in this case), the notification update feature is likely not the cause of the symptom.\r\n\r\nI did a bit research, `ctldl.windowsupdate.com` is for updating certificate revocation lists; `checkappexec.microsoft.com` [has something to do with Windows Defender SmartScreen](https://answers.microsoft.com/en-us/windows/forum/windows_10-security/any-win10-smartscreencanonicalizerucsuritcs-link/dee54731-4e8c-4819-8f2f-3e5696b29ff7); `az764295.vo.msecnd.net` is also for [detecting malicious code](https://github.com/Microsoft/vscode/issues/70227#issuecomment-473839377).\r\n\r\nLike @SteveL-MSFT mentioned above, the AMSI APIs are hooked up with Windows Defender by default, and could be the trigger of those queries. /cc @TravisEz13 for some insights.\r\n\r\n@JasonFossen Can you please try using the `7.0.0-preview.4` version of `pwsh` on the same VM and see if it has the same problem?",
    "created_at": "2019-11-08T18:17:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551935412",
    "id": 551935412,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTkzNTQxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551935412/reactions"
    },
    "updated_at": "2019-11-08T18:17:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551935412",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "NONE",
    "body": "@daxian-dbw  Unfortunately, no luck, 7.0.0-preview.4 also shows the same startup delay.  \r\n\r\nNote that I didn't uninstall preview5 and then install preview4, I started with a fresh VM snapshot, no pwsh at all, then installed preview4. \r\n\r\nBtw, in case it makes a difference, the way I'm installing pwsh is from within ISE as local admin:\r\n\r\n`msiexec.exe /i C:\\Full\\Path\\PowerShell-7.0.0-preview.4-win-x64.msi /qn`\r\n\r\nAnd the Windows Server installation ISO was downloaded on 3.Nov.2019:  17763.737.190906-2324.rs5_release_svc_refresh_SERVER_EVAL_x64FRE_en-us_1.iso\r\n\r\nNo patches or updates have been applied.  No third-party software installed.  The VM has never had outside network access.  If I uninstall the DNS role, or if the VM is configured with no DNS servers at all as a client, then there's no pwsh startup delay because all DNS queries are failing immediately.\r\n\r\nI also set Windows Defender back to the default realtime monitoring with the following, but it didn't help:\r\n\r\n`Set-MpPreference -DisableRealtimeMonitoring $False -Force`\r\n\r\n",
    "created_at": "2019-11-08T19:51:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551967194",
    "id": 551967194,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk2NzE5NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551967194/reactions"
    },
    "updated_at": "2019-11-08T19:51:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551967194",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I don't think that disables smartscreen.  You would have to do this:\r\nhttps://www.maketecheasier.com/disable-smartscreen-filter-windows10/\r\n\n\n<blockquote><img src=\"https://www.maketecheasier.com/assets/uploads/2018/10/smartscreen-win10-featured.jpg\" width=\"48\" align=\"right\"><div>Make Tech Easier</div><div><strong><a href=\"https://www.maketecheasier.com/disable-smartscreen-filter-windows10/\">How to Disable SmartScreen Filter in Windows 10 - Make Tech Easier</a></strong></div><div>The SmartScreen filter in Windows helps protect your PC from malicious apps and files. Don't like how the SmartScreen filter works? Disable it in Windows 10</div></blockquote>",
    "created_at": "2019-11-08T20:03:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551971080",
    "id": 551971080,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk3MTA4MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551971080/reactions"
    },
    "updated_at": "2019-11-08T20:03:30Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551971080",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "NONE",
    "body": "@TravisEz13  Thanks Travis, I used all three methods described in that article, at least as far as Windows Server 2019 goes, rebooted, but it didn't help:  pwsh-preview4 still opens with an 8-second delay as it waits on recursive DNS queries.  Presumably preview5 would do the same.  Thank you though.",
    "created_at": "2019-11-08T20:18:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551975530",
    "id": 551975530,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk3NTUzMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551975530/reactions"
    },
    "updated_at": "2019-11-08T20:18:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551975530",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "How about this?  \r\nhttps://blogs.msdn.microsoft.com/winsdk/2015/02/10/reducing-the-time-to-perform-a-crl-check-on-isolated-networks/\n\n<blockquote><img src=\"https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/01/26/83/metablogapi/6685.CRL_FINAL_thumb_17540A20.png\" width=\"48\" align=\"right\"><div>Windows SDK Support Team Blog</div><div><strong><a href=\"https://blogs.msdn.microsoft.com/winsdk/2015/02/10/reducing-the-time-to-perform-a-crl-check-on-isolated-networks/\">Reducing the time to perform a CRL check on isolated networks</a></strong></div><div>    Hi everyone,   Writing today to pass along a solution to reduce the time for performing certificate revocation list processing (CRL checking).   This topic has been covered in other blogs in length in ways to lock down servers to prevent outgoing calls for CRL processing and delays.  Here are a few for example:...</div></blockquote>",
    "created_at": "2019-11-08T20:21:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551976417",
    "id": 551976417,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk3NjQxNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551976417/reactions"
    },
    "updated_at": "2019-11-08T20:21:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551976417",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "NONE",
    "body": "Thanks @TravisEz13, it might help, I didn't try it, but the fundamental problem is not that CRL checking is slow, the problem is that the pwsh process launch likely has an init/launch/createrunspace/etc thread which should be running parallel in the background to the other threads, but instead is blocking the whole shell.  Launching a new pwsh shell should present a cursor to the user as quickly as possible, even if pwsh is doing other housekeeping in the background.  Performing _any_ kind of DNS query for any purpose whatsoever should not be in the \"critical path\", so to speak, of launching a new \"pwsh.exe -noprofile\" shell with only generic default modules installed.",
    "created_at": "2019-11-08T20:32:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551979714",
    "id": 551979714,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk3OTcxNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551979714/reactions"
    },
    "updated_at": "2019-11-08T20:32:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551979714",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@JasonFossen Please provide a stack trace showing what you are saying.  Base on the information you have provided so far, I am assume that it is critical path security code.",
    "created_at": "2019-11-08T20:37:16Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551981184",
    "id": 551981184,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk4MTE4NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551981184/reactions"
    },
    "updated_at": "2019-11-08T20:37:16Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551981184",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "This article talk about the specific problem.  It can happen when we validate any local certificate, and is a WINDOWS function:\r\nhttps://support.microsoft.com/en-us/help/2677070/an-automatic-updater-of-untrusted-certificates-is-available-for-window\r\n\n\n<blockquote><img src=\"//www.microsoft.com/favicon.ico?v2\" width=\"48\" align=\"right\"></blockquote>",
    "created_at": "2019-11-08T20:51:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551985143",
    "id": 551985143,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk4NTE0Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551985143/reactions"
    },
    "updated_at": "2019-11-08T20:51:06Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551985143",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "NONE",
    "body": "Thanks @TravisEz13 for the links, but you are not seeing the pwsh startup delay as described above?  This is on a fresh, air-gapped Windows Server VM, no updates applied, NIC enabled in the isolated VM, DNS role installed in the VM, the VM is a DNS client to itself in the NIC properties, and a clean install of pwsh7-preview5.  No stack trace is needed to see the pwsh startup delay of 8 seconds.  As the old joke goes, if the problem can't be reproduced, it's not really a problem...  ;-) ",
    "created_at": "2019-11-08T20:54:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551985979",
    "id": 551985979,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk4NTk3OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551985979/reactions"
    },
    "updated_at": "2019-11-08T20:54:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551985979",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "NONE",
    "body": "Interesting, if the OpenSSH service is installed and pwsh7-preview4 is configured as an OpenSSH \"subsystem\" in the sshd_config file, then there is no startup or connection delay when connecting with:\r\n\r\n`Enter-PSSession -HostName localhost -SSHTransport -UserName administrator`\r\n\r\nWhen pwsh is run by the sshd.exe service, is there something different about running \"pwsh.exe -sshs\" by the service that avoids the launch delay?  Different launch code path?  System SID?",
    "created_at": "2019-11-08T21:08:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551990285",
    "id": 551990285,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk5MDI4NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551990285/reactions"
    },
    "updated_at": "2019-11-08T21:08:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551990285",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "My guess is that the call that cause the delay is deferred in the SSH scenario.  Something like PSReadLine would run very differently in this scenario",
    "created_at": "2019-11-08T21:36:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551998477",
    "id": 551998477,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTk5ODQ3Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551998477/reactions"
    },
    "updated_at": "2019-11-08T21:37:59Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/551998477",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "It looks to me the certificate revocation list (CRL) request is triggered by loading `PSReadLine` module. `PSReadLine.psm1` contains a signature block and the content of the file is scanned by the AMSI API.\r\nIn the ssh ssh server mode, `PSReadLine` will not be loaded at all, so you don't see the CRL request.",
    "created_at": "2019-11-08T22:59:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552023412",
    "id": 552023412,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjAyMzQxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552023412/reactions"
    },
    "updated_at": "2019-11-08T22:59:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552023412",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "We possibly can move the `PSConsoleHostReadLine` function from `PSReadLine` to a C# cmdlet to avoid the delay in the `pwsh -noprofile` scenario, but it doesn't solve the problem. As soon as you load another script module with a signature in it, you will see the delay again.",
    "created_at": "2019-11-08T23:05:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552025073",
    "id": 552025073,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjAyNTA3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552025073/reactions"
    },
    "updated_at": "2019-11-08T23:05:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552025073",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "PSReadLine is already catalog signed, perhaps we should stop individually signing the psm1 file.",
    "created_at": "2019-11-08T23:17:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552027862",
    "id": 552027862,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjAyNzg2Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 2,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 3,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552027862/reactions"
    },
    "updated_at": "2019-11-08T23:40:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552027862",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "> we should individually signing the psm1 file.\r\n\r\n@SteveL-MSFT do you mean **skip** individually signing the psm1 file? That probably work too, but it just pushes off the problem, not solving it, which might be fine depending on how `pwsh` is used in such an air-gapped environment. If no other modules with signature block will be used, then maybe the delay issue will never happen.",
    "created_at": "2019-11-08T23:24:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552029790",
    "id": 552029790,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjAyOTc5MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552029790/reactions"
    },
    "updated_at": "2019-11-08T23:27:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552029790",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@daxian-dbw yeah, a word was missing there :)\r\n\r\nIf other modules the user installs have sig blocks, then that's not something we can solve.  We can remediate it for modules we own.",
    "created_at": "2019-11-08T23:41:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552033283",
    "id": 552033283,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjAzMzI4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552033283/reactions"
    },
    "updated_at": "2019-11-08T23:41:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552033283",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@SteveL-MSFT Catalog signing is not a valid for of authenticode signing for non-windows components.  Meaning the module would not work in allSigned. \r\ncc @rkeithhill \r\nThe Microsoft SDL requires non-windows components to embed signatures where possible.",
    "created_at": "2019-11-09T18:58:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552127451",
    "id": 552127451,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyNzQ1MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552127451/reactions"
    },
    "updated_at": "2019-11-09T19:06:56Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552127451",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> Meaning the module would not work in allSigned.\r\n\r\nWell, obviously that is not acceptable. :-) The bummer here is that PSRL is 99.9% a **binary module**.  The only script requiring signing is this one function:\r\n```\r\nfunction PSConsoleHostReadLine\r\n{\r\n    Microsoft.PowerShell.Core\\Set-StrictMode -Off\r\n    [Microsoft.PowerShell.PSConsoleReadLine]::ReadLine($host.Runspace, $ExecutionContext)\r\n}\r\n```\r\nAs @daxian-dbw says \"can move the PSConsoleHostReadLine function from PSReadLine to a C# cmdlet to avoid the delay in the pwsh -noprofile scenario\"`.  While it doesn't solve the issue for other modules, ~I don't see any other modules in a new session that require sig-checking other than PSRL. So in a way, this **would** solve the PowerShell startup time problem.~ Strike that - the Management & Utility modules have their psd1 files signed.  I'm not sure how/when catalog sigs are checked.\r\n\r\n@JasonFossen what startup perf do you get with `pwsh -nop -noni`? That will avoid loading PSRL.",
    "created_at": "2019-11-09T19:24:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552129441",
    "id": 552129441,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyOTQ0MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552129441/reactions"
    },
    "updated_at": "2019-11-09T22:41:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552129441",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> If I uninstall the DNS role, or if the VM is configured with no DNS servers at all as a client, then there's no pwsh startup delay because all DNS queries are failing immediately.\r\n\r\nWhat if you assign Google DNS 4.4.4.4 on the network interface?",
    "created_at": "2019-11-09T19:49:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552131304",
    "id": 552131304,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEzMTMwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552131304/reactions"
    },
    "updated_at": "2019-11-09T19:49:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552131304",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "Hi @rkeithhill, thanks for the useful tip, there is no startup delay when running 'pwsh -noprofile -noninteractive.'  However, what I'm actually concerned about in posting this issue to GitHub is PowerShell Core's market share, not my own testing VMs.  \r\n\r\nAs the 'good word' spreads about pwsh7's compatibility and performance, more people will try it out for the first time, especially in comparison to prior versions of pwsh.  Thousands of these people, however, will be in air gaps (like half the DoD), or using isolated testing VMs, or sitting at training computers, or otherwise installing pwsh7 on systems that are clients to DNS servers which do not respond correctly or fast enough.  These people are not going to blame DNS, AMSI, Windows Defender, Authenticode or CRLs for pwsh's slow startup speed.  Every time they launch pwsh and have to wait 8 seconds, they are going to think, \"PowerShell Core sucks.\"  Then some of them will tell their friends and post on social media how \"PowerShell Core sucks.\"  And for Linux admins in particular, who are accustomed to terminals opening more-or-less instantaneously, an 8-second delay is an _eternity_.  When they figure out that it's because pwsh is querying DNS to \"phone home\" back to Microsoft (the reason why won't matter), it's not going to improve their opinion of PowerShell or Microsoft, to put it mildly.  So, overall, I know we're talking about a small percentage of potential pwsh7 users, but why have this unnecessary, self-imposed issue at all? ",
    "created_at": "2019-11-09T22:06:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552141966",
    "id": 552141966,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0MTk2Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552141966/reactions"
    },
    "updated_at": "2019-11-09T22:06:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552141966",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Could you try this right after you've started with `pwsh -nop -noni`:\r\n```\r\nmeasure-command { ipmo Microsoft.PowerShell.Management }\r\n```\r\nHow long does that take?  Then restart with `pwsh -nop -noni` and run:\r\n```\r\nmeasure-command { ipmo PSReadLine }\r\n```\r\nYou mention this being an issue on Linux.  I don't think any of the Authenticode cert checking applies to Linux.  In fact, execution policy (AllSigned, RemoteSigned, etc) does not apply at all on non-Windows OSs AFAICT.  ",
    "created_at": "2019-11-09T22:34:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552143899",
    "id": 552143899,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0Mzg5OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552143899/reactions"
    },
    "updated_at": "2019-11-09T22:34:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552143899",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  },
  {
    "author_association": "NONE",
    "body": "`measure-command { ipmo Microsoft.PowerShell.Management }`\r\n\r\n9.95 milliseconds avg in 3 new shells \r\n\r\n`measure-command { ipmo PSReadLine }`\r\n\r\n9.52 seconds avg in 3 new shells (recursion enabled on DNS server)\r\n83.1 milliseconds avg in 3 new shells (recursion disabled on DNS server) \r\n\r\nGood point about Linux, I've only been testing pwsh7 on Windows so far, I'll try it out!",
    "created_at": "2019-11-09T22:57:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552145223",
    "id": 552145223,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0NTIyMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552145223/reactions"
    },
    "updated_at": "2019-11-09T22:57:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552145223",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@rkeithhill The catalog signatures on modules are checked when you upload **to** the gallery.\r\nWe really need to move to nuget package signing which theoretically can work cross platform.  ",
    "created_at": "2019-11-09T23:14:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552146214",
    "id": 552146214,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0NjIxNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552146214/reactions"
    },
    "updated_at": "2019-11-09T23:14:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552146214",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@JasonFossen One last test if you don't mind.  Go into `C:\\Program Files\\PowerShell\\7-preview\\Modules\\PSReadLine` and make a backup copy of `PSReadLine.psm1`.  Then open the original `PSReadLine.psm1` and rip out the signature block from beginning to end and save that file.  Then run `pwsh -nop -noni` followed by `measure-command { ipmo PSReadLine }`.  In theory, that should be fast.  Note that this would fail if your execution policy were set to `AllSigned`.",
    "created_at": "2019-11-09T23:48:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552147961",
    "id": 552147961,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0Nzk2MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552147961/reactions"
    },
    "updated_at": "2019-11-09T23:48:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552147961",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  },
  {
    "author_association": "NONE",
    "body": "@rkeithhill  It was fun to try, but no luck:  9.39 seconds avg, 3 tests, execution policy = bypass.   :-\\ \r\n\r\n",
    "created_at": "2019-11-09T23:57:36Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552148493",
    "id": 552148493,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0ODQ5Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552148493/reactions"
    },
    "updated_at": "2019-11-09T23:57:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552148493",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Thanks. Then perhaps it's not the module signature but the Authenticode signature on `Microsoft.PowerShell.PSReadLine2.dll`.  That kind of makes sense because the Management & Utility modules (their psd1 files), which load fast, are also module signed.  Not sure how to verify that though. \r\n \r\nWe had a similar issue on a licensing project I worked on 12 years ago. It was checking the calling assembly's Authenticode signature and on air-gapped systems (never connected to the internet - common for some of our DoD subcontractor customers), there would be this ~30 delay in that code.  I don't remember exactly how we addressed that.  Seems like it involved us installing a root cert on these machines.",
    "created_at": "2019-11-10T00:09:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552149291",
    "id": 552149291,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE0OTI5MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552149291/reactions"
    },
    "updated_at": "2019-11-10T00:17:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552149291",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  },
  {
    "author_association": "NONE",
    "body": "@rkeithhill  Fortunately there is no startup delay, as you suggested, for pwsh7-preview5 on Ubuntu 18.04 on the same isolated network using the same DNS server that has recursion enabled.  There were DNS queries for api.github.com and dc.services.visualstudio.com, but these were in the background and did not block the shell. No OPTOUT environment variables were set and PSReadLine loaded normally.  ",
    "created_at": "2019-11-10T00:45:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552151177",
    "id": 552151177,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE1MTE3Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552151177/reactions"
    },
    "updated_at": "2019-11-10T00:45:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552151177",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "It seems that we should minimally provide some information to the user if there is a delay on startup with an aka.ms link to documentation explaining what is happening and what options they have",
    "created_at": "2019-11-11T18:44:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552564148",
    "id": 552564148,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjU2NDE0OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552564148/reactions"
    },
    "updated_at": "2019-11-11T18:44:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552564148",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "> That kind of makes sense because the Management & Utility modules (their psd1 files), which load fast, are also module signed.\r\n\r\n@rkeithhill There is an optimization to the psd1 files. If the psd1 file contains a pure Hashtable expression and it's considered safe (by using the `IsSafeValueVisitor`), then the security check is skipped for the psd1 file. The psd1 files for Management & Utility modules are skipped because of this. But you are right, from what @JasonFossen described, loading `Utility` module still triggers the query, and that suggests the dll signature is playing a role here.\r\n",
    "created_at": "2019-11-11T23:39:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-552667564",
    "id": 552667564,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjY2NzU2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552667564/reactions"
    },
    "updated_at": "2019-11-11T23:39:51Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552667564",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@JasonFossen I profiled this and verified this is a security check of code we are actually running and if you would like to speed up this check, please adjust the settings as described here:\r\nhttps://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551976417",
    "created_at": "2019-11-13T21:22:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553609273",
    "id": 553609273,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzYwOTI3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553609273/reactions"
    },
    "updated_at": "2019-11-13T21:22:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553609273",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "NONE",
    "body": "@TravisEz13  Thank you Travis, that is useful.  Unfortunately, it will only be useful to new pwsh users who research the issue (maybe finding it here).  I think most people who encounter the problem will simply blame PowerShell Core and go back to Windows PowerShell, which has no startup delay.  ",
    "created_at": "2019-11-13T21:53:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553621237",
    "id": 553621237,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzYyMTIzNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553621237/reactions"
    },
    "updated_at": "2019-11-13T21:53:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553621237",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/19618861?v=4",
      "events_url": "https://api.github.com/users/JasonFossen/events{/privacy}",
      "followers_url": "https://api.github.com/users/JasonFossen/followers",
      "following_url": "https://api.github.com/users/JasonFossen/following{/other_user}",
      "gists_url": "https://api.github.com/users/JasonFossen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/JasonFossen",
      "id": 19618861,
      "login": "JasonFossen",
      "node_id": "MDQ6VXNlcjE5NjE4ODYx",
      "organizations_url": "https://api.github.com/users/JasonFossen/orgs",
      "received_events_url": "https://api.github.com/users/JasonFossen/received_events",
      "repos_url": "https://api.github.com/users/JasonFossen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/JasonFossen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JasonFossen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/JasonFossen"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@JasonFossen We are considering mitigations.  Currently, the best fix, without changes to Windows or removing features is to notify uses of the situation.",
    "created_at": "2019-11-13T23:57:06Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553660189",
    "id": 553660189,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzY2MDE4OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553660189/reactions"
    },
    "updated_at": "2019-11-13T23:57:06Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553660189",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Here is the profile:\r\n![image](https://user-images.githubusercontent.com/10873629/68814679-42f77f80-062e-11ea-9ce5-949736f8deb5.png)\r\n",
    "created_at": "2019-11-13T23:57:54Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553660383",
    "id": 553660383,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MzY2MDM4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553660383/reactions"
    },
    "updated_at": "2019-11-13T23:57:54Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553660383",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "For reference #10309",
    "created_at": "2019-11-14T07:20:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553759588",
    "id": 553759588,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1Mzc1OTU4OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553759588/reactions"
    },
    "updated_at": "2019-11-14T07:20:51Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/553759588",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553759588 this wasn't CDXML related.",
    "created_at": "2019-11-14T18:31:48Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-554018952",
    "id": 554018952,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDAxODk1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554018952/reactions"
    },
    "updated_at": "2019-11-14T18:31:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554018952",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@jasonfossen The changes to fix this would be significant.  Some possible mitigations would require an RFC.  I've opened as discussion issue it to get feedback before we write a detailed RFC on whatever is chosen to go forward with:  https://github.com/PowerShell/PowerShell/issues/11074\r\nI'm going to close this issue as the discussion should track this going forward.",
    "created_at": "2019-11-14T19:38:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-554045869",
    "id": 554045869,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDA0NTg2OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554045869/reactions"
    },
    "updated_at": "2019-11-15T01:05:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554045869",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> [#10983 (comment)](https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-553759588) this wasn't CDXML related.\r\n\r\nThe same GetSaferPolicy() is used.",
    "created_at": "2019-11-15T06:37:34Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-554233796",
    "id": 554233796,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDIzMzc5Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554233796/reactions"
    },
    "updated_at": "2019-11-15T06:37:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554233796",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as answered and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
    "created_at": "2019-11-16T12:00:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-554630693",
    "id": 554630693,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NDYzMDY5Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554630693/reactions"
    },
    "updated_at": "2019-11-16T12:00:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/554630693",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  },
  {
    "author_association": "NONE",
    "body": "> @JasonFossen I profiled this and verified this is a security check of code we are actually running and if you would like to speed up this check, please adjust the settings as described here:\r\n> [#10983 (comment)](https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-551976417)\r\n\r\nFor anyone who finds this article here via Google, here's a quick answer on how **we** \"solved\" it for us, for systems that don't have any internet connection.\r\n\r\nNote from me: \r\n>I spent a few hours looking for a solution to this \"problem\". As @JasonFossen also mentioned, the startup performance of Powershell 7 discourages new users who want to make a switch from Powershell 5 to Powershell 7 or even coming from Linux/Unix/macOS. (Already experienced myself several times). With a few exceptions (WSUS/SCCM etc.), all of our servers have no Internet connection at all, and many companies will feel the same way.\r\n\r\nAnother note:\r\n> Could you try this right after you've started with `pwsh -nop -noni`:\r\n> \r\n> ```\r\n> measure-command { ipmo Microsoft.PowerShell.Management }\r\n> ```\r\n> \r\n> How long does that take? Then restart with `pwsh -nop -noni` and run:\r\n> \r\n> ```\r\n> measure-command { ipmo PSReadLine }\r\n> ```\r\n\r\n- Result: **15** seconds waiting on importing PSReadLine.\r\n\r\n\r\nThe following two registry values will reduce the time that Windows waits for a Certificate Revocation List retrieval. This is relevant for connections that require certificate validation (for example, when connecting to a target using SSL). This will also speed up the start time of powershell after setting these two registry keys.\r\n\r\n| :zap:        Only enable these settings if your machine isn't exposed to the Internet or doesn't have access to a Certificate Revocation List! Please also keep in mind that this is not a global solution. The problem with CRL checking is different from application to application, from server to server! Please also always think about how to provide your servers with the latest root certificates as well as an up-to-date Certificate Revocation List. |\r\n|-----------------------------------------|\r\n\r\nThe following registry keys and values will reduce the timeout as mentioned above to **1 second**. \r\n\r\n```pwsh\r\n# Create the keys if missing \r\nIf((Test-Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\SystemCertificates\\ChainEngine') -eq $false ) { New-Item -Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\SystemCertificates\\ChainEngine' -Force -ErrorAction SilentlyContinue }\r\nIf((Test-Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\SystemCertificates\\ChainEngine\\Config') -eq $false ) { New-Item -Path 'HKLM:\\SOFTWARE\\Policies\\Microsoft\\SystemCertificates\\ChainEngine\\Config' -Force -ErrorAction SilentlyContinue }\r\n\r\n# Set Timeout values to 1 second (1000 ms)\r\nNew-ItemProperty -Path \"HKLM:\\SOFTWARE\\Policies\\Microsoft\\SystemCertificates\\ChainEngine\\Config\" -Name ChainUrlRetrievalTimeoutMilliseconds -Value 1000 -PropertyType DWORD -Force\r\nNew-ItemProperty -Path \"HKLM:\\SOFTWARE\\Policies\\Microsoft\\SystemCertificates\\ChainEngine\\Config\" -Name ChainRevAccumulativeUrlRetrievalTimeoutMilliseconds -Value 1000 -PropertyType DWORD -Force\r\n```\r\n\r\nYou can also specify these settings via `Domain Group Policy` or locally via `gpedit.msc`:\r\n\r\n`Local Computer Policy\\Computer Configuration\\Windows Settings\\Security Settings\\Public Key Policies`\r\n\r\n![image](https://user-images.githubusercontent.com/6794362/108064736-62652f80-705d-11eb-95b1-410358726940.png)\r\n\r\nIf something is wrong, I'm wrong, or the post is inappropriate, let me know.\r\n\r\nRené",
    "created_at": "2021-02-16T12:56:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-779819256",
    "id": 779819256,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTgxOTI1Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 8,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 8,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/779819256/reactions"
    },
    "updated_at": "2021-02-16T12:58:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/779819256",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6794362?v=4",
      "events_url": "https://api.github.com/users/eizedev/events{/privacy}",
      "followers_url": "https://api.github.com/users/eizedev/followers",
      "following_url": "https://api.github.com/users/eizedev/following{/other_user}",
      "gists_url": "https://api.github.com/users/eizedev/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/eizedev",
      "id": 6794362,
      "login": "eizedev",
      "node_id": "MDQ6VXNlcjY3OTQzNjI=",
      "organizations_url": "https://api.github.com/users/eizedev/orgs",
      "received_events_url": "https://api.github.com/users/eizedev/received_events",
      "repos_url": "https://api.github.com/users/eizedev/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/eizedev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eizedev/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/eizedev"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "This is a nice write up of how to get perf for disconnected systems for powershell.  Perhaps we should have something like this in the docs.",
    "created_at": "2021-02-16T21:54:47Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10983#issuecomment-780142106",
    "id": 780142106,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10983",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDE0MjEwNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/780142106/reactions"
    },
    "updated_at": "2021-02-16T21:54:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/780142106",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  }
]
