[
  {
    "author_association": "CONTRIBUTOR",
    "body": "@mklement0 Correct me if I'm wrong, but, don't we have to avoid using `pwsh` as a login shell for various reasons?",
    "created_at": "2018-01-25T20:55:37Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6027#issuecomment-360597655",
    "id": 360597655,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDU5NzY1NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360597655/reactions"
    },
    "updated_at": "2018-01-25T20:55:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360597655",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I've found at least one on mac... the environment doesn't get loaded properly...",
    "created_at": "2018-01-25T21:39:34Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6027#issuecomment-360609235",
    "id": 360609235,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDYwOTIzNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360609235/reactions"
    },
    "updated_at": "2018-01-25T21:39:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360609235",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "#975",
    "created_at": "2018-01-25T22:19:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6027#issuecomment-360619750",
    "id": 360619750,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDYxOTc1MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360619750/reactions"
    },
    "updated_at": "2018-01-25T22:19:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360619750",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@TravisEz13: \r\n\r\nIf you use `sudo chsh -s ...`, you'll change the shell for the _root_ user; please use just\r\n`chsh -s /usr/local/bin/pwsh`.\r\n\r\nFor ad-hoc use, here's an idempotent command for adding `pwsh` to the list of permissible default shells:\r\n\r\n```sh\r\ngrep -x /usr/local/bin/pwsh /etc/shells || sudo sh -c 'echo /usr/local/bin/pwsh >> /etc/shells'\r\n```\r\n\r\n@markekraus: I'll address the other issues soon.",
    "created_at": "2018-01-25T23:03:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6027#issuecomment-360630090",
    "id": 360630090,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDYzMDA5MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 2,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360630090/reactions"
    },
    "updated_at": "2018-01-26T01:31:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360630090",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "In general, using `pwsh` as one's default shell works fine on macOS (I've only tested superficially), _except_ - and that's a big except - for the fact that it doesn't process `/etc/profile`, where important system-wide initializations happen.\r\n\r\nThe previously discussed issue is that **`/etc/profile` cannot be read directly by PowerShell**, because it is **coded for POSIX-compliant shells** (`sh`; as an aside, note that the language constructs therefore permitted in that file are only a _subset_ of what `bash` supports).\r\n\r\nOn **macOS** specifically, the only important thing that `/etc/profile` does (at least by default) is to add important entries to `$env:PATH` \r\n\r\nFortunately, that is done via an _external utility_, `/usr/libexec/path_helper`, which you can also call from PS; e.g., by placing the following in your `$PROFILE` file (note the need for extra measures, given that `$PROFILE` is sourced for _every_ PowerShell instance by default):\r\n\r\n```powershell\r\n  if ($IsMacOS -and $env:PATH -notmatch '\\b/usr/local/bin\\b') { # prevent repeated replacement of $env:PATH\r\n    & { # Use a child scope, so that helper function setenv() doesn't linger.\r\n      function setenv ($variable, $value) { [Environment]::SetEnvironmentVariable($variable, $value)  }\r\n      # `/usr/libexec/path_helper -c` conveniently outputs something like 'setenv PATH \"/usr/local/bin:...\"',\r\n      # which we can pass to Invoke-Expression, which then calls our transient `setenv()` function.\r\n      Invoke-Expression (/usr/libexec/path_helper -c)  \r\n    }\r\n  }\r\n```\r\n\r\n----\r\n\r\nAlso, **_GUI apps_ on macOS do NOT rely on `/etc/profile`; the latter's importance seems limited to _shells_**.\r\n\r\nOn Linux distros, ~~this **can get trickier **, where **the entire system _may_ depend on initializations performed in `/etc/profile`** (I have not delved into this), and where important `$env:PATH` additions are _not_ conveniently obtainable from a single utility call.~~ Most likely not a problem, after all - see link below.\r\n\r\nComment https://github.com/PowerShell/PowerShell/issues/975#issuecomment-331049792 from the (lengthy) linked issue tries to summarize the problem.\r\n\r\n\r\n\r\n\r\n",
    "created_at": "2018-01-25T23:45:50Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6027#issuecomment-360638685",
    "id": 360638685,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDYzODY4NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360638685/reactions"
    },
    "updated_at": "2019-01-22T16:12:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360638685",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I updated the issue with more details on the actual case and removed `sudo` from the repro as @markekraus  suggested.  \r\n\r\nI think I agree with @mklement0  that the shell is mostly usable and I would like to easily be able to switch after I install.  Even more so, now that I have the utility that @mklement0 suggested.",
    "created_at": "2018-01-26T02:32:02Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6027#issuecomment-360666663",
    "id": 360666663,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDY2NjY2Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360666663/reactions"
    },
    "updated_at": "2018-01-26T02:32:02Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360666663",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  }
]
