[
  {
    "author_association": "MEMBER",
    "body": "@ChristophB125 thanks for the feedback\r\n\r\n`-UserName` is not required as it will try public key auth by default.  `-keyfilepath` is only required if the key file isn't the default locations (under ~/.ssh)\r\n\r\nI don't exactly understand your second point, can you provide a bit more detail?  Perhaps some repro steps indicating what you expected to happen and what actually happened?",
    "created_at": "2017-04-19T16:14:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3597#issuecomment-295328064",
    "id": 295328064,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3597",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTMyODA2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/295328064/reactions"
    },
    "updated_at": "2017-04-19T16:14:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/295328064",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "@SteveL-MSFT :  Some details might clear it up: I am only talking about the case of non-interactive remoting for the purpose of automation and I am remoting from a Windows 2016 machine (client). The target machine (host) into which I wanted to remote was configured to have the public RSA key appended to ~/.ssh/authorized_keys by following the common guides for 'passwordless SSH'. If I omitted the `-UserName` parameter then it would always prompt me for the password in the 2 following cases:\r\n* I first made non-interactive remoting work by providing the path to the private RSA key using the `-KeyFilePath` option\r\n* The second improved approach was to add the identity to the ssh-agent by calling `ssh-add.exe $PathToPrivateRsaKey` so that I could omit the `-KeyFilePath` parameter\r\n\r\nDoes that make sense? As I said it was working at the end but that path was not always clear as I had to collect documentation bits together from here, the Win32-OpenSSH repo and general SSH guides.\r\n\r\nThe 2nd point might become more clear by looking at an example: I was configuring a CI build agent for OpenSSH-PowerShell remoting by RDP-ing into it and configuring it using my personal admin account. However, when the agent itself (running under a special automation account) was executing the OpenSSH-PowerShell cmdlets, it did not work any more. That's why I wanted to share that not only the user account matters under which the RSA keys get generated (using the  shh-keygen command) but also the user account that executes the `ssh-add` command (that add the identity of the private key to the ssh-agent service).\r\nOverall the intent was to not only share my findings but also double check my understanding of it in an effort to improve documentation.",
    "created_at": "2017-04-19T19:35:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/3597#issuecomment-295405659",
    "id": 295405659,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/3597",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTQwNTY1OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/295405659/reactions"
    },
    "updated_at": "2017-04-19T19:41:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/295405659",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/25370958?v=4",
      "events_url": "https://api.github.com/users/ChristophB125/events{/privacy}",
      "followers_url": "https://api.github.com/users/ChristophB125/followers",
      "following_url": "https://api.github.com/users/ChristophB125/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChristophB125/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ChristophB125",
      "id": 25370958,
      "login": "ChristophB125",
      "node_id": "MDQ6VXNlcjI1MzcwOTU4",
      "organizations_url": "https://api.github.com/users/ChristophB125/orgs",
      "received_events_url": "https://api.github.com/users/ChristophB125/received_events",
      "repos_url": "https://api.github.com/users/ChristophB125/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ChristophB125/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChristophB125/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ChristophB125"
    }
  }
]
