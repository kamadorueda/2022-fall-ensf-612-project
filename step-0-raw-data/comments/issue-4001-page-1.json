[
  {
    "author_association": "MEMBER",
    "body": "I had a conversation with @BrucePay about this issue. \r\n\r\nCurrently both instance methods and static methods of a PowerShell class are bound to a [Runspace, SessionState] by default, and the execution of the methods will happen in that environment.\r\n\r\nThis makes PowerShell class not friendly to concurrent execution in PowerShell (via RunspacePool or multiple Runspaces), because if when calls to the methods are not in the bound [Runspace, SessionState], they will be sent there to run instead of running in the current Runspace.\r\n\r\nMaybe a better semantics is:\r\nWhen calling instance/static methods, if the current thread that makes the call has a default Runspace associated with it, then the methods runs in that Runspace; if the current thread doesn't have a default Runspace associated with it, then the bound [Runspace, SessionState] will be used to run the methods.",
    "created_at": "2017-06-13T20:05:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4001#issuecomment-308232255",
    "id": 308232255,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4001",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODIzMjI1NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/308232255/reactions"
    },
    "updated_at": "2017-06-13T20:05:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/308232255",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I think it's worth revisiting how we bind script blocks to session state.\r\n\r\nIn my mind, the current implementation is meant to simulate early binding primarily for script blocks in module scope. I'm not sure the current implementation is useful elsewhere.\r\n\r\nI'd also like to avoid semantics that apply to class methods because the problem is broader than that. For example, invoking a script block in a background runspace doesn't always work like people expect.",
    "created_at": "2017-06-13T23:38:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4001#issuecomment-308278531",
    "id": 308278531,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4001",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODI3ODUzMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/308278531/reactions"
    },
    "updated_at": "2017-06-13T23:38:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/308278531",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "While experimenting with this I found a related bug where the engine event mechanism used to marshal a script block back to the original runspace/session state doesn't work.  The result is running the script block on a different runspace/thread and corrupted state errors (\"index out of range\", \"global scope cannot be removed\", etc.).\r\nhttps://github.com/PowerShell/PowerShell/issues/4003\r\n",
    "created_at": "2017-06-14T20:08:56Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4001#issuecomment-308543742",
    "id": 308543742,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4001",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwODU0Mzc0Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/308543742/reactions"
    },
    "updated_at": "2017-06-14T20:08:56Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/308543742",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14019529?v=4",
      "events_url": "https://api.github.com/users/PaulHigin/events{/privacy}",
      "followers_url": "https://api.github.com/users/PaulHigin/followers",
      "following_url": "https://api.github.com/users/PaulHigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulHigin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PaulHigin",
      "id": 14019529,
      "login": "PaulHigin",
      "node_id": "MDQ6VXNlcjE0MDE5NTI5",
      "organizations_url": "https://api.github.com/users/PaulHigin/orgs",
      "received_events_url": "https://api.github.com/users/PaulHigin/received_events",
      "repos_url": "https://api.github.com/users/PaulHigin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PaulHigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulHigin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PaulHigin"
    }
  }
]
