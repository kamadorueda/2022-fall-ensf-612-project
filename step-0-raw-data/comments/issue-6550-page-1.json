[
  {
    "author_association": "CONTRIBUTOR",
    "body": "The default encoding in PowerShell Core is now UTF-8 (without a BOM when creating files).\r\n\r\nThat means that a Windows 1252-encoded file - in the absence of a BOM defining it as such (there is none for Windows 1252) - is now interpreted as _UTF-8_.\r\n\r\nThe upshot is that **you must now tell `Get-Content` what encoding to assume - unless it is UTF-8 or there is a BOM.**\r\n\r\n**Regrettably, `Get-Content` doesn't currently allow you to specify Windows 1252**, because `Default` now represents UTF-8 and no longer the active \"ANSI\" code page (such as Windows 1252), as on Windows PowerShell, and you cannot pass a `[System.Text.Encoding]` instance directly.\r\n\r\n**This is an oversight that must be corrected.**\r\n\r\nMy suggestion: add an `ANSI` encoding enumeration value on Windows that represents the system's legacy \"ANSI\" code page (e.g., Windows 1252 on US-English systems).\r\n\r\n---\r\n\r\nThe - cumbersome - **workaround** to use in the meantime requires use of the .NET framework directly:\r\n\r\n    $content = [IO.File]::ReadAllText($_.FullName, [text.encoding]::GetEncoding(1252))\r\n\r\nOr, more generically:\r\n\r\n    $content = [IO.File]::ReadAllText($_.FullName, [text.encoding]::GetEncoding([cultureinfo]::CurrentCulture.TextInfo.ANSICodePage))\r\n",
    "created_at": "2018-04-03T14:26:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378268909",
    "id": 378268909,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODI2ODkwOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378268909/reactions"
    },
    "updated_at": "2018-04-03T14:26:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378268909",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@mklement0 \r\n\r\nPowerShell Core 6.0 accepts `System.Text.Encoding` class in `-Encoding` parameter. (#5080)\r\n\r\nWe can write as follow.\r\n\r\n```powershell\r\n$content = $_ | Get-Content -Encoding ([System.Text.Encoding]::GetEncoding(1252))\r\n\r\n# or\r\n\r\n$content = $_ | Get-Content -Encoding ([System.Text.Encoding]::GetEncoding([cultureinfo]::CurrentCulture.TextInfo.ANSICodePage))\r\n```\r\n\r\nAdditionally, `WindowsLegacyg` is proposed in [RFC](https://github.com/PowerShell/PowerShell-RFC/blob/master/2-Draft-Accepted/RFC0020-DefaultFileEncoding.md).\r\n(but `WindowsLegacyg` is not implemented yet...)\r\n\r\nIt is better to discuss this RFC if compatibility is necessary.\r\n\r\n----\r\n\r\nMaybe #5204 related.\r\n\r\n",
    "created_at": "2018-04-04T03:26:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378468814",
    "id": 378468814,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQ2ODgxNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378468814/reactions"
    },
    "updated_at": "2018-04-04T03:26:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378468814",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/720127?v=4",
      "events_url": "https://api.github.com/users/stknohg/events{/privacy}",
      "followers_url": "https://api.github.com/users/stknohg/followers",
      "following_url": "https://api.github.com/users/stknohg/following{/other_user}",
      "gists_url": "https://api.github.com/users/stknohg/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/stknohg",
      "id": 720127,
      "login": "stknohg",
      "node_id": "MDQ6VXNlcjcyMDEyNw==",
      "organizations_url": "https://api.github.com/users/stknohg/orgs",
      "received_events_url": "https://api.github.com/users/stknohg/received_events",
      "repos_url": "https://api.github.com/users/stknohg/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/stknohg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stknohg/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/stknohg"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@stknohg: \r\n\r\nAh, thanks. Somehow I had wrongly convinced myself that you couldn't directly pass a `System.Text.Encoding` instance - thanks for clarifying that. \r\n\r\nI think the discussion around the linked RFC eventually led to the current Core behavior of globally defaulting to BOM-less UTF-8 - see https://github.com/PowerShell/PowerShell-RFC/issues/71\r\n\r\nThe `WindowsLegacy` meta-setting was intended for a never-implemented `$PSDefaultEncoding` preference variable, and was meant to _globally_ revert to the old, inconsistent encoding behavior for the sake of backward compatibility - an approach that I personally think is not worth pursuing.\r\n\r\nAgain, given that `OEM` - the OEM code page implied by the legacy system locale - already exists as a predefined encoding enumeration value, it should be complemented with an `ANSI` identifier for the \"ANSI\" code page implied by the system locale (on Windows only; the equivalent of what `Default` represents for _Windows_ PowerShell).\r\n\r\n",
    "created_at": "2018-04-04T03:40:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378470584",
    "id": 378470584,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQ3MDU4NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378470584/reactions"
    },
    "updated_at": "2018-04-04T03:42:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378470584",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Certainly, to introduce `ANSI` is simpler and not *globally* as you say.\r\nI think it's good.",
    "created_at": "2018-04-04T03:59:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378473101",
    "id": 378473101,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODQ3MzEwMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378473101/reactions"
    },
    "updated_at": "2018-04-04T03:59:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378473101",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/720127?v=4",
      "events_url": "https://api.github.com/users/stknohg/events{/privacy}",
      "followers_url": "https://api.github.com/users/stknohg/followers",
      "following_url": "https://api.github.com/users/stknohg/following{/other_user}",
      "gists_url": "https://api.github.com/users/stknohg/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/stknohg",
      "id": 720127,
      "login": "stknohg",
      "node_id": "MDQ6VXNlcjcyMDEyNw==",
      "organizations_url": "https://api.github.com/users/stknohg/orgs",
      "received_events_url": "https://api.github.com/users/stknohg/received_events",
      "repos_url": "https://api.github.com/users/stknohg/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/stknohg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stknohg/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/stknohg"
    }
  },
  {
    "author_association": "NONE",
    "body": "The workaround proposed by mklement0 works for me.\r\nI propose to close this issue since the rest of the discussion is mainly focused on BM-less UTF8 which is indeed treated in PowerShell/PowerShell-RFC#71.\r\nThanks.",
    "created_at": "2018-04-04T13:25:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378598613",
    "id": 378598613,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODU5ODYxMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378598613/reactions"
    },
    "updated_at": "2018-04-04T13:25:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378598613",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/38039500?v=4",
      "events_url": "https://api.github.com/users/Calimerou/events{/privacy}",
      "followers_url": "https://api.github.com/users/Calimerou/followers",
      "following_url": "https://api.github.com/users/Calimerou/following{/other_user}",
      "gists_url": "https://api.github.com/users/Calimerou/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Calimerou",
      "id": 38039500,
      "login": "Calimerou",
      "node_id": "MDQ6VXNlcjM4MDM5NTAw",
      "organizations_url": "https://api.github.com/users/Calimerou/orgs",
      "received_events_url": "https://api.github.com/users/Calimerou/received_events",
      "repos_url": "https://api.github.com/users/Calimerou/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Calimerou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Calimerou/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Calimerou"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@Calimerou: Alternatively, we could retitle your issue and modify the initial post to propose the missing `ANSI` encoding-enumeration value, as discussed. If you prefer my creating a new issue instead, let me know.\r\n",
    "created_at": "2018-04-04T13:42:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378603941",
    "id": 378603941,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODYwMzk0MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378603941/reactions"
    },
    "updated_at": "2018-04-04T13:42:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378603941",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "I would prefer yours. \r\nThanks in advance.",
    "created_at": "2018-04-04T15:38:46Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-378645555",
    "id": 378645555,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3ODY0NTU1NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378645555/reactions"
    },
    "updated_at": "2018-04-04T15:38:46Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/378645555",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/38039500?v=4",
      "events_url": "https://api.github.com/users/Calimerou/events{/privacy}",
      "followers_url": "https://api.github.com/users/Calimerou/followers",
      "following_url": "https://api.github.com/users/Calimerou/following{/other_user}",
      "gists_url": "https://api.github.com/users/Calimerou/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Calimerou",
      "id": 38039500,
      "login": "Calimerou",
      "node_id": "MDQ6VXNlcjM4MDM5NTAw",
      "organizations_url": "https://api.github.com/users/Calimerou/orgs",
      "received_events_url": "https://api.github.com/users/Calimerou/received_events",
      "repos_url": "https://api.github.com/users/Calimerou/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Calimerou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Calimerou/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Calimerou"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "For now, I work around this issue in my scripts as follows:\r\n\r\n````\r\n    $iswinps = ($null, 'Desktop') -contains $PSVersionTable.PSEdition\r\n    if (!$iswinps)\r\n    {\r\n        $encoding = [System.Text.Encoding]::GetEncoding(1252)\r\n    }\r\n    else\r\n    {\r\n        $encoding = [Microsoft.PowerShell.Commands.FileSystemCmdletProviderEncoding]::Default\r\n    }\r\n    \r\n    Get-Content -Encoding $encoding ...\r\n\r\n````\r\n\r\nHTH\r\n",
    "created_at": "2019-07-18T14:54:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6550#issuecomment-512850878",
    "id": 512850878,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6550",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjg1MDg3OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/512850878/reactions"
    },
    "updated_at": "2019-07-20T08:36:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/512850878",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12860484?v=4",
      "events_url": "https://api.github.com/users/sba923/events{/privacy}",
      "followers_url": "https://api.github.com/users/sba923/followers",
      "following_url": "https://api.github.com/users/sba923/following{/other_user}",
      "gists_url": "https://api.github.com/users/sba923/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/sba923",
      "id": 12860484,
      "login": "sba923",
      "node_id": "MDQ6VXNlcjEyODYwNDg0",
      "organizations_url": "https://api.github.com/users/sba923/orgs",
      "received_events_url": "https://api.github.com/users/sba923/received_events",
      "repos_url": "https://api.github.com/users/sba923/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/sba923/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sba923/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/sba923"
    }
  }
]
