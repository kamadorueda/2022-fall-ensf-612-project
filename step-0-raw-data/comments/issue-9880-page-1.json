[
  {
    "author_association": "COLLABORATOR",
    "body": "@PrzemyslawKlys I tried reproducing this on my Mac and it gave me the dynamic parameters inside the scriptblock.\r\n\r\nHave you tried reproducing this in the PowerShell console on your machine?\r\n\r\nWe get our completions from PowerShell, so it might be a Windows PowerShell bug.",
    "created_at": "2019-06-12T21:07:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501455890",
    "id": 501455890,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTQ1NTg5MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501455890/reactions"
    },
    "updated_at": "2019-06-12T21:07:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501455890",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "<img width=\"804\" alt=\"Screen Shot 2019-06-12 at 14 08 14\" src=\"https://user-images.githubusercontent.com/7009879/59386452-8f573000-8d1b-11e9-8b33-ce2ee6de6cc0.png\">\r\n",
    "created_at": "2019-06-12T21:08:36Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501456160",
    "id": 501456160,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTQ1NjE2MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501456160/reactions"
    },
    "updated_at": "2019-06-12T21:08:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501456160",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "NONE",
    "body": "You need to open another script block to reproduce it.\r\n\r\n```powershell\r\nfunction New-HTMLTab11 {\r\n    [CmdLetBinding(DefaultParameterSetName = 'FontAwesomeBrands')]\r\n    param(\r\n        [parameter(ParameterSetName = \"FontAwesomeBrands\")]\r\n        [parameter(ParameterSetName = \"FontAwesomeRegular\")]\r\n        [parameter(ParameterSetName = \"FontAwesomeSolid\")]\r\n        [Parameter(Mandatory = $false, Position = 0)][ValidateNotNull()][ScriptBlock] $HtmlData = $(Throw \"No curly brace?)\"),\r\n        [parameter(ParameterSetName = \"FontAwesomeBrands\")]\r\n        [parameter(ParameterSetName = \"FontAwesomeRegular\")]\r\n        [parameter(ParameterSetName = \"FontAwesomeSolid\")]\r\n        [alias('TabHeading')][Parameter(Mandatory = $false, Position = 1)][String]$Heading,\r\n        [parameter(ParameterSetName = \"FontAwesomeBrands\")]\r\n        [parameter(ParameterSetName = \"FontAwesomeRegular\")]\r\n        [parameter(ParameterSetName = \"FontAwesomeSolid\")]\r\n        [alias('TabName')][string] $Name\r\n    )\r\n    DynamicParam {\r\n        $ParameterSetBrands = New-Object System.Management.Automation.ParameterAttribute\r\n        $ParameterSetBrands.Mandatory = $false\r\n        $ParameterSetBrands.ParameterSetName = 'FontAwesomeBrands'\r\n\r\n        $ParameterSetRegular = New-Object System.Management.Automation.ParameterAttribute\r\n        $ParameterSetRegular.Mandatory = $false\r\n        $ParameterSetRegular.ParameterSetName = 'FontAwesomeRegular'\r\n\r\n        $ParameterSetSolid = New-Object System.Management.Automation.ParameterAttribute\r\n        $ParameterSetSolid.Mandatory = $false\r\n        $ParameterSetSolid.ParameterSetName = 'FontAwesomeSolid'\r\n\r\n\r\n        $IconsBrands = New-Object  System.Collections.ObjectModel.Collection[System.Attribute]\r\n        $IconsBrands.Add($ParameterSetBrands)\r\n        $IconsBrands.Add((New-Object System.Management.Automation.ValidateSetAttribute($Script:FontAwesomeBrands)))\r\n        $IconsBrandsRuntime = New-Object System.Management.Automation.RuntimeDefinedParameter('IconBrands', [string], $IconsBrands)\r\n        #$IconsBrandsRuntime.Value = 'safari'\r\n\r\n        $IconsRegular = New-Object  System.Collections.ObjectModel.Collection[System.Attribute]\r\n        $IconsRegular.Add($ParameterSetRegular)\r\n        $IconsRegular.Add((New-Object System.Management.Automation.ValidateSetAttribute($Script:FontAwesomeRegular)))\r\n        $IconsRegularRuntime = New-Object System.Management.Automation.RuntimeDefinedParameter('IconRegular', [string], $IconsRegular)\r\n\r\n        $IconsSolid = New-Object  System.Collections.ObjectModel.Collection[System.Attribute]\r\n        $IconsSolid.Add($ParameterSetSolid)\r\n        $IconsSolid.Add((New-Object System.Management.Automation.ValidateSetAttribute($Script:FontAwesomeSolid)))\r\n        $IconsSolidRuntime = New-Object System.Management.Automation.RuntimeDefinedParameter('IconSolid', [string], $IconsSolid)\r\n\r\n        # Finalization\r\n        $RuntimeParamDic = New-Object System.Management.Automation.RuntimeDefinedParameterDictionary\r\n        $RuntimeParamDic.Add('IconBrands', $IconsBrandsRuntime)\r\n        $RuntimeParamDic.Add('IconRegular', $IconsRegularRuntime)\r\n        $RuntimeParamDic.Add('IconSolid', $IconsSolidRuntime)\r\n        return $RuntimeParamDic\r\n    }\r\n    End {\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction New-Test {\r\n    param(\r\n        [ScriptBlock] $Test,\r\n        [string] $TitleText\r\n    )\r\n}\r\n\r\n\r\nNew-Test -TitleText 'test' {\r\n    New-HTMLTab11 {\r\n\r\n    }\r\n}\r\n```\r\n\r\nUntil you open `New-HTMLTab11` it works.. when you add { } it stops doing that. I can reproduce it on 6.2 in VSCode. Haven't tried in Console as I never edited anything in there.",
    "created_at": "2019-06-12T21:13:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501457612",
    "id": 501457612,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTQ1NzYxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501457612/reactions"
    },
    "updated_at": "2019-06-12T21:15:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501457612",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/15063294?v=4",
      "events_url": "https://api.github.com/users/PrzemyslawKlys/events{/privacy}",
      "followers_url": "https://api.github.com/users/PrzemyslawKlys/followers",
      "following_url": "https://api.github.com/users/PrzemyslawKlys/following{/other_user}",
      "gists_url": "https://api.github.com/users/PrzemyslawKlys/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PrzemyslawKlys",
      "id": 15063294,
      "login": "PrzemyslawKlys",
      "node_id": "MDQ6VXNlcjE1MDYzMjk0",
      "organizations_url": "https://api.github.com/users/PrzemyslawKlys/orgs",
      "received_events_url": "https://api.github.com/users/PrzemyslawKlys/received_events",
      "repos_url": "https://api.github.com/users/PrzemyslawKlys/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PrzemyslawKlys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PrzemyslawKlys/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PrzemyslawKlys"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Does this happen in the ordinary PowerShell console? This looks like it's probably a bug in PowerShell's [completer code](https://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/engine/CommandCompletion/CompletionCompleters.cs).\r\n\r\nThere's not much we can do about it in the PowerShell extension, but it's worth trying in PowerShell 7 and if it's not fixed we should open a bug on PowerShell.",
    "created_at": "2019-06-12T21:16:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501458437",
    "id": 501458437,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTQ1ODQzNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501458437/reactions"
    },
    "updated_at": "2019-06-12T21:16:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501458437",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> I can reproduce it on 6.2 in VSCode\r\n\r\nAh probably still a bug in PowerShell then",
    "created_at": "2019-06-12T21:16:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501458614",
    "id": 501458614,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTQ1ODYxNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501458614/reactions"
    },
    "updated_at": "2019-06-12T21:16:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501458614",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "NONE",
    "body": "It's like ScriptBlock within a ScritpBlock is blocking it. Until I open brackets for New-HTMLTab11 autocomplete works fine. You can test above code on Mac. ",
    "created_at": "2019-06-12T21:18:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501459052",
    "id": 501459052,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTQ1OTA1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501459052/reactions"
    },
    "updated_at": "2019-06-12T21:18:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501459052",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/15063294?v=4",
      "events_url": "https://api.github.com/users/PrzemyslawKlys/events{/privacy}",
      "followers_url": "https://api.github.com/users/PrzemyslawKlys/followers",
      "following_url": "https://api.github.com/users/PrzemyslawKlys/following{/other_user}",
      "gists_url": "https://api.github.com/users/PrzemyslawKlys/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PrzemyslawKlys",
      "id": 15063294,
      "login": "PrzemyslawKlys",
      "node_id": "MDQ6VXNlcjE1MDYzMjk0",
      "organizations_url": "https://api.github.com/users/PrzemyslawKlys/orgs",
      "received_events_url": "https://api.github.com/users/PrzemyslawKlys/received_events",
      "repos_url": "https://api.github.com/users/PrzemyslawKlys/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PrzemyslawKlys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PrzemyslawKlys/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PrzemyslawKlys"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Just to clarify I don't think it's the parent script block, but instead the script block to the right that is throwing off tab completion. `New-HTMLTab -<tab>` works, `New-HTMLTab -<tab> {}` does not.  The psuedo parameter binding that completion uses to determine available parameters may not take dynamic parameters into account when there's a positional argument.\r\n\r\nThe easiest workaround for now is to just add a <kbd>#</kbd> before the <kbd>{</kbd> and then remove it after completion.",
    "created_at": "2019-06-13T11:43:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501667647",
    "id": 501667647,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTY2NzY0Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501667647/reactions"
    },
    "updated_at": "2019-06-13T11:43:07Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501667647",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/24977523?v=4",
      "events_url": "https://api.github.com/users/SeeminglyScience/events{/privacy}",
      "followers_url": "https://api.github.com/users/SeeminglyScience/followers",
      "following_url": "https://api.github.com/users/SeeminglyScience/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeeminglyScience/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SeeminglyScience",
      "id": 24977523,
      "login": "SeeminglyScience",
      "node_id": "MDQ6VXNlcjI0OTc3NTIz",
      "organizations_url": "https://api.github.com/users/SeeminglyScience/orgs",
      "received_events_url": "https://api.github.com/users/SeeminglyScience/received_events",
      "repos_url": "https://api.github.com/users/SeeminglyScience/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SeeminglyScience/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeeminglyScience/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SeeminglyScience"
    }
  },
  {
    "author_association": "NONE",
    "body": "I've actually removed dynamic parameters for my case because of this. It's not a priority for me now although having 1400 strings in ValidateSet doesnt' look pretty :-) But hoping for a fix for future releases.",
    "created_at": "2019-06-13T11:50:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9880#issuecomment-501669710",
    "id": 501669710,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9880",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTY2OTcxMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501669710/reactions"
    },
    "updated_at": "2019-06-13T11:50:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/501669710",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/15063294?v=4",
      "events_url": "https://api.github.com/users/PrzemyslawKlys/events{/privacy}",
      "followers_url": "https://api.github.com/users/PrzemyslawKlys/followers",
      "following_url": "https://api.github.com/users/PrzemyslawKlys/following{/other_user}",
      "gists_url": "https://api.github.com/users/PrzemyslawKlys/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PrzemyslawKlys",
      "id": 15063294,
      "login": "PrzemyslawKlys",
      "node_id": "MDQ6VXNlcjE1MDYzMjk0",
      "organizations_url": "https://api.github.com/users/PrzemyslawKlys/orgs",
      "received_events_url": "https://api.github.com/users/PrzemyslawKlys/received_events",
      "repos_url": "https://api.github.com/users/PrzemyslawKlys/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PrzemyslawKlys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PrzemyslawKlys/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PrzemyslawKlys"
    }
  }
]
