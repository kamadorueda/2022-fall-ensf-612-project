[
  {
    "author_association": "COLLABORATOR",
    "body": "Hi @CatGirlsAreLife PowerShell supports multiple shell instances per-process so it can't (and doesn't) use the process current directory. This means that you can't use `[environment]::CurrentDirectory` to find out the current PowerShell instances current directory. You should do something like:\r\n```powershell\r\n$env:nsmkpth = Join-Path (Get-Location) newsmake\r\n```\r\n>  if using Get-Location in the setting of the environment variable did not fail \r\n\r\nHmm - it shouldn't be failing. What error message do you get?",
    "created_at": "2018-07-11T17:56:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7268#issuecomment-404257630",
    "id": 404257630,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7268",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDI1NzYzMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404257630/reactions"
    },
    "updated_at": "2018-07-11T17:56:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404257630",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "NONE",
    "body": "I was refering to where it seems the if would always return true and do what is not in the else statement. All because it would try to look in C:\\Windows\\system32\\newsmake which never is created in my build. which then causes this:\r\n\r\ngit : fatal: destination path 'newsmake' already exists and is not an empty directory.\r\nAt line:5 char:1\r\n+ git clone -q https://github.com/Elskom/newsmake.git\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n   + CategoryInfo          : NotSpecified: (fatal: destinat...mpty directory.:String) [], RemoteException\r\n    + FullyQualifiedErrorId : NativeCommandError\r\n\r\nAnd thanks for a option for the fix to the environment variable. Will test that now :ok_hand:.",
    "created_at": "2018-07-12T00:03:48Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7268#issuecomment-404347567",
    "id": 404347567,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7268",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDM0NzU2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404347567/reactions"
    },
    "updated_at": "2018-07-12T00:03:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404347567",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/20854328?v=4",
      "events_url": "https://api.github.com/users/CatGirlsAreLife/events{/privacy}",
      "followers_url": "https://api.github.com/users/CatGirlsAreLife/followers",
      "following_url": "https://api.github.com/users/CatGirlsAreLife/following{/other_user}",
      "gists_url": "https://api.github.com/users/CatGirlsAreLife/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/CatGirlsAreLife",
      "id": 20854328,
      "login": "CatGirlsAreLife",
      "node_id": "MDQ6VXNlcjIwODU0MzI4",
      "organizations_url": "https://api.github.com/users/CatGirlsAreLife/orgs",
      "received_events_url": "https://api.github.com/users/CatGirlsAreLife/received_events",
      "repos_url": "https://api.github.com/users/CatGirlsAreLife/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/CatGirlsAreLife/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CatGirlsAreLife/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/CatGirlsAreLife"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": ">  it would try to look in C:\\Windows\\system32\\newsmake\r\n\r\nRight - that's because it's using the process working directory, which, as I said, is not the PowerShell instance current working directory. If you use `Get-Location` (or the `$PWD` variable) instead of `[environment]::CurrentDirectory` to get the working directory location it should work properly.",
    "created_at": "2018-07-12T17:12:59Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7268#issuecomment-404584096",
    "id": 404584096,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7268",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDU4NDA5Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404584096/reactions"
    },
    "updated_at": "2018-07-12T17:12:59Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404584096",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "NONE",
    "body": "Thanks, also the Join-Path solution worked flawlessly.\r\n\r\nPerhaps the powesell documentation should include cases like this issue has so others can see from there the possible solutions to this senerio?",
    "created_at": "2018-07-12T21:01:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7268#issuecomment-404649502",
    "id": 404649502,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7268",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNDY0OTUwMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404649502/reactions"
    },
    "updated_at": "2018-07-12T21:03:24Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/404649502",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/20854328?v=4",
      "events_url": "https://api.github.com/users/CatGirlsAreLife/events{/privacy}",
      "followers_url": "https://api.github.com/users/CatGirlsAreLife/followers",
      "following_url": "https://api.github.com/users/CatGirlsAreLife/following{/other_user}",
      "gists_url": "https://api.github.com/users/CatGirlsAreLife/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/CatGirlsAreLife",
      "id": 20854328,
      "login": "CatGirlsAreLife",
      "node_id": "MDQ6VXNlcjIwODU0MzI4",
      "organizations_url": "https://api.github.com/users/CatGirlsAreLife/orgs",
      "received_events_url": "https://api.github.com/users/CatGirlsAreLife/received_events",
      "repos_url": "https://api.github.com/users/CatGirlsAreLife/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/CatGirlsAreLife/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CatGirlsAreLife/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/CatGirlsAreLife"
    }
  }
]
