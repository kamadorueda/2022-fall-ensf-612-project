[
  {
    "author_association": "NONE",
    "body": "After some debugging, it looks like the root cause is that .NET Core's HttpClientHandler silently refuses to follow HTTPS-to-HTTP redirects.\r\n\r\nHowever, there should be some way to at least look at the underlying response headers - currently, only a generic string description of the error is provided in the caught Exception (in desktop PowerShell - it is possible to retrieve the headers).\r\n",
    "created_at": "2016-12-16T11:47:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-267577853",
    "id": 267577853,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NzU3Nzg1Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/267577853/reactions"
    },
    "updated_at": "2016-12-16T11:47:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/267577853",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6781307?v=4",
      "events_url": "https://api.github.com/users/aburlak/events{/privacy}",
      "followers_url": "https://api.github.com/users/aburlak/followers",
      "following_url": "https://api.github.com/users/aburlak/following{/other_user}",
      "gists_url": "https://api.github.com/users/aburlak/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/aburlak",
      "id": 6781307,
      "login": "aburlak",
      "node_id": "MDQ6VXNlcjY3ODEzMDc=",
      "organizations_url": "https://api.github.com/users/aburlak/orgs",
      "received_events_url": "https://api.github.com/users/aburlak/received_events",
      "repos_url": "https://api.github.com/users/aburlak/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/aburlak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aburlak/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/aburlak"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Perhaps we should add a `-AllowRedirectToHTTPfromHTTPS` type switch or just output a warning message",
    "created_at": "2017-03-15T19:38:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-286855647",
    "id": 286855647,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njg1NTY0Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/286855647/reactions"
    },
    "updated_at": "2017-03-15T19:38:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/286855647",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "This repros with alpha.17 on Ubuntu16 so not Nano specific",
    "created_at": "2017-03-15T19:39:30Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-286855764",
    "id": 286855764,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njg1NTc2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/286855764/reactions"
    },
    "updated_at": "2017-03-15T19:39:30Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/286855764",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@PowerShell/powershell-committee suggests `-allowInsecureRedirect`",
    "created_at": "2017-03-15T23:49:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-286915563",
    "id": 286915563,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjkxNTU2Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/286915563/reactions"
    },
    "updated_at": "2017-03-15T23:49:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/286915563",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@markekraus interested in taking this one :)",
    "created_at": "2018-01-31T05:28:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-361828042",
    "id": 361828042,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTgyODA0Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/361828042/reactions"
    },
    "updated_at": "2018-01-31T05:28:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/361828042",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@SteveL-MSFT I'll  add it to my list. Is this a priority for 6.1.0? ",
    "created_at": "2018-01-31T09:24:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-361872667",
    "id": 361872667,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTg3MjY2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/361872667/reactions"
    },
    "updated_at": "2018-01-31T09:24:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/361872667",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@markekraus no, just when you can get around to it.  Priority can change if more community members upvote, though :)",
    "created_at": "2018-01-31T18:50:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-362032064",
    "id": 362032064,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjAzMjA2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 4,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 4,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362032064/reactions"
    },
    "updated_at": "2018-01-31T18:50:49Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362032064",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "Possible workaround.\r\nWorks in PowerShell Core 6.0.1 (Linux) and PowerShell 5.\r\n```powershell\r\nfunction Get-RedirectedUrl() {\r\n  param(\r\n    [Parameter(Mandatory = $true, Position = 0)]\r\n    [uri] $url,\r\n    [Parameter(Position = 1)]\r\n    [Microsoft.PowerShell.Commands.WebRequestSession] $session = $null\r\n  )\r\n\r\n  $request_url = $url\r\n  $retry = $false\r\n\r\n  do {\r\n    try {\r\n      $response = Invoke-WebRequest -Method Head -WebSession $session -Uri $request_url\r\n\r\n      if($response.BaseResponse.ResponseUri -ne $null)\r\n      {\r\n        # PowerShell 5\r\n        $result = $response.BaseResponse.ResponseUri.AbsoluteUri\r\n      } elseif ($response.BaseResponse.RequestMessage.RequestUri -ne $null) {\r\n        # PowerShell Core\r\n        $result = $response.BaseResponse.RequestMessage.RequestUri.AbsoluteUri\r\n      }\r\n\r\n      $retry = $false\r\n    } catch {\r\n      if(($_.Exception.GetType() -match \"HttpResponseException\") -and\r\n        ($_.Exception -match \"302\"))\r\n      {\r\n        $request_url = $_.Exception.Response.Headers.Location.AbsoluteUri\r\n        $retry = $true\r\n      } else {\r\n        throw $_\r\n      }\r\n    }  \r\n  } while($retry)\r\n\r\n  return $result\r\n}\r\n\r\n$url = Get-RedirectedUrl \"https://go.microsoft.com/fwlink/?LinkID=835028\"\r\n\r\nInvoke-Webrequest -Uri $url -OutFile C:\\netcore11.zip \r\n```\r\nNote: Exception type checking works better in this way. Prevent errors in PowerShell 5 (non-existent type).",
    "created_at": "2018-02-15T02:47:42Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-365811411",
    "id": 365811411,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTgxMTQxMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 4,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 1,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 5,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/365811411/reactions"
    },
    "updated_at": "2018-02-15T02:49:50Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/365811411",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/8125433?v=4",
      "events_url": "https://api.github.com/users/fcabralpacheco/events{/privacy}",
      "followers_url": "https://api.github.com/users/fcabralpacheco/followers",
      "following_url": "https://api.github.com/users/fcabralpacheco/following{/other_user}",
      "gists_url": "https://api.github.com/users/fcabralpacheco/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/fcabralpacheco",
      "id": 8125433,
      "login": "fcabralpacheco",
      "node_id": "MDQ6VXNlcjgxMjU0MzM=",
      "organizations_url": "https://api.github.com/users/fcabralpacheco/orgs",
      "received_events_url": "https://api.github.com/users/fcabralpacheco/received_events",
      "repos_url": "https://api.github.com/users/fcabralpacheco/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/fcabralpacheco/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fcabralpacheco/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/fcabralpacheco"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "This is more than HTTP to HTTPS. This repros as well.\r\n\r\n```powershell\r\nGet-Command -Name New-Item | Select-Object HelpUri                                                                  \r\n\r\nHelpUri                                       \r\n-------                                       \r\nhttps://go.microsoft.com/fwlink/?LinkID=113353\r\n\r\n\r\nInvoke-WebRequest -Uri (Get-Command New-Item).HelpUri \r\n```",
    "created_at": "2018-02-18T21:48:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-366550860",
    "id": 366550860,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjU1MDg2MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366550860/reactions"
    },
    "updated_at": "2018-02-18T21:48:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366550860",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14023826?v=4",
      "events_url": "https://api.github.com/users/thezim/events{/privacy}",
      "followers_url": "https://api.github.com/users/thezim/followers",
      "following_url": "https://api.github.com/users/thezim/following{/other_user}",
      "gists_url": "https://api.github.com/users/thezim/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/thezim",
      "id": 14023826,
      "login": "thezim",
      "node_id": "MDQ6VXNlcjE0MDIzODI2",
      "organizations_url": "https://api.github.com/users/thezim/orgs",
      "received_events_url": "https://api.github.com/users/thezim/received_events",
      "repos_url": "https://api.github.com/users/thezim/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/thezim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/thezim/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/thezim"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@thezim It's the same problem..\r\n\r\n```powershell\r\nInvoke-WebRequest -Uri (Get-Command New-Item).HelpUri \r\n$error[0].Exception.Response.Headers.Location.AbsoluteUri\r\n```\r\n\r\nresult: `http://technet.microsoft.com/library/hh849795.aspx`\r\n\r\nthe problem is when an HTTPS uri redirects to an HTTP (no-S) uri.",
    "created_at": "2018-02-18T23:04:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-366556473",
    "id": 366556473,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjU1NjQ3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366556473/reactions"
    },
    "updated_at": "2018-02-18T23:04:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366556473",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "@fcabralpacheco The code snippet looks great but it doesn't seem to work in Windows Nano Container.",
    "created_at": "2018-07-19T13:37:37Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-406278896",
    "id": 406278896,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjI3ODg5Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/406278896/reactions"
    },
    "updated_at": "2018-07-19T13:37:37Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/406278896",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1682456?v=4",
      "events_url": "https://api.github.com/users/xied75/events{/privacy}",
      "followers_url": "https://api.github.com/users/xied75/followers",
      "following_url": "https://api.github.com/users/xied75/following{/other_user}",
      "gists_url": "https://api.github.com/users/xied75/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/xied75",
      "id": 1682456,
      "login": "xied75",
      "node_id": "MDQ6VXNlcjE2ODI0NTY=",
      "organizations_url": "https://api.github.com/users/xied75/orgs",
      "received_events_url": "https://api.github.com/users/xied75/received_events",
      "repos_url": "https://api.github.com/users/xied75/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/xied75/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xied75/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/xied75"
    }
  },
  {
    "author_association": "NONE",
    "body": "I stumbled across this issue when I discovered my script using System.Net.WebClient worked on pwsh but not on Windows. On Windows, or in Windows Powershell, you'll get a 401 Unauthorized because WebClient follows redirects without adding Authorization headers. \r\n\r\n```\r\nSystem.Management.Automation.MethodInvocationException: Exception calling \"UploadString\" with \"3\" argument(s): \"The remote server returned an error: (401) Unauthorized\r\n```\r\n\r\nBut this was not the case with pwsh 6.0.0. It did not fail at all.\r\n\r\nTo fix the issue, I switched to Invoke-RestMethod:\r\n\r\n```\r\nInvoke-RestMethod -Uri $url -MaximumRedirection 0 -Method $method -Body $json -Headers $headers\r\n```\r\n\r\nNow the script worked fine on Windows Powershell but pwsh 6.0.0 now failed with the very same 401 Unauthorized response. \r\n\r\n```\r\nMicrosoft.PowerShell.Commands.HttpResponseException: Response status code does not indicate success: 401 (Unauthorized).\r\n   at System.Management.Automation.MshCommandRuntime.ThrowTerminatingError(ErrorRecord errorRecord)\r\n```\r\n\r\nThat means, it followed the redirect even though I used `-MaximumRedirection 0`.\r\nUpgraded to pwsh 6.0.4, same issue in that version.\r\n\r\nInstalled pwsh-preview (6.1.0-preview.4) and now got the same exception but for the redirect response.\r\n\r\n```\r\nMicrosoft.PowerShell.Commands.HttpResponseException: Response status code does not indicate success: 303 (See Other).\r\n   at System.Management.Automation.MshCommandRuntime.ThrowTerminatingError(ErrorRecord errorRecord)\r\n```\r\n\r\nConclusion:\r\n\r\n|      | Windows Powershell | pwsh 6.0.0-6.0.4 | pwsh 6.1.0 preview |\r\n|----|----|----|----|\r\n| WebClient.UploadString | Follows redirect without auth headers | Follows redirect with auth, no error | Follows redirect with auth, no error |\r\n| Invoke-RestMethod -MaximumRedirection 0 | No follow, no error | Follows without auth, throws 401 | No follow, throws 303 |\r\n\r\nGah, these differences makes it so hard to write something that works/can be tested on all our platforms.",
    "created_at": "2018-08-15T18:58:38Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-413299919",
    "id": 413299919,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzI5OTkxOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/413299919/reactions"
    },
    "updated_at": "2018-08-15T19:00:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/413299919",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/435885?v=4",
      "events_url": "https://api.github.com/users/anderssonjohan/events{/privacy}",
      "followers_url": "https://api.github.com/users/anderssonjohan/followers",
      "following_url": "https://api.github.com/users/anderssonjohan/following{/other_user}",
      "gists_url": "https://api.github.com/users/anderssonjohan/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/anderssonjohan",
      "id": 435885,
      "login": "anderssonjohan",
      "node_id": "MDQ6VXNlcjQzNTg4NQ==",
      "organizations_url": "https://api.github.com/users/anderssonjohan/orgs",
      "received_events_url": "https://api.github.com/users/anderssonjohan/received_events",
      "repos_url": "https://api.github.com/users/anderssonjohan/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/anderssonjohan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anderssonjohan/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/anderssonjohan"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@anderssonjohan that appears to be a different issue. The issue here is when an HTTPS site redirects to an HTTP site, regardless of the presence or lack of auth headers. Would you be so kind as to open a new issue for that, please?",
    "created_at": "2018-08-15T23:41:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-413373974",
    "id": 413373974,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzM3Mzk3NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/413373974/reactions"
    },
    "updated_at": "2018-08-15T23:41:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/413373974",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "@markekraus Thanks! Sure, I'll do that. It seemed related to me and I didn't want to add duplicate issues.",
    "created_at": "2018-08-16T10:11:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-413494423",
    "id": 413494423,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMzQ5NDQyMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/413494423/reactions"
    },
    "updated_at": "2018-08-16T10:11:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/413494423",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/435885?v=4",
      "events_url": "https://api.github.com/users/anderssonjohan/events{/privacy}",
      "followers_url": "https://api.github.com/users/anderssonjohan/followers",
      "following_url": "https://api.github.com/users/anderssonjohan/following{/other_user}",
      "gists_url": "https://api.github.com/users/anderssonjohan/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/anderssonjohan",
      "id": 435885,
      "login": "anderssonjohan",
      "node_id": "MDQ6VXNlcjQzNTg4NQ==",
      "organizations_url": "https://api.github.com/users/anderssonjohan/orgs",
      "received_events_url": "https://api.github.com/users/anderssonjohan/received_events",
      "repos_url": "https://api.github.com/users/anderssonjohan/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/anderssonjohan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anderssonjohan/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/anderssonjohan"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue is present in ps7 but not the ps bundled with windows. ",
    "created_at": "2019-10-02T04:12:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-537326818",
    "id": 537326818,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzMyNjgxOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/537326818/reactions"
    },
    "updated_at": "2019-10-02T04:12:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/537326818",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ghost",
      "id": 10137,
      "login": "ghost",
      "node_id": "MDQ6VXNlcjEwMTM3",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ghost"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@CarlGustavAlbertDwarfsteinYung WinPS uses a different HTTP client from .NET Framework that could be argued is doing the insecure thing.  .NET Core has a new HTTP client that rejects this and we'd have to code around that.",
    "created_at": "2019-10-03T20:26:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-538114078",
    "id": 538114078,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODExNDA3OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/538114078/reactions"
    },
    "updated_at": "2019-10-03T20:26:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/538114078",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "@SteveL-MSFT  Hi thank you for your reply. As far as i can undestand from what I read the issue is that PS expects a standardized HTTP implementation but in reality there is no standard. TSeems like PS gives a 302 Found for every redirect. The standard added 303 and 307 that is expected in response to 302. Mozilla recommends using 302 sparingly because every browser uses their own system for redirects. Of course I am not an expert in this project so I may be completely wrong.=",
    "created_at": "2019-10-03T20:45:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-538121210",
    "id": 538121210,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzODEyMTIxMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/538121210/reactions"
    },
    "updated_at": "2019-10-03T20:46:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/538121210",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ghost",
      "id": 10137,
      "login": "ghost",
      "node_id": "MDQ6VXNlcjEwMTM3",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ghost"
    }
  },
  {
    "author_association": "NONE",
    "body": "In the mean time:\r\nC:\\Windows\\System32\\curl -L -o outfile \"https://example.com/somefile\"\n\n<blockquote><div><strong><a href=\"https://example.com/somefile\">Example Domain</a></strong></div></blockquote>",
    "created_at": "2021-01-04T00:08:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-753696972",
    "id": 753696972,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzY5Njk3Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/753696972/reactions"
    },
    "updated_at": "2021-01-04T00:08:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/753696972",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/13596209?v=4",
      "events_url": "https://api.github.com/users/tsteven4/events{/privacy}",
      "followers_url": "https://api.github.com/users/tsteven4/followers",
      "following_url": "https://api.github.com/users/tsteven4/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsteven4/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/tsteven4",
      "id": 13596209,
      "login": "tsteven4",
      "node_id": "MDQ6VXNlcjEzNTk2MjA5",
      "organizations_url": "https://api.github.com/users/tsteven4/orgs",
      "received_events_url": "https://api.github.com/users/tsteven4/received_events",
      "repos_url": "https://api.github.com/users/tsteven4/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/tsteven4/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsteven4/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/tsteven4"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue was a major obstacle for me when I migrated from PS5 to PS7.\r\nI hope it will be addressed as soon as possible.",
    "created_at": "2021-02-07T18:25:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2896#issuecomment-774727004",
    "id": 774727004,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2896",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDcyNzAwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/774727004/reactions"
    },
    "updated_at": "2021-02-07T18:25:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/774727004",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/25482642?v=4",
      "events_url": "https://api.github.com/users/mkht/events{/privacy}",
      "followers_url": "https://api.github.com/users/mkht/followers",
      "following_url": "https://api.github.com/users/mkht/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkht/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mkht",
      "id": 25482642,
      "login": "mkht",
      "node_id": "MDQ6VXNlcjI1NDgyNjQy",
      "organizations_url": "https://api.github.com/users/mkht/orgs",
      "received_events_url": "https://api.github.com/users/mkht/received_events",
      "repos_url": "https://api.github.com/users/mkht/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mkht/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkht/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mkht"
    }
  }
]
