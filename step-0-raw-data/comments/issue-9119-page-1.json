[
  {
    "author_association": "COLLABORATOR",
    "body": "I expect #8995 will address this.",
    "created_at": "2019-03-12T13:16:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-471995571",
    "id": 471995571,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MTk5NTU3MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/471995571/reactions"
    },
    "updated_at": "2019-03-12T13:16:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/471995571",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "It looks like this issue is more pronounced in Powershell 7.0.\r\n\r\nRunning the following command from a nodeJS project:\r\n```\r\nGet-ChildItem -Recurse -Name\r\n```\r\nReturns 12886 files.\r\n\r\n**PowerShell 6.2.3**\r\n\r\nWithout -Name\r\n\r\n```\r\nIsRunning Elapsed          ElapsedMilliseconds ElapsedTicks\r\n--------- -------          ------------------- ------------\r\n    False 00:00:00.7503959                 750    750395941\r\n```\r\n\r\nWith -Name\r\n\r\n```\r\nIsRunning Elapsed          ElapsedMilliseconds ElapsedTicks\r\n--------- -------          ------------------- ------------\r\n    False 00:00:01.3749722                1374   1374972263\r\n```\r\n\r\n**PowerShell 7.0.0-rc.1**\r\n\r\nWithout -Name\r\n```\r\nIsRunning Elapsed          ElapsedMilliseconds ElapsedTicks\r\n--------- -------          ------------------- ------------\r\n    False 00:00:00.6832990                 683    683299055\r\n```\r\n\r\nWith -Name\r\n\r\n```\r\nIsRunning Elapsed          ElapsedMilliseconds ElapsedTicks\r\n--------- -------          ------------------- ------------\r\n    False 00:00:09.0078861                9007   9007886141\r\n```\r\n\r\nI see similar results for both macOS and Windows.",
    "created_at": "2020-01-02T17:23:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-570277559",
    "id": 570277559,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDI3NzU1OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/570277559/reactions"
    },
    "updated_at": "2020-01-02T17:23:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/570277559",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6935695?v=4",
      "events_url": "https://api.github.com/users/ericdching/events{/privacy}",
      "followers_url": "https://api.github.com/users/ericdching/followers",
      "following_url": "https://api.github.com/users/ericdching/following{/other_user}",
      "gists_url": "https://api.github.com/users/ericdching/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ericdching",
      "id": 6935695,
      "login": "ericdching",
      "node_id": "MDQ6VXNlcjY5MzU2OTU=",
      "organizations_url": "https://api.github.com/users/ericdching/orgs",
      "received_events_url": "https://api.github.com/users/ericdching/received_events",
      "repos_url": "https://api.github.com/users/ericdching/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ericdching/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ericdching/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ericdching"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I guess this perf regressions comes from https://github.com/PowerShell/PowerShell/pull/9250\r\nIf previously I thought Kaspersky AV slow down file operations, now I tested with Microsoft AV.\r\n![image](https://user-images.githubusercontent.com/22290914/71713470-b4340180-2e2b-11ea-8877-dae5ae19981c.png)\r\n\r\n/cc @SteveL-MSFT @daxian-dbw ",
    "created_at": "2020-01-03T08:22:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-570500016",
    "id": 570500016,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDUwMDAxNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/570500016/reactions"
    },
    "updated_at": "2020-01-03T08:22:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/570500016",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@iSazonov that method should be called in all cases, and not just when `-Name` is used.  But if you're suggesting the difference between WinPS and PSCore is due to that, then I would agree.  Looking at the code, it special cases `-Recurse` with `-Name` and handles it itself.  So instead of relying on a .NET API, it goes though much more code to gather objects at each level and recurse.  In fact, this makes much slower than doing a `Select-Object` for equivalent output:\r\n\r\n```powershell\r\nPS> (Measure-Command { dir . -Recurse }).TotalMilliseconds\r\n277.7461\r\n[280.54ms] /Users/steve/repos/PowerShell [origin/master]\r\nPS> (Measure-Command { dir . -Recurse -Name }).TotalMilliseconds\r\n1397.9301\r\n[1.4s] /Users/steve/repos/PowerShell [origin/master]\r\nPS> (Measure-Command { dir . -Recurse | select fullname }).TotalMilliseconds\r\n449.8212\r\n```\r\n\r\nSeems like `-Name` could do that equivalent and would be faster.  Let me play with this.",
    "created_at": "2020-01-07T20:52:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-571766244",
    "id": 571766244,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTc2NjI0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/571766244/reactions"
    },
    "updated_at": "2020-01-07T21:45:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/571766244",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Seems like we should expose an overload to `GetChildNames()` to accept recursion.  Then the FileSystemProvider can implement this and simply use `EnumerateFileSystemEntries()` to quickly return just the names.   In `SessionStateContainer.cs`, it would try the overload first, but not all providers implement it and fallback to current behavior.  Since this is not a mainline issue, not going to implement this for now.",
    "created_at": "2020-01-07T22:56:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-571811516",
    "id": 571811516,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTgxMTUxNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/571811516/reactions"
    },
    "updated_at": "2020-01-07T22:56:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/571811516",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> that method should be called in all cases, and not just when -Name is used. \r\n\r\n@SteveL-MSFT For `dir -Recurse` it is called 3 times for root directory, for `dir -Recurse -Name` - 3 times for every subdirectory for every level and 1 time for every file.",
    "created_at": "2020-01-08T16:18:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-572144018",
    "id": 572144018,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MjE0NDAxOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/572144018/reactions"
    },
    "updated_at": "2020-01-08T16:19:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/572144018",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@iSazonov yes, because when `-Recurse` and `-Name` is used together, the recursion is done outside of the `FileSystemProvider` so each call into the provider results in a call to `GetCorrectCasedPath()`.  However, there's actually a lot of other work happening because of the manual recursion than just that API call.  The `FileSystemProvider` can leverage the `EnumerateFileSystemEntries()` to just get the names, but the current interface doesn't expose such a call into the provider.",
    "created_at": "2020-01-08T17:53:47Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/9119#issuecomment-572183064",
    "id": 572183064,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/9119",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MjE4MzA2NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/572183064/reactions"
    },
    "updated_at": "2020-01-08T17:53:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/572183064",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  }
]
