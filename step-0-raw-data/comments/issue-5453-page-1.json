[
  {
    "author_association": "COLLABORATOR",
    "body": "You might want to try this tasks.json:\r\n```json\r\n{\r\n    \"version\": \"2.0.0\",\r\n\r\n    \"windows\": {\r\n        \"options\": {\r\n            \"shell\": {\r\n                \"executable\": \"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\",\r\n                \"args\": [\r\n                    \"-NoProfile\",\r\n                    \"-ExecutionPolicy\",\r\n                    \"Bypass\",\r\n                    \"-Command\"\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    \"linux\": {\r\n        \"options\": {\r\n            \"shell\": {\r\n                \"executable\": \"/usr/bin/pwsh\",\r\n                \"args\": [\r\n                    \"-NoProfile\",\r\n                    \"-Command\"\r\n                ]\r\n            }\r\n        }\r\n    },\r\n    \"osx\": {\r\n        \"options\": {\r\n            \"shell\": {\r\n                \"executable\": \"/usr/local/bin/pwsh\",\r\n                \"args\": [\r\n                    \"-NoProfile\",\r\n                    \"-Command\"\r\n                ]\r\n            }\r\n        }\r\n    },\r\n\r\n    \"tasks\": [\r\n        {\r\n            \"label\": \"Bootstrap\",\r\n            \"type\": \"shell\",\r\n            \"command\": \"Import-Module ${workspaceFolder}/build.psm1; Start-PSBootstrap\",\r\n            \"problemMatcher\": []\r\n        },\r\n        {\r\n            \"label\": \"Clean Build\",\r\n            \"type\": \"shell\",\r\n            \"command\": \"Import-Module ${workspaceFolder}/build.psm1; Start-PSBuild -Clean\",\r\n            \"problemMatcher\": []\r\n        },\r\n        {\r\n            \"label\": \"Build\",\r\n            \"type\": \"shell\",\r\n            \"command\": \"Import-Module ${workspaceFolder}/build.psm1; Start-PSBuild -Output ${workspaceFolder}/debug\",\r\n            \"group\": {\r\n                \"kind\": \"build\",\r\n                \"isDefault\": true\r\n            },\r\n            \"problemMatcher\": \"$msCompile\"\r\n        },\r\n        {\r\n            \"label\": \"Test\",\r\n            \"type\": \"shell\",\r\n            \"command\": \"Import-Module ${workspaceFolder}/build.psm1; Start-PSPester -Path ${workspaceFolder}/test -Tag CI\",\r\n            \"group\": {\r\n                \"kind\": \"test\",\r\n                \"isDefault\": true\r\n            },\r\n            \"problemMatcher\": \"$pester\"\r\n        }\r\n    ]\r\n}\r\n```\r\nThere seems to be an issue with the `$msCompile` problem matcher at the moment but that's an issue for VSCode.  BTW why does the build task specify `-Output ./debug`?  Doesn't it put the output in a reasonable location by default?  Also, any reason not to use `Windows PowerShell` on Windows?  If so, we can always set the executable to `pwsh.exe` on Windows.\r\n\r\nAlso, I wonder if we should specify a tag for testing within VSCode - perhaps `CI`?  I think using CI would get rid of the failures I see due to not running VSCode as admin.\r\n\r\nI can submit this as a PR if you'd like or if you just want to take it and run - that's fine too.\r\n",
    "created_at": "2017-11-15T03:17:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/5453#issuecomment-344473633",
    "id": 344473633,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5453",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQ3MzYzMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344473633/reactions"
    },
    "updated_at": "2017-11-15T03:26:38Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344473633",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I'll add a slightly modified version of @rkeithhill 's tasks.json.  Thanks for that!",
    "created_at": "2017-11-15T03:43:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/5453#issuecomment-344477068",
    "id": 344477068,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5453",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQ3NzA2OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344477068/reactions"
    },
    "updated_at": "2017-11-15T03:43:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344477068",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@rkeithhill to answer some of your questions:\r\n\r\n1. the `debug` folder is used as it's included in `.gitignore`\r\n2. since this tasks.json is only used to build pwsh, I think it's preferable to depend on pwsh rather than Windows PowerShell (the rest of the tooling expects it)\r\n3. `-Clean` cleans then builds",
    "created_at": "2017-11-15T04:04:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/5453#issuecomment-344479669",
    "id": 344479669,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5453",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQ3OTY2OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344479669/reactions"
    },
    "updated_at": "2017-11-15T04:04:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344479669",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I think I'm caught up to your version of tasks.json but when I execute the `Rebuild`  task (formerly `Clean Build`), I'm getting this error:\r\n```\r\nPowerShell output: c:\\Users\\Keith\\GitHub\\rkeithhill\\PowerShell\\debug\r\nWARNING: Run Sync-PSTags to update tags\r\nUnable to load file: \"c:\\Users\\Keith\\GitHub\\rkeithhill\\PowerShell\\debug\"\r\nExecution of { & \"~/.rcedit/rcedit-x64.exe\" \"$($Options.Output)\" --set-icon \"$PSScriptRoot\\assets\\Powershell_black.ico\" `\r\n            --set-file-version $ReleaseVersion --set-product-version $ReleaseVersion --set-version-string \"ProductName\" \"PowerShell Core 6\" `\r\n            --set-requested-execution-level \"asInvoker\" --set-version-string \"LegalCopyright\" \"(C) Microsoft Corporation.  All Rights Reserved.\" } failed with exit code 1\r\n```\r\nAre you getting this error?  FWIW I get this error from the command line so maybe my source is in a bad state.\r\n\r\n**UPDATE:** Ah nevermind, I see you're making a tweak to that very part of build.psm1.  I'll hang tight for the PR to be merged.",
    "created_at": "2017-11-15T05:12:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/5453#issuecomment-344487812",
    "id": 344487812,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5453",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQ4NzgxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344487812/reactions"
    },
    "updated_at": "2017-11-15T05:16:38Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/344487812",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  }
]
