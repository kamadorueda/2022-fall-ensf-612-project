[
  {
    "author_association": "COLLABORATOR",
    "body": "What scenario would this enable?",
    "created_at": "2019-11-09T17:49:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552122006",
    "id": 552122006,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyMjAwNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552122006/reactions"
    },
    "updated_at": "2019-11-09T17:49:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552122006",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@BrucePay.\r\n\r\nTo quote from the OP:\r\n\r\n> Ordered hashtable instances are more lightweight than [pscustomobject] instances and should suffice in many situations.\r\n\r\nFor instance, it would enable processing of larger input datasets, in cases where `[pscustomobject]` output consumes inordinate amounts of memory - see #7603",
    "created_at": "2019-11-09T18:02:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552123026",
    "id": 552123026,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyMzAyNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552123026/reactions"
    },
    "updated_at": "2019-11-09T18:02:46Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552123026",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Another use case: As with `ConvertFrom-Json -AsHashtable`, you may want output objects that are easier to manipulate in terms of subsequent removal / addition of properties (entries).\r\n",
    "created_at": "2019-11-09T18:36:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552125763",
    "id": 552125763,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyNTc2Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552125763/reactions"
    },
    "updated_at": "2019-11-09T18:36:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552125763",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> processing of larger input datasets\r\n\r\nI do not see why I would prefer hash tables for the scenario. Rather typed output would be more useful and power.",
    "created_at": "2019-11-09T18:40:12Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552126004",
    "id": 552126004,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyNjAwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552126004/reactions"
    },
    "updated_at": "2019-11-09T18:40:12Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552126004",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "That is a false dichotomy, @iSazonov - _both_ features are worth implementing - see #8862\r\n\r\nAnd don't forget the convenience and speed of adding / removing entries that hashtables offer.\r\n",
    "created_at": "2019-11-09T18:42:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552126204",
    "id": 552126204,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyNjIwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552126204/reactions"
    },
    "updated_at": "2019-11-09T18:43:15Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552126204",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "If you look OrderedDictionary implementation you find that both \"easier to manipulate\" and \"more lightweight than [pscustomobject]\" will not bring that you expect in common.\r\nSo we need to know exactly the scenario where it will benefit. While I do not see such a scenario.\r\nWe could invest more in PSObject/PSCustomObject performance - I hope there is a way to make them better.\r\n",
    "created_at": "2019-11-09T19:27:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552129667",
    "id": 552129667,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEyOTY2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552129667/reactions"
    },
    "updated_at": "2019-11-09T19:27:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552129667",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@iSazonov \r\n\r\n> If you look OrderedDictionary implementation you find that both \"easier to manipulate\" and \"more lightweight than [pscustomobject]\" will not bring that you expect in common.\r\n\r\nI don't know what that means, but let's look at some scenarios, using the existing `ConvertFrom-Json -AsHashtable` implementation:\r\n\r\nNote: \r\n\r\n* `ConvertFrom-Json -AsHashtable` uses `[hashtable]` instances, not ordered hashtables, but if memory serves, the performance penalty for using the ordered variety instead is fairly small.\r\n\r\n* The code uses the [`Time-Command` function](https://gist.github.com/mklement0/9e1f13978620b09ab2d15da5535d1b27) to average 10 runs with 1001 JSON objects.\r\n\r\n```powershell\r\n# Create a JSON array with 1001 objects with 20 properties.\r\n$jo =  '{ \"p1\": 1, \"p2\": 1, \"p3\": 1, \"p4\": 1, \"p5\": 1, \"p6\": 1, \"p7\": 1, \"p8\": 1, \"p9\": 1, \"p10\": 1, \"p11\": 1, \"p12\": 1, \"p13\": 1, \"p14\": 1, \"p15\": 1, \"p16\": 1, \"p17\": 1, \"p18\": 1, \"p19\": 1, \"p20\": 1 }'\r\n$ja = \"[`n\" + (($jo + \",`n\") * 1e3) + $jo + \"`n]\"\r\n\r\n# Compare [pscustomobject] vs. [hashtable] deserialization time:\r\nTime-Command { # Deserialize: [pscustomobject]\r\n  $ja | ConvertFrom-Json\r\n}, {           # Deserialize: [hashtable]\r\n  $ja | ConvertFrom-Json -AsHashtable\r\n}\r\n\r\n'---'\r\n\r\n# Compare [pscustomobject] vs. [hashtable] property-addition time:\r\nTime-Command { # Add property: [pscustomobject], with Select-Object\r\n  $objects = $ja | ConvertFrom-Json\r\n  $newObjects  = $objects | Select-Object *, @{ n='p21'; e = { 1 } }\r\n}, { # Add property: [pscustomobject] (loop)\r\n  $objects = $ja | ConvertFrom-Json\r\n  foreach ($obj in $objects) {\r\n    $obj | Add-Member -NotePropertyName p21 -NotePropertyValue 1\r\n  }\r\n }, { # Add property: [hashtable] (loop)\r\n  $hashtables = $ja | ConvertFrom-Json -AsHashtable\r\n  foreach ($ht in $hashtables) {\r\n    $ht['p21'] = 1\r\n  }\r\n}\r\n```\r\n\r\nThe above yields the following on my macOS 10.15.1 machine:\r\n\r\n```none\r\nFactor Secs (10-run avg.) Command                                                                                                                                        TimeSpan\r\n------ ------------------ -------                                                                                                                                        --------\r\n1.00   0.073              # Deserialize: [hashtable]…                                                                                                                    00:00:00.…\r\n1.59   0.116              # Deserialize: [pscustomobject]…                                                                                                               00:00:00.…\r\n---\r\n1.00   0.085              # Add property: [hashtable] (loop)…                                                                                                            00:00:00.…\r\n4.38   0.373              # Add property: [pscustomobject], with Select-Object…                                                                                          00:00:00.…\r\n5.59   0.477              # Add property: [pscustomobject] (loop)…                                                                                                       00:00:00.…\r\n```\r\n\r\nThat is:\r\n\r\n* the [pscustomobject] deserialization was 60% slower than the hashtable-producing one (and, if I read #7603 correctly, requires more memory) \r\n* adding a property to each object took about 4-6 times as long as adding a hashtable entry (including deserialization time).",
    "created_at": "2019-11-09T20:17:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552133584",
    "id": 552133584,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEzMzU4NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552133584/reactions"
    },
    "updated_at": "2019-11-09T22:55:59Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552133584",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "It is known issue that adding properties to pscustomobject is relatively slow. The demo convinces me that we should invest in the area and improve psobject performance.\r\nWithout a real scenario where it is critically important, this does not convince me that we need one more parameter - cmdlets with many parameters are more likely talking about bad design or bad implementation.\r\n\r\n",
    "created_at": "2019-11-10T08:43:50Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552174936",
    "id": 552174936,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE3NDkzNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552174936/reactions"
    },
    "updated_at": "2019-11-10T08:43:50Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552174936",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "> The demo convinces me that we should invest in the area and improve psobject performance.\r\n\r\nAgain, a false dichotomy: that is well worth doing, but independently of what is being proposed here.\r\n(As an aside: to be on par feature-wise, we'd then need a `Remove-Property` cmdlet that removes properties _in place_, analogous to how `Add-Member` adds them in place).\r\n\r\nAt a conceptual level, custom objects and hash tables can take each other's place, each with relative strengths and weaknesses, it is perfectly reasonable to support serialization / deserialization of _both_ types:\r\n\r\n* `ConvertTo-Json` and `ConvertTo-Json` already provide that support: collections of (ordered) hash tables are supported as input, and `-AsHashtable` deserializes to collections of hash tables.\r\n\r\n* Making `ConvertTo-Csv` / `Export-Csv` support hash table _input_ has _already been green-lit_ in #10999 (and I hope [my recent clarification there](https://github.com/PowerShell/PowerShell/issues/10999#issuecomment-552191718) makes you not object to it), so not providing the same support on the _output_ side would be an awkward omission.\r\n\r\n\r\n",
    "created_at": "2019-11-10T12:59:03Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11027#issuecomment-552192481",
    "id": 552192481,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11027",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjE5MjQ4MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552192481/reactions"
    },
    "updated_at": "2019-11-10T14:05:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/552192481",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  }
]
