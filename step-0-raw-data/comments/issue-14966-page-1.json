[
  {
    "author_association": "COLLABORATOR",
    "body": "Test-Connection utilizes the .NET class `System.NetNetworkInformation.Ping` to send requests.\r\n\r\nIf .NET has a dependency on the builtin `ping` utility, there's not really a way for us to avoid that.",
    "created_at": "2021-03-08T13:14:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792747697",
    "id": 792747697,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjc0NzY5Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792747697/reactions"
    },
    "updated_at": "2021-03-08T13:14:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792747697",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Good point, @vexx32; specifically, it looks for the `ping` / `ping6` utilities in the following folders, in order: `/bin/`, `/sbin/`, `/usr/bin/`\r\n\r\n\r\nhttps://github.com/dotnet/runtime/blob/9a70e7a68889f4c593479f4c20495a7f8c4528e8/src/libraries/Common/src/System/Net/NetworkInformation/UnixCommandLinePing.cs#L13-L33\n\n<blockquote><img src=\"https://avatars.githubusercontent.com/u/9141961?s=400&v=4\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/dotnet/runtime\">dotnet/runtime</a></strong></div><div>.NET is a cross-platform runtime for cloud, mobile, desktop, and IoT apps. - dotnet/runtime</div></blockquote>",
    "created_at": "2021-03-08T13:45:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792766057",
    "id": 792766057,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjc2NjA1Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792766057/reactions"
    },
    "updated_at": "2021-03-08T13:45:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792766057",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "That makes a lot of sense as to why pings on Unix are so tricky to work with. Sigh. Would have been a lot more usable in a number of respects if they'd written a proper ping util into .NET instead of trying to reuse an on-box utility like that. ðŸ˜” ",
    "created_at": "2021-03-08T13:55:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792772006",
    "id": 792772006,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjc3MjAwNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792772006/reactions"
    },
    "updated_at": "2021-03-08T13:55:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792772006",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "> Test-Connection utilizes the .NET class System.NetNetworkInformation.Ping to send requests.\r\n\r\nIs this really true? I don't know how else I would have known about it... My question is WHY the Test-Connection not working in such environment?\r\n\r\nHere are my observations:\r\n```\r\n> sudo chmod 775 /usr/bin/ping            # not pinging\r\n> sudo chmod 4755 /opt/powershell/7/pwsh  # Test-Connection working. But in this case there are errors in other different tasks.\r\n```\r\nIf I run elevated pwsh then Test-Connection is working. I can certainly use native ping, but I would like to use the capabilities of pwsh.",
    "created_at": "2021-03-08T15:01:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792813427",
    "id": 792813427,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjgxMzQyNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792813427/reactions"
    },
    "updated_at": "2021-03-08T15:01:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792813427",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@237dmitry, does the symptom only occur when the `System.NetNetworkInformation.Ping` class is used _by `Test-Connection`_, from PowerShell?\r\n\r\nIf not, you should raise the issue at https://github.com/dotnet/runtime/issues\n\n<blockquote><img src=\"https://avatars.githubusercontent.com/u/9141961?s=400&v=4\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/dotnet/runtime\">dotnet/runtime</a></strong></div><div>.NET is a cross-platform runtime for cloud, mobile, desktop, and IoT apps. - dotnet/runtime</div></blockquote>",
    "created_at": "2021-03-08T15:04:59Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792815866",
    "id": 792815866,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MjgxNTg2Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792815866/reactions"
    },
    "updated_at": "2021-03-08T15:05:02Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792815866",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "> does the symptom only occur when the `System.NetNetworkInformation.Ping` class is used _by `Test-Connection`_, from PowerShell?\r\n\r\nIt's a double impression, maybe I'm doing something wrong. But the ip address is pinged, I get a Success response. But if I ping the hostname I get errors:\r\n\r\n```\r\n> using assembly /opt/microsoft/powershell/7/System.Net.Ping.dll\r\n> $ping = [System.Net.NetworkInformation.Ping]::new()\r\n> $ping.Send('google.com') \r\nMethodInvocationException: Exception calling \"Send\" with \"1\" argument(s): \"An exception occurred during a Ping request.\"\r\n\r\n> $ping.Send(\"8.8.8.8\")   \r\n\r\nStatus        : Success\r\nAddress       : 8.8.8.8\r\nRoundtripTime : 19\r\nOptions       : \r\nBuffer        : {}\r\n\r\n > $options = [System.Net.NetworkInformation.PingOptions]::new()\r\n > $options.DontFragment = $true                                \r\n > $ping.Send('google.com',255,255,$options)\r\nMethodInvocationException: Exception calling \"Send\" with \"4\" argument(s): \"An exception occurred during a Ping request.\"\r\n\r\n```",
    "created_at": "2021-03-08T15:43:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792841754",
    "id": 792841754,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjg0MTc1NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792841754/reactions"
    },
    "updated_at": "2021-03-08T15:43:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792841754",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "NONE",
    "body": "Via sudo:\r\n```\r\n> sudo pwsh\r\n......\r\n > $env:USER\r\nroot\r\n\r\n > using assembly /opt/microsoft/powershell/7/System.Net.Ping.dll  \r\n > $ping = [System.Net.NetworkInformation.Ping]::new()\r\n > $ping.Send('google.com')\r\n\r\nStatus        : TimedOut\r\nAddress       : 0.0.0.0\r\nRoundtripTime : 0\r\nOptions       : \r\nBuffer        : {}\r\n\r\n > $ping.Send('https://google.com')\r\nMethodInvocationException: Exception calling \"Send\" with \"1\" argument(s): \"An exception occurred during a Ping request.\"\r\n\r\n > $ping.Send(\"google.com\")        \r\n\r\nStatus        : TimedOut\r\nAddress       : 0.0.0.0\r\nRoundtripTime : 0\r\nOptions       : \r\nBuffer        : {}\r\n\r\n > $options = [System.Net.NetworkInformation.PingOptions]::new()\r\n > $options.DontFragment = $true\r\n > $ping.Send('google.com',255,255,$options)\r\n\r\nStatus        : TimedOut\r\nAddress       : 0.0.0.0\r\nRoundtripTime : 0\r\nOptions       : \r\nBuffer        : {}\r\n\r\n# Test-Connection from sudo not working.... I'am shoked\r\n > Test-Connection 'google.com'\r\n\r\n   Destination: google.com\r\n\r\nPing Source           Address                   Latency BufferSize Status\r\n                                                   (ms)        (B)\r\n---- ------           -------                   ------- ---------- ------\r\n   1 mymsi            *                               *          * TimedOut\r\n   2 mymsi            *                               *          * TimedOut\r\n   3 mymsi            *                               *          * TimedOut\r\n   4 mymsi            *                               *          * TimedOut\r\n\r\n```",
    "created_at": "2021-03-08T16:01:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792856937",
    "id": 792856937,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjg1NjkzNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792856937/reactions"
    },
    "updated_at": "2021-03-08T16:01:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792856937",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "The response you get from the ping.Send() method is the same as the test-connection one there; Test-Connection just formats it a bit before outputting it, more or less.\r\n\r\nBut yeah, I think this is a .NET issue and the issue should be filed over there instead. Not really sure what they were thinking, having a dependence on a native util that doesn't even give the information that their PingReply object claims to provide. ðŸ˜• ",
    "created_at": "2021-03-08T16:11:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792864817",
    "id": 792864817,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjg2NDgxNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792864817/reactions"
    },
    "updated_at": "2021-03-08T16:11:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792864817",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "PS. Iam tryed with linux. One not working, another, the fifth, the tenth and so on. Liked distribution, not working Test-Connection, working Test-Connection, unliked distribution. Horror. I suspect that it is necessary to use only what is officially supported\r\n\r\nI close this issue. This was the second attempt. \r\n",
    "created_at": "2021-03-08T16:19:36Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/14966#issuecomment-792871312",
    "id": 792871312,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/14966",
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5Mjg3MTMxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792871312/reactions"
    },
    "updated_at": "2021-03-08T16:19:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/792871312",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  }
]
