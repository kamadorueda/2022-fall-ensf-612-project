[
  {
    "author_association": "NONE",
    "body": "Just learned about the [SocketsHttpHandler](https://docs.microsoft.com/en-us/dotnet/core/whats-new/dotnet-core-2-1#sockets-improvements) and that we can turn that off.\r\nHaven't yet read and understood the whole thing, but wanted to quickly post and update in case others reading this.\r\n\r\nSo basically we can disable this new sockets http handler via an env var and things will work the old way\r\n```powershell\r\n$env:DOTNET_SYSTEM_NET_HTTP_USESOCKETSHTTPHANDLER=0\r\n```\r\n\r\ni.e.: spnego will be used.\r\n\r\nThis is the same behavior with .NET Core 2.1 with HttpClient.\r\n\r\ndoes not work by default\r\n----\r\n```csharp\r\nvar handler = new HttpClientHandler\r\n            {\r\n                UseDefaultCredentials = true,\r\n                AllowAutoRedirect = true,\r\n            };\r\nusing (var client = new HttpClient(handler))\r\n            {\r\n                var res = client.SendAsync(new HttpRequestMessage(HttpMethod.Get, uri)).GetAwaiter().GetResult();\r\n                System.Console.WriteLine(res);\r\n            }\r\n```\r\n\r\nworks\r\n----\r\n```csharp\r\nAppContext.SetSwitch(\"System.Net.Http.UseSocketsHttpHandler\", false);\r\nvar handler = new HttpClientHandler\r\n            {\r\n                UseDefaultCredentials = true,\r\n                AllowAutoRedirect = true,\r\n            };\r\nusing (var client = new HttpClient(handler))\r\n            {\r\n                var res = client.SendAsync(new HttpRequestMessage(HttpMethod.Get, uri)).GetAwaiter().GetResult();\r\n                System.Console.WriteLine(res);\r\n            }\r\n```\r\n\r\nCreds goes to this [SO post](https://stackoverflow.com/questions/52266659/net-core-spnego-auth-with-httpclient/52267046)",
    "created_at": "2018-09-17T16:21:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7801#issuecomment-422079833",
    "id": 422079833,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7801",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjA3OTgzMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/422079833/reactions"
    },
    "updated_at": "2018-09-17T16:21:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/422079833",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1450460?v=4",
      "events_url": "https://api.github.com/users/CJHarmath/events{/privacy}",
      "followers_url": "https://api.github.com/users/CJHarmath/followers",
      "following_url": "https://api.github.com/users/CJHarmath/following{/other_user}",
      "gists_url": "https://api.github.com/users/CJHarmath/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/CJHarmath",
      "id": 1450460,
      "login": "CJHarmath",
      "node_id": "MDQ6VXNlcjE0NTA0NjA=",
      "organizations_url": "https://api.github.com/users/CJHarmath/orgs",
      "received_events_url": "https://api.github.com/users/CJHarmath/received_events",
      "repos_url": "https://api.github.com/users/CJHarmath/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/CJHarmath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CJHarmath/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/CJHarmath"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "If I'm reading dotnet/corefx#32328 this will be fixed when we move to CoreFX 3.0+",
    "created_at": "2019-01-24T01:00:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7801#issuecomment-457025852",
    "id": 457025852,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7801",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzAyNTg1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457025852/reactions"
    },
    "updated_at": "2019-01-24T01:00:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457025852",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "yes, that's correct.\r\nin the meantime, either don't use CName or disable SocketsHttpHandler as shown above.",
    "created_at": "2019-01-24T02:40:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7801#issuecomment-457045342",
    "id": 457045342,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7801",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzA0NTM0Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457045342/reactions"
    },
    "updated_at": "2019-01-24T02:40:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457045342",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1450460?v=4",
      "events_url": "https://api.github.com/users/CJHarmath/events{/privacy}",
      "followers_url": "https://api.github.com/users/CJHarmath/followers",
      "following_url": "https://api.github.com/users/CJHarmath/following{/other_user}",
      "gists_url": "https://api.github.com/users/CJHarmath/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/CJHarmath",
      "id": 1450460,
      "login": "CJHarmath",
      "node_id": "MDQ6VXNlcjE0NTA0NjA=",
      "organizations_url": "https://api.github.com/users/CJHarmath/orgs",
      "received_events_url": "https://api.github.com/users/CJHarmath/received_events",
      "repos_url": "https://api.github.com/users/CJHarmath/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/CJHarmath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CJHarmath/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/CJHarmath"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as external and has not had any activity for **1 day**. It has been be closed for housekeeping purposes.",
    "created_at": "2019-05-31T22:00:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7801#issuecomment-497873418",
    "id": 497873418,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7801",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Nzg3MzQxOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/497873418/reactions"
    },
    "updated_at": "2019-05-31T22:00:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/497873418",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  },
  {
    "author_association": "NONE",
    "body": "Just confirmed with PowerShell Core 7 preview 3 that Kerberos is now working properly on both Windows and Linux with CNames. Sweet! \r\nThanks!",
    "created_at": "2019-08-21T14:38:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7801#issuecomment-523486799",
    "id": 523486799,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7801",
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQ4Njc5OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/523486799/reactions"
    },
    "updated_at": "2019-08-21T14:38:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/523486799",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1450460?v=4",
      "events_url": "https://api.github.com/users/CJHarmath/events{/privacy}",
      "followers_url": "https://api.github.com/users/CJHarmath/followers",
      "following_url": "https://api.github.com/users/CJHarmath/following{/other_user}",
      "gists_url": "https://api.github.com/users/CJHarmath/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/CJHarmath",
      "id": 1450460,
      "login": "CJHarmath",
      "node_id": "MDQ6VXNlcjE0NTA0NjA=",
      "organizations_url": "https://api.github.com/users/CJHarmath/orgs",
      "received_events_url": "https://api.github.com/users/CJHarmath/received_events",
      "repos_url": "https://api.github.com/users/CJHarmath/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/CJHarmath/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CJHarmath/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/CJHarmath"
    }
  }
]
