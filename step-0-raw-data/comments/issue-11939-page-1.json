[
  {
    "author_association": "COLLABORATOR",
    "body": "@curegit can you verify the behaviour when explicitly using `-Command` v.s. `-File` parameters for pwsh and powershell?\r\n\r\n```\r\npwsh -Command Script.ps1 -1\r\npowershell -Command Script.ps1 -1\r\n\r\npwsh -File Script.ps1 -1\r\npowershell -File Script.ps1 -1\r\n```",
    "created_at": "2020-02-24T14:03:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11939#issuecomment-590333926",
    "id": 590333926,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11939",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDMzMzkyNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/590333926/reactions"
    },
    "updated_at": "2020-02-24T14:03:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/590333926",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "@vexx32 \r\n\r\n```bat\r\n>powershell -Command script.ps1 -1\r\n-1\r\n\r\n>powershell -File script.ps1 -1\r\n0\r\n\r\n```\r\n\r\n```sh\r\n$ pwsh -Command ./script.ps1 -1\r\n-1\r\n$ pwsh -File ./script.ps1 -1\r\n0\r\n```\r\n\r\nIt doesn't make sense to me. I think all characters appeared after the File parameter are interpreted as script parameters from seeing the `pwsh` help.",
    "created_at": "2020-02-25T03:34:29Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11939#issuecomment-590666035",
    "id": 590666035,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11939",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDY2NjAzNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/590666035/reactions"
    },
    "updated_at": "2020-02-25T03:34:29Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/590666035",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/37978051?v=4",
      "events_url": "https://api.github.com/users/curegit/events{/privacy}",
      "followers_url": "https://api.github.com/users/curegit/followers",
      "following_url": "https://api.github.com/users/curegit/following{/other_user}",
      "gists_url": "https://api.github.com/users/curegit/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/curegit",
      "id": 37978051,
      "login": "curegit",
      "node_id": "MDQ6VXNlcjM3OTc4MDUx",
      "organizations_url": "https://api.github.com/users/curegit/orgs",
      "received_events_url": "https://api.github.com/users/curegit/received_events",
      "repos_url": "https://api.github.com/users/curegit/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/curegit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/curegit/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/curegit"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Yeah, I'm not clear on why there's this difference here. @mklement0 I think has run into this before and might have some insight here...\r\n\r\nBut the reason for the difference between pwsh and powershell when not specifying -Command or -File I think is due to the default action being changed between WinPS and pwsh.",
    "created_at": "2020-02-25T03:50:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11939#issuecomment-590669521",
    "id": 590669521,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11939",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDY2OTUyMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/590669521/reactions"
    },
    "updated_at": "2020-02-25T03:50:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/590669521",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Thanks, @vexx32 : indeed, the default CLI parameter has changed from `-Command` to `-File` in PowerShell Core, so as to properly support Unix shell scripts with shebang lines.\r\n\r\n`-File` fundamentally processes the arguments that follow the target script path differently than `-Command`:\r\n\r\n`-File` interprets the arguments _verbatim_ rather than subjecting them to the usual in-process parameter-parsing and binding (which `-Command` also does).\r\n\r\nHowever - and this appears to be the bug at hand - `-File` apparently _blindly_ interprets `-`-prefixed tokens as parameter _names_, even though `-1` is during regular (in-process) parsing is _never_ considered a parameter _name_, because parameter names starting with a _digit_ aren't supported.\r\n\r\nIn effect, it seems, `-1` is mistakenly treated as an _undeclared (switch) parameter_, which is collected in `$args` rather than being bound _positionally_, as a _number_, to parameter `-number`.\r\n\r\nYou can verify this by declaring `script.ps1` as follows, using the `[CmdletBinding()]` attribute to cause _undeclared_ parameters / arguments to cause an _error_:\r\n\r\n```powershell\r\n[CmdletBinding()]\r\nparam([Int]$number)\r\n\"-number: [$number]\"\r\n```\r\n\r\n-> `A parameter cannot be found that matches parameter name '1'`\r\n\r\nThe only workaround is to use `-number -1` (_named_ argument passing) instead of `-1`; `(-1)` is _not_ an option, due to the aforementioned _verbatim_ interpretation of the arguments.\r\n\r\nNote that a variation of this issue has come up before with respect to Booleans passed to `[switch]` / `[bool]` parameters and has _partially_ been fixed in PR #4178, though #10838 remains unsolved.",
    "created_at": "2020-03-01T22:27:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/11939#issuecomment-593153499",
    "id": 593153499,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/11939",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MzE1MzQ5OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/593153499/reactions"
    },
    "updated_at": "2020-03-01T22:29:02Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/593153499",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  }
]
