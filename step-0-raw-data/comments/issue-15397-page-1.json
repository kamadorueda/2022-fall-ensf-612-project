[
  {
    "author_association": "NONE",
    "body": "You can try the following\r\n```\r\nfunction test {\r\n[cmdletbinding()]\r\nParam()\r\n\r\nWrite-Warning \"warning\"\r\nWrite-error   \"error\"\r\nWrite-host    \"Host\"\r\n\r\n}\r\n\r\n```\r\n\r\n` test  -ErrorAction stop  `\r\nPrints the error message and stops\r\n` test  -WarningAction Stop` \r\nPrints the warning message and stops. \r\n\r\nhttps://docs.microsoft.com/en-us/dotnet/api/system.management.automation.actionpreference?view=powershellsdk-7.0.0 \r\nshould say explicitly that the messages are printed. \r\n\r\nThis is by design, stopping because of an error / warning condition - but doing so silently, meaning the user doesn't know what has happened would generally be considered to be a bad thing. \r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n<blockquote><img src=\"https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png\" width=\"48\" align=\"right\"><div><strong><a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.actionpreference\">ActionPreference Enum (System.Management.Automation)</a></strong></div><div>Defines the Action Preference options.  These options determine what will happen when a particular type of event occurs. For example, setting shell variable ErrorActionPreference to \"Stop\" will cause the command to stop when an otherwise non-terminating error occurs. </div></blockquote>",
    "created_at": "2021-05-14T14:45:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15397#issuecomment-841289169",
    "id": 841289169,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15397",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTI4OTE2OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/841289169/reactions"
    },
    "updated_at": "2021-05-14T14:45:21Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/841289169",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "NONE",
    "body": "\"This is by design, stopping because of an error / warning condition - but doing so silently, meaning the user doesn't know what has happened would generally be considered to be a bad thing.\"\r\n\r\nIsn't that what the ErrorVariable and WarningVariable parameters are for? I don't think you'd want to use \"-warningaction stop\" if you're in an interactive prompt, hence there's no need to display that to the user.\r\nIf the user is smart enough to ask for a full stop, the user should also be smart enough to use these options.\r\n\r\nI resolved my issue by redirecting the warning stream to $null",
    "created_at": "2021-05-18T19:16:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15397#issuecomment-843464534",
    "id": 843464534,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15397",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MzQ2NDUzNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/843464534/reactions"
    },
    "updated_at": "2021-05-18T19:16:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/843464534",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/33486910?v=4",
      "events_url": "https://api.github.com/users/donlassini/events{/privacy}",
      "followers_url": "https://api.github.com/users/donlassini/followers",
      "following_url": "https://api.github.com/users/donlassini/following{/other_user}",
      "gists_url": "https://api.github.com/users/donlassini/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/donlassini",
      "id": 33486910,
      "login": "donlassini",
      "node_id": "MDQ6VXNlcjMzNDg2OTEw",
      "organizations_url": "https://api.github.com/users/donlassini/orgs",
      "received_events_url": "https://api.github.com/users/donlassini/received_events",
      "repos_url": "https://api.github.com/users/donlassini/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/donlassini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donlassini/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/donlassini"
    }
  },
  {
    "author_association": "NONE",
    "body": "@donlassini  \r\n\r\nWell there are a couple of assumptions, one is that you would specify and check warning variable every time you used -warningAction stop in the script and report the issue as needed.  The second is not using -stop interactively - it's not common but it is used. \r\nRedirecting the message is the right way to go. \r\n\r\nHowever I did find one thing checking on this \r\nwith that test function \r\n`try {test } catch {\"boo\"}`    \r\nOutputs everything     \r\n`try {test -ErrorAction Stop} catch {\"boo\"}`    \r\nOutputs \"boo\" _instead of_ the error message,\r\n`try {test -WarningAction Stop} catch {\"boo\"}`\r\nOutputs \"boo\" _in addition to_ the warning message - and the error in the catch block is not the warning message but the \" The running command stopped because the preference variable \"WarningPreference\" or common parameter is set to Stop: warning\"\r\n\r\n",
    "created_at": "2021-05-19T16:43:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15397#issuecomment-844280033",
    "id": 844280033,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15397",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NDI4MDAzMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/844280033/reactions"
    },
    "updated_at": "2021-05-19T16:43:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/844280033",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  }
]
