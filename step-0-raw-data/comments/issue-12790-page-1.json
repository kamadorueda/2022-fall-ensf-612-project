[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Did some investigation on this and found the cause of the issue. This issue only occurs when the file path does not exist and if the drive name does not match the root drive. For example, if using provider qualified names or if the root is not another drive it works as expected.\r\n\r\n```powershell\r\n# File exists using provider qualified path\r\nC:\\> Set-Content -Path Microsoft.PowerShell.Core\\FileSystem::C:\\exists.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: Microsoft.PowerShell.Core\\FileSystem::C:\\exists.txt\".\r\n\r\n# File doesn't exist using provider qualified path\r\nC:\\> Set-Content -Path Microsoft.PowerShell.Core\\FileSystem::C:\\does_notexist.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: Microsoft.PowerShell.Core\\FileSystem::C:\\does_notexist.txt\".\r\n\r\n# File exists using non-drive qualified path\r\nC:\\> Set-Content -Path \\\\localhost\\c$\\exists.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: Microsoft.PowerShell.Core\\FileSystem::\\\\localhost\\c$\\exists.txt\".\r\n\r\n# File doesn't exist using non-drive qualified path\r\nC:\\> Set-Content -Path \\\\localhost\\c$\\does_notexist.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: Microsoft.PowerShell.Core\\FileSystem::\\\\localhost\\c$\\does_notexist.txt\".\r\n\r\n# File exists using drive qualified path\r\nC:\\> Set-Content -Path C:\\exists.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: C:\\exists.txt\".\r\n\r\n# File doesn't exist using drive qualified path\r\nC:\\> Set-Content -Path C:\\does_notexist.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: C:\\does_notexist.txt\".\r\n\r\n# File exists using different drive qualified (Temp: maps to C:)\r\nC:\\> Set-Content -Path Temp:\\exists.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: Temp:\\exists.txt\".\r\n\r\n# File doesn't exist using different drive qualfied (Temp: maps to C:)\r\nC:\\> Set-Content -Path Temp:\\does_notexist.txt -Value 'hello' -WhatIf\r\nWhat if: Performing the operation \"Set Content\" on target \"Path: Temp:\\C:\\does_notexist.txt\".\r\n```\r\n\r\n`GetUnresolvedProviderPathFromPSPath` calls `GetProviderSpecificPath` which uses `drive.Root` and that returns `C:\\Example-File`. Once that is returned `GetUnresolvedProviderPathFromPSPath` uses that value to create a `FileInfo` object with a path of `C:\\Example-File` and sets the drive to be `Drive`. This mismatch causes the display issue.\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/4b9b0788ed28ea6d463ce857d1ed81bd4a977a59/src/Microsoft.PowerShell.Commands.Management/commands/management/ContentCommandBase.cs#L648-L661\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/4b9b0788ed28ea6d463ce857d1ed81bd4a977a59/src/System.Management.Automation/namespaces/LocationGlobber.cs#L2337-L2337",
    "created_at": "2020-10-20T01:23:13Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12790#issuecomment-712529901",
    "id": 712529901,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12790",
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjUyOTkwMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/712529901/reactions"
    },
    "updated_at": "2020-10-20T01:23:13Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/712529901",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/38873752?v=4",
      "events_url": "https://api.github.com/users/ThomasNieto/events{/privacy}",
      "followers_url": "https://api.github.com/users/ThomasNieto/followers",
      "following_url": "https://api.github.com/users/ThomasNieto/following{/other_user}",
      "gists_url": "https://api.github.com/users/ThomasNieto/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ThomasNieto",
      "id": 38873752,
      "login": "ThomasNieto",
      "node_id": "MDQ6VXNlcjM4ODczNzUy",
      "organizations_url": "https://api.github.com/users/ThomasNieto/orgs",
      "received_events_url": "https://api.github.com/users/ThomasNieto/received_events",
      "repos_url": "https://api.github.com/users/ThomasNieto/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ThomasNieto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ThomasNieto/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ThomasNieto"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@vexx32 have an idea on the proper way to fix this? `path` on line 650 is `Drive:\\Example-File`. Once `GetUnresolvedProviderPathFromPSPath` is called it gets changed to `C:\\Example-File` due to line 2337 where `drive.Root` is used. However, `drive` on 657 is still pointing to `Drive:` instead of `C:`.",
    "created_at": "2020-10-20T21:08:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12790#issuecomment-713140607",
    "id": 713140607,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12790",
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzE0MDYwNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/713140607/reactions"
    },
    "updated_at": "2020-10-20T21:08:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/713140607",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/38873752?v=4",
      "events_url": "https://api.github.com/users/ThomasNieto/events{/privacy}",
      "followers_url": "https://api.github.com/users/ThomasNieto/followers",
      "following_url": "https://api.github.com/users/ThomasNieto/following{/other_user}",
      "gists_url": "https://api.github.com/users/ThomasNieto/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ThomasNieto",
      "id": 38873752,
      "login": "ThomasNieto",
      "node_id": "MDQ6VXNlcjM4ODczNzUy",
      "organizations_url": "https://api.github.com/users/ThomasNieto/orgs",
      "received_events_url": "https://api.github.com/users/ThomasNieto/received_events",
      "repos_url": "https://api.github.com/users/ThomasNieto/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ThomasNieto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ThomasNieto/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ThomasNieto"
    }
  }
]
