[
  {
    "author_association": "MEMBER",
    "body": "While this can be reproduced during remoting due to the higher likelihood of HOME not being set (or being set to a non-writable folder), this is not itself a remoting bug.\n\nThe `ConfigPropertyAccessor` logic that is meant to read PowerShell configuration values from JSON files _must not_ require that user config directory can be created. If it cannot be written, PowerShell should not fail like this.\n\nThe XDG Base Directory Specification (which this `UserConfigDirectory` is for) states:\n\n> If, when attempting to write a file, the destination directory is non-existant an attempt should be made to create it with permission 0700. If the destination directory exists already the permissions should not be changed. The application should be prepared to handle the case where the file could not be written, either because the directory was non-existant and could not be created, or for any other reason. In such case it may chose to present an error message to the user.\n\nAn error message is acceptable; crashing is not.\n",
    "created_at": "2016-09-19T17:40:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-248064790",
    "id": 248064790,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODA2NDc5MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248064790/reactions"
    },
    "updated_at": "2016-09-19T17:40:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248064790",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I'm assigning to @mirichmo for follow-up.\n",
    "created_at": "2016-09-19T17:41:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-248064898",
    "id": 248064898,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODA2NDg5OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248064898/reactions"
    },
    "updated_at": "2016-09-19T17:41:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248064898",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "NONE",
    "body": "It would be nice if it check HOME was set, before trying to use it and if not set, display an error message saying please set environment variable home.  I was lucky to notice this was a difference between myself running it as a user and a service running it.\n",
    "created_at": "2016-09-19T17:58:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-248070252",
    "id": 248070252,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODA3MDI1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248070252/reactions"
    },
    "updated_at": "2016-09-19T17:58:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248070252",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/9368124?v=4",
      "events_url": "https://api.github.com/users/damon-atkins/events{/privacy}",
      "followers_url": "https://api.github.com/users/damon-atkins/followers",
      "following_url": "https://api.github.com/users/damon-atkins/following{/other_user}",
      "gists_url": "https://api.github.com/users/damon-atkins/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/damon-atkins",
      "id": 9368124,
      "login": "damon-atkins",
      "node_id": "MDQ6VXNlcjkzNjgxMjQ=",
      "organizations_url": "https://api.github.com/users/damon-atkins/orgs",
      "received_events_url": "https://api.github.com/users/damon-atkins/received_events",
      "repos_url": "https://api.github.com/users/damon-atkins/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/damon-atkins/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/damon-atkins/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/damon-atkins"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Ah but PowerShell should be able to run even without `HOME` being set, as there are applicable scenarios where this is the correct environment (say, running as a daemon, or started by cron under a user with a non-existent home directory). So instead of erroring, I think it should just run without a problem (and error gracefully when it needs to write something but can't).\n",
    "created_at": "2016-09-19T18:42:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-248083412",
    "id": 248083412,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0ODA4MzQxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248083412/reactions"
    },
    "updated_at": "2016-09-19T18:42:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/248083412",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "closed via #2387\n",
    "created_at": "2016-10-08T04:46:38Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-252402700",
    "id": 252402700,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MjQwMjcwMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/252402700/reactions"
    },
    "updated_at": "2016-10-08T04:46:38Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/252402700",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "NONE",
    "body": "@andschwa @mirichmo I'm continuing to encounter this error with the latest alpha release on Ubuntu 14.04 when HOME is unset. I expected running it with -NoProfile would prevent Powershell from attempting to load settings, but I could be mistaken on what that flag controls. Is this error still expected on Ubuntu 14.04 even though #2387 is merged in?\r\n\r\n    $ unset HOME\r\n    $ powershell\r\n    PowerShell\r\n    Copyright (C) 2016 Microsoft Corporation. All rights reserved.\r\n\r\n    The shell cannot be started. A failure occurred during initialization:\r\n    The type initializer for 'System.Management.Automation.ConfigPropertyAccessor' threw an exception.\r\n\r\nEnvironment info:\r\n\r\n```\r\nPS /home/kloudless> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.0.0-alpha\r\nPSEdition                      Core\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nBuildVersion                   3.0.0.0\r\nGitCommitId                    v6.0.0-alpha.14\r\nCLRVersion\r\nWSManStackVersion              3.0\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\n```",
    "created_at": "2017-01-11T06:37:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-271790518",
    "id": 271790518,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTc5MDUxOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/271790518/reactions"
    },
    "updated_at": "2017-01-11T06:37:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/271790518",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/616742?v=4",
      "events_url": "https://api.github.com/users/vinodc/events{/privacy}",
      "followers_url": "https://api.github.com/users/vinodc/followers",
      "following_url": "https://api.github.com/users/vinodc/following{/other_user}",
      "gists_url": "https://api.github.com/users/vinodc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vinodc",
      "id": 616742,
      "login": "vinodc",
      "node_id": "MDQ6VXNlcjYxNjc0Mg==",
      "organizations_url": "https://api.github.com/users/vinodc/orgs",
      "received_events_url": "https://api.github.com/users/vinodc/received_events",
      "repos_url": "https://api.github.com/users/vinodc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vinodc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vinodc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vinodc"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@vinodc Can you please attach the stack trace from the exception?\r\n\r\nBased on code inspection, I suspect that this is the [offending line](https://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/CoreCLR/CorePsPlatform.cs#L237). My guess is that it is an ArgumentNullException stating that the argument to Path.Combine is null since \"HOME\" is not defined.",
    "created_at": "2017-01-11T23:41:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-272031367",
    "id": 272031367,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjAzMTM2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272031367/reactions"
    },
    "updated_at": "2017-01-11T23:41:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272031367",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12738734?v=4",
      "events_url": "https://api.github.com/users/mirichmo/events{/privacy}",
      "followers_url": "https://api.github.com/users/mirichmo/followers",
      "following_url": "https://api.github.com/users/mirichmo/following{/other_user}",
      "gists_url": "https://api.github.com/users/mirichmo/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mirichmo",
      "id": 12738734,
      "login": "mirichmo",
      "node_id": "MDQ6VXNlcjEyNzM4NzM0",
      "organizations_url": "https://api.github.com/users/mirichmo/orgs",
      "received_events_url": "https://api.github.com/users/mirichmo/received_events",
      "repos_url": "https://api.github.com/users/mirichmo/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mirichmo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mirichmo/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mirichmo"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "I believe that's #1794.",
    "created_at": "2017-01-12T00:35:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-272040823",
    "id": 272040823,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjA0MDgyMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272040823/reactions"
    },
    "updated_at": "2017-01-12T00:35:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272040823",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2226434?v=4",
      "events_url": "https://api.github.com/users/andschwa/events{/privacy}",
      "followers_url": "https://api.github.com/users/andschwa/followers",
      "following_url": "https://api.github.com/users/andschwa/following{/other_user}",
      "gists_url": "https://api.github.com/users/andschwa/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/andschwa",
      "id": 2226434,
      "login": "andschwa",
      "node_id": "MDQ6VXNlcjIyMjY0MzQ=",
      "organizations_url": "https://api.github.com/users/andschwa/orgs",
      "received_events_url": "https://api.github.com/users/andschwa/received_events",
      "repos_url": "https://api.github.com/users/andschwa/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/andschwa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andschwa/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/andschwa"
    }
  },
  {
    "author_association": "NONE",
    "body": "@mirichmo That's all the output that was provided. Was there a way to obtain the stack-trace from the alpha release? I'm not sure if it was compiled with debugging symbols. Would I need to compile it from source to generate a Debug build instead?",
    "created_at": "2017-01-12T00:46:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-272042785",
    "id": 272042785,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjA0Mjc4NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272042785/reactions"
    },
    "updated_at": "2017-01-12T00:46:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272042785",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/616742?v=4",
      "events_url": "https://api.github.com/users/vinodc/events{/privacy}",
      "followers_url": "https://api.github.com/users/vinodc/followers",
      "following_url": "https://api.github.com/users/vinodc/following{/other_user}",
      "gists_url": "https://api.github.com/users/vinodc/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vinodc",
      "id": 616742,
      "login": "vinodc",
      "node_id": "MDQ6VXNlcjYxNjc0Mg==",
      "organizations_url": "https://api.github.com/users/vinodc/orgs",
      "received_events_url": "https://api.github.com/users/vinodc/received_events",
      "repos_url": "https://api.github.com/users/vinodc/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vinodc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vinodc/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vinodc"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Hmmmm... if PowerShell had started, you could use `$Error[0] | fl * -Force`. Debugging it in VS Code and stopping at the exception throw point would provide the answer.\r\n\r\nWith that said, I'm pretty certain that this is a simpler reproduction of #1794 and no additional information is needed.",
    "created_at": "2017-01-12T00:58:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2205#issuecomment-272044650",
    "id": 272044650,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjA0NDY1MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272044650/reactions"
    },
    "updated_at": "2017-01-12T00:58:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/272044650",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12738734?v=4",
      "events_url": "https://api.github.com/users/mirichmo/events{/privacy}",
      "followers_url": "https://api.github.com/users/mirichmo/followers",
      "following_url": "https://api.github.com/users/mirichmo/following{/other_user}",
      "gists_url": "https://api.github.com/users/mirichmo/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mirichmo",
      "id": 12738734,
      "login": "mirichmo",
      "node_id": "MDQ6VXNlcjEyNzM4NzM0",
      "organizations_url": "https://api.github.com/users/mirichmo/orgs",
      "received_events_url": "https://api.github.com/users/mirichmo/received_events",
      "repos_url": "https://api.github.com/users/mirichmo/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mirichmo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mirichmo/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mirichmo"
    }
  }
]
