[
  {
    "author_association": "CONTRIBUTOR",
    "body": "I've done a bit more troubleshooting and research here.\r\n\r\nI have nailed down why the first workaround above is failing. Watching process explorer while my ctrl+c was being swallowed, I found that conhost had some orphaned handles and closing those handles via process explorer magically \"woke up\" ctrl+c. Why those handles are not being closed is a mystery but I also discovered that firing `GenerateConsoleCtrlEvent` after a user invoked ctrl+c is what puts things into this state. Of course if a user enters ctrl+c, the signal is sent to all processes in the console so the call to `GenerateConsoleCtrlEvent` that my application makes directed to a specific process group is unnecesary. I can't find any documentation verifying this but it certainly appears to be the case.\r\n\r\nIdeally, I'd still be able to send a ctrl+break to powershell's process group because that would save me from messing with `SetConsoleCtrlHandler` and altering powershell's ctrl+c handler state. I could override powershell's `ConsoleControl.BreakHandler` but I cant access the internal `SpinUpBreakHandlerThread` which is the default ctrl+c behavior and what I ideally want.\r\n\r\nWould the powershell maintainers be open to a PR that performs \"ctrl+c - like \" behavior on ctrl + break IF `$host.DebuggerEnabled` is $false or if powershell is in `-NonInteractive` mode?",
    "created_at": "2017-07-17T18:12:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4254#issuecomment-315836205",
    "id": 315836205,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4254",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTgzNjIwNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315836205/reactions"
    },
    "updated_at": "2017-07-17T18:12:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315836205",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/655165?v=4",
      "events_url": "https://api.github.com/users/mwrock/events{/privacy}",
      "followers_url": "https://api.github.com/users/mwrock/followers",
      "following_url": "https://api.github.com/users/mwrock/following{/other_user}",
      "gists_url": "https://api.github.com/users/mwrock/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mwrock",
      "id": 655165,
      "login": "mwrock",
      "node_id": "MDQ6VXNlcjY1NTE2NQ==",
      "organizations_url": "https://api.github.com/users/mwrock/orgs",
      "received_events_url": "https://api.github.com/users/mwrock/received_events",
      "repos_url": "https://api.github.com/users/mwrock/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mwrock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mwrock/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mwrock"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "The Ctrl+Break -> drop into debugger function was added to make Ctrl+Break more useful with interactive sessions.  So I am fine to revert back to the original the stop-process behavior for non-interactive modes or if the debugger is disabled.",
    "created_at": "2017-07-17T23:10:37Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4254#issuecomment-315911108",
    "id": 315911108,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4254",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTkxMTEwOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315911108/reactions"
    },
    "updated_at": "2017-07-17T23:10:37Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315911108",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14019529?v=4",
      "events_url": "https://api.github.com/users/PaulHigin/events{/privacy}",
      "followers_url": "https://api.github.com/users/PaulHigin/followers",
      "following_url": "https://api.github.com/users/PaulHigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulHigin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PaulHigin",
      "id": 14019529,
      "login": "PaulHigin",
      "node_id": "MDQ6VXNlcjE0MDE5NTI5",
      "organizations_url": "https://api.github.com/users/PaulHigin/orgs",
      "received_events_url": "https://api.github.com/users/PaulHigin/received_events",
      "repos_url": "https://api.github.com/users/PaulHigin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PaulHigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulHigin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PaulHigin"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@mwrock the change your proposing seems reasonable to me",
    "created_at": "2017-07-17T23:30:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4254#issuecomment-315914444",
    "id": 315914444,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4254",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTkxNDQ0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315914444/reactions"
    },
    "updated_at": "2017-07-17T23:30:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315914444",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Great! BTW: I can totally see how the debugger functionality is an awesome feature for interactive scripts.. I'll get a PR in soon for the non interactive experience.",
    "created_at": "2017-07-18T00:23:42Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4254#issuecomment-315922394",
    "id": 315922394,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4254",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTkyMjM5NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315922394/reactions"
    },
    "updated_at": "2017-07-18T00:23:42Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315922394",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/655165?v=4",
      "events_url": "https://api.github.com/users/mwrock/events{/privacy}",
      "followers_url": "https://api.github.com/users/mwrock/followers",
      "following_url": "https://api.github.com/users/mwrock/following{/other_user}",
      "gists_url": "https://api.github.com/users/mwrock/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mwrock",
      "id": 655165,
      "login": "mwrock",
      "node_id": "MDQ6VXNlcjY1NTE2NQ==",
      "organizations_url": "https://api.github.com/users/mwrock/orgs",
      "received_events_url": "https://api.github.com/users/mwrock/received_events",
      "repos_url": "https://api.github.com/users/mwrock/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mwrock/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mwrock/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mwrock"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "The design to break into the debugger is especially useful when a script is taking much longer than expected, and you typically have not turned on debugging in such situations.",
    "created_at": "2017-07-18T06:28:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/4254#issuecomment-315970365",
    "id": 315970365,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/4254",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTk3MDM2NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315970365/reactions"
    },
    "updated_at": "2017-07-18T06:28:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/315970365",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  }
]
