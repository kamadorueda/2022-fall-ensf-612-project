[
  {
    "author_association": "COLLABORATOR",
    "body": "What about\r\n```powershell\r\n$b = [pscustomobject]@{v = \"tst\"}\r\n$b\r\n$b.psobject\r\n$b.psobject.TypeNames.add(\"TestType\")\r\n$b.psobject\r\n```",
    "created_at": "2018-08-05T13:29:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7450#issuecomment-410520309",
    "id": 410520309,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7450",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUyMDMwOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410520309/reactions"
    },
    "updated_at": "2018-08-05T13:29:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410520309",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "This actually has nothing to do with functions. It appears that you cannot add custom types to strings. In your example code, you are essentially assigning a custom type name to the `$SomeString` string. \r\n\r\nYou can repro this problem more succinctly with:\r\n\r\n```powershell\r\n$a = 'a'\r\n$a.PSObject.TypeNames.Insert(0,'Example.Custom.Type')\r\n$a.PSOBject.TypeNames\r\n```\r\n\r\nYou can see that the `'Example.Custom.Type'` PSTypeName is not added to the TypeNames collection. I get the same result in 5.1 as  do in 6.0.0+",
    "created_at": "2018-08-05T17:27:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7450#issuecomment-410535025",
    "id": 410535025,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7450",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUzNTAyNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410535025/reactions"
    },
    "updated_at": "2018-08-05T17:27:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410535025",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "The code is not producing a `PSCustomObject`. You are setting an array and then overwriting it with a string, so the type is `String`. Using `Write-Output` or `return` does not change or set the type to be a `PSCustomObject`. \r\n\r\nYou either need to use `New-Object` and `Add-Member` or more simply\r\n```PowerShell\r\n$CustomObject = [PSCustomObject] @{ SomeString = $SomeString }\r\n```\r\n\r\nYou can also simplify it down even further by setting `PSTypeName` with the object and let it output directly to the Pipeline. See the code below:\r\n```PowerShell\r\nfunction New-CustomObject{\r\n[CmdletBinding(DefaultParameterSetName = 'Parameter Set 1',\r\n        PositionalBinding = $false,\r\n        HelpUri = '',\r\n        ConfirmImpact = 'Medium')]\r\n    param (\r\n        [Parameter(Mandatory = $true,\r\n            Position = 0,\r\n            ValueFromPipelineByPropertyName = $true,\r\n            ParameterSetName = 'Parameter Set 1')]\r\n        [ValidateNotNull()]\r\n        [ValidateNotNullOrEmpty()]\r\n        [String]$SomeString\r\n)\r\n\r\n    [PSCustomObject] @{ \r\n        PSTypeName = \"Example.Custom.Type\"\r\n        SomeString = $SomeString\r\n    }\r\n}\r\n\r\n$CustomTypeObject = New-CustomObject -SomeString 'Here is some string'\r\n$CustomTypeObject | Get-Member \r\n```\r\n\r\nNotice, I do not have `Write-Output` or `return`. Anything that generates output defaults to writing to the `Output Stream` of the Pipeline which is what is returned, no matter where or how many times it is written in the function. If I set the object to a variable, I can just output with `$customVariable` and will do the same thing as `Write-Output $customVariable`.",
    "created_at": "2018-08-05T19:05:37Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7450#issuecomment-410540778",
    "id": 410540778,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7450",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDU0MDc3OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410540778/reactions"
    },
    "updated_at": "2018-08-05T19:05:37Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410540778",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/20375201?v=4",
      "events_url": "https://api.github.com/users/dragonwolf83/events{/privacy}",
      "followers_url": "https://api.github.com/users/dragonwolf83/followers",
      "following_url": "https://api.github.com/users/dragonwolf83/following{/other_user}",
      "gists_url": "https://api.github.com/users/dragonwolf83/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dragonwolf83",
      "id": 20375201,
      "login": "dragonwolf83",
      "node_id": "MDQ6VXNlcjIwMzc1MjAx",
      "organizations_url": "https://api.github.com/users/dragonwolf83/orgs",
      "received_events_url": "https://api.github.com/users/dragonwolf83/received_events",
      "repos_url": "https://api.github.com/users/dragonwolf83/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dragonwolf83/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dragonwolf83/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dragonwolf83"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@dragonwolf83 You can manipulate TypeNames on just about any object type, not just `PSCustomObject`s. However, it appears that Strings are an exception to the rule.\r\n\r\nTak Int for example:\r\n\r\n```powershell\r\n[int]$One = 1\r\n$One.PSObject.TypeNames.Insert(0,\"Example.Custom.Type\")\r\n$One.PSObject.TypeNames\r\n```\r\n\r\nResult\r\n\r\n```none\r\nExample.Custom.Type\r\nTest.Type\r\nSystem.Int32\r\nSystem.ValueType\r\nSystem.Object\r\n```\r\n\r\nBut String does not:\r\n\r\n```powershell\r\n$a = 'a'\r\n$a.PSObject.TypeNames.Insert(0,'Example.Custom.Type')\r\n$a.PSOBject.TypeNames\r\n```\r\n\r\nResult:\r\n\r\n```none\r\nSystem.String\r\nSystem.Object\r\n```",
    "created_at": "2018-08-05T19:58:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7450#issuecomment-410543919",
    "id": 410543919,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7450",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDU0MzkxOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410543919/reactions"
    },
    "updated_at": "2018-08-05T19:58:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410543919",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "NONE",
    "body": "Interesting... That is good to know. I only added a comment because @MSAdministrator refers to setting a PSTypeName on a  `PSCustomObject` and I didn't see it get set anywhere.\r\n\r\nIf Strings are expected to allow a custom PSTypeName, then I think a new issue needs to be created or this issue and description updated to ask for it. \r\n",
    "created_at": "2018-08-05T20:53:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7450#issuecomment-410547211",
    "id": 410547211,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7450",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDU0NzIxMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410547211/reactions"
    },
    "updated_at": "2018-08-05T20:53:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410547211",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/20375201?v=4",
      "events_url": "https://api.github.com/users/dragonwolf83/events{/privacy}",
      "followers_url": "https://api.github.com/users/dragonwolf83/followers",
      "following_url": "https://api.github.com/users/dragonwolf83/following{/other_user}",
      "gists_url": "https://api.github.com/users/dragonwolf83/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dragonwolf83",
      "id": 20375201,
      "login": "dragonwolf83",
      "node_id": "MDQ6VXNlcjIwMzc1MjAx",
      "organizations_url": "https://api.github.com/users/dragonwolf83/orgs",
      "received_events_url": "https://api.github.com/users/dragonwolf83/received_events",
      "repos_url": "https://api.github.com/users/dragonwolf83/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dragonwolf83/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dragonwolf83/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dragonwolf83"
    }
  },
  {
    "author_association": "NONE",
    "body": "I will go ahead and close this issue out and create a separate issue for being able to set a custom type on a `system.string`.  Thanks all for the clarification!",
    "created_at": "2018-08-06T14:42:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7450#issuecomment-410731983",
    "id": 410731983,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7450",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDczMTk4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410731983/reactions"
    },
    "updated_at": "2018-08-06T14:42:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/410731983",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10687261?v=4",
      "events_url": "https://api.github.com/users/MSAdministrator/events{/privacy}",
      "followers_url": "https://api.github.com/users/MSAdministrator/followers",
      "following_url": "https://api.github.com/users/MSAdministrator/following{/other_user}",
      "gists_url": "https://api.github.com/users/MSAdministrator/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/MSAdministrator",
      "id": 10687261,
      "login": "MSAdministrator",
      "node_id": "MDQ6VXNlcjEwNjg3MjYx",
      "organizations_url": "https://api.github.com/users/MSAdministrator/orgs",
      "received_events_url": "https://api.github.com/users/MSAdministrator/received_events",
      "repos_url": "https://api.github.com/users/MSAdministrator/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/MSAdministrator/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MSAdministrator/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/MSAdministrator"
    }
  }
]
