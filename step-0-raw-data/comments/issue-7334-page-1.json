[
  {
    "author_association": "COLLABORATOR",
    "body": "@adityapatwardhan @daxian-dbw What is recommended practice? Compile a  custom module against SMA _>=6.0.*_ / `>=6.*`? ",
    "created_at": "2018-07-23T05:32:03Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7334#issuecomment-406943790",
    "id": 406943790,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7334",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjk0Mzc5MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/406943790/reactions"
    },
    "updated_at": "2018-07-23T05:32:03Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/406943790",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@SteveGilham I tried to repro the issue but couldn't. Can you please provide repro steps for the reported issue?\r\n\r\nIn my attempt, I built a simple assembly targeting the `System.Management.Automation 6.0.2` Nuget package:\r\n\r\n#### templib.csproj\r\n\r\n```xml\r\n<Project Sdk=\"Microsoft.NET.Sdk\">\r\n\r\n  <PropertyGroup>\r\n    <TargetFramework>netcoreapp2.0</TargetFramework>\r\n  </PropertyGroup>\r\n\r\n  <ItemGroup>\r\n    <PackageReference Include=\"System.Management.Automation\" Version=\"6.0.2\" />\r\n  </ItemGroup>\r\n\r\n</Project>\r\n```\r\n\r\n#### Class1.cs\r\n\r\n```c#\r\nusing System;\r\nusing System.Management.Automation;\r\n\r\nnamespace templib\r\n{\r\n    [Cmdlet(\"Test\", \"MyCommand\")]\r\n    public class MyCommand : PSCmdlet\r\n    {\r\n        [Parameter(Mandatory = true)]\r\n        public string Name { get; set; }\r\n\r\n        protected override void ProcessRecord()\r\n        {\r\n            WriteObject($\"Hello {Name}\");\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n#### build `templib.dll`\r\n```none\r\n[E:\\arena\\dotnetApp\\test\\templib]\r\nPS:119> dotnet build\r\nMicrosoft (R) Build Engine version 15.7.177.53362 for .NET Core\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\n  Restore completed in 49 ms for E:\\arena\\dotnetApp\\test\\templib\\templib.csproj.\r\n  templib -> E:\\arena\\dotnetApp\\test\\templib\\bin\\Debug\\netcoreapp2.0\\templib.dll\r\n\r\nBuild succeeded.\r\n    0 Warning(s)\r\n    0 Error(s)\r\n\r\nTime Elapsed 00:00:02.53\r\n```\r\n\r\nAs shown in `ILDasm`, the generated `templib.dll` references `System.Management.Automation 6.0.2.0`:\r\n![image](https://user-images.githubusercontent.com/127450/43286137-f5357938-90d5-11e8-8e84-9a76b44d211d.png)\r\n\r\nAnd importing the assembly in PSCore 6.0.3 works fine:\r\n\r\n```none\r\nPS:1> $PSVersionTable.PSVersion.ToString()\r\n6.0.3\r\nPS:2> Import-Module E:\\arena\\dotnetApp\\test\\templib\\bin\\Debug\\netcoreapp2.0\\templib.dll\r\nPS:3> Test-MyCommand -Name Joe\r\nHello Joe\r\n```\r\n",
    "created_at": "2018-07-26T20:17:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7334#issuecomment-408222136",
    "id": 408222136,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7334",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODIyMjEzNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/408222136/reactions"
    },
    "updated_at": "2018-07-26T20:17:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/408222136",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "NONE",
    "body": "Sorry for the delay.  I have some good news and some not so good news from this particular corner of DLL Hell --\r\n\r\nFirst, the good news : I've not been able to repro the original issue after a number of upgrade/reinstall cycles and a few reboots for other reasons -- it may have been something banal like needing a reboot at the time because of other changes built up on the machine (physical, rather than a VM I could have rewound), or a stale environment in the pwsh launch from the installer, or some other, separate and harmless seeming, change, now discarded.\r\n\r\nHowever, having gone round the loop of various version upgrades a number of times, I do have a robust result that goes against the spirit of semantic versioning for patch releases, and it's the complete opposite one.  Linking a compiled module against 6.0.3 for the definition of `PSCmdlet` and running against 6.0.2 fails with\r\n```\r\nERR : Import-Module : Could not load file or assembly 'System.Management.Automation, Version=6.0.3.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. The system cannot find the file specified.\r\n```\r\nThis has the unpleasant effect that if the developer is keeping project dependencies updated, especially with some of the automation from things like dotnet-outdated or NuKeeper, that will also drag the minimum supported user version forwards, unless explicitly reverted for this one case.",
    "created_at": "2018-07-29T09:03:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7334#issuecomment-408662592",
    "id": 408662592,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7334",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODY2MjU5Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/408662592/reactions"
    },
    "updated_at": "2018-07-29T09:03:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/408662592",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7460854?v=4",
      "events_url": "https://api.github.com/users/SteveGilham/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveGilham/followers",
      "following_url": "https://api.github.com/users/SteveGilham/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveGilham/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveGilham",
      "id": 7460854,
      "login": "SteveGilham",
      "node_id": "MDQ6VXNlcjc0NjA4NTQ=",
      "organizations_url": "https://api.github.com/users/SteveGilham/orgs",
      "received_events_url": "https://api.github.com/users/SteveGilham/received_events",
      "repos_url": "https://api.github.com/users/SteveGilham/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveGilham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveGilham/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveGilham"
    }
  }
]
