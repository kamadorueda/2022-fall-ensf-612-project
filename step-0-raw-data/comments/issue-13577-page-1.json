[
  {
    "author_association": "COLLABORATOR",
    "body": "Perhaps @PaulHigin could comment this.",
    "created_at": "2020-09-07T07:33:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-688105356",
    "id": 688105356,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODEwNTM1Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/688105356/reactions"
    },
    "updated_at": "2020-09-07T07:33:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/688105356",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Tiny bump, I'm hoping to merge my PR sometime soon and hoping to get any feedback from the PowerShell team before I paint myself in a corner.",
    "created_at": "2020-09-09T19:40:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-689775970",
    "id": 689775970,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTc3NTk3MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/689775970/reactions"
    },
    "updated_at": "2020-09-09T19:40:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/689775970",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/8462645?v=4",
      "events_url": "https://api.github.com/users/jborean93/events{/privacy}",
      "followers_url": "https://api.github.com/users/jborean93/followers",
      "following_url": "https://api.github.com/users/jborean93/following{/other_user}",
      "gists_url": "https://api.github.com/users/jborean93/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jborean93",
      "id": 8462645,
      "login": "jborean93",
      "node_id": "MDQ6VXNlcjg0NjI2NDU=",
      "organizations_url": "https://api.github.com/users/jborean93/orgs",
      "received_events_url": "https://api.github.com/users/jborean93/received_events",
      "repos_url": "https://api.github.com/users/jborean93/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jborean93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jborean93/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jborean93"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Sorry for the delay.  If cert check is always performed then I agree that the `skipCA skipCN` checks in PowerShell can be removed.\r\n\r\nI am not sure what needs to happen to get these changes into the omi provider release branch, so I'll mark this for committee review.\r\n\r\n/cc @SteveL-MSFT  ",
    "created_at": "2020-09-09T19:48:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-689781577",
    "id": 689781577,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTc4MTU3Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/689781577/reactions"
    },
    "updated_at": "2020-09-09T19:48:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/689781577",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14019529?v=4",
      "events_url": "https://api.github.com/users/PaulHigin/events{/privacy}",
      "followers_url": "https://api.github.com/users/PaulHigin/followers",
      "following_url": "https://api.github.com/users/PaulHigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulHigin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PaulHigin",
      "id": 14019529,
      "login": "PaulHigin",
      "node_id": "MDQ6VXNlcjE0MDE5NTI5",
      "organizations_url": "https://api.github.com/users/PaulHigin/orgs",
      "received_events_url": "https://api.github.com/users/PaulHigin/received_events",
      "repos_url": "https://api.github.com/users/PaulHigin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PaulHigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulHigin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PaulHigin"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@PaulHigin the trouble is the cert checks are only being done in my custom fork of the OMI lib and not the one distributed by PowerShell. I'm just looking to find a way to somehow make the skip checks conditional based on the underlying library that is used. For that to happen the check would most likely have to be moved to https://github.com/PowerShell/psl-omi-provider as that's the most likely place that can detect what OMI lib is currently loaded.\r\n\r\nMy main question is if I was to raise a PR there would it even be looked at or would it be rejected. Both are perfectly fine responses I just want to know if I should actually spend the effort to get it done or just go my own way.\n\n<blockquote><img src=\"https://avatars0.githubusercontent.com/u/11524380?s=400&v=4\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/PowerShell/psl-omi-provider\">PowerShell/psl-omi-provider</a></strong></div><div>PSRP Linux support library. Contribute to PowerShell/psl-omi-provider development by creating an account on GitHub.</div></blockquote>",
    "created_at": "2020-09-09T19:52:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-689783891",
    "id": 689783891,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTc4Mzg5MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/689783891/reactions"
    },
    "updated_at": "2020-09-09T19:52:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/689783891",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/8462645?v=4",
      "events_url": "https://api.github.com/users/jborean93/events{/privacy}",
      "followers_url": "https://api.github.com/users/jborean93/followers",
      "following_url": "https://api.github.com/users/jborean93/following{/other_user}",
      "gists_url": "https://api.github.com/users/jborean93/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jborean93",
      "id": 8462645,
      "login": "jborean93",
      "node_id": "MDQ6VXNlcjg0NjI2NDU=",
      "organizations_url": "https://api.github.com/users/jborean93/orgs",
      "received_events_url": "https://api.github.com/users/jborean93/received_events",
      "repos_url": "https://api.github.com/users/jborean93/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jborean93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jborean93/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jborean93"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@PowerShell/powershell-committee reviewed this.  Our future direction is to make remote transports pluggable into PowerShell.  When enabled, this means that @jborean93 could have a WSMan transport module published to PSGallery that users can install if they need WSMan support.  For now, we consider the WSMan support that is already included as deprecated and would not be accepting PRs but do appreciate the work Jordan is doing to maintain WSMan support.  We would be open to making a small change in the interim to detect if the version of psl-omi-provider supports performing the server cert check and if so, then the cmdlet client won't enforce use of the skip switches with HTTPS.",
    "created_at": "2020-09-16T22:46:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-693705372",
    "id": 693705372,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MzcwNTM3Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/693705372/reactions"
    },
    "updated_at": "2020-09-16T22:46:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/693705372",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Thansk @SteveL-MSFT (and the committee) for looking into this. After having a brief look at the code I think I can see a way to check whether HTTPS validation is available. PowerShell could potentially call [WSManGetSessionOptionAsDword](https://github.com/PowerShell/psl-omi-provider/blob/59ab42f3bc769b1aa31c1181e3a97ea3e1b1c96e/src/Client.c#L589-L615) with the options `WSMAN_OPTION_SKIP_CA_CHECK` and `WSMAN_OPTION_SKIP_CN_CHECK`. Currently the `libpsrpclient` that implements this function for Linux would return `MI_RESULT_NOT_SUPPORTED`. If `libpsrpclient` was updated to support passing those flags through it would mean it is aware that the underlying OMI library supports HTTPS or not and will pass through the options correctly to ignore the certs.\r\n\r\nOne final question, would the PowerShell team be willing to accept the change(s) in https://github.com/PowerShell/psl-omi-provider or is this something I would also have to fork and compile myself to include the changes?\n\n<blockquote><img src=\"https://avatars0.githubusercontent.com/u/11524380?s=400&v=4\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/PowerShell/psl-omi-provider\">PowerShell/psl-omi-provider</a></strong></div><div>PSRP Linux support library. Contribute to PowerShell/psl-omi-provider development by creating an account on GitHub.</div></blockquote>",
    "created_at": "2020-09-17T10:40:48Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-694149074",
    "id": 694149074,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDE0OTA3NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/694149074/reactions"
    },
    "updated_at": "2020-09-17T10:40:50Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/694149074",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/8462645?v=4",
      "events_url": "https://api.github.com/users/jborean93/events{/privacy}",
      "followers_url": "https://api.github.com/users/jborean93/followers",
      "following_url": "https://api.github.com/users/jborean93/following{/other_user}",
      "gists_url": "https://api.github.com/users/jborean93/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jborean93",
      "id": 8462645,
      "login": "jborean93",
      "node_id": "MDQ6VXNlcjg0NjI2NDU=",
      "organizations_url": "https://api.github.com/users/jborean93/orgs",
      "received_events_url": "https://api.github.com/users/jborean93/received_events",
      "repos_url": "https://api.github.com/users/jborean93/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jborean93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jborean93/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jborean93"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "With https://github.com/PowerShell/PowerShell/pull/13786 being merged I feel like this issue has been fixed as best as it can. I've also created a [2.0.0](https://github.com/jborean93/omi/releases/tag/v2.0.0-pwsh) release which contains the updated `mi` and `psrpclient` libraries that will read the session options when using pwsh 7.2.0 or newer. For existing versions it will still continue to validate the cert and require the env vars to disable but at least there is a way forward for the future.\r\n\r\nFinally I've also published the changes in a module called [PSWSMan](https://www.powershellgallery.com/packages/PSWSMan/2.0.0) on the gallery. For non-Windows users who wish to use this fork they can just run the following as root\r\n\r\n```pwsh\r\nInstall-Module -Name PSWSMan -Scope AllUsers\r\nInstall-WSMan\r\n```\r\n\r\nThis will install my forked copies of `libpsrpclient` and `libmi` for the distribution they are on. The `PSWSMan` module also contains a few other helper functions to disable cert verification globally as well as set up a trusted CA certificate for HTTPS. People can update that module as new changes come in and install the latest ones for their Linux distribution.",
    "created_at": "2020-10-17T00:43:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/13577#issuecomment-710712010",
    "id": 710712010,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/13577",
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDcxMjAxMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/710712010/reactions"
    },
    "updated_at": "2020-10-17T00:43:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/710712010",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/8462645?v=4",
      "events_url": "https://api.github.com/users/jborean93/events{/privacy}",
      "followers_url": "https://api.github.com/users/jborean93/followers",
      "following_url": "https://api.github.com/users/jborean93/following{/other_user}",
      "gists_url": "https://api.github.com/users/jborean93/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jborean93",
      "id": 8462645,
      "login": "jborean93",
      "node_id": "MDQ6VXNlcjg0NjI2NDU=",
      "organizations_url": "https://api.github.com/users/jborean93/orgs",
      "received_events_url": "https://api.github.com/users/jborean93/received_events",
      "repos_url": "https://api.github.com/users/jborean93/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jborean93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jborean93/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jborean93"
    }
  }
]
