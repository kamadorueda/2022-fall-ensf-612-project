[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Looked into this a bit, I reckon this is a limitation from the `DirectoryInfo.MoveTo()` method being used to rename the directories. \r\n\r\n```csharp\r\nif (ShouldProcess(resource, action))\r\n{\r\n    // Now move the file\r\n    dir.MoveTo(newPath);\r\n\r\n    result = dir;\r\n    WriteItemObject(result, result.FullName, isContainer);\r\n}\r\n```\r\nLooking over the [docs](https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.moveto), this may be by design: \r\n```\r\nThe destination cannot be another disk volume or a directory with the identical name.\r\n```\r\n\r\nIn my testing, this works fine when changing a file instead of a directory: \r\n\r\n```\r\nPS > rename-item testfile.txt tEsTfIlE.tXt\r\nPS > \r\n```\r\nDoesn't look like `FileInfo.MoveTo()` has the same limitations",
    "created_at": "2020-04-25T05:55:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-619327011",
    "id": 619327011,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTMyNzAxMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/619327011/reactions"
    },
    "updated_at": "2020-04-25T06:01:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/619327011",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/26788461?v=4",
      "events_url": "https://api.github.com/users/jackdcasey/events{/privacy}",
      "followers_url": "https://api.github.com/users/jackdcasey/followers",
      "following_url": "https://api.github.com/users/jackdcasey/following{/other_user}",
      "gists_url": "https://api.github.com/users/jackdcasey/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jackdcasey",
      "id": 26788461,
      "login": "jackdcasey",
      "node_id": "MDQ6VXNlcjI2Nzg4NDYx",
      "organizations_url": "https://api.github.com/users/jackdcasey/orgs",
      "received_events_url": "https://api.github.com/users/jackdcasey/received_events",
      "repos_url": "https://api.github.com/users/jackdcasey/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jackdcasey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jackdcasey/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jackdcasey"
    }
  },
  {
    "author_association": "NONE",
    "body": "@jackdcasey You mean it's ok ? It isn't a bug ?",
    "created_at": "2020-04-26T09:30:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-619517444",
    "id": 619517444,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTUxNzQ0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/619517444/reactions"
    },
    "updated_at": "2020-04-26T09:30:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/619517444",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/4563342?v=4",
      "events_url": "https://api.github.com/users/ArturGudiev/events{/privacy}",
      "followers_url": "https://api.github.com/users/ArturGudiev/followers",
      "following_url": "https://api.github.com/users/ArturGudiev/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArturGudiev/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ArturGudiev",
      "id": 4563342,
      "login": "ArturGudiev",
      "node_id": "MDQ6VXNlcjQ1NjMzNDI=",
      "organizations_url": "https://api.github.com/users/ArturGudiev/orgs",
      "received_events_url": "https://api.github.com/users/ArturGudiev/received_events",
      "repos_url": "https://api.github.com/users/ArturGudiev/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ArturGudiev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArturGudiev/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ArturGudiev"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "It's by design in terms of the API we're using to rename/move the directory. Note that we're using a `MoveTo()` API as there is no specific renaming API on either the [DirectoryInfo](https://docs.microsoft.com/en-us/dotnet/api/system.io.directoryinfo.moveto?view=netcore-3.1) class, nor the [Directory](https://docs.microsoft.com/en-us/dotnet/api/system.io.directory.move?view=netcore-3.1) static class.\r\n\r\nA workaround here may be to do a manual check to determine if the new path or name we're moving the item to is the same name as the original, and just differs by case. If this is the case, we can have a fallback method to move it to a temporary location before moving it back under the desired new name.",
    "created_at": "2020-04-26T14:00:34Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-619554592",
    "id": 619554592,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTU1NDU5Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/619554592/reactions"
    },
    "updated_at": "2020-04-26T14:00:34Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/619554592",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "But we have, for example, a mv command on Linux. There is also no special rename command there. And it works well with this case. ",
    "created_at": "2020-04-29T05:36:06Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-621000585",
    "id": 621000585,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTAwMDU4NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/621000585/reactions"
    },
    "updated_at": "2020-04-29T05:36:06Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/621000585",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/4563342?v=4",
      "events_url": "https://api.github.com/users/ArturGudiev/events{/privacy}",
      "followers_url": "https://api.github.com/users/ArturGudiev/followers",
      "following_url": "https://api.github.com/users/ArturGudiev/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArturGudiev/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ArturGudiev",
      "id": 4563342,
      "login": "ArturGudiev",
      "node_id": "MDQ6VXNlcjQ1NjMzNDI=",
      "organizations_url": "https://api.github.com/users/ArturGudiev/orgs",
      "received_events_url": "https://api.github.com/users/ArturGudiev/received_events",
      "repos_url": "https://api.github.com/users/ArturGudiev/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ArturGudiev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArturGudiev/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ArturGudiev"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Sure. But this behaviour likely arose from the .NET behaviour originally on Windows. Rather than diverge the API surface, the .NET team probably elected to keep the current behaviour as-is even on Linux, to prevent the case where the same code behaves entirely differently depending on OS.\r\n\r\nI don't know whether the underlying API could be improved on Windows as well, or if they could add a specific `Rename()` API for this kind of case; that question would be better directed at folks in the [dotnet/runtime](/dotnet/runtime) repository. ðŸ™‚ ",
    "created_at": "2020-04-29T12:40:06Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-621177194",
    "id": 621177194,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTE3NzE5NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/621177194/reactions"
    },
    "updated_at": "2020-04-29T12:40:06Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/621177194",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "@vexx32 Ok. I got it. \r\n Thank you! \r\n",
    "created_at": "2020-04-29T14:09:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-621235283",
    "id": 621235283,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTIzNTI4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/621235283/reactions"
    },
    "updated_at": "2020-04-29T14:09:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/621235283",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/4563342?v=4",
      "events_url": "https://api.github.com/users/ArturGudiev/events{/privacy}",
      "followers_url": "https://api.github.com/users/ArturGudiev/followers",
      "following_url": "https://api.github.com/users/ArturGudiev/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArturGudiev/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ArturGudiev",
      "id": 4563342,
      "login": "ArturGudiev",
      "node_id": "MDQ6VXNlcjQ1NjMzNDI=",
      "organizations_url": "https://api.github.com/users/ArturGudiev/orgs",
      "received_events_url": "https://api.github.com/users/ArturGudiev/received_events",
      "repos_url": "https://api.github.com/users/ArturGudiev/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ArturGudiev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArturGudiev/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ArturGudiev"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "I suggest reopening this issue:\r\n\r\n* The behavior is clearly a bug.\r\n\r\n* The underlying .NET bug - reported in https://github.com/dotnet/runtime/issues/30479 - has since been fixed.\r\n\r\n   * Unfortunately, it was only _partially_ fixed: only for `System.IO.Directory.Move()`, not also for `System.IO.DirectoryInfo.MoveTo()`\r\n     * See follow-up bug report at https://github.com/dotnet/runtime/issues/63287\r\n\r\n  * While PowerShel uses the still-broken `System.IO.DirectoryInfo.MoveTo()`, there is no strict need  to wait for the remaining bug to be fixed, given that `System.IO.Directory.Move()` could be used.\r\n\r\n\r\n\r\n",
    "created_at": "2022-01-03T14:03:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-1004113365",
    "id": 1004113365,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "IC_kwDOAvT7bc472Y3V",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1004113365/reactions"
    },
    "updated_at": "2022-01-03T14:03:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1004113365",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Related issue: \r\n\r\n* https://github.com/PowerShell/PowerShell/issues/14903",
    "created_at": "2022-01-03T14:06:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-1004115383",
    "id": 1004115383,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "IC_kwDOAvT7bc472ZW3",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1004115383/reactions"
    },
    "updated_at": "2022-01-03T14:06:49Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1004115383",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I see IO.Directory.Move() was fixed (for leaves) but not IO.DirectoryInfo.MoveTo().\r\nMain problem with .Net API is PowerShell has to work only with absolute paths (drive-rooted) (in FileSystem provider) because it uses Runspace CWD instead of OS (and .Net) CWD.",
    "created_at": "2022-01-03T18:27:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12483#issuecomment-1004274421",
    "id": 1004274421,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12483",
    "node_id": "IC_kwDOAvT7bc473AL1",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1004274421/reactions"
    },
    "updated_at": "2022-01-03T18:28:48Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1004274421",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  }
]
