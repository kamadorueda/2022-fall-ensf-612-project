[
  {
    "author_association": "CONTRIBUTOR",
    "body": "For RFC defined headers, strict header parsing is now enabled by default. You can disable strict header validation with the `-SkipHeaderValidation` parameter on both `Invoke-WebRequest` and `Invoke-RestMethod`.\r\n\r\nYou can read more about this and more of the differences in PSCore's Web Cmdlets here https://get-powershellblog.blogspot.com/2017/11/powershell-core-web-cmdlets-in-depth.html#L08\r\n  ",
    "created_at": "2018-01-08T13:59:06Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5818#issuecomment-355973338",
    "id": 355973338,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5818",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTk3MzMzOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/355973338/reactions"
    },
    "updated_at": "2018-01-08T13:59:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/355973338",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the answer. Makes sense to do a stricter header validation, I just didn't know about `-SkipHeaderValidation` and enabling it by default may break a few scripts / modules.\r\n\r\nFor the documentation, if someone else hits this issue, existing Scripts / Modules can globally enable header validation skipping to bring back the same behaviour as in PowerShell before version 6 with\r\n\r\n    if ($PSVersionTable.PSVersion.Major -ge 6) {\r\n        $PSDefaultParameterValues.Add(\"Invoke-RestMethod:SkipHeaderValidation\",$true)\r\n    }",
    "created_at": "2018-01-10T08:08:07Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5818#issuecomment-356529402",
    "id": 356529402,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5818",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjUyOTQwMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/356529402/reactions"
    },
    "updated_at": "2018-01-10T08:08:07Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/356529402",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/910802?v=4",
      "events_url": "https://api.github.com/users/ffeldhaus/events{/privacy}",
      "followers_url": "https://api.github.com/users/ffeldhaus/followers",
      "following_url": "https://api.github.com/users/ffeldhaus/following{/other_user}",
      "gists_url": "https://api.github.com/users/ffeldhaus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ffeldhaus",
      "id": 910802,
      "login": "ffeldhaus",
      "node_id": "MDQ6VXNlcjkxMDgwMg==",
      "organizations_url": "https://api.github.com/users/ffeldhaus/orgs",
      "received_events_url": "https://api.github.com/users/ffeldhaus/received_events",
      "repos_url": "https://api.github.com/users/ffeldhaus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ffeldhaus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ffeldhaus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ffeldhaus"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": ">  enabling it by default may break a few scripts / modules.\r\n\r\nCorrect. But, this is one of many breaking changes between PSCore and Windows PowerShell.\r\n\r\nAlso, The conditional logic is not even needed. As I pointed out in my blog you can just do this:\r\n\r\n```powershell\r\n$PSDefaultParameterValues['Invoke-RestMethod:SkipHeaderValidation'] = $true\r\n$PSDefaultParameterValues['Invoke-WebRequest:SkipHeaderValidation'] = $true\r\n```\r\n\r\nin both 6.0.0 and 5.1. `$PSDefaultParameterValues` options will be ignored when a parameter doesn't exist.",
    "created_at": "2018-01-10T10:18:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5818#issuecomment-356558719",
    "id": 356558719,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5818",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjU1ODcxOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/356558719/reactions"
    },
    "updated_at": "2018-01-10T10:18:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/356558719",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6509955?v=4",
      "events_url": "https://api.github.com/users/markekraus/events{/privacy}",
      "followers_url": "https://api.github.com/users/markekraus/followers",
      "following_url": "https://api.github.com/users/markekraus/following{/other_user}",
      "gists_url": "https://api.github.com/users/markekraus/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/markekraus",
      "id": 6509955,
      "login": "markekraus",
      "node_id": "MDQ6VXNlcjY1MDk5NTU=",
      "organizations_url": "https://api.github.com/users/markekraus/orgs",
      "received_events_url": "https://api.github.com/users/markekraus/received_events",
      "repos_url": "https://api.github.com/users/markekraus/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/markekraus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/markekraus/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/markekraus"
    }
  }
]
