[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Now, this said, I can understand why what I expect is not what I get, but that doesn't help me not expect it.  \r\n\r\nWhen I first read about the stop-parsing symbol, I had the understanding that no more parsing occurred past it, and that is how VS Code's PowerShell syntax scoping treats it, but now I know that is not the case, and I actually think the --% symbol is worse at providing the solution than the problem it solves, because there is still behavior I cannot always account for.   \r\n\r\nAt least in CMD scripting when I need to MAKE SURE a '%' gets passed, I can use two '%%', and the variable substitution is not conducted, but that doesn't even happen here; instead I got the substitution surrounded with '%'s.  \r\n\r\nAt least using a regular native command construct in PowerShell, I know exactly how to escape it, and I know I have to do it if I move the command from another scripting engine, but the --% stop parsing symbol doesn't assure me that I can just not translate at all, and in some cases, may not even work.\r\n\r\nSo, I am not sure there is anything that can be fixed here, as its much more complicated than it would first seem.\r\n",
    "created_at": "2018-08-27T04:49:16Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7635#issuecomment-416113386",
    "id": 416113386,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7635",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjExMzM4Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416113386/reactions"
    },
    "updated_at": "2018-08-27T04:49:16Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416113386",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/26179051?v=4",
      "events_url": "https://api.github.com/users/msftrncs/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftrncs/followers",
      "following_url": "https://api.github.com/users/msftrncs/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftrncs/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/msftrncs",
      "id": 26179051,
      "login": "msftrncs",
      "node_id": "MDQ6VXNlcjI2MTc5MDUx",
      "organizations_url": "https://api.github.com/users/msftrncs/orgs",
      "received_events_url": "https://api.github.com/users/msftrncs/received_events",
      "repos_url": "https://api.github.com/users/msftrncs/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftrncs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftrncs/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/msftrncs"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Looks like this is the behaviour in Windows PowerShell too.\r\n\r\nCompare the following:\r\n```powershell\r\n> $env:banana = \"Hi\"\r\n> cmd /c --% echo %banana% | Write-Output -OutVariable x\r\nHi\r\n> $x\r\nHi\r\n```\r\n\r\nAnd\r\n```powershell\r\n> ${env: \" banana} = \"Hi\"\r\n> cmd /c --% echo % \" banana% | Write-Output -OutVariable x\r\n'Write-Output' is not recognised as an internal or external command, operable program or batch file.\r\n```\r\n\r\nIf you enter this interactively with PSReadLine enabled you can see that the insertion of a quote before the pipe causes the `Write-Output` to not register as a command name, so I'm guessing this is a bug where the tokeniser is still looking for a closing quote rather than being in \"stop-parsing\" mode and looking only for a `|` or a newline.",
    "created_at": "2018-08-27T05:38:56Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7635#issuecomment-416119614",
    "id": 416119614,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7635",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjExOTYxNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416119614/reactions"
    },
    "updated_at": "2018-08-27T05:38:56Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416119614",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7009879?v=4",
      "events_url": "https://api.github.com/users/rjmholt/events{/privacy}",
      "followers_url": "https://api.github.com/users/rjmholt/followers",
      "following_url": "https://api.github.com/users/rjmholt/following{/other_user}",
      "gists_url": "https://api.github.com/users/rjmholt/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rjmholt",
      "id": 7009879,
      "login": "rjmholt",
      "node_id": "MDQ6VXNlcjcwMDk4Nzk=",
      "organizations_url": "https://api.github.com/users/rjmholt/orgs",
      "received_events_url": "https://api.github.com/users/rjmholt/received_events",
      "repos_url": "https://api.github.com/users/rjmholt/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rjmholt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rjmholt/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rjmholt"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "If you look in [tokenizer.cs:2017](https://github.com/PowerShell/PowerShell/blob/358e8abefef5973b7e1f9608a38240846f620a59/src/System.Management.Automation/engine/parser/tokenizer.cs#L2017) you will see that '\"' is processed explicitly to allow '|' and '&&' to be included in the args to `cmd.exe`.  So there is still some level of processing going on after `--%`. This is easy enough (but breaking)  to change but is it worth it to lose the ability to use `|` and `&&` in `cmd` cmds in favour of allowing double quotes in variables? (Is that really a common thing?). Certainly this is a docs issue as there is nothing about this behaviour in the docs at all: [about_Parsing](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_parsing?view=powershell-6) Overall, the doc'ed behaviour - consumes everything up to a newline might be better. You wouldn't be able to stream the output of the command into a pipeline, but you could still capture it in a variable. And `|` and `&&` would still work for `cmd.exe`.",
    "created_at": "2018-08-28T18:56:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7635#issuecomment-416701549",
    "id": 416701549,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7635",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjcwMTU0OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416701549/reactions"
    },
    "updated_at": "2018-08-28T18:56:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416701549",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I've marked it as Issue-Discussion. Technically it's working as by design. Whether we want to keep that design is an open question. Perhaps this is a candidate for an `Experimental` flag.",
    "created_at": "2018-08-28T18:58:42Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7635#issuecomment-416702182",
    "id": 416702182,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7635",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjcwMjE4Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416702182/reactions"
    },
    "updated_at": "2018-08-28T18:58:42Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/416702182",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  }
]
