[
  {
    "author_association": "NONE",
    "body": "Already commented about the cause of this in #10045 but comment here explains this observed behaviour (for those who like detailed explanations).\r\n\r\nThe problem appears to be that simple expandable strings are not treating an embedded subexpression as an independent syntactic context. Any pair of double quotes (\"\") anywhere within the string (even inside a subexpression) is assumed to represent an embedded singular double quote (\") and is replaced, apparently ***BEFORE*** evaluating (or even parsing) the subexpression. This explains the observations. Demonstration follows (the replaced paired \"s are highlighted between !!):\r\n```\r\n\"foo $( \"bar\".replace(\"bar\", !\"\"!) )\" # should be syntactically correct (ignoring the !s)\r\n```\r\nbecomes\r\n```\r\n\"foo $( \"bar\".replace(\"bar\", \") )\" # definitely not\r\n```\r\nand\r\n```\r\n\"foo $( \"bar\".replace(\"bar\", '') )\" # single quotes so no substitutions\r\n\r\n\"foo $( \"bar\".replace(\"bar\", !\"\"!\") )\" # three double quotes\r\nbecomes -> \"foo $( \"bar\".replace(\"bar\", \"\") )\" # looks better\r\n\r\n\"foo $( \"bar\".replace(\"bar\", !\"\"!!\"\"!) )\" # four double quotes\r\nbecomes -> \"foo $( \"bar\".replace(\"bar\", \"\") )\" # ok\r\n```\r\nand the final example\r\n```\r\n\"foo $( \"bar\".replace(\"bar\", !\"\"!!\"\"!!\"\"!\") )\" # seven double quotes\r\nbecomes -> \"foo $( \"bar\".replace(\"bar\", \"\"\"\") )\"\r\n# so when the subexpression is evaluated the replacement string is \"!\"\"!\" i.e. a single \"\r\n```\r\nThis is supported by the fact that 8 quotes also works. All even numbers of quotes are equivalent to the preceding odd number since the last quote in the odd sequence remains unpaired and so is not substituted.\r\n\r\nI hope that anyone reading this is now less confused about whatever problem they have that led them to this issue page. I would recommend looking also at #10045 since it deals with a slightly different issue with (apparently) the same root cause.",
    "created_at": "2021-12-30T05:07:02Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10413#issuecomment-1002875076",
    "id": 1002875076,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10413",
    "node_id": "IC_kwDOAvT7bc47xqjE",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1002875076/reactions"
    },
    "updated_at": "2021-12-30T05:07:02Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1002875076",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/67649059?v=4",
      "events_url": "https://api.github.com/users/UberKluger/events{/privacy}",
      "followers_url": "https://api.github.com/users/UberKluger/followers",
      "following_url": "https://api.github.com/users/UberKluger/following{/other_user}",
      "gists_url": "https://api.github.com/users/UberKluger/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/UberKluger",
      "id": 67649059,
      "login": "UberKluger",
      "node_id": "MDQ6VXNlcjY3NjQ5MDU5",
      "organizations_url": "https://api.github.com/users/UberKluger/orgs",
      "received_events_url": "https://api.github.com/users/UberKluger/received_events",
      "repos_url": "https://api.github.com/users/UberKluger/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/UberKluger/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/UberKluger/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/UberKluger"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as duplicate and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
    "created_at": "2021-12-31T08:00:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10413#issuecomment-1003301272",
    "id": 1003301272,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10413",
    "node_id": "IC_kwDOAvT7bc47zSmY",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1003301272/reactions"
    },
    "updated_at": "2021-12-31T08:00:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1003301272",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
