[
  {
    "author_association": "CONTRIBUTOR",
    "body": "It is unfortunate that PowerShell loads its profiles even in unattended (non-interactive) invocations, which not only makes for increased overhead but also for a less predictable execution environment.\r\n\r\nThe problem has been discussed before, and the idea came up to provide  _separate executable_ that doesn't load  profiles and fixes other legacy problems: #8072.\r\n\r\nUnfortunately, momentum behind this has stalled, but I'm definitely in favor of resolving this.\r\n\r\n",
    "created_at": "2021-03-25T18:45:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807267388",
    "id": 807267388,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzI2NzM4OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807267388/reactions"
    },
    "updated_at": "2021-03-25T18:45:15Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807267388",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "It is definitely a suboptimal solution, but if your scripts run on _Linux only_ and you're willing to assume a _default installation_, you can use `#!/usr/bin/pwsh -noprofile`",
    "created_at": "2021-03-25T18:49:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807274063",
    "id": 807274063,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzI3NDA2Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807274063/reactions"
    },
    "updated_at": "2021-03-25T18:49:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807274063",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "** Edit - it looks like that does the trick and should work pretty well for this particular situation. I definitely appreciate it. :+1: Though, as you mentioned, it definitely is a shame that, that is the only way to go about it\r\n\r\n\r\nThanks for the reply. This script in particular is linux only as it is using cat /proc/net/dev to get the network traffic and it is just a personal script for my desktops system monitor (Conky), but I did try `#!/usr/bin/env pwsh -noprofile` and that didn't work, but I didn't try `#!/usr/bin/pwsh -noprofile`, I will give that a go. Thanks.",
    "created_at": "2021-03-25T19:15:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807313871",
    "id": 807313871,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzMxMzg3MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807313871/reactions"
    },
    "updated_at": "2021-03-25T19:23:15Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807313871",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3442753?v=4",
      "events_url": "https://api.github.com/users/MostHated/events{/privacy}",
      "followers_url": "https://api.github.com/users/MostHated/followers",
      "following_url": "https://api.github.com/users/MostHated/following{/other_user}",
      "gists_url": "https://api.github.com/users/MostHated/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/MostHated",
      "id": 3442753,
      "login": "MostHated",
      "node_id": "MDQ6VXNlcjM0NDI3NTM=",
      "organizations_url": "https://api.github.com/users/MostHated/orgs",
      "received_events_url": "https://api.github.com/users/MostHated/received_events",
      "repos_url": "https://api.github.com/users/MostHated/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/MostHated/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MostHated/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/MostHated"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "`#!/usr/bin/env pwsh -noprofile` doesn't work, because it uses _two_ arguments, which Linux doesn't support (macOS does, but this discrepancy prevents a _portable_ (cross-Unix) solution).",
    "created_at": "2021-03-25T19:22:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807324904",
    "id": 807324904,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzMyNDkwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807324904/reactions"
    },
    "updated_at": "2021-03-25T19:22:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807324904",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "As a workaround you can create an executable script in the `PATH` Called `pwsh_no_profile` which just calls `pwsh -NoProfile` and set that as your shebang argument.",
    "created_at": "2021-03-25T20:18:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807411380",
    "id": 807411380,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzQxMTM4MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807411380/reactions"
    },
    "updated_at": "2021-03-25T20:18:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807411380",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/8462645?v=4",
      "events_url": "https://api.github.com/users/jborean93/events{/privacy}",
      "followers_url": "https://api.github.com/users/jborean93/followers",
      "following_url": "https://api.github.com/users/jborean93/following{/other_user}",
      "gists_url": "https://api.github.com/users/jborean93/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jborean93",
      "id": 8462645,
      "login": "jborean93",
      "node_id": "MDQ6VXNlcjg0NjI2NDU=",
      "organizations_url": "https://api.github.com/users/jborean93/orgs",
      "received_events_url": "https://api.github.com/users/jborean93/received_events",
      "repos_url": "https://api.github.com/users/jborean93/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jborean93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jborean93/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jborean93"
    }
  },
  {
    "author_association": "NONE",
    "body": "```\r\n#!/usr/bin/env -S pwsh -noprofile\r\n\r\nscript itself\r\n``` \r\nand \r\n```\r\nchmod +x yourscript\r\n```\r\nto run it out from pwsh shell.",
    "created_at": "2021-03-25T20:21:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807416441",
    "id": 807416441,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzQxNjQ0MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807416441/reactions"
    },
    "updated_at": "2021-03-25T20:37:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807416441",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Nice, @237dmitry - didn't know about the `-S` option for making `env` split the single argument it is given on Linux into individual arguments, but there's a caveat:\r\n\r\n* On Linux distros, it requires [GNU coreutils v8.30+](https://savannah.gnu.org/forum/forum.php?forum_id=9187), which are included with Ubuntu 19.04+, for instance, but not with Ubuntu 18.04 and earlier.\r\nIn other words: older Linux distros may not support it (though that problem will take care of itself over time).\r\n\r\n* (On macOS it is supported since at least Catalina; it isn't necessary there, but does no harm, which makes the solution portable.)\r\n\r\nJust to spell out @jborean93's suggestion:\r\n\r\n* Create the helper script, `pwsh-np` (from PowerShell) in `/usr/bin` (Linux) / `/usr/local/bin` (macOS):\r\n\r\n```powershell\r\n@'\r\n#!/bin/sh\r\npwsh -noprofile \"$@\"\r\n'@ | sudo pwsh -noprofile -c { $newBin = Join-Path ($IsLinux ? '/usr/bin' : '/usr/local/bin') pwsh-np; $input > $newBin; chmod a+x $newBin }\r\n```\r\n\r\n* Then you can use it in your shebang lines; e.g.:\r\n\r\n```sh\r\n#!/usr/bin/env pwsh-np\r\n\r\n'Look, ma - no profile!'\r\n```",
    "created_at": "2021-03-25T21:12:24Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-807497041",
    "id": 807497041,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNzQ5NzA0MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807497041/reactions"
    },
    "updated_at": "2021-03-25T21:12:24Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/807497041",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as answered and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
    "created_at": "2021-03-28T12:00:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15103#issuecomment-808886922",
    "id": 808886922,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15103",
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwODg4NjkyMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/808886922/reactions"
    },
    "updated_at": "2021-03-28T12:00:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/808886922",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
