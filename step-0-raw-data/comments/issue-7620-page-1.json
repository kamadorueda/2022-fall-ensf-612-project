[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Linked documentation only show three forms of redirection operator: `n>`, `n>>` and `n>&1`. There are no documented operators `n>&2` or `n>&3`.",
    "created_at": "2018-08-23T15:17:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7620#issuecomment-415455983",
    "id": 415455983,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7620",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTQ1NTk4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/415455983/reactions"
    },
    "updated_at": "2018-08-23T15:17:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/415455983",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/17184058?v=4",
      "events_url": "https://api.github.com/users/PetSerAl/events{/privacy}",
      "followers_url": "https://api.github.com/users/PetSerAl/followers",
      "following_url": "https://api.github.com/users/PetSerAl/following{/other_user}",
      "gists_url": "https://api.github.com/users/PetSerAl/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PetSerAl",
      "id": 17184058,
      "login": "PetSerAl",
      "node_id": "MDQ6VXNlcjE3MTg0MDU4",
      "organizations_url": "https://api.github.com/users/PetSerAl/orgs",
      "received_events_url": "https://api.github.com/users/PetSerAl/received_events",
      "repos_url": "https://api.github.com/users/PetSerAl/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PetSerAl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PetSerAl/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PetSerAl"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "That's true, but it's not very obvious, especially when the same operator in bash works for stderr too (`>&2`). The error messages are also confusing.\r\n\r\nIn Linux programs, often STDERR is used as the logging stream, especially if STDOUT is speaking an RPC protocol, e.g. needs to be valid JSON. PowerShell currently can't really be used for this because any information or warning logs will get sent to STDOUT.",
    "created_at": "2018-08-23T15:25:38Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7620#issuecomment-415458656",
    "id": 415458656,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7620",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTQ1ODY1Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/415458656/reactions"
    },
    "updated_at": "2018-08-23T15:51:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/415458656",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10532611?v=4",
      "events_url": "https://api.github.com/users/felixfbecker/events{/privacy}",
      "followers_url": "https://api.github.com/users/felixfbecker/followers",
      "following_url": "https://api.github.com/users/felixfbecker/following{/other_user}",
      "gists_url": "https://api.github.com/users/felixfbecker/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/felixfbecker",
      "id": 10532611,
      "login": "felixfbecker",
      "node_id": "MDQ6VXNlcjEwNTMyNjEx",
      "organizations_url": "https://api.github.com/users/felixfbecker/orgs",
      "received_events_url": "https://api.github.com/users/felixfbecker/received_events",
      "repos_url": "https://api.github.com/users/felixfbecker/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/felixfbecker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/felixfbecker/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/felixfbecker"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@felixfbecker Something to keep in mind: in traditional text-based shells, the various output streams are just undifferentiated text so it doesn't matter what goes where.. In PowerShell, the streams are strongly typed. The error stream only contains ErrorRecords, the VerboseStream only contains VerboseRecords, etc. The only polymorphic stream is the output stream so it's the only one where merge semantics are clear. That said, the higher-level scenario is important and we should have a way to accommodate it. One of the ideas we had in the past is to allow you to redirect into an action (scriptblock) and the action can do things like logging, etc. Anyway, I'm going to mark this as an enhancement request.",
    "created_at": "2018-08-23T15:48:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7620#issuecomment-415466567",
    "id": 415466567,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7620",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTQ2NjU2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 4,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 4,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/415466567/reactions"
    },
    "updated_at": "2018-08-23T15:48:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/415466567",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "That makes sense - in a way, it reminds me of [ReactiveX `Materialize`](http://reactivex.io/documentation/operators/materialize-dematerialize.html) - redirecting all event types to the primary stream, while maintaining the information about where it came from through the type info.\r\n\r\nYou should already be able to pipe it further into `ForEach-Object` and check if `$_` is `ErrorRecord`, `InformationRecord`, and depending on the type, call `Write-Error`, `Write-Warning`, etc.\r\n\r\nHere is an implementation of `Dematerialize` in PowerShell:\r\n\r\n```powershell\r\nfilter Out-StreamByType {\r\n    if ($_ -is [ErrorRecord]) {\r\n        $e = [ErrorRecord]$_\r\n        Write-Error -ErrorRecord $e\r\n    } elseif ($_ -is [InformationRecord]) {\r\n        $i = [InformationRecord]$_\r\n        Write-Information -MessageData $i.MessageData -Tags $i.Tags\r\n    } elseif ($_ -is [WarningRecord]) {\r\n        $w = [WarningRecord]$_\r\n        Write-Warning -Message $w.Message\r\n    } elseif ($_ -is [VerboseRecord]) {\r\n        $v = [VerboseRecord]$_\r\n        Write-Verbose -Message $v.Message\r\n    } elseif ($_ -is [DebugRecord]) {\r\n        $d = [DebugRecord]$d\r\n        Write-Debug -Message $d.Message\r\n    } else {\r\n        $_\r\n    }\r\n}\r\n```\r\n\r\nIf we extend this, we can write a function that redirects output streams arbitrarily:\r\n\r\n```powershell\r\n# Writes the input to the given target stream\r\nfunction Out-TargetStream {\r\n    param(\r\n        [Parameter(Mandatory, Position = 0)]\r\n        [ValidateRange(1, 6)]\r\n        [int] $Target,\r\n\r\n        # A union of all parameters of the Write cmdlets\r\n        # Error\r\n        [Parameter(ValueFromPipeline)]\r\n        [ErrorRecord] $ErrorRecord,\r\n\r\n        # Debug, Verbose, Warning\r\n        [Parameter(ValueFromPipelineByPropertyName, ValueFromPipeline)]\r\n        [Alias('MessageData')] # Information\r\n        $Message,\r\n\r\n        # Information\r\n        [Parameter(ValueFromPipelineByPropertyName)]\r\n        [string[]] $Tags\r\n    )\r\n    switch ($Target) {\r\n        1 { $Message }\r\n        2 {\r\n            if ($null -ne $ErrorRecord) {\r\n                Write-Error -ErrorRecord $ErrorRecord\r\n            } else {\r\n                Write-Error -Message $Message\r\n            }\r\n        }\r\n        3 { Write-Warning -Message $Message }\r\n        4 { Write-Verbose -Message $Message }\r\n        5 { Write-Debug -Message $Message }\r\n        6 { Write-Information -MessageData $Message -Tags $Tags }\r\n    }\r\n}\r\n\r\n# Redirects streams to other streams\r\nfilter Out-Stream {\r\n    param(\r\n        [int] $SuccessTarget = 1,\r\n        [int] $ErrorTarget = 2,\r\n        [int] $WarningTarget = 3,\r\n        [int] $VerboseTarget = 4,\r\n        [int] $DebugTarget = 5,\r\n        [int] $InformationTarget = 6\r\n    )\r\n    if ($_ -is [ErrorRecord]) {\r\n        $_ | Out-TargetStream -Target $ErrorTarget\r\n    } elseif ($_ -is [InformationRecord]) {\r\n        $_ | Out-TargetStream -Target $InformationTarget\r\n    } elseif ($_ -is [WarningRecord]) {\r\n        $_ | Out-TargetStream -Target $WarningTarget\r\n    } elseif ($_ -is [VerboseRecord]) {\r\n        $_ | Out-TargetStream -Target $VerboseTarget\r\n    } elseif ($_ -is [DebugRecord]) {\r\n        $_ | Out-TargetStream -Target $DebugTarget\r\n    } else {\r\n        $_ | Out-TargetStream -Target $SuccessTarget\r\n    }\r\n}\r\n```\r\n\r\nThis makes use of PowerShell's `ValueFromPipelineByPropertyName` and `ValueFromPipeline` handling to automatically destructure Record objects from the pipeline into common properties (e.g. `Message`) and passing those into the required `Write` cmdlets as asked for by the user. Some properties may get lost (e.g. error -> warning, or information -> verbose). If the types are incompatible, e.g. an object in the success stream -> verbose stream, it will be coerced to a string by PowerShell automatically (calling `.ToString()`).\r\n\r\nUsage:\r\n```powershell\r\n# Redirect error to warning stream, and warning to verbose\r\nWrite-Error \"test\" *>&1 | Out-Stream -ErrorTarget 3 -WarningTarget 4\r\n\r\n# Redirect output to information stream (useful for executing native commands!)\r\necho \"Doing operation...\" | Out-Stream -SuccessTarget 6\r\n```\r\n\r\nThis is basically what I would expect the redirection operator to be able to do. PowerShell is a very dynamic language and has automatic type coercion, so it should be able to automatically coerce types between streams.",
    "created_at": "2018-09-03T17:05:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7620#issuecomment-418162866",
    "id": 418162866,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7620",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxODE2Mjg2Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/418162866/reactions"
    },
    "updated_at": "2018-09-03T17:10:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/418162866",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10532611?v=4",
      "events_url": "https://api.github.com/users/felixfbecker/events{/privacy}",
      "followers_url": "https://api.github.com/users/felixfbecker/followers",
      "following_url": "https://api.github.com/users/felixfbecker/following{/other_user}",
      "gists_url": "https://api.github.com/users/felixfbecker/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/felixfbecker",
      "id": 10532611,
      "login": "felixfbecker",
      "node_id": "MDQ6VXNlcjEwNTMyNjEx",
      "organizations_url": "https://api.github.com/users/felixfbecker/orgs",
      "received_events_url": "https://api.github.com/users/felixfbecker/received_events",
      "repos_url": "https://api.github.com/users/felixfbecker/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/felixfbecker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/felixfbecker/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/felixfbecker"
    }
  },
  {
    "author_association": "NONE",
    "body": "> @felixfbecker Something to keep in mind: in traditional text-based shells, the various output streams are just undifferentiated text so it doesn't matter what goes where.. In PowerShell, the streams are strongly typed. The error stream only contains ErrorRecords, the VerboseStream only contains VerboseRecords, etc. The only polymorphic stream is the output stream so it's the only one where merge semantics are clear. That said, the higher-level scenario is important and we should have a way to accommodate it. One of the ideas we had in the past is to allow you to redirect into an action (scriptblock) and the action can do things like logging, etc. Anyway, I'm going to mark this as an enhancement request.\r\n\r\nGood explanation. But I think it's better put into the document so that we don't get confused by the error.",
    "created_at": "2019-01-27T14:04:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/7620#issuecomment-457920658",
    "id": 457920658,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/7620",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzkyMDY1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457920658/reactions"
    },
    "updated_at": "2019-01-27T14:04:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/457920658",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/369393?v=4",
      "events_url": "https://api.github.com/users/coin8086/events{/privacy}",
      "followers_url": "https://api.github.com/users/coin8086/followers",
      "following_url": "https://api.github.com/users/coin8086/following{/other_user}",
      "gists_url": "https://api.github.com/users/coin8086/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/coin8086",
      "id": 369393,
      "login": "coin8086",
      "node_id": "MDQ6VXNlcjM2OTM5Mw==",
      "organizations_url": "https://api.github.com/users/coin8086/orgs",
      "received_events_url": "https://api.github.com/users/coin8086/received_events",
      "repos_url": "https://api.github.com/users/coin8086/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/coin8086/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/coin8086/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/coin8086"
    }
  }
]
