[
  {
    "author_association": "COLLABORATOR",
    "body": "I checked with a slightly simpler use case:\r\n```powershell\r\n$Content = 'otherstuff;\"C:\\;\";otherstuff'\r\n\r\n$Content -split {\r\n    Write-Host \"char: $_\"\r\n    $false\r\n}\r\n```\r\n\r\n<details>\r\n<summary><strong>Results</strong></summary>\r\n\r\n```\r\no\r\nt\r\nh\r\ne\r\nr\r\ns\r\nt\r\nu\r\nf\r\nf\r\n;\r\n\"\r\nC\r\n:\r\n\\\r\n;\r\n\"\r\n;\r\no\r\nt\r\nh\r\ne\r\nr\r\ns\r\nt\r\nu\r\nf\r\nf\r\notherstuff;\"C:\\;\";otherstuff\r\n```\r\n\r\n</details>\r\n\r\nThis shows that the `\"` are correctly given to the scriptblock. The `'` characters delineate the string literal itself, so are not part of the string's characters. If you add `$env:PATH` and the string `'\"C:\\;\";'`, the same happens. The single quotes aren't included in the string, they're only the syntax markers that tells pwsh that that token is a string.",
    "created_at": "2021-06-24T13:24:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15655#issuecomment-867634044",
    "id": 867634044,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15655",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NzYzNDA0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/867634044/reactions"
    },
    "updated_at": "2021-06-24T13:24:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/867634044",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I played with this a bit and I think the fundamental issue here is actually one of scoping. The `$AreWeInsideASubstring` variable is not looking in the expected scope from inside the `-split` script block. This appears to work as expected:\r\n\r\n```powershell\r\n$Content = $env:Path + '\"C:\\;\";'\r\n\r\n$substring = $false\r\n$Content -split { \r\n  if ($_ -eq '\"') {\r\n    $script:substring = -not $script:substring\r\n    return $False\r\n  }\r\n  if ($_ -eq ';') {\r\n    return (-not $script:substring)\r\n  }\r\n}\r\n```\r\n\r\nUnsure if this is by design or not.",
    "created_at": "2021-06-24T13:32:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15655#issuecomment-867639841",
    "id": 867639841,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15655",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NzYzOTg0MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/867639841/reactions"
    },
    "updated_at": "2021-06-24T13:32:49Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/867639841",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "The scope was the first thing that I thought of. But when I tried to test it using the Debugger, I noticed the skipping issue that I am reporting.\r\n\r\nOkay, this clearly needs more testing on my side. I might have to report a debugger bug after all. \r\n\r\nThanks for your help. Closing.",
    "created_at": "2021-06-24T13:37:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15655#issuecomment-867643395",
    "id": 867643395,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15655",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NzY0MzM5NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/867643395/reactions"
    },
    "updated_at": "2021-06-24T13:37:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/867643395",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/17097175?v=4",
      "events_url": "https://api.github.com/users/skycommand/events{/privacy}",
      "followers_url": "https://api.github.com/users/skycommand/followers",
      "following_url": "https://api.github.com/users/skycommand/following{/other_user}",
      "gists_url": "https://api.github.com/users/skycommand/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/skycommand",
      "id": 17097175,
      "login": "skycommand",
      "node_id": "MDQ6VXNlcjE3MDk3MTc1",
      "organizations_url": "https://api.github.com/users/skycommand/orgs",
      "received_events_url": "https://api.github.com/users/skycommand/received_events",
      "repos_url": "https://api.github.com/users/skycommand/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/skycommand/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/skycommand/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/skycommand"
    }
  }
]
