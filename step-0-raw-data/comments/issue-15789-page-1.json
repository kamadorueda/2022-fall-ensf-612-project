[
  {
    "author_association": "COLLABORATOR",
    "body": "This is related to a change in .NET in the last year or two where they defaulted the string formatting for `double` (and I think `float` as well?) to what they called the 'shortest roundtrippable string' -- the shortest number that is a \"true\" representation of the floating point value, where if you parse that value back to a number you will get the exact same result.\r\n\r\nI believe the only thing we'd need to change here is to ensure we use whatever ToString() method they were using as default prior to that change, if we want. ",
    "created_at": "2021-07-17T04:18:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-881815727",
    "id": 881815727,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc40j3Cv",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/881815727/reactions"
    },
    "updated_at": "2021-07-17T04:18:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/881815727",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "The history is in #9893.",
    "created_at": "2021-07-19T04:39:47Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-882231092",
    "id": 882231092,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc40lcc0",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 2,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/882231092/reactions"
    },
    "updated_at": "2021-07-19T04:39:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/882231092",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "[decimal]11111.11 - 11110.01\r\n1.10\r\n[decimal]11111.11 - 11110\r\n1.11",
    "created_at": "2021-07-23T06:53:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-885438421",
    "id": 885438421,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc40xrfV",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/885438421/reactions"
    },
    "updated_at": "2021-07-23T06:53:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/885438421",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/4889469?v=4",
      "events_url": "https://api.github.com/users/lukeb1961/events{/privacy}",
      "followers_url": "https://api.github.com/users/lukeb1961/followers",
      "following_url": "https://api.github.com/users/lukeb1961/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukeb1961/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lukeb1961",
      "id": 4889469,
      "login": "lukeb1961",
      "node_id": "MDQ6VXNlcjQ4ODk0Njk=",
      "organizations_url": "https://api.github.com/users/lukeb1961/orgs",
      "received_events_url": "https://api.github.com/users/lukeb1961/received_events",
      "repos_url": "https://api.github.com/users/lukeb1961/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lukeb1961/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukeb1961/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lukeb1961"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "> The history is in #9893.\r\n\r\nThanks @iSazonov. I reviewed that PR and the regarding issue again and found this is the same behavior as before the regression in .NET 3 :) The PS 6.2.0 shows the same string conversion result.\r\n\r\n![image](https://user-images.githubusercontent.com/127450/138987773-e354c0da-5c4f-4282-b867-af82c7d9ea27.png)\r\n\r\nThis is because we are using `G15` precision when converting `double` to string, and it just happens that the value of `11111.11 - 11110.01` is `1.1000000000003638` in `G17` format. As is shown, its `G15` precision value still contains the `36` in the end, and thus the `G15` string conversion result is `1.10000000000036`.\r\n\r\nI guess this is by-design then? Unless we choose to not use `G15` for double-to-string conversion. `G13` would make it work as expected for this case, but, we may still run into another double value that still has some non-zero values at the end of its first 13 digits, and then we will face the same situation ðŸ¤· ",
    "created_at": "2021-10-27T02:16:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-952477813",
    "id": 952477813,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc44xah1",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/952477813/reactions"
    },
    "updated_at": "2021-10-27T02:16:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/952477813",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "> I guess this is by-design then?\r\n\r\nWhat is behavior in other shells? :-)\r\nAnd may be we should use .Net defaults?",
    "created_at": "2021-10-27T05:00:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-952539758",
    "id": 952539758,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc44xppu",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/952539758/reactions"
    },
    "updated_at": "2021-10-27T05:01:59Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/952539758",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "The .NET defaults lead to \"more unexpected\" behaviour for folks who are doing simple math, as you end up with more cases like this since they use the G17 format by default (I think?) which tends to show the more precise result, even though it's not really \"correct\" in any real-world scenario except to show the inaccuracies inherent in floating-point arithmetic.\r\n\r\nNot sure there's a really great solution here... maybe our default conversion should be limited to a smaller number of decimal places, like 4 or 5 at most, and if folks want more precision they can look for it explicitly, by calling `.ToString()` themselves. PowerShell isn't really a data-science tool, so those inaccuracies I would tend to think aren't critical for most pwsh users to be aware of.",
    "created_at": "2021-10-27T13:05:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-952907307",
    "id": 952907307,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc44zDYr",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/952907307/reactions"
    },
    "updated_at": "2021-10-27T13:05:04Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/952907307",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "The behavior of this specific issue is the same even on PS 5.1, because `double` uses `G15` by default on .NET Framework.\r\n\r\n![image](https://user-images.githubusercontent.com/127450/139106906-9176c632-7492-4ac5-a020-c74a1efee3f3.png)\r\n",
    "created_at": "2021-10-27T16:36:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-953104936",
    "id": 953104936,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc44zzoo",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/953104936/reactions"
    },
    "updated_at": "2021-10-27T16:36:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/953104936",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Decimal gives expected results, but to change the default would be a breaking change\r\n\r\n![image](https://user-images.githubusercontent.com/11859881/193721906-40cf8aa4-89a4-408b-bd9b-495cca396c65.png)\r\n",
    "created_at": "2022-10-04T02:31:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15789#issuecomment-1266316045",
    "id": 1266316045,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15789",
    "node_id": "IC_kwDOAvT7bc5LenMN",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1266316045/reactions"
    },
    "updated_at": "2022-10-04T02:31:49Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1266316045",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  }
]
