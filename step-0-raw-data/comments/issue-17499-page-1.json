[
  {
    "author_association": "NONE",
    "body": "```\r\nInvoke-WebRequest -UseBasicParsing -Uri \"https://www.adidas.co.uk/\" -Headers @{\r\n  \"accept\"=\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\"\r\n  \"accept-encoding\"=\"gzip, deflate, br\"\r\n  \"accept-language\"=\"en-GB,en;q=0.9,en-US;q=0.8\"\r\n}\r\n``` \r\nWorks. If I remove any of the three headers it fails. \r\n\r\n(Top tip for this - in edge if you run the [f12] dev tools, go to network monitor and load the page, you can click do copy as PowerShell - which is what I did). When I tested the whole thing it worked so I cut it down more and more until it no longer worked). \r\n\r\nThere were quite a lot of changes in this area AIUI so quite possible that default browser headers were sent but aren't sent any more - without doing a packet trace I can't see \r\n",
    "created_at": "2022-06-08T14:41:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17499#issuecomment-1150012609",
    "id": 1150012609,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17499",
    "node_id": "IC_kwDOAvT7bc5Ei8zB",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150012609/reactions"
    },
    "updated_at": "2022-06-08T14:41:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150012609",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I get a response back with just a `-Headers @{ Accept = 'text/html' }` and nothing else. I'd wager this server for some reason doesn't have a default fallback as to what kind of response to provide when no headers are present.\r\n\r\nI'm curious though that the OP's Expected Behaviour is a JSON response blob. I don't know why that would be being returned, even in 5.1. I can only get a normal HTML response back from this web address, as I would expect since it appears to be a website index page.",
    "created_at": "2022-06-08T14:55:50Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17499#issuecomment-1150030895",
    "id": 1150030895,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17499",
    "node_id": "IC_kwDOAvT7bc5EjBQv",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150030895/reactions"
    },
    "updated_at": "2022-06-08T14:56:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150030895",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "Possibly if the accept has all those bits in it needs accept-encoding and accept-language as well. \r\n",
    "created_at": "2022-06-08T15:10:46Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17499#issuecomment-1150049240",
    "id": 1150049240,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17499",
    "node_id": "IC_kwDOAvT7bc5EjFvY",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150049240/reactions"
    },
    "updated_at": "2022-06-08T15:10:46Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150049240",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "NONE",
    "body": "> I get a response back with just a `-Headers @{ Accept = 'text/html' }` and nothing else. I'd wager this server for some reason doesn't have a default fallback as to what kind of response to provide when no headers are present.\r\n> \r\n> I'm curious though that the OP's Expected Behaviour is a JSON response blob. I don't know why that would be being returned, even in 5.1. I can only get a normal HTML response back from this web address, as I would expect since it appears to be a website index page.\r\n\r\nSorry I had posted the wrong expected response now corrected it to HTML.",
    "created_at": "2022-06-08T15:16:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17499#issuecomment-1150056051",
    "id": 1150056051,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17499",
    "node_id": "IC_kwDOAvT7bc5EjHZz",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150056051/reactions"
    },
    "updated_at": "2022-06-08T15:16:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150056051",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/81479807?v=4",
      "events_url": "https://api.github.com/users/Dods80/events{/privacy}",
      "followers_url": "https://api.github.com/users/Dods80/followers",
      "following_url": "https://api.github.com/users/Dods80/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dods80/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Dods80",
      "id": 81479807,
      "login": "Dods80",
      "node_id": "MDQ6VXNlcjgxNDc5ODA3",
      "organizations_url": "https://api.github.com/users/Dods80/orgs",
      "received_events_url": "https://api.github.com/users/Dods80/received_events",
      "repos_url": "https://api.github.com/users/Dods80/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Dods80/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dods80/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Dods80"
    }
  },
  {
    "author_association": "NONE",
    "body": "So it seems that this behaviour is expected from running in a powershell 7 environment and not to be compared to what happens in Powershell 5. @[jhoneill](https://github.com/jhoneill). Thanks for the tip on header construction by monitoring in Edge. I will now close this issue.",
    "created_at": "2022-06-08T15:27:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17499#issuecomment-1150068830",
    "id": 1150068830,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17499",
    "node_id": "IC_kwDOAvT7bc5EjKhe",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150068830/reactions"
    },
    "updated_at": "2022-06-08T15:27:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1150068830",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/81479807?v=4",
      "events_url": "https://api.github.com/users/Dods80/events{/privacy}",
      "followers_url": "https://api.github.com/users/Dods80/followers",
      "following_url": "https://api.github.com/users/Dods80/following{/other_user}",
      "gists_url": "https://api.github.com/users/Dods80/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Dods80",
      "id": 81479807,
      "login": "Dods80",
      "node_id": "MDQ6VXNlcjgxNDc5ODA3",
      "organizations_url": "https://api.github.com/users/Dods80/orgs",
      "received_events_url": "https://api.github.com/users/Dods80/received_events",
      "repos_url": "https://api.github.com/users/Dods80/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Dods80/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Dods80/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Dods80"
    }
  }
]
