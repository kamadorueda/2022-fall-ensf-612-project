[
  {
    "author_association": "COLLABORATOR",
    "body": "@TravisEz13 @SteveL-MSFT @BrucePay Is there any particular reason this behaviour is the way it is, and should we seek to design out a more consistent and reliable system for handling errors? \r\n\r\nAs it currently stands, it's not only difficult to _write_ scripts with this caveat (you have to use wordier and more complex alternatives like `$PSCmdlet.ThrowTerminatingError()`, or the workarounds @Jaykul describes), but as an end-user it also means that behaviour when applying different preference variables or parameters can't be relied upon for script modules. Practically ever module becomes a case-by-case \"did they jump through all X hoops to make sure their error handling works\".\r\n\r\nIn my opinion, we should be attempting to simplify working with errors, not introducing additional complications.",
    "created_at": "2019-02-26T16:37:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-467513004",
    "id": 467513004,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzUxMzAwNA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/467513004/reactions"
    },
    "updated_at": "2019-02-26T16:37:21Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/467513004",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Recently I found myself digging into this issue while troubleshooting something related that I was working on in the debugger and compiler, and there are actually a few specific issues identified above that need to be discussed separately, as follows:\r\n\r\n## Issue descriptions\r\n\r\n1. Exceptions derived from `System.Management.Automation.RuntimeException` that contain inner exceptions cannot be caught by the outer exception type if the thing that was thrown was the raw exception (as opposed to an `ErrorRecord` or a wrapping `RuntimeException`). They can, however, be caught using the inner exception type (which should never be possible, if PowerShell aligns itself to similar designs in other languages like C#). This is an issue in [lines 1464-1466 of the FindMatchingHandler static method](https://github.com/PowerShell/PowerShell/blob/ceed73d7375cb98a199ceb19796bb2311b0b0002/src/System.Management.Automation/engine/runtime/Operations/MiscOps.cs#L1464-L1466), which should create a new `ErrorRecord` that wraps the `RuntimeException` and assign those two variables differently if the parent (the exception in the `rte` variable itself) contains the exception, as can be seen by inspecting the `ErrorRecord` property on the `RuntimeException`. Additionally a minor logic change should be added to prevent an unnecessary second invocation of `FindAndProcessHandler`. This issue is the root cause of what is happening here.\r\n\r\n1. When you rethrow using `throw` inside of a catch block, if whatever was thrown and then caught is derived from `System.Management.Automation.RuntimeException`, it will be rethrown as is. Otherwise it will be converted into a `System.Management.Automation.RuntimeException` and then thrown. Conversely, if instead you rethrow by invoking `throw $_` inside of the catch block, the `ErrorRecord` that was created to identify the error and that is stored in `$_` will be thrown. From an end user perspective, this seems odd, since they are both inside of the same catch block and appear like they should do the same thing; however, I believe that detail is moot once the first issue is addressed.\r\n\r\n## Alternative workaround\r\n\r\nAn alternative workaround for the first issue than what was suggested above is to wrap the exception in an `ErrorRecord`, and then throw the `ErrorRecord`. You can see how the wrapping is done in the script that demonstrates that issue below.\r\n\r\n## Test script demonstrating first issue\r\n\r\nTo demonstrate the first issue, see the following script:\r\n\r\n```PowerShell\r\nfunction Test-ExceptionHandling {\r\n    [CmdletBinding()]\r\n    param(\r\n        [Parameter(Mandatory)]\r\n        [ValidateNotNull()]\r\n        [System.Type]\r\n        $InnerExceptionType,\r\n\r\n        [Parameter(Mandatory)]\r\n        [ValidateNotNull()]\r\n        [System.Type]\r\n        $OuterExceptionType,\r\n\r\n        [Parameter(Mandatory)]\r\n        [ValidateSet('Exception','ErrorRecord','RuntimeException')]\r\n        [System.String]\r\n        $ThrowType\r\n    )\r\n    function Write-ErrorInfo {\r\n        param($ErrorRecord)\r\n        \"Caught: $($ErrorRecord.Exception.foreach('GetType').FullName)\"\r\n        \"Category: $($ErrorRecord.CategoryInfo.Category)\"\r\n        \"Message: $($ErrorRecord.Exception.Message)\"\r\n        \"InnerException: $($ErrorRecord.Exception.InnerException.foreach('GetType').FullName)\"\r\n    }\r\n\r\n    Invoke-Expression -Command @\"\r\ntry {\r\n    `$ine = `$InnerExceptionType::new(\"My inner exception\")\r\n    `$oute =  `$OuterExceptionType::new(\"My outer exception\", `$ine)\r\n    `$er = [System.Management.Automation.ErrorRecord]::new(`$oute, `$oute.Message, 'OperationStopped', `$null)\r\n    `$rte = [System.Management.Automation.RuntimeException]::new(`$oute.Message, `$oute, `$er)\r\n    switch (`$ThrowType) {\r\n        'Exception' {\r\n            throw `$oute\r\n        }\r\n        'ErrorRecord' {\r\n            throw `$er\r\n        }\r\n        'RuntimeException' {\r\n            throw `$rte\r\n        }\r\n    }\r\n} catch [$($InnerExceptionType.FullName)] {\r\n    Write-ErrorInfo `$_\r\n} catch [$($OuterExceptionType.FullName)] {\r\n    Write-ErrorInfo `$_\r\n} catch {\r\n    'Caught: Catch all'\r\n}\r\n\"@\r\n}\r\n\r\n# This works\r\nTest-ExceptionHandling -InnerExceptionType System.ArgumentException -OuterExceptionType System.Management.Automation.ItemNotFoundException -ThrowType RuntimeException\r\n\r\n# As does this\r\nTest-ExceptionHandling -InnerExceptionType System.ArgumentException -OuterExceptionType System.Management.Automation.ItemNotFoundException -ThrowType ErrorRecord\r\n\r\n# But when throwing the unwrapped raw exception, the bug is exposed, with the error handler catching the inner exception (something that should not be possible)\r\nTest-ExceptionHandling -InnerExceptionType System.ArgumentException -OuterExceptionType System.Management.Automation.ItemNotFoundException -ThrowType Exception\r\n```\r\n\r\nNow that the issue has been identified, would you like it fixed @SteveL-MSFT?",
    "created_at": "2019-04-24T19:59:26Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-486402815",
    "id": 486402815,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQwMjgxNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 7,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 1,
      "laugh": 0,
      "rocket": 0,
      "total_count": 8,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/486402815/reactions"
    },
    "updated_at": "2019-04-25T01:27:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/486402815",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "That's some supreme sleuthing you've done there, Kirk, nice work! ðŸ˜Š ",
    "created_at": "2019-04-24T20:16:36Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-486408628",
    "id": 486408628,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjQwODYyOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/486408628/reactions"
    },
    "updated_at": "2019-04-24T20:16:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/486408628",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "~~Just to add one more thought related to the second \"issue\" identified above so that the committee can consider it.~~\r\n\r\n~~From within a `catch` block, invoking `throw` and `throw $_` are effectively doing the same thing. The end result is two `ErrorRecord` objects that are not the same (they have a different hash code because they are generated independently by PowerShell), but the properties on those `ErrorRecord` objects are identical. Given that is the case, wouldn't it make sense for the PowerShell compiler to treat `throw` and `throw $_` both as rethrows, in [this method](https://github.com/PowerShell/PowerShell/blob/ceed73d7375cb98a199ceb19796bb2311b0b0002/src/System.Management.Automation/engine/parser/ast.cs#L5294-L5314), so that they both compile and function the same way?~~\r\n\r\nOn second thought, I don't think that's a good idea because you could store `$_` in another variable and then throw that variable later, and it wouldn't be handled quite the same way. The best thing to do for `throw $_` if the first issue is addressed would probably be a PowerShell Script Analyzer rule that generates a warning recommending users simply use `throw` instead.",
    "created_at": "2019-04-25T19:17:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-486803591",
    "id": 486803591,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NjgwMzU5MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/486803591/reactions"
    },
    "updated_at": "2019-04-26T17:16:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/486803591",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@PowerShell/powershell-committee reviewed this, we believe the fundamental issue is that there are many cases in PowerShell where exceptions get wrapped.  This makes error handling difficult.  We agreed that we should allow the user to catch the inner exception.  Proposal is that in our catch code, we should recurse into it looking for a match and return that exception to the catch if found.  We should not make changes to throw behavior.  @JamesWTruher offered to author a RFC for this",
    "created_at": "2019-05-15T22:31:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-492848048",
    "id": 492848048,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mjg0ODA0OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 1,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/492848048/reactions"
    },
    "updated_at": "2019-05-15T22:31:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/492848048",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@SteveL-MSFT Just to make sure I understand, when you say \"we should allow the user to catch the inner exception\", you're only suggesting that PowerShell try/catch blocks be able to catch inner exceptions that are automatically wrapped by PowerShell with other exceptions such as RuntimeException, and not inner exceptions in general, correct?",
    "created_at": "2019-05-16T01:18:32Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-492879754",
    "id": 492879754,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Mjg3OTc1NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 1,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/492879754/reactions"
    },
    "updated_at": "2019-05-16T01:18:32Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/492879754",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@KirkMunro we didn't differentiate between PS wrapped or non-PS wrapped exceptions.  The idea is that PS would look through all the inner exceptions for a match regardless of who put it there.  This is a technical breaking change, but in our discussion we agreed that since this is an error handling case, those scripts were already broken if they weren't correctly catching the exception.",
    "created_at": "2019-05-18T22:45:25Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-493712496",
    "id": 493712496,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzcxMjQ5Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 1,
      "confused": 1,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/493712496/reactions"
    },
    "updated_at": "2019-05-18T22:45:25Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/493712496",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@SteveL-MSFT and @JamesWTruher: This warrants some more discussion in the committee or here on this issue discussion because you made the wrong decision.\r\n\r\nInner exceptions should not be catchable because they've already been handled. C# works this way. Java as well. I can do more research, but I suspect other programming languages behave the same way. When you have a method/command/script that invokes something inside of a try/catch block and internally catches that exception, the code is handling the exception. If it wants to surface the exception as-is, it just rethrows it. Otherwise, it may suppress it, or it may generate a new exception based on that exception and assign the original exception as the inner exception. This is known as exception chaining.\r\n\r\nIf I write some code that may throw exceptions, it is advantageous to the caller to know what type of exceptions may be thrown. For example, see any number of methods in .NET such as [this one](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.getstringasync?view=netframework-4.8) which identifies the types of exceptions that it may throw. Unless the logic within those methods specifically rethrows an exception of a certain type, you will never, ever see that documentation indicate types of inner exceptions as exceptions that it throws _because they are already handled_.\r\n\r\nPowerShell should learn from these other languages and be no different when it comes to exception chaining. Users should not be allowed to catch inner exceptions. The exception to that rule (pun intended) when it comes to PowerShell is with wrapper exceptions. PowerShell uses certain exception types to marshal exceptions through the engine and surface them to the user. In those cases, the user needs to be able to catch the original exception, not the wrapper/helper that PowerShell puts on top of it.\r\n\r\nIf you look in Issue 1 of my [earlier post](#issuecomment-486402815), it describes one place where PowerShell can be updated to properly propagate exceptions through the system so that they can be properly caught (the actual exception, not the wrapper). Those are the types of changes that need to be made through PRs -- identify where PowerShell wraps exceptions, and make sure that those exceptions are wrapped properly so that the correct exception can be caught by the end user.",
    "created_at": "2019-05-21T15:24:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-494439073",
    "id": 494439073,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDQzOTA3Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 4,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 4,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/494439073/reactions"
    },
    "updated_at": "2019-05-21T17:48:37Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/494439073",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3515485?v=4",
      "events_url": "https://api.github.com/users/KirkMunro/events{/privacy}",
      "followers_url": "https://api.github.com/users/KirkMunro/followers",
      "following_url": "https://api.github.com/users/KirkMunro/following{/other_user}",
      "gists_url": "https://api.github.com/users/KirkMunro/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/KirkMunro",
      "id": 3515485,
      "login": "KirkMunro",
      "node_id": "MDQ6VXNlcjM1MTU0ODU=",
      "organizations_url": "https://api.github.com/users/KirkMunro/orgs",
      "received_events_url": "https://api.github.com/users/KirkMunro/received_events",
      "repos_url": "https://api.github.com/users/KirkMunro/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/KirkMunro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KirkMunro/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/KirkMunro"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "I have obviously explained this **very** poorly if you think that making me able to catch inner exceptions would help. The original problem I was trying to work around by using `throw $_` instead of `throw` is the fact that **I am already catching inner exceptions**\r\n\r\n# I'm trying *NOT* to catch inner exceptions! \r\n\r\nI mean, I literally wrote: We should be able to catch the **_outer_** exception ...\r\n\r\nSee #9689",
    "created_at": "2019-05-22T14:45:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-494834489",
    "id": 494834489,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NDgzNDQ4OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 3,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 3,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/494834489/reactions"
    },
    "updated_at": "2019-05-22T14:50:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/494834489",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/192942?v=4",
      "events_url": "https://api.github.com/users/Jaykul/events{/privacy}",
      "followers_url": "https://api.github.com/users/Jaykul/followers",
      "following_url": "https://api.github.com/users/Jaykul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jaykul/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Jaykul",
      "id": 192942,
      "login": "Jaykul",
      "node_id": "MDQ6VXNlcjE5Mjk0Mg==",
      "organizations_url": "https://api.github.com/users/Jaykul/orgs",
      "received_events_url": "https://api.github.com/users/Jaykul/received_events",
      "repos_url": "https://api.github.com/users/Jaykul/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Jaykul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jaykul/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Jaykul"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Additional data points:\r\n\r\nThis issue has something to do with the `throw $pbe` statement in powershell. When the exception is thrown from true .NET method, the re-throw statement works as expected. See the code below:\r\n```powershell\r\nAdd-Type -TypeDefinition @'\r\nusing System.Management.Automation;\r\nusing System;\r\npublic class Bar {\r\n    public static void ThrowException() {\r\n        var inf = new ItemNotFoundException(\"File Not Found\");\r\n        var pbe = new ParameterBindingException(\"FileName\", inf);\r\n        throw pbe;\r\n    }\r\n}\r\n'@\r\n\r\nfunction TryAgain { try { [Bar]::ThrowException() } catch { throw } }\r\n\r\ntry {\r\n    TryAgain\r\n} catch [System.Management.Automation.ParameterBindingException] {\r\n    \"PBE\" \r\n} catch [System.Management.Automation.ItemNotFoundException] {\r\n    \"INFE\"\r\n}\r\n\r\n> PBE\r\n```\r\nSo, if someone is investigating for a fix, the focus probably should be the `throw $pbe` statement.",
    "created_at": "2021-09-01T17:01:05Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-910475606",
    "id": 910475606,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "IC_kwDOAvT7bc42RMFW",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/910475606/reactions"
    },
    "updated_at": "2021-09-01T17:01:05Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/910475606",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "NONE",
    "body": "Are you still thinking about this? We had this pitfall today and it took us half a day to find and understand the problem.",
    "created_at": "2021-10-06T17:18:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-936728467",
    "id": 936728467,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "IC_kwDOAvT7bc431VeT",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/936728467/reactions"
    },
    "updated_at": "2021-10-06T17:18:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/936728467",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1700241?v=4",
      "events_url": "https://api.github.com/users/Tragen/events{/privacy}",
      "followers_url": "https://api.github.com/users/Tragen/followers",
      "following_url": "https://api.github.com/users/Tragen/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tragen/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Tragen",
      "id": 1700241,
      "login": "Tragen",
      "node_id": "MDQ6VXNlcjE3MDAyNDE=",
      "organizations_url": "https://api.github.com/users/Tragen/orgs",
      "received_events_url": "https://api.github.com/users/Tragen/received_events",
      "repos_url": "https://api.github.com/users/Tragen/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Tragen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tragen/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Tragen"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "This surfaced for me as well now.",
    "created_at": "2022-10-05T08:48:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/6205#issuecomment-1268139502",
    "id": 1268139502,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6205",
    "node_id": "IC_kwDOAvT7bc5LlkXu",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1268139502/reactions"
    },
    "updated_at": "2022-10-05T08:48:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1268139502",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3505151?v=4",
      "events_url": "https://api.github.com/users/powercode/events{/privacy}",
      "followers_url": "https://api.github.com/users/powercode/followers",
      "following_url": "https://api.github.com/users/powercode/following{/other_user}",
      "gists_url": "https://api.github.com/users/powercode/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/powercode",
      "id": 3505151,
      "login": "powercode",
      "node_id": "MDQ6VXNlcjM1MDUxNTE=",
      "organizations_url": "https://api.github.com/users/powercode/orgs",
      "received_events_url": "https://api.github.com/users/powercode/received_events",
      "repos_url": "https://api.github.com/users/powercode/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/powercode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/powercode/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/powercode"
    }
  }
]
