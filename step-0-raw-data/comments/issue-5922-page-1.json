[
  {
    "author_association": "NONE",
    "body": "I suspect that this is caused by the same issue that affects existing private data when the manifest is updated through Update-ModuleManifest as mentioned in https://github.com/PowerShell/PowerShellGet/issues/294#issuecomment-401151546. I spent some time troubleshooting and discovered that the issue is within Get-PrivateData private cmdlet (PowerShellGet) which assumes that any extra non-default property is a string:\r\nhttps://github.com/PowerShell/PowerShellGet/blob/a5f5167ad00f971e2c6b29fbcd95c76648593b36/src/PowerShellGet/private/functions/Get-PrivateData.ps1#L68\r\n\r\nAnother problem in that cmdlet is that in the end it drops the constructed lines in a wrong part of the output: https://github.com/PowerShell/PowerShellGet/blob/a5f5167ad00f971e2c6b29fbcd95c76648593b36/src/PowerShellGet/private/functions/Get-PrivateData.ps1#L146 ",
    "created_at": "2018-11-13T13:42:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5922#issuecomment-438269852",
    "id": 438269852,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5922",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODI2OTg1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/438269852/reactions"
    },
    "updated_at": "2018-11-13T13:43:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/438269852",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/18121861?v=4",
      "events_url": "https://api.github.com/users/Glober777/events{/privacy}",
      "followers_url": "https://api.github.com/users/Glober777/followers",
      "following_url": "https://api.github.com/users/Glober777/following{/other_user}",
      "gists_url": "https://api.github.com/users/Glober777/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Glober777",
      "id": 18121861,
      "login": "Glober777",
      "node_id": "MDQ6VXNlcjE4MTIxODYx",
      "organizations_url": "https://api.github.com/users/Glober777/orgs",
      "received_events_url": "https://api.github.com/users/Glober777/received_events",
      "repos_url": "https://api.github.com/users/Glober777/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Glober777/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Glober777/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Glober777"
    }
  },
  {
    "author_association": "NONE",
    "body": "Maybe it's not the prettiest one, but I can share with you a workaround for PS 5.1\r\n\r\n``` powershell\r\n$path = (\"{0}\\{1}\\{2}.psd1\" -f $modulesPath, $_.Name, $_.Name)\r\n$params = @{\r\n\tDescription = $_.Description\r\n\tFunctionsToExport = $_.FunctionsToExport\r\n\tGuid = $_.GUID\r\n\tPowerShellVersion = $_.PowerShellVersion\r\n\tRootModule = (\"{0}.psm1\" -f $_.Name)\r\n\tRequiredModules = $_.RequiredModules\r\n\tModuleVersion = $_.ModuleVersion\r\n\tExternalModuleDependencies = $_.ExternalModuleDependencies\r\n\tCopyright = $manifestCommon.Copyright\r\n\tAuthor = $manifestCommon.Author\r\n\tCompanyName = $manifestCommon.CompanyName\r\n}\r\n\r\n# https://github.com/PowerShell/PowerShell/issues/5922\r\nNew-ModuleManifest $path\r\nUpdate-ModuleManifest -Path $path @params\r\n```\r\nAfter some time of struggling with generating manifests dynamically, this the best solution I've found so far. Hope this will help",
    "created_at": "2020-07-27T16:18:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5922#issuecomment-664495447",
    "id": 664495447,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5922",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDQ5NTQ0Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 1,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/664495447/reactions"
    },
    "updated_at": "2020-07-27T16:18:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/664495447",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/48159131?v=4",
      "events_url": "https://api.github.com/users/jonatanjagiello/events{/privacy}",
      "followers_url": "https://api.github.com/users/jonatanjagiello/followers",
      "following_url": "https://api.github.com/users/jonatanjagiello/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatanjagiello/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jonatanjagiello",
      "id": 48159131,
      "login": "jonatanjagiello",
      "node_id": "MDQ6VXNlcjQ4MTU5MTMx",
      "organizations_url": "https://api.github.com/users/jonatanjagiello/orgs",
      "received_events_url": "https://api.github.com/users/jonatanjagiello/received_events",
      "repos_url": "https://api.github.com/users/jonatanjagiello/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jonatanjagiello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatanjagiello/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jonatanjagiello"
    }
  },
  {
    "author_association": "NONE",
    "body": "I know this is an old thread, but the above \"workaround\" doesn't address the issue report at all, as it doesn't touch PrivateData. I'm having the same issue here... Update-ModuleManifest really has one use, for updating the manifest in a CI/CD process, and it fails utterly there, after so many years and versions. :(",
    "created_at": "2022-04-22T14:49:57Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5922#issuecomment-1106592058",
    "id": 1106592058,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5922",
    "node_id": "IC_kwDOAvT7bc5B9UE6",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1106592058/reactions"
    },
    "updated_at": "2022-04-22T14:49:57Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1106592058",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3430823?v=4",
      "events_url": "https://api.github.com/users/wekempf/events{/privacy}",
      "followers_url": "https://api.github.com/users/wekempf/followers",
      "following_url": "https://api.github.com/users/wekempf/following{/other_user}",
      "gists_url": "https://api.github.com/users/wekempf/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/wekempf",
      "id": 3430823,
      "login": "wekempf",
      "node_id": "MDQ6VXNlcjM0MzA4MjM=",
      "organizations_url": "https://api.github.com/users/wekempf/orgs",
      "received_events_url": "https://api.github.com/users/wekempf/received_events",
      "repos_url": "https://api.github.com/users/wekempf/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/wekempf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wekempf/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/wekempf"
    }
  },
  {
    "author_association": "NONE",
    "body": "That's true but the problem with PrivateData can be fixed too :D \r\nYou just have to use hashtable as an argument straight away (do not put it in PSData as would be logical):\r\n\r\n```\r\n$path = (\"{0}\\{1}\\{2}.psd1\" -f $modulesPath, $_.Name, $_.Name)\r\n$params = @{\r\n        PrivateData = @{\r\n           Tags = 'tag1', 'tag2'\r\n           ProjectUri = 'https://github.com'\r\n        }\r\n\tDescription = $_.Description\r\n\tFunctionsToExport = $_.FunctionsToExport\r\n\tGuid = $_.GUID\r\n\tPowerShellVersion = $_.PowerShellVersion\r\n\tRootModule = (\"{0}.psm1\" -f $_.Name)\r\n\tRequiredModules = $_.RequiredModules\r\n\tModuleVersion = $_.ModuleVersion\r\n\tExternalModuleDependencies = $_.ExternalModuleDependencies\r\n\tCopyright = $manifestCommon.Copyright\r\n\tAuthor = $manifestCommon.Author\r\n\tCompanyName = $manifestCommon.CompanyName\r\n}\r\n\r\n# https://github.com/PowerShell/PowerShell/issues/5922\r\nNew-ModuleManifest $path\r\nUpdate-ModuleManifest -Path $path @params\r\n```\r\n\r\nNotice the:\r\n```\r\nPrivateData = @{\r\n           Tags = 'tag1', 'tag2'\r\n           ProjectUri = 'https://github.com'\r\n        }\r\n```\r\n\r\nI am using this approach in my function for generating modules https://github.com/ztrhgf/useful_powershell_functions/blob/master/Export-ScriptsToModule.ps1\r\n\r\n<blockquote><img src=\"https://github.githubassets.com/images/modules/site/social-cards/github-social.png\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/\">GitHub: Where the world builds software</a></strong></div><div>GitHub is where over 83 million developers shape the future of software, together. Contribute to the open source community, manage your Git repositories, review code like a pro, track bugs and feat...</div></blockquote>\r\n<blockquote><img src=\"https://opengraph.githubassets.com/a2e4c7bf2b210c2e0035d0722bf91f33fd936937d259f8bd57842dc9e12b4ad2/ztrhgf/useful_powershell_functions\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/ztrhgf/useful_powershell_functions\">useful_powershell_functions/Export-ScriptsToModule.ps1 at master Â· ztrhgf/useful_powershell_functions</a></strong></div><div>powershell functions to make my admin work easier. Contribute to ztrhgf/useful_powershell_functions development by creating an account on GitHub.</div></blockquote>",
    "created_at": "2022-05-18T10:39:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5922#issuecomment-1129850358",
    "id": 1129850358,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5922",
    "node_id": "IC_kwDOAvT7bc5DWCX2",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1129850358/reactions"
    },
    "updated_at": "2022-05-18T10:40:58Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1129850358",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2930419?v=4",
      "events_url": "https://api.github.com/users/ztrhgf/events{/privacy}",
      "followers_url": "https://api.github.com/users/ztrhgf/followers",
      "following_url": "https://api.github.com/users/ztrhgf/following{/other_user}",
      "gists_url": "https://api.github.com/users/ztrhgf/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/ztrhgf",
      "id": 2930419,
      "login": "ztrhgf",
      "node_id": "MDQ6VXNlcjI5MzA0MTk=",
      "organizations_url": "https://api.github.com/users/ztrhgf/orgs",
      "received_events_url": "https://api.github.com/users/ztrhgf/received_events",
      "repos_url": "https://api.github.com/users/ztrhgf/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/ztrhgf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ztrhgf/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/ztrhgf"
    }
  }
]
