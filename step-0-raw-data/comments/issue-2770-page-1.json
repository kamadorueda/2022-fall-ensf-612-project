[
  {
    "author_association": "NONE",
    "body": "I'm having a similar issue, with a custom prompt() function and Write-Output $outputStr -NoNewLine. It's similar enough, so I decided to comment here.\r\n\r\n## Expected Behavior\r\n`(0) /Users/aaron # <insert command here>`\r\n\r\n## Actual Behavior\r\n`PS>               <insert command here>`\r\n\r\n## Steps to reproduce\r\nPowershell profile with this prompt:\r\n\r\n    function prompt() {\r\n        $outputStr = '('\r\n        $outputStr += $(Get-History).Count\r\n        $outputStr += ') '\r\n     \r\n        $outputStr += $(Get-Location)\r\n        $outputStr += ' # '\r\n\r\n        write-output $outputStr -NoNewLine\r\n\r\n       return ' '\r\n    }\r\n\r\nAnd then type a command.\r\n\r\n## More Info\r\nThe prompt is getting replaced with PS> and enough spaces to put the cursor back in the right spot. \r\n\r\n## Versions\r\n    Name                           Value                                                                                   \r\n    ----                           -----                                                                                   \r\n    PSVersion                      6.0.0-alpha                                                                             \r\n    PSEdition                      Core                                                                                    \r\n    PSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                                                                 \r\n    BuildVersion                   3.0.0.0                                                                                 \r\n    GitCommitId                    v6.0.0-alpha.13                                                                         \r\n    CLRVersion                                                                                                             \r\n    WSManStackVersion              3.0                                                                                     \r\n    PSRemotingProtocolVersion      2.3                                                                                     \r\n    SerializationVersion           1.1.0.1  \r\n\r\nAlso observed on v6.0.0-alpha.12.\r\n\r\nOS X 10.11.6 (15G1108)",
    "created_at": "2016-11-27T23:57:49Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2770#issuecomment-263157561",
    "id": 263157561,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2770",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzE1NzU2MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263157561/reactions"
    },
    "updated_at": "2016-11-27T23:58:12Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263157561",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/20527428?v=4",
      "events_url": "https://api.github.com/users/alongchamps/events{/privacy}",
      "followers_url": "https://api.github.com/users/alongchamps/followers",
      "following_url": "https://api.github.com/users/alongchamps/following{/other_user}",
      "gists_url": "https://api.github.com/users/alongchamps/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/alongchamps",
      "id": 20527428,
      "login": "alongchamps",
      "node_id": "MDQ6VXNlcjIwNTI3NDI4",
      "organizations_url": "https://api.github.com/users/alongchamps/orgs",
      "received_events_url": "https://api.github.com/users/alongchamps/received_events",
      "repos_url": "https://api.github.com/users/alongchamps/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/alongchamps/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alongchamps/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/alongchamps"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@astla42 I think you have an error in your prompt function.  `Write-Output` does not take a `-NoNewline` parameter.  You probably meant to use `Write-Host`.  However, you can simplify your prompt to:\r\n```powershell\r\nfunction prompt {\r\n    \"($((Get-History).Count)) $(Get-Location) # \"\r\n}\r\n```\r\nFolks use `Write-Host` to get `colored text` in their prompt e.g.:\r\n```powershell\r\nfunction prompt {\r\n    Write-Host \"($((Get-History).Count)) \" -NoNewline\r\n    Write-Host \"$(Get-Location)\" -ForegroundColor Cyan -NoNewline\r\n    Write-Host \" # \" -NoNewline\r\n    ' '\r\n}\r\n```",
    "created_at": "2016-11-28T00:10:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2770#issuecomment-263158317",
    "id": 263158317,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2770",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzE1ODMxNw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263158317/reactions"
    },
    "updated_at": "2016-11-28T00:11:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263158317",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/5177512?v=4",
      "events_url": "https://api.github.com/users/rkeithhill/events{/privacy}",
      "followers_url": "https://api.github.com/users/rkeithhill/followers",
      "following_url": "https://api.github.com/users/rkeithhill/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkeithhill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/rkeithhill",
      "id": 5177512,
      "login": "rkeithhill",
      "node_id": "MDQ6VXNlcjUxNzc1MTI=",
      "organizations_url": "https://api.github.com/users/rkeithhill/orgs",
      "received_events_url": "https://api.github.com/users/rkeithhill/received_events",
      "repos_url": "https://api.github.com/users/rkeithhill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/rkeithhill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkeithhill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/rkeithhill"
    }
  },
  {
    "author_association": "NONE",
    "body": "Yep, seems like I was doing that part wrong. The NoNewLine was leftover from other testing with my profile on Windows, which has more detail (such as connected vCenters, from PowerCLI) and colors for more readability. I was also testing between write-host and write-output, which is where that came from.",
    "created_at": "2016-11-28T00:27:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2770#issuecomment-263159310",
    "id": 263159310,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2770",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzE1OTMxMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263159310/reactions"
    },
    "updated_at": "2016-11-28T00:27:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263159310",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/20527428?v=4",
      "events_url": "https://api.github.com/users/alongchamps/events{/privacy}",
      "followers_url": "https://api.github.com/users/alongchamps/followers",
      "following_url": "https://api.github.com/users/alongchamps/following{/other_user}",
      "gists_url": "https://api.github.com/users/alongchamps/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/alongchamps",
      "id": 20527428,
      "login": "alongchamps",
      "node_id": "MDQ6VXNlcjIwNTI3NDI4",
      "organizations_url": "https://api.github.com/users/alongchamps/orgs",
      "received_events_url": "https://api.github.com/users/alongchamps/received_events",
      "repos_url": "https://api.github.com/users/alongchamps/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/alongchamps/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alongchamps/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/alongchamps"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@eamodio - this looks like https://github.com/lzybkr/PSReadLine/issues/468\r\nIf you're using `Write-Host`, I'll just close this as a duplicate.",
    "created_at": "2016-11-28T23:19:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2770#issuecomment-263426423",
    "id": 263426423,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2770",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzQyNjQyMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263426423/reactions"
    },
    "updated_at": "2016-11-28T23:19:08Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263426423",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "NONE",
    "body": "@lzybkr Sorry but I forgot I had avoided Write-Host and just have the following:\r\n```ps\r\nfunction global:prompt {\r\n    $realLASTEXITCODE = $LASTEXITCODE\r\n    $p = Write-VcsStatus\r\n    $global:LASTEXITCODE = $realLASTEXITCODE\r\n\r\n    $path = $pwd.ProviderPath -replace $Env:HOME, \"~\"\r\n    if ($GitPromptSettings.PromptOnNewLine) {\r\n        return \"$path$p`n> \"\r\n    }\r\n    else {\r\n        return \"$path$p> \"\r\n    }\r\n}\r\n```",
    "created_at": "2016-11-29T18:38:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2770#issuecomment-263658354",
    "id": 263658354,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2770",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzY1ODM1NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263658354/reactions"
    },
    "updated_at": "2016-11-29T18:38:51Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/263658354",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/641685?v=4",
      "events_url": "https://api.github.com/users/eamodio/events{/privacy}",
      "followers_url": "https://api.github.com/users/eamodio/followers",
      "following_url": "https://api.github.com/users/eamodio/following{/other_user}",
      "gists_url": "https://api.github.com/users/eamodio/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/eamodio",
      "id": 641685,
      "login": "eamodio",
      "node_id": "MDQ6VXNlcjY0MTY4NQ==",
      "organizations_url": "https://api.github.com/users/eamodio/orgs",
      "received_events_url": "https://api.github.com/users/eamodio/received_events",
      "repos_url": "https://api.github.com/users/eamodio/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/eamodio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eamodio/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/eamodio"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "The original issue should be fixed by https://github.com/PowerShell/PowerShell/pull/3867.\r\nPlease note that escape sequences are not supported by PSReadline on Unix (see the \"`Additional Info`\" section of the PR description body).",
    "created_at": "2017-05-26T19:18:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2770#issuecomment-304366700",
    "id": 304366700,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2770",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDM2NjcwMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/304366700/reactions"
    },
    "updated_at": "2017-05-26T19:18:22Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/304366700",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  }
]
