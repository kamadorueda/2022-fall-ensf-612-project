[
  {
    "author_association": "COLLABORATOR",
    "body": "@Niehweune Please issue template and share more information ($PSVersionTable)",
    "created_at": "2021-06-04T15:25:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15523#issuecomment-854813051",
    "id": 854813051,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15523",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NDgxMzA1MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/854813051/reactions"
    },
    "updated_at": "2021-06-04T15:25:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/854813051",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "Additional info added, since we now found the root cause (antivirus behavior).\r\n\r\nIssue is for any PowerShell version, really, however earlier versions simply returned just the Exception message, whereas the latest version shows the full stacktrace (which helped us pinpoint the exact issue).\r\n\r\nWe haven't been able to reproduce the issue on other servers than those already affected (4 servers in total).",
    "created_at": "2021-06-08T11:42:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15523#issuecomment-856691378",
    "id": 856691378,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15523",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NjY5MTM3OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/856691378/reactions"
    },
    "updated_at": "2021-06-08T11:42:01Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/856691378",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/49023154?v=4",
      "events_url": "https://api.github.com/users/Niehweune/events{/privacy}",
      "followers_url": "https://api.github.com/users/Niehweune/followers",
      "following_url": "https://api.github.com/users/Niehweune/following{/other_user}",
      "gists_url": "https://api.github.com/users/Niehweune/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Niehweune",
      "id": 49023154,
      "login": "Niehweune",
      "node_id": "MDQ6VXNlcjQ5MDIzMTU0",
      "organizations_url": "https://api.github.com/users/Niehweune/orgs",
      "received_events_url": "https://api.github.com/users/Niehweune/received_events",
      "repos_url": "https://api.github.com/users/Niehweune/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Niehweune/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Niehweune/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Niehweune"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Some background, these files are used to detect if AppLocker is enabled.  We delete them to keep from leaving garbage around which may slow future scans.\r\n\r\nPersonally, I feel that this is an area that PowerShell can be more resilient at, but this resilience would likely be in the form of leaving these temporary files around as this is in a critical path for PowerShell startup and we don't want to affect startup performance.\r\n\r\nI discussed this with @PaulHigin  and he felt strongly that we should not ignore the deletion failure.  \r\nIf this interfered with our ability to call AppLocker, I would agree.\r\n\r\nFrom the stack trace, this is not the case, but I would encourage you to contact Sophos and report this issue with their product.",
    "created_at": "2021-06-14T21:43:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15523#issuecomment-861015798",
    "id": 861015798,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15523",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTAxNTc5OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/861015798/reactions"
    },
    "updated_at": "2021-06-14T21:43:21Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/861015798",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/10873629?v=4",
      "events_url": "https://api.github.com/users/TravisEz13/events{/privacy}",
      "followers_url": "https://api.github.com/users/TravisEz13/followers",
      "following_url": "https://api.github.com/users/TravisEz13/following{/other_user}",
      "gists_url": "https://api.github.com/users/TravisEz13/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/TravisEz13",
      "id": 10873629,
      "login": "TravisEz13",
      "node_id": "MDQ6VXNlcjEwODczNjI5",
      "organizations_url": "https://api.github.com/users/TravisEz13/orgs",
      "received_events_url": "https://api.github.com/users/TravisEz13/received_events",
      "repos_url": "https://api.github.com/users/TravisEz13/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/TravisEz13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TravisEz13/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/TravisEz13"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "We could:\r\n1. repeat the delete like `while (iteration++ < 2)`\r\n2. delay the delete and put the action into background task.\r\n3. create the test files in locked mode, i.e. replace IO.File.WriteAllText() with FileStream FileShare.Read.\r\n",
    "created_at": "2021-06-15T04:25:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15523#issuecomment-861158644",
    "id": 861158644,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15523",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MTE1ODY0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/861158644/reactions"
    },
    "updated_at": "2021-06-15T04:25:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/861158644",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "WG-Security:\r\nSince this occurs during PowerShell start up, we prefer to not perform repeated tasks or create a back ground task.\r\n\r\nWe feel options to fix are:\r\n1. @iSazonov idea to create the test files without share flag to prevent AV from locking it.\r\n1. Catch any exception when removing the test file and leave file on disk.\r\n\r\nThe first is preferable since that should ensure the test files are removed, but needs to be tested.",
    "created_at": "2021-06-21T21:07:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/15523#issuecomment-865344742",
    "id": 865344742,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/15523",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTM0NDc0Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/865344742/reactions"
    },
    "updated_at": "2021-06-21T21:07:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/865344742",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14019529?v=4",
      "events_url": "https://api.github.com/users/PaulHigin/events{/privacy}",
      "followers_url": "https://api.github.com/users/PaulHigin/followers",
      "following_url": "https://api.github.com/users/PaulHigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulHigin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PaulHigin",
      "id": 14019529,
      "login": "PaulHigin",
      "node_id": "MDQ6VXNlcjE0MDE5NTI5",
      "organizations_url": "https://api.github.com/users/PaulHigin/orgs",
      "received_events_url": "https://api.github.com/users/PaulHigin/received_events",
      "repos_url": "https://api.github.com/users/PaulHigin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PaulHigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulHigin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PaulHigin"
    }
  }
]
