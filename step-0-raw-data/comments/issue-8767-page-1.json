[
  {
    "author_association": "COLLABORATOR",
    "body": "@mklement0 \r\n> Note: Does NOT fail if you submit the definitions one by one at the prompt.\r\n\r\nAn important aspect of how classes work is the \"compile unit\" i.e. the script text containing the class definition. Each entry at the prompt is its own compile unit which is why you don't see an error when you redefine classes at the prompt.",
    "created_at": "2019-01-28T22:58:50Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8767#issuecomment-458336459",
    "id": 458336459,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8767",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODMzNjQ1OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/458336459/reactions"
    },
    "updated_at": "2019-01-28T22:58:50Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/458336459",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "To provide a perhaps a more realistic repro based on a single script; invoking it directly surfaces the problem:\r\n\r\n```powershell\r\n# Define class [Foo] with a specific .Bar() method signature.\r\nclass Foo { [void] Bar($baz) {} }\r\n\r\n# Output the class' GUID and the .Bar() method signature.\r\n[pscustomobject] @{\r\n  'Class GUID' = [Foo].Guid\r\n  'Bar overload' = [Foo]::new().Bar\r\n}\r\n\r\n# Try to redefine the class with a different .Bar() method signature VIA DOT-SOURCING:\r\n# !! THIS REDEFINITION ATTEMPT IS QUIETLY IGNORED,\r\n# !! presumably because the assumption is made that, since the script \r\n# !! runs in the same scope as the caller, [Foo] has already been defined, so it\r\n# !! must be the SAME definition, even though it isn't.\r\n# !! Note that *direct* redefinition of [Foo] in this same script file\r\n# !! would result in an error: \"The member 'Foo' is already defined.\"\r\n'class Foo { [void] Bar() {} }' > tmp.ps1\r\n. ./tmp.ps1; Remove-Item ./tmp.ps1\r\n\r\n# Output the class' GUID and the .Bar() method signature again.\r\n# !! Due to the bug, NO CHANGES WERE MADE - both the GUID and the method signature are unchanged.\r\n# !! If you were to dot-source this whole script itself, the CHANGED definition would be visible AFTERWARDS.\r\n[pscustomobject] @{\r\n  'Class GUID' = [Foo].Guid\r\n  'Bar overload' = [Foo]::new().Bar\r\n}\r\n```\r\n\r\n",
    "created_at": "2021-07-14T03:01:54Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8767#issuecomment-879547659",
    "id": 879547659,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8767",
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTU0NzY1OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/879547659/reactions"
    },
    "updated_at": "2021-07-14T03:03:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/879547659",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  }
]
