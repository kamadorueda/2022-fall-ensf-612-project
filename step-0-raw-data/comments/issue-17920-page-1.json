[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Maybe the syntax diagrams should have a limit on how many values it can show? The validateset attribute for Select-String has 816 values which is obviously not very useful to display by default.  \r\nThe online version doesn't include these valid values so if you update your help with `Update-Help` it you can avoid this problem.",
    "created_at": "2022-08-18T22:03:30Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17920#issuecomment-1220016774",
    "id": 1220016774,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17920",
    "node_id": "IC_kwDOAvT7bc5It_qG",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220016774/reactions"
    },
    "updated_at": "2022-08-18T22:03:30Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220016774",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/42123497?v=4",
      "events_url": "https://api.github.com/users/MartinGC94/events{/privacy}",
      "followers_url": "https://api.github.com/users/MartinGC94/followers",
      "following_url": "https://api.github.com/users/MartinGC94/following{/other_user}",
      "gists_url": "https://api.github.com/users/MartinGC94/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/MartinGC94",
      "id": 42123497,
      "login": "MartinGC94",
      "node_id": "MDQ6VXNlcjQyMTIzNDk3",
      "organizations_url": "https://api.github.com/users/MartinGC94/orgs",
      "received_events_url": "https://api.github.com/users/MartinGC94/received_events",
      "repos_url": "https://api.github.com/users/MartinGC94/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/MartinGC94/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MartinGC94/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/MartinGC94"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Agreed that it's quite annoying, have run into it in the past. Truncating the `ValidateSet` output by default seems like a good solution. ",
    "created_at": "2022-08-19T14:10:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17920#issuecomment-1220726867",
    "id": 1220726867,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17920",
    "node_id": "IC_kwDOAvT7bc5IwtBT",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220726867/reactions"
    },
    "updated_at": "2022-08-19T14:10:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220726867",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/26599495?v=4",
      "events_url": "https://api.github.com/users/dkaszews/events{/privacy}",
      "followers_url": "https://api.github.com/users/dkaszews/followers",
      "following_url": "https://api.github.com/users/dkaszews/following{/other_user}",
      "gists_url": "https://api.github.com/users/dkaszews/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dkaszews",
      "id": 26599495,
      "login": "dkaszews",
      "node_id": "MDQ6VXNlcjI2NTk5NDk1",
      "organizations_url": "https://api.github.com/users/dkaszews/orgs",
      "received_events_url": "https://api.github.com/users/dkaszews/received_events",
      "repos_url": "https://api.github.com/users/dkaszews/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dkaszews/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dkaszews/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dkaszews"
    }
  },
  {
    "author_association": "NONE",
    "body": "You are getting the correct text when the help file for `Select-string`  is absent. \r\n\r\nWhat happens with no help file,  is `Get-Help` looks at the command's parameter-sets and for each one it builds a block under \"syntax\". Then for each parameter it looks to see what type it is, and if it has prescribed values in a validateSet or an enum.   The screen shot shows it works through `-Pattern` and `-Path` before it gets to `-culture`, and it will have `-SimpleMatch` `-CaseSensitive` etc after that. \r\nAs @MartinGC94  says there is a LOT in the validate set for `-culture`, and `Get-Help` inserts the equivalent of\r\n```\r\n\"{\" +( (Get-Command Select-String).parameters[\"culture\"].attributes[1].validvalues -join \" | \") + \"}\"\r\n```\r\n And repeats it for each of the six parameter sets which have a -culture parameter. So we get a lot, six times over. \r\n\r\nThe default help text should end \r\n\r\n```\r\nREMARKS\r\n    Get-Help cannot find the Help files for this cmdlet on this computer. It is displaying only partial help.\r\n        -- To download and install Help files for the module that includes this cmdlet, use Update-Help.\r\n```\r\n\r\n**So the primary fix is to install help.** \r\nBut in in some situations that's not an option (e.g. PowerShell installed from a private repo on a server without internet access).  As @dkaszews  says stopping the list after a certain number of items might be smarter. They can be stopped **at source** by putting something into https://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/help/DefaultCommandHelpObjectBuilder.cs    (see from line 251 to 348 ) that limits the number of values from an enum or validate set. \r\nBut if someone creates a help file with a stupid number of parameter values in a parameter value group, they will still be displayed. Maybe we want to honour what is in file on all occasions, but if not the change can be made **at output time**. I'm not sure where it stored in pwsh, but the formatting for _Windows PowerShell_ is defined by C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\Help.format.ps1xml  - in that file its line 212 which builds the output with\r\n```\r\n \" {$($_.ParameterValueGroup.ParameterValue -join ' | ')}\"\r\n ```\r\nIt would be fairly easy (I think) to make that `$_.ParameterValueGroup.ParameterValue[0..20]`  and get only the first 20 values. \r\n\r\nIf people think either option is worthwhile, a new issue can be opened asking for that.  (Upvote this comment enough and I'll do it!) \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n\n<blockquote><img src=\"https://repository-images.githubusercontent.com/49609581/aad0ad80-cdec-11ea-8248-a37bc0571bfd\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/PowerShell/PowerShell\">PowerShell/DefaultCommandHelpObjectBuilder.cs at master Â· PowerShell/PowerShell</a></strong></div><div>PowerShell for every system! Contribute to PowerShell/PowerShell development by creating an account on GitHub.</div></blockquote>",
    "created_at": "2022-08-19T15:41:08Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17920#issuecomment-1220819502",
    "id": 1220819502,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17920",
    "node_id": "IC_kwDOAvT7bc5IxDou",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220819502/reactions"
    },
    "updated_at": "2022-08-19T15:41:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220819502",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@jhoneill Sounds good, nice to see somebody already found the code in question! If possible, truncating to fixed length (rather than count) would probably provide nicer looking results, let's say 100 chars. That means for the locale in original issue we can display 100/7=14 items, while if the items were much longer, they wouldn't flood the screen again. Just remember to put a `...` at the end to indicate truncation:\r\n\r\n```powershell\r\n$values = \" {$($_.ParameterValueGroup.ParameterValue -join ' | ')}\"\r\nif ($values.Length -gt 100) {\r\n    $values = $values.Substring(0, 100) -replace '\\|[^|]*$' + '...'\r\n}\r\n```\r\n\r\nFor tests, best to just create couple noop functions with parameters with large validation sets. ",
    "created_at": "2022-08-19T17:42:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17920#issuecomment-1220937062",
    "id": 1220937062,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17920",
    "node_id": "IC_kwDOAvT7bc5IxgVm",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220937062/reactions"
    },
    "updated_at": "2022-08-19T17:42:54Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1220937062",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/26599495?v=4",
      "events_url": "https://api.github.com/users/dkaszews/events{/privacy}",
      "followers_url": "https://api.github.com/users/dkaszews/followers",
      "following_url": "https://api.github.com/users/dkaszews/following{/other_user}",
      "gists_url": "https://api.github.com/users/dkaszews/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dkaszews",
      "id": 26599495,
      "login": "dkaszews",
      "node_id": "MDQ6VXNlcjI2NTk5NDk1",
      "organizations_url": "https://api.github.com/users/dkaszews/orgs",
      "received_events_url": "https://api.github.com/users/dkaszews/received_events",
      "repos_url": "https://api.github.com/users/dkaszews/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dkaszews/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dkaszews/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dkaszews"
    }
  },
  {
    "author_association": "NONE",
    "body": "@dkaszews  Yes. I've been experimenting with it this morning, \r\n```\r\n$values = \" {$($_.ParameterValueGroup.ParameterValue -join ' | ')}\"  -replace \"(^.{100}).*$\", '$1' -replace \"(^.*) \\| .*[^}]$\", '$1 | ... }'\r\n```\r\nTruncates at the 100 chars and if that cuts the closing  \"}\" it removes the last | and anything after it and puts \"| ... }\" saving an if statement :-) \r\n\r\nIt looks `Get-FormatData` does list the types for help and trying to load a version of the help.ps1xml file doesn't have the desired effect. Nor does replacing the file in PowerShell 5. So I'm not exactly sure where the change needs to be made. But I can push it forward with the cmdlet working group if it seems like there is a demand for it. \r\n \r\n ",
    "created_at": "2022-08-20T11:30:59Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17920#issuecomment-1221297811",
    "id": 1221297811,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17920",
    "node_id": "IC_kwDOAvT7bc5Iy4aT",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1221297811/reactions"
    },
    "updated_at": "2022-08-20T11:30:59Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1221297811",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/16209593?v=4",
      "events_url": "https://api.github.com/users/jhoneill/events{/privacy}",
      "followers_url": "https://api.github.com/users/jhoneill/followers",
      "following_url": "https://api.github.com/users/jhoneill/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhoneill/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jhoneill",
      "id": 16209593,
      "login": "jhoneill",
      "node_id": "MDQ6VXNlcjE2MjA5NTkz",
      "organizations_url": "https://api.github.com/users/jhoneill/orgs",
      "received_events_url": "https://api.github.com/users/jhoneill/received_events",
      "repos_url": "https://api.github.com/users/jhoneill/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jhoneill/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhoneill/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jhoneill"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@jhoneill I don't see a benefit in skipping the `if` statement, as depending on how efficient PowerShell implementation of regex is, you may waste a lot of time running complicated replacements just to do nothing.",
    "created_at": "2022-08-21T15:48:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/17920#issuecomment-1221571171",
    "id": 1221571171,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/17920",
    "node_id": "IC_kwDOAvT7bc5Iz7Jj",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1221571171/reactions"
    },
    "updated_at": "2022-08-21T15:48:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1221571171",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/26599495?v=4",
      "events_url": "https://api.github.com/users/dkaszews/events{/privacy}",
      "followers_url": "https://api.github.com/users/dkaszews/followers",
      "following_url": "https://api.github.com/users/dkaszews/following{/other_user}",
      "gists_url": "https://api.github.com/users/dkaszews/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/dkaszews",
      "id": 26599495,
      "login": "dkaszews",
      "node_id": "MDQ6VXNlcjI2NTk5NDk1",
      "organizations_url": "https://api.github.com/users/dkaszews/orgs",
      "received_events_url": "https://api.github.com/users/dkaszews/received_events",
      "repos_url": "https://api.github.com/users/dkaszews/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/dkaszews/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dkaszews/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/dkaszews"
    }
  }
]
