[
  {
    "author_association": "CONTRIBUTOR",
    "body": "Just to add some observations as to _when_ the `DynamicParam {}` block is executed (without knowing the design rationale behind it):\r\n\r\n * _after_ directly passed arguments have been bound\r\n * but _before_: \r\n     * default values are assigned\r\n     * missing mandatory parameters are prompted for.\r\n* curiously,  it is invoked 4(!) times with `-?` and `Get-Help`\r\n\r\nTherefore, your approach works if you invoke your function by directly passing '`Yes'` to `-r`:\r\n\r\n```powershell\r\n# Will define and prompt for -t\r\ntest -r Yes\r\n```\r\n\r\nWhat you're asking for would require delaying the evaluation of the `DynamicParam {}` block until after all _static_ mandatory parameter values have been prompted for.\r\n\r\nEven if that change is feasible / will be made , making the _existence_ of the parameter conditional is problematic, however:\r\nFor instance, it won't show up at all with `-?`.\r\n\r\n_Update_: It seems that the change is _not_ feasible, as implied by [this comment](https://github.com/PowerShell/PowerShell/issues/6857#issuecomment-388504906): dynamic parameters are involved in parameter-set selection, so the final set of potential prompts won't be known until _after_ the dynamic parameters have been evaluated.\r\n\r\nSo, instead of the `if ($r -eq 'Yes')` conditional, perhaps use `$ParamAttribute.Mandatory = $r -eq \r\n'yes'` to define the parameter itself unconditionally while making only its \"mandatoriness\" conditional - though even there I'm unsure as to whether conceptual problems can arise.\r\n\r\n",
    "created_at": "2018-04-18T20:10:46Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5545#issuecomment-382513570",
    "id": 382513570,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5545",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MjUxMzU3MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/382513570/reactions"
    },
    "updated_at": "2018-06-22T17:12:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/382513570",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "When I invoke ``GET-COMMAND | % PARAMETERS``, I do not expect to be asked for values for mandatory parameters at all.",
    "created_at": "2020-06-18T00:10:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/5545#issuecomment-645691022",
    "id": 645691022,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/5545",
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTY5MTAyMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 2,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/645691022/reactions"
    },
    "updated_at": "2020-06-18T00:10:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/645691022",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1363094?v=4",
      "events_url": "https://api.github.com/users/yecril71pl/events{/privacy}",
      "followers_url": "https://api.github.com/users/yecril71pl/followers",
      "following_url": "https://api.github.com/users/yecril71pl/following{/other_user}",
      "gists_url": "https://api.github.com/users/yecril71pl/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/yecril71pl",
      "id": 1363094,
      "login": "yecril71pl",
      "node_id": "MDQ6VXNlcjEzNjMwOTQ=",
      "organizations_url": "https://api.github.com/users/yecril71pl/orgs",
      "received_events_url": "https://api.github.com/users/yecril71pl/received_events",
      "repos_url": "https://api.github.com/users/yecril71pl/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/yecril71pl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yecril71pl/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/yecril71pl"
    }
  }
]
