[
  {
    "author_association": "COLLABORATOR",
    "body": "/cc @PaulHigin ",
    "created_at": "2020-04-06T15:03:54Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12263#issuecomment-609850477",
    "id": 609850477,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12263",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTg1MDQ3Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/609850477/reactions"
    },
    "updated_at": "2020-04-06T15:03:54Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/609850477",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "I don't know what \"eventually it was killed\" means or where \"actual behavior\" animation comes from.\r\nBut this sounds like the CLR is not collecting free'd memory quick enough.  You can alleviate this to some degree by inserting '[gc]::Collect()' into your loop.\r\n\r\nOr, you can use the new foreach-object -parallel that re-uses runspaces, which greatly reduces memory use.  It has been checked into the preview 1 branch, but is not yet part of the preview release.  I am not sure when the preview release will be updated but you can clone the master branch and build it yourself if you want to try it out.\r\n\r\nSee: PR #12122\r\n\r\nThe new foreach-object -parallel re-uses runspaces by default but you can revert to the previous behavior by selecting the `-UseNewRunspace` parameter switch.  You can also verify that you are using the new version of foreach-object -parallel by checking if this parameter switch is available.\r\n\r\n```powershell\r\n# Runspace reuse is automatic\r\n1..1000 | foreach-object -parallel { \"Hello: $_\" }\r\n\r\n# Revert to old behavior where new runspace is created/discarded for each loop iteration\r\n1..1000 | foreach-object -parallel { \"Hello: $_\" } -UseNewRunspace\r\n```",
    "created_at": "2020-04-06T15:55:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12263#issuecomment-609880656",
    "id": 609880656,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12263",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwOTg4MDY1Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/609880656/reactions"
    },
    "updated_at": "2020-04-06T15:55:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/609880656",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/14019529?v=4",
      "events_url": "https://api.github.com/users/PaulHigin/events{/privacy}",
      "followers_url": "https://api.github.com/users/PaulHigin/followers",
      "following_url": "https://api.github.com/users/PaulHigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulHigin/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/PaulHigin",
      "id": 14019529,
      "login": "PaulHigin",
      "node_id": "MDQ6VXNlcjE0MDE5NTI5",
      "organizations_url": "https://api.github.com/users/PaulHigin/orgs",
      "received_events_url": "https://api.github.com/users/PaulHigin/received_events",
      "repos_url": "https://api.github.com/users/PaulHigin/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/PaulHigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulHigin/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/PaulHigin"
    }
  },
  {
    "author_association": "NONE",
    "body": "This issue has been marked as answered and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
    "created_at": "2020-04-09T00:00:12Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/12263#issuecomment-611254031",
    "id": 611254031,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/12263",
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTI1NDAzMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/611254031/reactions"
    },
    "updated_at": "2020-04-09T00:00:12Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/611254031",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
