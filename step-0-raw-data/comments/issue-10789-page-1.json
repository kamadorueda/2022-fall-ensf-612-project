[
  {
    "author_association": "CONTRIBUTOR",
    "body": "That's not good - the bug is still present as of PowerShell Core 7.0.0-preview.4.\r\n\r\nHere's a repro that doesn't require WSL:\r\n\r\n```powershell\r\n[Console]::OutputEncoding = [text.encoding]::unicode; sfc /? | Write-Output\r\n```\r\n\r\nAs a Pester test:\r\n\r\n```powershell\r\n[Console]::OutputEncoding = [text.encoding]::unicode; sfc /? | Write-Output | Should -Not -Match \"`0\"\r\n```\r\n",
    "created_at": "2019-10-16T14:31:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542730596",
    "id": 542730596,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjczMDU5Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542730596/reactions"
    },
    "updated_at": "2019-10-16T14:31:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542730596",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Has this ever worked in PowerShell Core, or has it been broken ever since 6.0.0?",
    "created_at": "2019-10-16T14:47:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542738139",
    "id": 542738139,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjczODEzOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542738139/reactions"
    },
    "updated_at": "2019-10-16T14:47:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542738139",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@vexx32: It's also broken in 6.0.0.",
    "created_at": "2019-10-16T14:58:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542743726",
    "id": 542743726,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0Mjc0MzcyNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542743726/reactions"
    },
    "updated_at": "2019-10-16T14:58:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542743726",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "This is due to a breaking change in .NET Core. You should initialize `ProcessStartInfo.StandardInputEncoding/StandardErrorEncoding/StandardOutputEncoding` if they're redirected. .NET Framework defaults to using `Console.OutputEncoding` if you don't initialize `StandardOutputEncoding`, but .NET Core defaults to calling `Process.GetEncoding((int)Interop.Kernel32.GetConsoleOutputCP())` which is UTF8 (on my system).\r\n\r\nThis is the code that creates `ProcessStartInfo`:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/engine/NativeCommandProcessor.cs#L1088-L1150",
    "created_at": "2019-10-16T17:05:59Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542799150",
    "id": 542799150,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0Mjc5OTE1MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 1,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542799150/reactions"
    },
    "updated_at": "2019-10-16T17:06:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542799150",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1060731?v=4",
      "events_url": "https://api.github.com/users/0xd4d/events{/privacy}",
      "followers_url": "https://api.github.com/users/0xd4d/followers",
      "following_url": "https://api.github.com/users/0xd4d/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xd4d/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/0xd4d",
      "id": 1060731,
      "login": "0xd4d",
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjEwNjA3MzE=",
      "organizations_url": "https://api.github.com/users/0xd4d/orgs",
      "received_events_url": "https://api.github.com/users/0xd4d/received_events",
      "repos_url": "https://api.github.com/users/0xd4d/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/0xd4d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xd4d/subscriptions",
      "type": "Organization",
      "url": "https://api.github.com/users/0xd4d"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "If I understand correctly, then, a fix should be to set the `ProcessStartInfo.StandardInput(/Output)Encoding` to match `[console]::Input(/Output)Encoding` values explicitly?\r\n\r\nShould this respect `[console]` encoding settings, or `$OutputEncoding`? From what I recall, those values don't always align, if I'm not mistaken?",
    "created_at": "2019-10-16T17:13:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542802068",
    "id": 542802068,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjgwMjA2OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542802068/reactions"
    },
    "updated_at": "2019-10-16T17:13:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542802068",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "NONE",
    "body": "I don't know if it should use `$OutputEncoding` or `Console.OutputEncoding`, but the code would be something like this:\r\n\r\n```C#\r\n        bool redirectStdOut = true;\r\n        bool redirectStdErr = true;\r\n        bool redirectStdIn = false;\r\n        var startInfo = new ProcessStartInfo();\r\n        if (redirectStdOut)\r\n        {\r\n            startInfo.RedirectStandardOutput = true;\r\n            startInfo.StandardOutputEncoding = Console.OutputEncoding;\r\n        }\r\n        if (redirectStdErr)\r\n        {\r\n            startInfo.RedirectStandardError = true;\r\n            startInfo.StandardErrorEncoding = Console.OutputEncoding;\r\n        }\r\n        if (redirectStdIn)\r\n        {\r\n            startInfo.RedirectStandardInput = true;\r\n            startInfo.StandardInputEncoding = Console.InputEncoding;\r\n        }\r\n```",
    "created_at": "2019-10-16T17:22:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542805550",
    "id": 542805550,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjgwNTU1MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542805550/reactions"
    },
    "updated_at": "2019-10-16T17:22:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542805550",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1060731?v=4",
      "events_url": "https://api.github.com/users/0xd4d/events{/privacy}",
      "followers_url": "https://api.github.com/users/0xd4d/followers",
      "following_url": "https://api.github.com/users/0xd4d/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xd4d/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/0xd4d",
      "id": 1060731,
      "login": "0xd4d",
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjEwNjA3MzE=",
      "organizations_url": "https://api.github.com/users/0xd4d/orgs",
      "received_events_url": "https://api.github.com/users/0xd4d/received_events",
      "repos_url": "https://api.github.com/users/0xd4d/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/0xd4d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xd4d/subscriptions",
      "type": "Organization",
      "url": "https://api.github.com/users/0xd4d"
    }
  },
  {
    "author_association": "NONE",
    "body": "Actually to match PS 5.1 behavior it should not use $OutputEncoding",
    "created_at": "2019-10-16T17:24:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542806467",
    "id": 542806467,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjgwNjQ2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542806467/reactions"
    },
    "updated_at": "2019-10-16T17:24:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542806467",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1060731?v=4",
      "events_url": "https://api.github.com/users/0xd4d/events{/privacy}",
      "followers_url": "https://api.github.com/users/0xd4d/followers",
      "following_url": "https://api.github.com/users/0xd4d/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xd4d/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/0xd4d",
      "id": 1060731,
      "login": "0xd4d",
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjEwNjA3MzE=",
      "organizations_url": "https://api.github.com/users/0xd4d/orgs",
      "received_events_url": "https://api.github.com/users/0xd4d/received_events",
      "repos_url": "https://api.github.com/users/0xd4d/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/0xd4d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xd4d/subscriptions",
      "type": "Organization",
      "url": "https://api.github.com/users/0xd4d"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Agreed, @0xd4d: I don't know how `.StandardInput` comes into play, but on the output side It should definitely be `[Console]::OutputEncoding`, because that is how it has always worked in Windows PowerShell, where it determines how PowerShell decodes stream output _from_ external programs.\r\n\r\n`$OutputEncoding` controls what encoding is used to send data from Powershell _to_ external programs, via a pipe. It defaults to UTF-8 in PSCore and to ASCII(!) in WinPS. In either edition it can differ from `[Console]::OutputEncoding`.",
    "created_at": "2019-10-16T17:26:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542807058",
    "id": 542807058,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjgwNzA1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542807058/reactions"
    },
    "updated_at": "2019-10-16T17:26:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542807058",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": "Thanks for looking into this, everyone. Hopefully this can get fixed soon.",
    "created_at": "2019-10-16T21:13:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-542894086",
    "id": 542894086,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0Mjg5NDA4Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542894086/reactions"
    },
    "updated_at": "2019-10-16T21:13:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/542894086",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/18357361?v=4",
      "events_url": "https://api.github.com/users/SvenGroot/events{/privacy}",
      "followers_url": "https://api.github.com/users/SvenGroot/followers",
      "following_url": "https://api.github.com/users/SvenGroot/following{/other_user}",
      "gists_url": "https://api.github.com/users/SvenGroot/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SvenGroot",
      "id": 18357361,
      "login": "SvenGroot",
      "node_id": "MDQ6VXNlcjE4MzU3MzYx",
      "organizations_url": "https://api.github.com/users/SvenGroot/orgs",
      "received_events_url": "https://api.github.com/users/SvenGroot/received_events",
      "repos_url": "https://api.github.com/users/SvenGroot/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SvenGroot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SvenGroot/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SvenGroot"
    }
  },
  {
    "author_association": "NONE",
    "body": "Yep.  Note that C:\\Windows\\system32\\sfc.exe in Windows 10 outputs utf-16.  It's a powershell question that comes up occasionally.",
    "created_at": "2019-10-17T19:49:52Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543334056",
    "id": 543334056,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzMzNDA1Ng==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543334056/reactions"
    },
    "updated_at": "2019-10-17T19:49:52Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543334056",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/28962523?v=4",
      "events_url": "https://api.github.com/users/jszabo98/events{/privacy}",
      "followers_url": "https://api.github.com/users/jszabo98/followers",
      "following_url": "https://api.github.com/users/jszabo98/following{/other_user}",
      "gists_url": "https://api.github.com/users/jszabo98/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/jszabo98",
      "id": 28962523,
      "login": "jszabo98",
      "node_id": "MDQ6VXNlcjI4OTYyNTIz",
      "organizations_url": "https://api.github.com/users/jszabo98/orgs",
      "received_events_url": "https://api.github.com/users/jszabo98/received_events",
      "repos_url": "https://api.github.com/users/jszabo98/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/jszabo98/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jszabo98/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/jszabo98"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@mklement0 I guess that would mean `.StandardInputEncoding` should match `$OutputEncoding`, then? 🤔 On the assumption that we may be piping _into_ such a command as well.",
    "created_at": "2019-10-17T19:53:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543335312",
    "id": 543335312,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzMzNTMxMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543335312/reactions"
    },
    "updated_at": "2019-10-17T19:53:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543335312",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@vexx32 I've only glanced at the code, and I see that the pipe that is connected to the child process' stdin explicitly uses `$OutputEncoding`:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/425bc36a6fe66b571fc88f25500b0b3a3cf3e2a7/src/System.Management.Automation/engine/NativeCommandProcessor.cs#L1797-L1801\r\n\r\nI don't fully understand how that relates to the default `.StandardInput` encoding - it looks like it may override it.",
    "created_at": "2019-10-17T20:12:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543342061",
    "id": 543342061,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzM0MjA2MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543342061/reactions"
    },
    "updated_at": "2019-10-17T20:12:01Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543342061",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@SvenGroot do you have any examples on the input side where we have issues with encoding?",
    "created_at": "2019-10-17T21:17:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543365787",
    "id": 543365787,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzM2NTc4Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543365787/reactions"
    },
    "updated_at": "2019-10-17T21:17:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543365787",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "NONE",
    "body": "@SteveL-MSFT No, I only use OutputEncoding in my scenario.",
    "created_at": "2019-10-17T21:19:20Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543366335",
    "id": 543366335,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzM2NjMzNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543366335/reactions"
    },
    "updated_at": "2019-10-17T21:19:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543366335",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/18357361?v=4",
      "events_url": "https://api.github.com/users/SvenGroot/events{/privacy}",
      "followers_url": "https://api.github.com/users/SvenGroot/followers",
      "following_url": "https://api.github.com/users/SvenGroot/following{/other_user}",
      "gists_url": "https://api.github.com/users/SvenGroot/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SvenGroot",
      "id": 18357361,
      "login": "SvenGroot",
      "node_id": "MDQ6VXNlcjE4MzU3MzYx",
      "organizations_url": "https://api.github.com/users/SvenGroot/orgs",
      "received_events_url": "https://api.github.com/users/SvenGroot/received_events",
      "repos_url": "https://api.github.com/users/SvenGroot/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SvenGroot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SvenGroot/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SvenGroot"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Here's my _guess_ as to what we should do:\r\n\r\n* When piping data from PowerShell to an external process, it is `$OutputEncoding` that already drives the standard input encoding for the child process (no change there - this was never broken).\r\n\r\n* When _not_ piping (starting an interactive console application, for instance), i.e. when stdin is _not_ redirected, we should set `.StandardInput` to `[Console]::InputEncoding`.\r\n\r\n* Whether redirected or not, `.StandardOutput` should always be set to `[Console]::OutputEncoding`\r\n",
    "created_at": "2019-10-17T21:30:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543370226",
    "id": 543370226,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzM3MDIyNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543370226/reactions"
    },
    "updated_at": "2019-10-17T21:52:37Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543370226",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@mklement0 when not piping, what is value of setting `.StandardInput` to any encoding?  For your 3rd bullet, I believe you meant `[Console]::OutputEncoding`.  For my PR, I'm focusing on output only unless someone brings a case where input encoding is a problem.",
    "created_at": "2019-10-17T21:37:28Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543372272",
    "id": 543372272,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzM3MjI3Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543372272/reactions"
    },
    "updated_at": "2019-10-17T21:37:28Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543372272",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "@SteveL-MSFT: Thanks for the correction re 3rd bullet point - I've fixed my previous comment.\r\n\r\n> what is value of setting `.StandardInput` to any encoding?\r\n\r\nMy thinking is: An interactive console application that reads from stdin probably expects the _console's_ (terminal's) input encoding to be in effect (~~that's presumably how it works in Windows PowerShell~~).\r\n\r\n\r\n\r\n",
    "created_at": "2019-10-17T21:57:46Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-543378813",
    "id": 543378813,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzM3ODgxMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543378813/reactions"
    },
    "updated_at": "2019-10-26T21:20:40Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/543378813",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Glad to see this was fixed for `.StandardOutput`.\r\n\r\nAs for setting `.StandardInput` to `[Console]::InputEncoding`: please see #10907, @SteveL-MSFT.",
    "created_at": "2019-10-26T21:21:09Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-546640593",
    "id": 546640593,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjY0MDU5Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546640593/reactions"
    },
    "updated_at": "2019-10-26T21:21:09Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/546640593",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "NONE",
    "body": ":tada:This issue was addressed in #10824, which has now been successfully released as `v7.0.0-preview.6`.:tada:\n\nHandy links:\n* [Release Notes](https://github.com/PowerShell/PowerShell/releases/tag/v7.0.0-preview.6)\n",
    "created_at": "2019-11-21T22:35:43Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/10789#issuecomment-557303648",
    "id": 557303648,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/10789",
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NzMwMzY0OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/557303648/reactions"
    },
    "updated_at": "2019-11-21T22:35:43Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/557303648",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/in/26612?v=4",
      "events_url": "https://api.github.com/users/msftbot%5Bbot%5D/events{/privacy}",
      "followers_url": "https://api.github.com/users/msftbot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/msftbot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/msftbot%5Bbot%5D/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/apps/msftbot",
      "id": 48340428,
      "login": "msftbot[bot]",
      "node_id": "MDM6Qm90NDgzNDA0Mjg=",
      "organizations_url": "https://api.github.com/users/msftbot%5Bbot%5D/orgs",
      "received_events_url": "https://api.github.com/users/msftbot%5Bbot%5D/received_events",
      "repos_url": "https://api.github.com/users/msftbot%5Bbot%5D/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/msftbot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msftbot%5Bbot%5D/subscriptions",
      "type": "Bot",
      "url": "https://api.github.com/users/msftbot%5Bbot%5D"
    }
  }
]
