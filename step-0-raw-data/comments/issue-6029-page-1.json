[
  {
    "author_association": "COLLABORATOR",
    "body": "I'd think it would be better to check if you have something that can be converted to a MatchEvaluator.\r\nPSMethods can now be converted to matching delegates.\r\n\r\nThis works:\r\n```\r\nclass R { static [string] RR([Text.RegularExpressions.Match] $m) {return \"Foo\"}}\r\n[Regex]::replace(\"bar\", 'a', [R]::RR)\r\n```\r\nIt would be nice if \r\n```\r\n\"bar\" -replace \"a\", [R]::RR\r\n```\r\nworked too.\r\n",
    "created_at": "2018-01-26T08:36:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-360716967",
    "id": 360716967,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDcxNjk2Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360716967/reactions"
    },
    "updated_at": "2018-01-26T08:36:47Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360716967",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3505151?v=4",
      "events_url": "https://api.github.com/users/powercode/events{/privacy}",
      "followers_url": "https://api.github.com/users/powercode/followers",
      "following_url": "https://api.github.com/users/powercode/following{/other_user}",
      "gists_url": "https://api.github.com/users/powercode/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/powercode",
      "id": 3505151,
      "login": "powercode",
      "node_id": "MDQ6VXNlcjM1MDUxNTE=",
      "organizations_url": "https://api.github.com/users/powercode/orgs",
      "received_events_url": "https://api.github.com/users/powercode/received_events",
      "repos_url": "https://api.github.com/users/powercode/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/powercode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/powercode/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/powercode"
    }
  },
  {
    "author_association": "NONE",
    "body": "What happens if the delegate code raises an exception ?\r\nIs the _Match_ delegate parameter named _**$args**_ under Powershell ?",
    "created_at": "2018-01-26T10:13:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-360739323",
    "id": 360739323,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDczOTMyMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360739323/reactions"
    },
    "updated_at": "2018-01-26T10:13:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360739323",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/4894452?v=4",
      "events_url": "https://api.github.com/users/LaurentDardenne/events{/privacy}",
      "followers_url": "https://api.github.com/users/LaurentDardenne/followers",
      "following_url": "https://api.github.com/users/LaurentDardenne/following{/other_user}",
      "gists_url": "https://api.github.com/users/LaurentDardenne/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/LaurentDardenne",
      "id": 4894452,
      "login": "LaurentDardenne",
      "node_id": "MDQ6VXNlcjQ4OTQ0NTI=",
      "organizations_url": "https://api.github.com/users/LaurentDardenne/orgs",
      "received_events_url": "https://api.github.com/users/LaurentDardenne/received_events",
      "repos_url": "https://api.github.com/users/LaurentDardenne/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/LaurentDardenne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LaurentDardenne/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/LaurentDardenne"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@LaurentDardenne `Replace()` will throw a `RuntimeException` if the delegate throws during substitution\r\n\r\nIf you pass a scriptblock with no explicit params, the `Match` parameter argument populates the `$args` automatic variable. User could also explicitly name it if desired, no functional difference",
    "created_at": "2018-01-26T10:24:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-360741701",
    "id": 360741701,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDc0MTcwMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360741701/reactions"
    },
    "updated_at": "2018-01-26T10:24:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360741701",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7413755?v=4",
      "events_url": "https://api.github.com/users/IISResetMe/events{/privacy}",
      "followers_url": "https://api.github.com/users/IISResetMe/followers",
      "following_url": "https://api.github.com/users/IISResetMe/following{/other_user}",
      "gists_url": "https://api.github.com/users/IISResetMe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/IISResetMe",
      "id": 7413755,
      "login": "IISResetMe",
      "node_id": "MDQ6VXNlcjc0MTM3NTU=",
      "organizations_url": "https://api.github.com/users/IISResetMe/orgs",
      "received_events_url": "https://api.github.com/users/IISResetMe/received_events",
      "repos_url": "https://api.github.com/users/IISResetMe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/IISResetMe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IISResetMe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/IISResetMe"
    }
  },
  {
    "author_association": "NONE",
    "body": "Thank you.",
    "created_at": "2018-01-26T10:30:37Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-360743058",
    "id": 360743058,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDc0MzA1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360743058/reactions"
    },
    "updated_at": "2018-01-26T10:30:37Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360743058",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/4894452?v=4",
      "events_url": "https://api.github.com/users/LaurentDardenne/events{/privacy}",
      "followers_url": "https://api.github.com/users/LaurentDardenne/followers",
      "following_url": "https://api.github.com/users/LaurentDardenne/following{/other_user}",
      "gists_url": "https://api.github.com/users/LaurentDardenne/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/LaurentDardenne",
      "id": 4894452,
      "login": "LaurentDardenne",
      "node_id": "MDQ6VXNlcjQ4OTQ0NTI=",
      "organizations_url": "https://api.github.com/users/LaurentDardenne/orgs",
      "received_events_url": "https://api.github.com/users/LaurentDardenne/received_events",
      "repos_url": "https://api.github.com/users/LaurentDardenne/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/LaurentDardenne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LaurentDardenne/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/LaurentDardenne"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@IISResetMe Thanks for your contribution. Now we are waiting PowerShell Committee conclusion in days.",
    "created_at": "2018-01-27T17:06:01Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-360998530",
    "id": 360998530,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDk5ODUzMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360998530/reactions"
    },
    "updated_at": "2018-01-27T17:06:01Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/360998530",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@PowerShell/powershell-committee reviewed this and agree with taking this change, would prefer `$_` implemented, but can accept `$args[0]` since it's automatically there",
    "created_at": "2018-01-31T23:15:18Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362103223",
    "id": 362103223,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEwMzIyMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362103223/reactions"
    },
    "updated_at": "2018-01-31T23:15:18Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362103223",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@SteveL-MSFT Cool! I agree that `$_` would be nicer, but since we're passing the scriptblock directly to the method call as a delegate I can't really inject anything into the resulting expression . \r\n\r\nOnly way I can think of is by parsing the user-supplied scriptblock, inspecting the `param` block (optionally adding `param([Match]$_)`) and then re-creating it. It feels a bit ugly.\r\n\r\nIf anyone has suggestions or comments on this approach (or better ideas) I'm all ears. ",
    "created_at": "2018-02-01T01:29:12Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362128369",
    "id": 362128369,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEyODM2OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362128369/reactions"
    },
    "updated_at": "2018-02-01T01:29:24Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362128369",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7413755?v=4",
      "events_url": "https://api.github.com/users/IISResetMe/events{/privacy}",
      "followers_url": "https://api.github.com/users/IISResetMe/followers",
      "following_url": "https://api.github.com/users/IISResetMe/following{/other_user}",
      "gists_url": "https://api.github.com/users/IISResetMe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/IISResetMe",
      "id": 7413755,
      "login": "IISResetMe",
      "node_id": "MDQ6VXNlcjc0MTM3NTU=",
      "organizations_url": "https://api.github.com/users/IISResetMe/orgs",
      "received_events_url": "https://api.github.com/users/IISResetMe/received_events",
      "repos_url": "https://api.github.com/users/IISResetMe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/IISResetMe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IISResetMe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/IISResetMe"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@IISResetMe - you could create a closure as the delegate instead, something like this:\r\n\r\n```C#\r\nMatchEvaluator GetEvaluator(ScriptBlock sb)\r\n{\r\n    return m => sb.DoInvokeReturnAsIs(\r\n        useLocalScope: true, // or false, not sure\r\n        errorHandlingBehavior: ErrorHandlingBehavior.WriteToCurrentErrorPipe,\r\n        dollarUnder: m,\r\n        input: AutomationNull.Value,\r\n        scriptThis: AutomationNull.Value,\r\n        args: Utils.EmptyArray<object>());\r\n}\r\n```",
    "created_at": "2018-02-01T01:39:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362130105",
    "id": 362130105,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEzMDEwNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362130105/reactions"
    },
    "updated_at": "2018-02-01T01:39:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362130105",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@lzybkr Interesting, I thought `DoInvokeReturnAsIs()` would execute the scriptblock immediately, no? ",
    "created_at": "2018-02-01T01:55:04Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362132830",
    "id": 362132830,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEzMjgzMA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362132830/reactions"
    },
    "updated_at": "2018-02-01T01:55:36Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362132830",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7413755?v=4",
      "events_url": "https://api.github.com/users/IISResetMe/events{/privacy}",
      "followers_url": "https://api.github.com/users/IISResetMe/followers",
      "following_url": "https://api.github.com/users/IISResetMe/following{/other_user}",
      "gists_url": "https://api.github.com/users/IISResetMe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/IISResetMe",
      "id": 7413755,
      "login": "IISResetMe",
      "node_id": "MDQ6VXNlcjc0MTM3NTU=",
      "organizations_url": "https://api.github.com/users/IISResetMe/orgs",
      "received_events_url": "https://api.github.com/users/IISResetMe/received_events",
      "repos_url": "https://api.github.com/users/IISResetMe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/IISResetMe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IISResetMe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/IISResetMe"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "As expected, the following works as intended:\r\n\r\n```\r\nprivate static object ReplaceOperatorImpl(ExecutionContext context, string input, Regex regex, object substitute)\r\n{\r\n    MatchEvaluator matchEvaluator = null;\r\n    if (!(substitute is string) )\r\n    {\r\n        if(substitute is ScriptBlock) \r\n        {\r\n            ScriptBlock substituteScriptBlock = substitute as ScriptBlock;\r\n            ScriptBlockAst substituteAst = substituteScriptBlock.Ast as ScriptBlockAst;\r\n            if(substituteAst.ParamBlock == null && \r\n                substituteAst.Find(\r\n                    ast => ast is VariableExpressionAst && \r\n                    (ast as VariableExpressionAst).VariablePath.UserPath == \"_\", \r\n                false) != null)\r\n            {\r\n                substitute = ScriptBlock.Create(@\"param([System.Text.RegularExpressions.Match]$_)\" + substituteScriptBlock.ToString());\r\n            }\r\n        }   \r\n        if(LanguagePrimitives.TryConvertTo(substitute, out matchEvaluator)){\r\n            return regex.Replace(input, matchEvaluator);\r\n        }\r\n    }\r\n\r\n    string replacement = PSObject.ToStringParser(context, substitute);\r\n    return regex.Replace(input, replacement);\r\n}\r\n```\r\n... but it doesn't look or feel very clean :-\\ ",
    "created_at": "2018-02-01T02:03:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362134305",
    "id": 362134305,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEzNDMwNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362134305/reactions"
    },
    "updated_at": "2018-02-01T02:06:01Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362134305",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7413755?v=4",
      "events_url": "https://api.github.com/users/IISResetMe/events{/privacy}",
      "followers_url": "https://api.github.com/users/IISResetMe/followers",
      "following_url": "https://api.github.com/users/IISResetMe/following{/other_user}",
      "gists_url": "https://api.github.com/users/IISResetMe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/IISResetMe",
      "id": 7413755,
      "login": "IISResetMe",
      "node_id": "MDQ6VXNlcjc0MTM3NTU=",
      "organizations_url": "https://api.github.com/users/IISResetMe/orgs",
      "received_events_url": "https://api.github.com/users/IISResetMe/received_events",
      "repos_url": "https://api.github.com/users/IISResetMe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/IISResetMe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IISResetMe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/IISResetMe"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@lzybkr Had a closer look at your suggestion, makes sense, but when I try to compile it I get:\r\n\r\n    .\\PowerShell\\src\\System.Management.Automation\\engine\\lang\\parserutils.cs(909,25): \r\n      error CS1662: Cannot convert lambda expression to intended delegate type because some of the return types in the block are not implicitly convertible to the delegate return type ",
    "created_at": "2018-02-01T02:21:10Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362137258",
    "id": 362137258,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjEzNzI1OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362137258/reactions"
    },
    "updated_at": "2018-02-01T02:21:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362137258",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7413755?v=4",
      "events_url": "https://api.github.com/users/IISResetMe/events{/privacy}",
      "followers_url": "https://api.github.com/users/IISResetMe/followers",
      "following_url": "https://api.github.com/users/IISResetMe/following{/other_user}",
      "gists_url": "https://api.github.com/users/IISResetMe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/IISResetMe",
      "id": 7413755,
      "login": "IISResetMe",
      "node_id": "MDQ6VXNlcjc0MTM3NTU=",
      "organizations_url": "https://api.github.com/users/IISResetMe/orgs",
      "received_events_url": "https://api.github.com/users/IISResetMe/received_events",
      "repos_url": "https://api.github.com/users/IISResetMe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/IISResetMe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IISResetMe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/IISResetMe"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "Oh, right, I guess call `LanguagePrimitives.ConvertTo<string>` on the return value.",
    "created_at": "2018-02-01T02:40:11Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-362140343",
    "id": 362140343,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MjE0MDM0Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362140343/reactions"
    },
    "updated_at": "2018-02-01T02:40:11Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/362140343",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Added fix #6164 in description.",
    "created_at": "2018-02-16T04:18:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-366140328",
    "id": 366140328,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjE0MDMyOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366140328/reactions"
    },
    "updated_at": "2018-02-16T04:18:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366140328",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@IISResetMe What is the PR status?",
    "created_at": "2018-02-16T06:50:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-366157470",
    "id": 366157470,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjE1NzQ3MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366157470/reactions"
    },
    "updated_at": "2018-02-16T06:50:35Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/366157470",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@IISResetMe This PR is a good enhancement to have. But it's been a while since this PR was left unattended, so I updated the changes to address the `$_` pending issue. Hope you don't mind.\r\n\r\nMy changes were:\r\n1. Squash the existing commits to a single one.\r\n2. Refactor `ReplaceOperatorImpl` with `switch` (pattern matching).\r\n3. Add copyright string to the new `.ps1` file and use `$_` for the `-replace xx { ... }` test case.\r\n\r\n@iSazonov @lzybkr @powercode Can you please take another look?",
    "created_at": "2018-03-13T01:00:24Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-372511233",
    "id": 372511233,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjUxMTIzMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372511233/reactions"
    },
    "updated_at": "2018-03-13T01:03:20Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372511233",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@daxian-dbw LGTM!",
    "created_at": "2018-03-13T10:54:39Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-372625452",
    "id": 372625452,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjYyNTQ1Mg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372625452/reactions"
    },
    "updated_at": "2018-03-13T10:54:39Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372625452",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3505151?v=4",
      "events_url": "https://api.github.com/users/powercode/events{/privacy}",
      "followers_url": "https://api.github.com/users/powercode/followers",
      "following_url": "https://api.github.com/users/powercode/following{/other_user}",
      "gists_url": "https://api.github.com/users/powercode/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/powercode",
      "id": 3505151,
      "login": "powercode",
      "node_id": "MDQ6VXNlcjM1MDUxNTE=",
      "organizations_url": "https://api.github.com/users/powercode/orgs",
      "received_events_url": "https://api.github.com/users/powercode/received_events",
      "repos_url": "https://api.github.com/users/powercode/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/powercode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/powercode/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/powercode"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Thanks @daxian-dbw! Couldn't get `$_` to work inside the MatchEvaluator and then life got in the way :)\r\n\r\nLooks good!",
    "created_at": "2018-03-13T13:10:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-372659587",
    "id": 372659587,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjY1OTU4Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372659587/reactions"
    },
    "updated_at": "2018-03-13T13:10:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372659587",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/7413755?v=4",
      "events_url": "https://api.github.com/users/IISResetMe/events{/privacy}",
      "followers_url": "https://api.github.com/users/IISResetMe/followers",
      "following_url": "https://api.github.com/users/IISResetMe/following{/other_user}",
      "gists_url": "https://api.github.com/users/IISResetMe/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/IISResetMe",
      "id": 7413755,
      "login": "IISResetMe",
      "node_id": "MDQ6VXNlcjc0MTM3NTU=",
      "organizations_url": "https://api.github.com/users/IISResetMe/orgs",
      "received_events_url": "https://api.github.com/users/IISResetMe/received_events",
      "repos_url": "https://api.github.com/users/IISResetMe/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/IISResetMe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IISResetMe/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/IISResetMe"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@iSazonov Your comments have been addressed. Can you please take another look?",
    "created_at": "2018-03-13T16:22:15Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-372726413",
    "id": 372726413,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjcyNjQxMw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372726413/reactions"
    },
    "updated_at": "2018-03-13T16:22:15Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/372726413",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "@iSazonov Given that your pending comment is not blocking (questions about `PSObject.ToStringParser`), I will merge this PR. Feel free to continue the discussion in the comment thread.",
    "created_at": "2018-03-14T16:33:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/pull/6029#issuecomment-373087785",
    "id": 373087785,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/6029",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzA4Nzc4NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 1,
      "hooray": 1,
      "laugh": 0,
      "rocket": 0,
      "total_count": 3,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/373087785/reactions"
    },
    "updated_at": "2018-03-14T16:33:31Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/373087785",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/127450?v=4",
      "events_url": "https://api.github.com/users/daxian-dbw/events{/privacy}",
      "followers_url": "https://api.github.com/users/daxian-dbw/followers",
      "following_url": "https://api.github.com/users/daxian-dbw/following{/other_user}",
      "gists_url": "https://api.github.com/users/daxian-dbw/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/daxian-dbw",
      "id": 127450,
      "login": "daxian-dbw",
      "node_id": "MDQ6VXNlcjEyNzQ1MA==",
      "organizations_url": "https://api.github.com/users/daxian-dbw/orgs",
      "received_events_url": "https://api.github.com/users/daxian-dbw/received_events",
      "repos_url": "https://api.github.com/users/daxian-dbw/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/daxian-dbw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daxian-dbw/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/daxian-dbw"
    }
  }
]
