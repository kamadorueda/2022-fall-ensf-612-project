[
  {
    "author_association": "MEMBER",
    "body": "@Francisco-Gamino I think you had brought this up before and this was \"by design\"?\n",
    "created_at": "2016-10-12T16:42:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2448#issuecomment-253268718",
    "id": 253268718,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2448",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MzI2ODcxOA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/253268718/reactions"
    },
    "updated_at": "2016-10-12T16:42:55Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/253268718",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/11859881?v=4",
      "events_url": "https://api.github.com/users/SteveL-MSFT/events{/privacy}",
      "followers_url": "https://api.github.com/users/SteveL-MSFT/followers",
      "following_url": "https://api.github.com/users/SteveL-MSFT/following{/other_user}",
      "gists_url": "https://api.github.com/users/SteveL-MSFT/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/SteveL-MSFT",
      "id": 11859881,
      "login": "SteveL-MSFT",
      "node_id": "MDQ6VXNlcjExODU5ODgx",
      "organizations_url": "https://api.github.com/users/SteveL-MSFT/orgs",
      "received_events_url": "https://api.github.com/users/SteveL-MSFT/received_events",
      "repos_url": "https://api.github.com/users/SteveL-MSFT/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/SteveL-MSFT/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SteveL-MSFT/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/SteveL-MSFT"
    }
  },
  {
    "author_association": "MEMBER",
    "body": "With the repro as is, it does look like it is by design - we enumerate objects written to the pipeline, so piping loses the fact that the object was an array. This is similar to the difference between:\n\n``` powershell\n$o = @(1)\n$o | Get-Member\nGet-Member -InputObject $o\n```\n\nI was going to suggest using:\n\n``` powershell\nSet-Content 'D:\\result.json' (ConvertTo-Json -InputObject $o)\n```\n\nBut this doesn't work either, and I would consider this a bug.\n",
    "created_at": "2016-10-26T19:42:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2448#issuecomment-256455783",
    "id": 256455783,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2448",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NjQ1NTc4Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 6,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 6,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/256455783/reactions"
    },
    "updated_at": "2016-10-26T19:42:51Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/256455783",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/2148248?v=4",
      "events_url": "https://api.github.com/users/lzybkr/events{/privacy}",
      "followers_url": "https://api.github.com/users/lzybkr/followers",
      "following_url": "https://api.github.com/users/lzybkr/following{/other_user}",
      "gists_url": "https://api.github.com/users/lzybkr/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/lzybkr",
      "id": 2148248,
      "login": "lzybkr",
      "node_id": "MDQ6VXNlcjIxNDgyNDg=",
      "organizations_url": "https://api.github.com/users/lzybkr/orgs",
      "received_events_url": "https://api.github.com/users/lzybkr/received_events",
      "repos_url": "https://api.github.com/users/lzybkr/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/lzybkr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lzybkr/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/lzybkr"
    }
  },
  {
    "author_association": "NONE",
    "body": "Just ran into this the other day, the workaround I'm using is\r\n\r\n    Set-Content 'D:\\result.json' (ConvertTo-Json -InputObject @($o))\r\n\r\nThe fact that it still won't work in pipeline is annoying. I have a restriction that I have to use pipeline, so I end up doing:\r\n\r\n     .\\Some-Script.ps1 -OutVariable List | Out-Null; ConvertTo-Json -InputObject @($List)\r\n\r\nAnd that works. I'm restricted because in this context, the script reference must be first and all other arguments are appended afterwards. I almost want a `-AsArray` switch or something to ConvertTo-Json.\r\n\r\n    .\\Some-Script.ps1 | ConvertTo-Json -AsArray",
    "created_at": "2017-05-19T13:45:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2448#issuecomment-302706821",
    "id": 302706821,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2448",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjcwNjgyMQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 2,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 2,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302706821/reactions"
    },
    "updated_at": "2017-05-19T13:49:10Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302706821",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/563819?v=4",
      "events_url": "https://api.github.com/users/kamranayub/events{/privacy}",
      "followers_url": "https://api.github.com/users/kamranayub/followers",
      "following_url": "https://api.github.com/users/kamranayub/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamranayub/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/kamranayub",
      "id": 563819,
      "login": "kamranayub",
      "node_id": "MDQ6VXNlcjU2MzgxOQ==",
      "organizations_url": "https://api.github.com/users/kamranayub/orgs",
      "received_events_url": "https://api.github.com/users/kamranayub/received_events",
      "repos_url": "https://api.github.com/users/kamranayub/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/kamranayub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamranayub/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/kamranayub"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "The pipleline issue is by design; however, this is not documented, so I've create an doc issue for this: https://github.com/PowerShell/PowerShell-Docs/issues/1219\r\n\r\nFor the ConvertTo-Json -InputObject $array, I cannot get it to repro. Here is what I am running:\r\n``` powershell\r\n\r\n# Generate a test file with Json content\r\n'[{\r\n    \"name\": \"Animals\",\r\n    \"age\": \"1\",\r\n    \"children\": [{\r\n        \"name\": \"mimi\",\r\n        \"age\": \"1\",\r\n        \"lovely\": true,\r\n        \"height\": 20\r\n    },\r\n    {\r\n        \"name\": \"dog\",\r\n        \"age\": \"2\",\r\n        \"lovely\": false,\r\n        \"height\": 100\r\n    }]\r\n}]'  | Out-File Test_Convert.json\r\n\r\n# Create the test object from the Json file\r\n$o=(Get-Content -Raw Test_Convert.json | ConvertFrom-Json)\r\n$o\r\n\r\nname    age children\r\n----    --- --------\r\nAnimals 1   {@{name=mimi; age=1; lovely=True; height=20}, @{name=dog; age=2; lovely=False; height=100}}\r\n\r\n# Serialize the object using  ConvertTo-Json -InputObject\r\nSet-Content result.json (ConvertTo-Json -InputObject $o -Depth 3)\r\n\r\nGet-Content .\\result.json\r\n[\r\n  {\r\n    \"name\": \"Animals\",\r\n    \"age\": \"1\",\r\n    \"children\": [\r\n      {\r\n        \"name\": \"mimi\",\r\n        \"age\": \"1\",\r\n        \"lovely\": true,\r\n        \"height\": 20\r\n      },\r\n      {\r\n        \"name\": \"dog\",\r\n        \"age\": \"2\",\r\n        \"lovely\": false,\r\n        \"height\": 100\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\n```\r\nSince the pipleline issue is by design, I am closing this. Please reopen is ConvertTo-Json -InputObject $array does not work.",
    "created_at": "2017-05-19T21:46:31Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2448#issuecomment-302818880",
    "id": 302818880,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2448",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwMjgxODg4MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302818880/reactions"
    },
    "updated_at": "2017-05-19T21:48:26Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/302818880",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/12720858?v=4",
      "events_url": "https://api.github.com/users/Francisco-Gamino/events{/privacy}",
      "followers_url": "https://api.github.com/users/Francisco-Gamino/followers",
      "following_url": "https://api.github.com/users/Francisco-Gamino/following{/other_user}",
      "gists_url": "https://api.github.com/users/Francisco-Gamino/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/Francisco-Gamino",
      "id": 12720858,
      "login": "Francisco-Gamino",
      "node_id": "MDQ6VXNlcjEyNzIwODU4",
      "organizations_url": "https://api.github.com/users/Francisco-Gamino/orgs",
      "received_events_url": "https://api.github.com/users/Francisco-Gamino/received_events",
      "repos_url": "https://api.github.com/users/Francisco-Gamino/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/Francisco-Gamino/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Francisco-Gamino/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/Francisco-Gamino"
    }
  },
  {
    "author_association": "NONE",
    "body": "In my case this approach adds  \"value\": at the beggining and \"Count\":  1 at the end:\r\n\r\n{\r\n    \"value\":  [\r\n                  {\r\n                      \"name\":  \"Animals\",\r\n                      \"age\":  \"1\",\r\n                      \"children\":  [\r\n                                       {\r\n                                           \"name\":  \"mimi\",\r\n                                           \"age\":  \"1\",\r\n                                           \"lovely\":  true,\r\n                                           \"height\":  20\r\n                                       },\r\n                                       {\r\n                                           \"name\":  \"dog\",\r\n                                           \"age\":  \"2\",\r\n                                           \"lovely\":  false,\r\n                                           \"height\":  100\r\n                                       }\r\n                                   ]\r\n                  }\r\n              ],\r\n    \"Count\":  1\r\n}",
    "created_at": "2018-01-07T11:32:53Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2448#issuecomment-355815997",
    "id": 355815997,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2448",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTgxNTk5Nw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/355815997/reactions"
    },
    "updated_at": "2018-01-07T11:32:53Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/355815997",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22001457?v=4",
      "events_url": "https://api.github.com/users/gramae/events{/privacy}",
      "followers_url": "https://api.github.com/users/gramae/followers",
      "following_url": "https://api.github.com/users/gramae/following{/other_user}",
      "gists_url": "https://api.github.com/users/gramae/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/gramae",
      "id": 22001457,
      "login": "gramae",
      "node_id": "MDQ6VXNlcjIyMDAxNDU3",
      "organizations_url": "https://api.github.com/users/gramae/orgs",
      "received_events_url": "https://api.github.com/users/gramae/received_events",
      "repos_url": "https://api.github.com/users/gramae/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/gramae/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gramae/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/gramae"
    }
  },
  {
    "author_association": "NONE",
    "body": "Does this support complex json files . \r\n\r\nReferring to the Azure ARM templates which are in the json format . \r\n\r\nDoes it support that too ?\r\n",
    "created_at": "2018-03-07T12:30:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2448#issuecomment-371123751",
    "id": 371123751,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2448",
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MTEyMzc1MQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371123751/reactions"
    },
    "updated_at": "2018-03-07T12:30:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/371123751",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/35127115?v=4",
      "events_url": "https://api.github.com/users/utripathi/events{/privacy}",
      "followers_url": "https://api.github.com/users/utripathi/followers",
      "following_url": "https://api.github.com/users/utripathi/following{/other_user}",
      "gists_url": "https://api.github.com/users/utripathi/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/utripathi",
      "id": 35127115,
      "login": "utripathi",
      "node_id": "MDQ6VXNlcjM1MTI3MTE1",
      "organizations_url": "https://api.github.com/users/utripathi/orgs",
      "received_events_url": "https://api.github.com/users/utripathi/received_events",
      "repos_url": "https://api.github.com/users/utripathi/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/utripathi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/utripathi/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/utripathi"
    }
  }
]
