[
  {
    "author_association": "NONE",
    "body": "In my environment pwsh does not crash. Just jumped cursor:\r\n\r\n\r\nhttps://user-images.githubusercontent.com/78153320/151585716-ca77d788-74a7-4ca0-865c-acfcedf089c7.mp4\r\n\r\n",
    "created_at": "2022-01-28T16:41:27Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024399365",
    "id": 1024399365,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49DxgF",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024399365/reactions"
    },
    "updated_at": "2022-01-28T16:41:27Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024399365",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@SteveL-MSFT In continuation of our discussion, this issue demonstrates why I concern that we are being forced to create \"Windows Terminal\".",
    "created_at": "2022-01-28T17:26:54Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024443451",
    "id": 1024443451,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49D8Q7",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024443451/reactions"
    },
    "updated_at": "2022-01-28T17:26:54Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024443451",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/22290914?v=4",
      "events_url": "https://api.github.com/users/iSazonov/events{/privacy}",
      "followers_url": "https://api.github.com/users/iSazonov/followers",
      "following_url": "https://api.github.com/users/iSazonov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iSazonov/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/iSazonov",
      "id": 22290914,
      "login": "iSazonov",
      "node_id": "MDQ6VXNlcjIyMjkwOTE0",
      "organizations_url": "https://api.github.com/users/iSazonov/orgs",
      "received_events_url": "https://api.github.com/users/iSazonov/received_events",
      "repos_url": "https://api.github.com/users/iSazonov/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/iSazonov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iSazonov/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/iSazonov"
    }
  },
  {
    "author_association": "NONE",
    "body": "The size of the terminal window and whether it has been maximized seems to effect this bug somewhat. There is defiantly a timing issue involved. But pwsh shouldn't just be hard faulting here... without looking at the code can't you try catch this call. I gave you the stacktrace.\r\n\r\nhttps://user-images.githubusercontent.com/30415407/151594159-710a5b6e-501e-4922-8675-06ab387307b3.mp4\r\n\r\n ",
    "created_at": "2022-01-28T17:32:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024447968",
    "id": 1024447968,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49D9Xg",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024447968/reactions"
    },
    "updated_at": "2022-01-28T17:32:45Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024447968",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/30415407?v=4",
      "events_url": "https://api.github.com/users/natebarkei/events{/privacy}",
      "followers_url": "https://api.github.com/users/natebarkei/followers",
      "following_url": "https://api.github.com/users/natebarkei/following{/other_user}",
      "gists_url": "https://api.github.com/users/natebarkei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/natebarkei",
      "id": 30415407,
      "login": "natebarkei",
      "node_id": "MDQ6VXNlcjMwNDE1NDA3",
      "organizations_url": "https://api.github.com/users/natebarkei/orgs",
      "received_events_url": "https://api.github.com/users/natebarkei/received_events",
      "repos_url": "https://api.github.com/users/natebarkei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/natebarkei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/natebarkei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/natebarkei"
    }
  },
  {
    "author_association": "NONE",
    "body": "Honestly, if you have a workaround that would be fine as well. Clearly, the sample code I wrote to repro this isn't the actual reason I'm reporting this bug. I have tried inserting `start-sleep` in before I attempt to access the buffer again (through ansi calls to `$host.ui.Write`) to no avail (probably because it's single threaded and not allowing whatever needs to happen to happen). \r\nThrowing an error is fine, but just terminating the entire runtime without a way to recover or trap is insane.",
    "created_at": "2022-01-28T17:43:42Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024456449",
    "id": 1024456449,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49D_cB",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024456449/reactions"
    },
    "updated_at": "2022-01-28T17:43:42Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024456449",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/30415407?v=4",
      "events_url": "https://api.github.com/users/natebarkei/events{/privacy}",
      "followers_url": "https://api.github.com/users/natebarkei/followers",
      "following_url": "https://api.github.com/users/natebarkei/following{/other_user}",
      "gists_url": "https://api.github.com/users/natebarkei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/natebarkei",
      "id": 30415407,
      "login": "natebarkei",
      "node_id": "MDQ6VXNlcjMwNDE1NDA3",
      "organizations_url": "https://api.github.com/users/natebarkei/orgs",
      "received_events_url": "https://api.github.com/users/natebarkei/received_events",
      "repos_url": "https://api.github.com/users/natebarkei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/natebarkei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/natebarkei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/natebarkei"
    }
  },
  {
    "author_association": "NONE",
    "body": "> The size of the terminal window and whether it has been maximized seems to effect this bug somewhat.\r\n\r\nI couldn't reproduce the wt crash\r\n\r\n![Screenshot 2022-01-28 203826](https://user-images.githubusercontent.com/78153320/151595364-0759e13a-1d78-467c-87ec-e9dc1852d57c.png)\r\n",
    "created_at": "2022-01-28T17:44:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024456704",
    "id": 1024456704,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49D_gA",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024456704/reactions"
    },
    "updated_at": "2022-01-28T17:44:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024456704",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "NONE",
    "body": "Well since you are having such a hard time reproducing it that probably is a good indicator of why it's not fixed. Pwsh is clearly reading into an uninitialized buffer somewhere under some circumstances. I also doubt a lot of developers are using ansi codes and alt screen on windows with ps.\r\n\r\nIf you watch this video, you will see the following amazing events in real time:\r\n- It terminating the runtime 7.2.1 (trying to switch back)\r\n- It working under PS5\r\n- It working under 7.2.1\r\n- Maximizing terminal, working under 7.2.1\r\n- Closing Terminal and reopening it\r\n- It working under 7.2.1\r\n- Maximizing terminal\r\n- It terminating the runtime under 7.2.1 (trying to switch to)\r\n\r\nhttps://user-images.githubusercontent.com/30415407/151597417-a62941e8-67ab-462d-8815-19fd3dea7ba4.mp4\r\n\r\n",
    "created_at": "2022-01-28T18:10:19Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024483353",
    "id": 1024483353,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49EGAZ",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024483353/reactions"
    },
    "updated_at": "2022-01-28T18:10:19Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024483353",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/30415407?v=4",
      "events_url": "https://api.github.com/users/natebarkei/events{/privacy}",
      "followers_url": "https://api.github.com/users/natebarkei/followers",
      "following_url": "https://api.github.com/users/natebarkei/following{/other_user}",
      "gists_url": "https://api.github.com/users/natebarkei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/natebarkei",
      "id": 30415407,
      "login": "natebarkei",
      "node_id": "MDQ6VXNlcjMwNDE1NDA3",
      "organizations_url": "https://api.github.com/users/natebarkei/orgs",
      "received_events_url": "https://api.github.com/users/natebarkei/received_events",
      "repos_url": "https://api.github.com/users/natebarkei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/natebarkei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/natebarkei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/natebarkei"
    }
  },
  {
    "author_association": "NONE",
    "body": "I don't know why this bug is not reproduced. In this video pwsh is launched in the standard windows console ( `Win+R > pwsh` ).\r\n\r\nhttps://user-images.githubusercontent.com/78153320/151602658-09e0a38e-c1fc-4733-9d1f-81a5ed665b3d.mp4\r\n\r\n",
    "created_at": "2022-01-28T18:49:14Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1024510517",
    "id": 1024510517,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49EMo1",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024510517/reactions"
    },
    "updated_at": "2022-01-28T18:49:14Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1024510517",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "NONE",
    "body": "Has anyone else been able to try and see if they can reproduce this issue? I have been able to personally repro it on three machines so far.",
    "created_at": "2022-01-31T17:48:21Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1026044527",
    "id": 1026044527,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49KDJv",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1026044527/reactions"
    },
    "updated_at": "2022-01-31T17:48:21Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1026044527",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/30415407?v=4",
      "events_url": "https://api.github.com/users/natebarkei/events{/privacy}",
      "followers_url": "https://api.github.com/users/natebarkei/followers",
      "following_url": "https://api.github.com/users/natebarkei/following{/other_user}",
      "gists_url": "https://api.github.com/users/natebarkei/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/natebarkei",
      "id": 30415407,
      "login": "natebarkei",
      "node_id": "MDQ6VXNlcjMwNDE1NDA3",
      "organizations_url": "https://api.github.com/users/natebarkei/orgs",
      "received_events_url": "https://api.github.com/users/natebarkei/received_events",
      "repos_url": "https://api.github.com/users/natebarkei/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/natebarkei/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/natebarkei/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/natebarkei"
    }
  },
  {
    "author_association": "NONE",
    "body": "I see the only difference - you installed pwsh from the store, and I installed it from the msi package. That's probably the reason.\r\n``` \r\n>  $PSHOME\r\nC:\\Program Files\\PowerShell\\7\r\n```",
    "created_at": "2022-02-01T06:38:22Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1026521240",
    "id": 1026521240,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49L3iY",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1026521240/reactions"
    },
    "updated_at": "2022-02-01T07:22:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1026521240",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/78153320?v=4",
      "events_url": "https://api.github.com/users/237dmitry/events{/privacy}",
      "followers_url": "https://api.github.com/users/237dmitry/followers",
      "following_url": "https://api.github.com/users/237dmitry/following{/other_user}",
      "gists_url": "https://api.github.com/users/237dmitry/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/237dmitry",
      "id": 78153320,
      "login": "237dmitry",
      "node_id": "MDQ6VXNlcjc4MTUzMzIw",
      "organizations_url": "https://api.github.com/users/237dmitry/orgs",
      "received_events_url": "https://api.github.com/users/237dmitry/received_events",
      "repos_url": "https://api.github.com/users/237dmitry/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/237dmitry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/237dmitry/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/237dmitry"
    }
  },
  {
    "author_association": "NONE",
    "body": "Can't repro either:\r\n\r\n![pwsh_issue_16818](https://user-images.githubusercontent.com/3933920/152170126-5e5696ff-e34b-4d9d-a088-37a672ccbbb4.png)\r\n\r\n",
    "created_at": "2022-02-02T14:12:17Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/16818#issuecomment-1027979984",
    "id": 1027979984,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/16818",
    "node_id": "IC_kwDOAvT7bc49RbrQ",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1027979984/reactions"
    },
    "updated_at": "2022-02-02T14:12:17Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/1027979984",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/3933920?v=4",
      "events_url": "https://api.github.com/users/elsaco/events{/privacy}",
      "followers_url": "https://api.github.com/users/elsaco/followers",
      "following_url": "https://api.github.com/users/elsaco/following{/other_user}",
      "gists_url": "https://api.github.com/users/elsaco/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/elsaco",
      "id": 3933920,
      "login": "elsaco",
      "node_id": "MDQ6VXNlcjM5MzM5MjA=",
      "organizations_url": "https://api.github.com/users/elsaco/orgs",
      "received_events_url": "https://api.github.com/users/elsaco/received_events",
      "repos_url": "https://api.github.com/users/elsaco/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/elsaco/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elsaco/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/elsaco"
    }
  }
]
