[
  {
    "author_association": "NONE",
    "body": "I can confirm.\n\nA simpler example to reproduce the issue:\n\n`write-host ä`\n\n`powershell ./test.ps1` results in:\n`Ã¤`\n\nSeems like somehow the _Powershell_  trys to convert the output from _latin1_  to _UTF8_, i.e. assumes the script is in _latin1_ encoding. Because converting back (via external iconv)  fixes the output again:\n\n```\npowershell  ./test.ps1|iconv -f utf8 -t latin1\nä\n\n```\n",
    "created_at": "2016-09-24T14:44:44Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2339#issuecomment-249368244",
    "id": 249368244,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2339",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTM2ODI0NA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/249368244/reactions"
    },
    "updated_at": "2016-09-24T14:44:44Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/249368244",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/52547?v=4",
      "events_url": "https://api.github.com/users/juergenhoetzel/events{/privacy}",
      "followers_url": "https://api.github.com/users/juergenhoetzel/followers",
      "following_url": "https://api.github.com/users/juergenhoetzel/following{/other_user}",
      "gists_url": "https://api.github.com/users/juergenhoetzel/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/juergenhoetzel",
      "id": 52547,
      "login": "juergenhoetzel",
      "node_id": "MDQ6VXNlcjUyNTQ3",
      "organizations_url": "https://api.github.com/users/juergenhoetzel/orgs",
      "received_events_url": "https://api.github.com/users/juergenhoetzel/received_events",
      "repos_url": "https://api.github.com/users/juergenhoetzel/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/juergenhoetzel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juergenhoetzel/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/juergenhoetzel"
    }
  },
  {
    "author_association": "NONE",
    "body": "Update: Adding an  UTF-8 [Byte Order Mark](https://en.wikipedia.org/wiki/Byte_order_mark) to the script:\n\n`sed -i '1s/^/\\xef\\xbb\\xbf/' test.ps1`\n\nfixes the issue. I wonder why _Powershell_ expects _latin1_ by default.\n",
    "created_at": "2016-09-24T14:54:51Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2339#issuecomment-249368748",
    "id": 249368748,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2339",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0OTM2ODc0OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/249368748/reactions"
    },
    "updated_at": "2016-09-24T14:54:51Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/249368748",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/52547?v=4",
      "events_url": "https://api.github.com/users/juergenhoetzel/events{/privacy}",
      "followers_url": "https://api.github.com/users/juergenhoetzel/followers",
      "following_url": "https://api.github.com/users/juergenhoetzel/following{/other_user}",
      "gists_url": "https://api.github.com/users/juergenhoetzel/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/juergenhoetzel",
      "id": 52547,
      "login": "juergenhoetzel",
      "node_id": "MDQ6VXNlcjUyNTQ3",
      "organizations_url": "https://api.github.com/users/juergenhoetzel/orgs",
      "received_events_url": "https://api.github.com/users/juergenhoetzel/received_events",
      "repos_url": "https://api.github.com/users/juergenhoetzel/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/juergenhoetzel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juergenhoetzel/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/juergenhoetzel"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Thanks @juergenhoetzel for the investigation. I think it's closely related to #707\n",
    "created_at": "2016-09-29T03:27:33Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2339#issuecomment-250361589",
    "id": 250361589,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2339",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDM2MTU4OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/250361589/reactions"
    },
    "updated_at": "2016-09-29T03:27:33Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/250361589",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/816680?v=4",
      "events_url": "https://api.github.com/users/vors/events{/privacy}",
      "followers_url": "https://api.github.com/users/vors/followers",
      "following_url": "https://api.github.com/users/vors/following{/other_user}",
      "gists_url": "https://api.github.com/users/vors/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vors",
      "id": 816680,
      "login": "vors",
      "node_id": "MDQ6VXNlcjgxNjY4MA==",
      "organizations_url": "https://api.github.com/users/vors/orgs",
      "received_events_url": "https://api.github.com/users/vors/received_events",
      "repos_url": "https://api.github.com/users/vors/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vors/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vors"
    }
  },
  {
    "author_association": "NONE",
    "body": "> Thanks @juergenhoetzel for the investigation. I think it's closely related to #707\n\nYes, both tasks are about the fact that [BOM](https://en.wikipedia.org/wiki/Byte_order_mark) headers are not commonly used on GNU/Linux systems. \n\nThis issue is about a better default encoding for reading PS1 files when the  [BOM](https://en.wikipedia.org/wiki/Byte_order_mark) header is missing (latin1 is assumed by default). IMO a better default would be using the _locale_ settings:\n\n```\n[juergen@pidsley test]$ localectl\n   System Locale: LANG=de_DE.UTF-8\n\n\n```\n\nWhereas #707 is about using a better default for Output encoding, because Unix tools like _cat_ doesn't utilize the BOM header and just display garbage. \n",
    "created_at": "2016-09-29T18:49:23Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2339#issuecomment-250557019",
    "id": 250557019,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2339",
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1MDU1NzAxOQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/250557019/reactions"
    },
    "updated_at": "2016-09-29T18:49:23Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/250557019",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/52547?v=4",
      "events_url": "https://api.github.com/users/juergenhoetzel/events{/privacy}",
      "followers_url": "https://api.github.com/users/juergenhoetzel/followers",
      "following_url": "https://api.github.com/users/juergenhoetzel/following{/other_user}",
      "gists_url": "https://api.github.com/users/juergenhoetzel/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/juergenhoetzel",
      "id": 52547,
      "login": "juergenhoetzel",
      "node_id": "MDQ6VXNlcjUyNTQ3",
      "organizations_url": "https://api.github.com/users/juergenhoetzel/orgs",
      "received_events_url": "https://api.github.com/users/juergenhoetzel/received_events",
      "repos_url": "https://api.github.com/users/juergenhoetzel/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/juergenhoetzel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/juergenhoetzel/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/juergenhoetzel"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "This has been fixed in `6.0.0-beta.1`. ",
    "created_at": "2017-05-25T18:34:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/2339#issuecomment-304088205",
    "id": 304088205,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/2339",
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDA4ODIwNQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/304088205/reactions"
    },
    "updated_at": "2017-05-25T18:34:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/304088205",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/1255187?v=4",
      "events_url": "https://api.github.com/users/joeyaiello/events{/privacy}",
      "followers_url": "https://api.github.com/users/joeyaiello/followers",
      "following_url": "https://api.github.com/users/joeyaiello/following{/other_user}",
      "gists_url": "https://api.github.com/users/joeyaiello/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/joeyaiello",
      "id": 1255187,
      "login": "joeyaiello",
      "node_id": "MDQ6VXNlcjEyNTUxODc=",
      "organizations_url": "https://api.github.com/users/joeyaiello/orgs",
      "received_events_url": "https://api.github.com/users/joeyaiello/received_events",
      "repos_url": "https://api.github.com/users/joeyaiello/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/joeyaiello/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joeyaiello/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/joeyaiello"
    }
  }
]
