[
  {
    "author_association": "COLLABORATOR",
    "body": "Note this only affects expressions encased in script blocks, _not_ expressions in parentheses:\r\n\r\n```powershell\r\nswitch ($false) {\r\n    (1 -eq 2) {\r\n        \"surprise!\"\r\n    }\r\n    { 1-eq 2 } {\r\n        \"surprise2!\"\r\n    }\r\n}\r\n```\r\nyields:\r\n```\r\nsurprise!\r\n```",
    "created_at": "2019-01-04T18:36:55Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-451529660",
    "id": 451529660,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTUyOTY2MA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451529660/reactions"
    },
    "updated_at": "2019-01-04T18:38:03Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451529660",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "That's an interesting find, and it applies to all \"falsy\" values, including `0` and `''`.\r\n\r\nMy vote would be to _only_ support signaling a scriptblock-based match via (implied) Boolean result, not also by value identity, which is where the ambiguity comes from.\r\n\r\nNot sure about backward compatibility, but at the very least we should update the docs to recommend using the Boolean approach only.\r\n\r\nNote that the only good reason to use a scriptblock to begin with is if you need to determine a match via `$_`; otherwise, an expression is preferable anyway.",
    "created_at": "2019-01-07T13:18:35Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-451931922",
    "id": 451931922,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTkzMTkyMg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451931922/reactions"
    },
    "updated_at": "2019-01-07T13:19:59Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451931922",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@mklement0 Yeah, I've been playing with it and I'm really not sure it _is_ behaving as the docs say at all. \r\n\r\n```powershell\r\nPS C:\\Program Files\\PowerShell\\6> switch (7) {\r\n>> 7 { \"bare number\"}\r\n>> 6 { \"different bare number\" }\r\n>> {7} {\"scriptblock number\"}\r\n>> {6} {\"different scriptblock number\"}\r\n>> {1} {\"still positive\"}\r\n>> {0} {\"falsey numeral\"}\r\n>> {\"hello\"}{\"truthy string\"}\r\n>> {\"\"}{\"falsy string\"}\r\n>> }\r\nbare number\r\nscriptblock number\r\ndifferent scriptblock number\r\nstill positive\r\ntruthy string\r\n```\r\n\r\nSo this _might_ just be an issue of the docs not clearly indicating the difference between a **scriptblock expression** and a **bare or parenthesis-wrapped expression**.\r\n\r\nFWIW I did find a better solution for my original intent for type-checking, as well:\r\n\r\n```powershell\r\nswitch ($null) {\r\n    ('MyType' -as [type]) {\r\n        class MyType {}\r\n    }\r\n    ('MyType2' -as [type]) {\r\n        class MyType2 {}\r\n    }\r\n}\r\n```",
    "created_at": "2019-01-07T13:33:45Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-451935959",
    "id": 451935959,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTkzNTk1OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451935959/reactions"
    },
    "updated_at": "2019-01-07T13:36:06Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451935959",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "Good point, @vexx32 - your test command suggests that the script block output is (sensibly) _always_ coerced to a Boolean (without a value comparison), so, yes, this smells like a mere documentation bug.\r\n\r\nTo provide some fodder for updating the docs:\r\n\r\n* Use an **expression** (`(...)`) if you want to dynamically calculate _the value_ to match; that is, use an expression  if you want its result to be compared directly to the input value; by default, the equivalent of <br>`<input> -eq <expr>` determines a match, where `<input>` is the input value and `<expr>` the branch condition. Note that you cannot reference the current input value as `$_`  in such an expression; use a script block for that - see below.\r\n\r\n* Use a **script block** (`{ ... }`)  to dynamically test for a match via a  _conditional_ that involves the  _current input value_, as in `$_`. That is, the script block must return a (possibly coerced) _Boolean_ that indicates whether the input is considered a match or not.\r\n\r\n",
    "created_at": "2019-01-07T14:18:40Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-451948695",
    "id": 451948695,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTk0ODY5NQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451948695/reactions"
    },
    "updated_at": "2019-01-07T15:15:24Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451948695",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Looks good, @mklement0! I would also mention that any invariant (not `$_`-based) script block expression that evaluates or coerces to `$true` is essentially similar to a `default` case, and will always be run unless a previous case exits the switch statement before it can be reached.",
    "created_at": "2019-01-07T14:34:00Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-451953679",
    "id": 451953679,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTk1MzY3OQ==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451953679/reactions"
    },
    "updated_at": "2019-01-07T14:34:00Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/451953679",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  },
  {
    "author_association": "CONTRIBUTOR",
    "body": "I’ve opened docs issue https://github.com/PowerShell/PowerShell-Docs/issues/3512 (it covers other issues too). ",
    "created_at": "2019-01-07T17:06:32Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-452006543",
    "id": 452006543,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjAwNjU0Mw==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/452006543/reactions"
    },
    "updated_at": "2019-01-07T17:06:32Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/452006543",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/588825?v=4",
      "events_url": "https://api.github.com/users/mklement0/events{/privacy}",
      "followers_url": "https://api.github.com/users/mklement0/followers",
      "following_url": "https://api.github.com/users/mklement0/following{/other_user}",
      "gists_url": "https://api.github.com/users/mklement0/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/mklement0",
      "id": 588825,
      "login": "mklement0",
      "node_id": "MDQ6VXNlcjU4ODgyNQ==",
      "organizations_url": "https://api.github.com/users/mklement0/orgs",
      "received_events_url": "https://api.github.com/users/mklement0/received_events",
      "repos_url": "https://api.github.com/users/mklement0/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/mklement0/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mklement0/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/mklement0"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "@vexx32 Yeah this is a doc bug. The docs are mixing two very different concepts. A `switch` statement clause may begin with either :\r\n1. an expression whose _value_ is used to match against.\r\nor\r\n2. a literal scriptblock whose value is *not* matched against but instead, is executed during clause processing. It receives the object to match in `$_` and the match succeeds only if the scriptblock returns a true value. So a scriptblock `{$false}` will always fail regardless of the value being matched but a scriptblock `{$_ -eq $false}` will succeed if the value to match is `$false`:\r\n```powershell\r\nPSCore (1:54) >  switch ($false) {{$_ -eq $false} {\"True\" }}\r\nTrue\r\n```\r\n",
    "created_at": "2019-01-07T20:22:12Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-452068936",
    "id": 452068936,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjA2ODkzNg==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 1,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 1,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/452068936/reactions"
    },
    "updated_at": "2019-01-07T20:22:12Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/452068936",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/6876108?v=4",
      "events_url": "https://api.github.com/users/BrucePay/events{/privacy}",
      "followers_url": "https://api.github.com/users/BrucePay/followers",
      "following_url": "https://api.github.com/users/BrucePay/following{/other_user}",
      "gists_url": "https://api.github.com/users/BrucePay/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/BrucePay",
      "id": 6876108,
      "login": "BrucePay",
      "node_id": "MDQ6VXNlcjY4NzYxMDg=",
      "organizations_url": "https://api.github.com/users/BrucePay/orgs",
      "received_events_url": "https://api.github.com/users/BrucePay/received_events",
      "repos_url": "https://api.github.com/users/BrucePay/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/BrucePay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BrucePay/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/BrucePay"
    }
  },
  {
    "author_association": "COLLABORATOR",
    "body": "Sounds good! I'll close this one for now since @mklement0 has gone ahead and created the docs issue. 🙂 \r\n",
    "created_at": "2019-01-07T20:25:41Z",
    "html_url": "https://github.com/PowerShell/PowerShell/issues/8591#issuecomment-452069978",
    "id": 452069978,
    "issue_url": "https://api.github.com/repos/PowerShell/PowerShell/issues/8591",
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjA2OTk3OA==",
    "performed_via_github_app": null,
    "reactions": {
      "+1": 0,
      "-1": 0,
      "confused": 0,
      "eyes": 0,
      "heart": 0,
      "hooray": 0,
      "laugh": 0,
      "rocket": 0,
      "total_count": 0,
      "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/452069978/reactions"
    },
    "updated_at": "2019-01-07T20:25:41Z",
    "url": "https://api.github.com/repos/PowerShell/PowerShell/issues/comments/452069978",
    "user": {
      "avatar_url": "https://avatars.githubusercontent.com/u/32407840?v=4",
      "events_url": "https://api.github.com/users/vexx32/events{/privacy}",
      "followers_url": "https://api.github.com/users/vexx32/followers",
      "following_url": "https://api.github.com/users/vexx32/following{/other_user}",
      "gists_url": "https://api.github.com/users/vexx32/gists{/gist_id}",
      "gravatar_id": "",
      "html_url": "https://github.com/vexx32",
      "id": 32407840,
      "login": "vexx32",
      "node_id": "MDQ6VXNlcjMyNDA3ODQw",
      "organizations_url": "https://api.github.com/users/vexx32/orgs",
      "received_events_url": "https://api.github.com/users/vexx32/received_events",
      "repos_url": "https://api.github.com/users/vexx32/repos",
      "site_admin": false,
      "starred_url": "https://api.github.com/users/vexx32/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vexx32/subscriptions",
      "type": "User",
      "url": "https://api.github.com/users/vexx32"
    }
  }
]
