{
  "_url": "https://github.com/PowerShell/PowerShell/issues/9908",
  "author": "fMichaleczek",
  "body": "<!-- Anything that looks like this is a comment and can't be seen after the Pull Request is created. -->\r\n\r\n# PR Summary\r\n\r\nModule Manifest can contain the following special variables : PSScriptRoot, PSEdition and EnabledExperimentalFeatures.\r\n\r\nThe aim of this PR is to extend the allowed variable list to :\r\n- PSHome\r\n- PSCulture,\r\n- PSUICulture,\r\n- IsCoreCLR,\r\n- IsLinux,\r\n- IsMacOS,\r\n- IsWindow\r\n\r\n## PR Context\r\n\r\nAs a PowerShell developper, I deal with cross platform and cross language, to allow more special variables let me handle more heterogeneous within the module manifest.\r\n\r\nThis PR is a followup of \r\n- [Allow automatic variable Is* inside PowerShell module manifest file](https://github.com/PowerShell/PowerShell/issues/9386)\r\n- [Current module manifest schema is not adequate to properly support cross-platform modules](https://github.com/PowerShell/PowerShell/issues/5541)\r\n\r\n## PR Checklist\r\n\r\n- [X] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [X] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` or `[ WIP ]` to the beginning of the title (the `WIP` bot will keep its status check at `Pending` while the prefix is present) and remove the prefix when the PR is ready.\r\n- **[Breaking changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)**\r\n    - [X] None\r\n    - **OR**\r\n    - [ ] [Experimental feature(s) needed](https://github.com/MicrosoftDocs/PowerShell-Docs/blob/staging/reference/6/Microsoft.PowerShell.Core/About/about_Experimental_Features.md)\r\n        - [ ] Experimental feature name(s): <!-- Experimental feature name(s) here -->\r\n- **User-facing changes**\r\n    - [] Not Applicable\r\n    - **OR**\r\n    - [X] [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed: <!-- Number/link of that issue here -->\r\n- **Testing - New and feature**\r\n    - [ ] N/A or can only be tested interactively\r\n    - **OR**\r\n    - [X] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n",
  "closed_at": "2020-06-16T17:06:55Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "[![CLA assistant check](https://cla.opensource.microsoft.com/pull/badge/signed)](https://cla.opensource.microsoft.com/PowerShell/PowerShell?pullRequest=9908) <br/>All CLA requirements met.",
      "created_at": "2019-06-16T18:46:04Z",
      "updated_at": "2020-10-20T05:06:50Z"
    },
    {
      "author": "fMichaleczek",
      "author_association": "NONE",
      "body": "@PoshChan Please rerun windows",
      "created_at": "2019-06-16T21:37:33Z",
      "updated_at": "2019-06-16T21:37:33Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@fMichaleczek, you are not authorized to request a rebuild",
      "created_at": "2019-06-16T21:37:51Z",
      "updated_at": "2019-06-16T21:37:51Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "@fMichaleczek seems to be a widespread issue with Azure's windows agents. Nothing to do but wait on that one, I'm afraid. \ud83d\ude42 ",
      "created_at": "2019-06-16T21:49:54Z",
      "updated_at": "2019-06-16T21:49:54Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "Close and reopen the PR to force Windows CI build working properly.",
      "created_at": "2019-06-17T17:14:25Z",
      "updated_at": "2019-06-17T17:14:25Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "To answer your question about what cmdlets to add, I'm going share details about something related that I have planned.\r\n\r\nI have a PR planned that I want to submit once I get some of the other debugging work I have ongoing finished is to prevent the debugger from stepping into a module manifest by default (i.e. treat them as if they have the DebuggerHidden attribute set on them -- something that you cannot do manually to a manifest at this time because it does not support the param statement).\r\n\r\nThe reason:\r\n\r\nI'm trying to improve debugging efficiency in PowerShell, and if I am stepping through code that invokes a command from a module that is not loaded, and I want to step into that command, I end up stepping into the manifest, and it can take a very long time to go through that process. I find debugging a manifest to be pretty useless because it's not really code (there really isn't much to see/do here).\r\n\r\nThis PR adds a bunch more variables and some additional commands to the manifest, but in my mind it's still not enough to warrant debugging.\r\n\r\nI think that this approach (that a manifest is not cannot be debugged) is a good measure for whether or not additional commands should be added to the manifest. The more we add, the more we open the opportunity for wanting to debug it, but it shouldn't be \"code\" per se...it should just be module metadata specified in a PowerShell-ish way.\r\n\r\nWith that in mind, I would avoid adding support for any commands other than those that we deem absolutely necessary in a manifest.",
      "created_at": "2019-06-18T16:02:13Z",
      "updated_at": "2019-06-18T16:02:13Z"
    },
    {
      "author": "fMichaleczek",
      "author_association": "NONE",
      "body": "@KirkMunro \r\nOk, I don't changed Permitted Cmdlets and will make an issue if it's necessary.\r\n\r\nFor our context, this code is valid with PS5+\r\n\r\n```\r\nSet-Content -Path .\\Test5-Dependencies.psm1 -Value @'\r\n    $env:IsLinux = $IsLinux -eq $true\r\n    $env:IsMacOS = $IsMacOS -eq $true\r\n    $env:IsWindows = (-not $IsLinux -or -not $IsMacOS) -and -not [System.Environment]::Is64BitProcess\r\n    $env:IsWindows64 = (-not $IsLinux -or -not $IsMacOS) -and [System.Environment]::Is64BitProcess\r\n'@\r\n\r\nSet-Content -Path .\\Test5.psm1 -Value @'\r\n    Remove-Module Test5-Dependencies\r\n'@\r\n\r\nSet-Content -Path .\\Test5.psd1 -Value @'\r\n@{\r\n    RootModule = \"Test5.psm1\"\r\n    ModuleVersion = '0.1.0'\r\n    NestedModules = \"Test5-Dependencies.psm1\"\r\n    RequiredAssemblies   = @(\r\n        if($env:IsLinux -eq 'true') {\r\n           Write-Host \"IsLinux\" -Foreground Green\r\n        }\r\n        elseif($env:IsMacOS -eq 'true') {\r\n            Write-Host \"IsMacOS\" -Foreground Green\r\n        }\r\n        elseif($env:IsWindows64 -eq 'true') {\r\n            Write-Host \"IsWindows64\" -Foreground Green\r\n        }\r\n        elseif($env:IsWindows -eq 'true') {\r\n            Write-Host \"IsWindows\" -Foreground Green\r\n        }\r\n    )\r\n}\r\n'@\r\nImport-Module .\\test5.psd1 -Force\r\nGet-Module test5*\r\n```\r\n\r\nAfter this change, this code is valid with PS7+\r\n\r\n```\r\nSet-Content -Path .\\test7.psd1 -Value @'\r\n@{\r\n    ModuleVersion = '0.1.0'\r\n    RequiredAssemblies   = @(\r\n        if($IsLinux) {\r\n           Write-Host \"IsLinux\" -Foreground Green\r\n        }\r\n        elseif($IsMacOS) {\r\n            Write-Host \"IsMacOS\" -Foreground Green\r\n        }\r\n        elseif($IsWindows) {\r\n            Write-Host \"IsWindows\" -Foreground Green\r\n        }\r\n    )\r\n}\r\n'@\r\nImport-Module .\\test7.psd1\r\nGet-Module test7\r\n```\r\nSo this PR is a beginning to handle 3 cases : Linux/MacOS/Windows but doesn't resolve all the problems like compatibility with 5.1 and native dll loading problems.",
      "created_at": "2019-06-18T16:48:23Z",
      "updated_at": "2019-06-18T16:48:23Z"
    },
    {
      "author": "fMichaleczek",
      "author_association": "NONE",
      "body": "It's possible to restart the CI ? The macos failed for an external reason.\r\nIn this kind of problem, do you prefer I ask or I submit a new  commit ?",
      "created_at": "2019-06-20T17:55:57Z",
      "updated_at": "2019-06-20T17:55:57Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@fMichaleczek \tI restarted the PR but it does not look like external reasons.",
      "created_at": "2019-06-21T01:19:50Z",
      "updated_at": "2019-06-21T01:19:50Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "@PoshChan please get failures",
      "created_at": "2019-06-21T02:09:51Z",
      "updated_at": "2019-06-21T02:09:51Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "@fMichaleczek you might try rebasing off of the current master branch here, by the looks of those.",
      "created_at": "2019-06-21T02:26:29Z",
      "updated_at": "2019-06-21T02:26:29Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I do not like this trend - after some time this file will turn into a script. I would prefer to keep the declarative nature of this file, which was originally meant in manifest design. Perhaps https://github.com/PowerShell/PowerShell-RFC/pull/188 could address this directly or indirectly.",
      "created_at": "2019-06-25T09:21:15Z",
      "updated_at": "2019-06-25T09:21:15Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "I second @iSazonov's opinion. I don't see the need to expand the allowed cmdlets. As for the variables, it makes sense to add `$IsWindows`, `$IsLinux`, `$IsMacOS`, but I don't see why a module manifest cares `$PSHome`.",
      "created_at": "2019-06-25T14:52:34Z",
      "updated_at": "2019-06-25T14:52:34Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "We have never even discussed alternatives to these variables in manifest file. The direction in RFC 188 seems more correct. \r\nIf the main intention is to make ported modules, then I would even say that there should not be anything related with the OS type in the manifest. The engine should be so smart to do the rough work for us.\r\n.Net Core allows us to control how native assemblies to load and we could make enhancements to benefit from this. For the rest we could maintain simplicity in the manifest and file structure.",
      "created_at": "2019-06-25T15:19:16Z",
      "updated_at": "2019-06-25T15:19:16Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "> The engine should be so smart to do the rough work for us.\r\n\r\nThere is a possibility that a module want to expose certain functions/cmdlets only on certain platforms, not all. In that case, `$IsWindows`, `$IsLinux` and `$IsMacOS` could be useful.",
      "created_at": "2019-06-25T16:18:20Z",
      "updated_at": "2019-06-25T16:18:20Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "> \r\n> \r\n> > The engine should be so smart to do the rough work for us.\r\n> \r\n> There is a possibility that a module want to expose certain functions/cmdlets only on certain platforms, not all. In that case, `$IsWindows`, `$IsLinux` and `$IsMacOS` could be useful.\r\n\r\nIndeed, I have one module that comes to mind where I need to do this.",
      "created_at": "2019-06-25T16:23:58Z",
      "updated_at": "2019-06-25T16:23:58Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> There is a possibility that a module want to expose certain functions/cmdlets only on certain platforms, not all. In that case, $IsWindows, $IsLinux and $IsMacOS could be useful.\r\n\r\nMy thoughts is that never discuss alternatives publicly and that preferred way is declarative, not script, manifests.\r\n\r\n Currently in the repo we have to use `#if !UNIX` to exclude code from compilation and a manifest per platform. It seems there is no better way in the case - we can not expose a cmdlet which is not compile. If a cmdlet compiled but can not be used on a platform (or we don't want to expose it), for the case (it is true for script cmdlet too) we could use an attribute (new parameter in existing attributes) to inform engine to load the cmdlet/function/alias only on platform specified in the attribute. (Verbose message could inform users that the cmdlet is not compatible.)\r\nOr we could have platform sections in manifests like:\r\n```\r\nWindows {\r\n    CmdletsToExport = @()\r\n}",
      "created_at": "2019-06-26T05:49:07Z",
      "updated_at": "2019-06-26T05:49:07Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "> Or we could have platform sections in manifests like:\r\n> \r\n> ```\r\n> Windows {\r\n>     CmdletsToExport = @()\r\n> }\r\n> ```\r\n\r\nInteresting. My original thinking was if that was implemented to be additive, such that the platform-specific properties are combined with the platform-agnostic properties in the manifest, I'd like it much better than having conditional logic here and there. It would also make it easier to view as a property file, which is its intent, and it would be easier to author correctly as well since it would be more about defining properties and less about conditional logic.\r\n\r\nThere is a problem though. What do you do for metadata that you want to define for multiple platforms, but not all platforms? Do you define it once for each platform, resulting in duplication? That's not great. So how could we specify properties for multiple platforms this way? That's where conditional logic comes in handy, because then I can do this (contrived, assumes that we get support for `Out-Printer` on macos but not on Linux):\r\n\r\n```PowerShell\r\n# ...\r\nCmdletsToExport = @(\r\n    'Out-String'\r\n    'Out-File'\r\n    'Out-Host'\r\n    'Out-Null'\r\n    if ($IsWindows -or $IsMacOS) {'Out-Printer'}\r\n)\r\n# ...\r\n```\r\n\r\nSince we already support conditional logic in manifest, I think this is probably the easiest path forward to success.\r\n\r\nThat said, I think we need to be minimalistic and only add the bare minimum variables that we know would be useful, i.e. `$IsWindows`, `$IsLinux`, and `$IsMacOS`. Others can be added in separate PRs if there is a driving need for them.\r\n\r\nI would also drop `$PSHome` from this PR, because module authors shouldn't be doing anything directly with that path, and if they do have that need, that may point to issues that should be addressed in a different manner.",
      "created_at": "2019-06-27T15:20:50Z",
      "updated_at": "2019-06-27T15:23:26Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "```powershell\r\nCmdletsToExport = @() # For all platforms\r\nRequiredAssemblies = @()\r\nWindows {\r\n    CmdletsToExport = @() # Additions for Windows platform\r\n    RequiredAssemblies = @()\r\n}\r\n```\r\n\r\nIf we want more features we could consider definitions like runtime.config.json.",
      "created_at": "2019-06-27T15:43:56Z",
      "updated_at": "2019-06-27T15:43:56Z"
    },
    {
      "author": "fMichaleczek",
      "author_association": "NONE",
      "body": "If a cmdlet is compatible with Linux x64 and not with Linux arm, this PR doesn't help. The only workaround is to test if a path exists. At a moment, the RID should be available in the system (I understand it's not a powershell's priority)\r\nI will update the PR before the end of the week.\r\n",
      "created_at": "2019-07-01T23:17:50Z",
      "updated_at": "2019-07-01T23:18:22Z"
    },
    {
      "author": "anmenaga",
      "author_association": "CONTRIBUTOR",
      "body": "Restarted CI-macos.",
      "created_at": "2019-07-08T21:18:03Z",
      "updated_at": "2019-07-08T21:18:03Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "This seems to have stalled.\r\n\r\nUnresolved discussion/decision points:\r\n\r\n- `$PSHome` and `$Home` -- should those be added?\r\n\r\n    Recommendation: Unless there is a specific use case that these are needed for right now, I would err on the conservative side and keep it simple for now.\r\n\r\n    Rationale: Those can be added later should the need arise.\r\n\r\n- `$IsWindows`, `$IsLinux`, and `$IsmacOS` vs a more declaritive manifest style that doesn't use variables?\r\n\r\n    Recommendation: Taking the variable approach for now solves the immediate need, so go with that to allow other modules such as `Microsoft.PowerShell.GraphicalTools` to start using it.\r\n\r\n    Rationale: Making manifests more declarative and less programmatic is worthy of a discussion, but that discussion should not get in the way of solving the immediate need. As long as we keep the list of variables and commands very small, we should be good for now. Also, as has been demonstrated on other discussion threads, the bar is very high for manifest format changes, and that's without introducing new syntax/keywords.\r\n\r\nIf we can agree with those recommendations, let's remove `$Home` and `$PSHome` from this PR and set it up to be merged in.\r\n\r\nIf someone disagrees with the removal of `$Home` and `$PSHome` because those are needed for a scenario right now, or if we really need to make this more complicated by discussing bigger manifest changes today, please chime in.",
      "created_at": "2019-08-15T14:47:13Z",
      "updated_at": "2019-10-11T23:35:17Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "cc @TylerLeonhardt Do you have an opinion here?",
      "created_at": "2019-08-18T19:58:49Z",
      "updated_at": "2019-08-18T19:58:49Z"
    },
    {
      "author": "TylerLeonhardt",
      "author_association": "MEMBER",
      "body": "I agree with Kirk that it would be nice to have `$Is*` variables to fill the immediate need of helping with crossplat modules that have different native libraries for each platform.\r\n\r\nThat said, what are we going to do when we need to pull in native libs that only work on `linux-arm` or some other specific runtime?\r\n\r\nIn those cases, `$Is*` is not enough.\r\n\r\nWhat we'll need to truly help cross-platform module dev is a change in PowerShellGet, the PowerShell Gallery, and PowerShell itself to handle bits that are specific to a runtime. That will be a lengthy change and something that's not coming in PSGet 3.0... So in the meantime, I'm in favor of allowing `$Is*` because of the utility and easy of use.",
      "created_at": "2019-08-19T22:20:51Z",
      "updated_at": "2019-08-19T22:20:51Z"
    },
    {
      "author": "anmenaga",
      "author_association": "CONTRIBUTOR",
      "body": "Personally, i agree with @KirkMunro - [for this PR - add just `$IsWindows`, `$IsLinux`, and `$IsMacOS`](https://github.com/PowerShell/PowerShell/pull/9908#issuecomment-521668023).\r\nBut I would like this to get reviewed by PS Committee to ensure that allowing new vars in manifests won't backfire in the future.",
      "created_at": "2019-10-11T20:20:38Z",
      "updated_at": "2019-10-11T20:20:38Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PowerShell/powershell-committee reviewed this and have concerns about usage that would limit cross-PowerShell modules supporting older versions of PowerShell.  Also, there have been other asks for changes in module manifest, so if we were to make such a breaking change, we should it holistically rather than just this aspect.  Although having these variables in the module manifest will make it simpler, you can replicate the same capability in a psm1 file while maintaining downlevel compatibility.",
      "created_at": "2019-11-14T00:49:52Z",
      "updated_at": "2019-11-14T00:49:52Z"
    },
    {
      "author": "TylerLeonhardt",
      "author_association": "MEMBER",
      "body": "@SteveL-MSFT an important scenario here is on _install_ time.\r\n\r\nBy allowing the `$Is*` variables, you give the ability for a module to require different dependencies for different platforms and only install the needed ones.\r\n\r\nThis is impossible to replicate by putting it in a psm1 because installing required dependencies would then be forced at _import_ time instead of _install_ time. Then the initial import will be forced to fetch dependencies (which will be harder to install in the correct scope)\r\n\r\nI urge @PowerShell/powershell-committee to reconsider as this is a very important scenario, especially for the future of xplat modules.",
      "created_at": "2019-11-14T04:16:28Z",
      "updated_at": "2019-11-14T04:27:08Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "I'd also like to point out that such a feature is _entirely_ opt-in. So any module author using the feature should be well aware that its use restricts their module to v7+\r\n\r\nI don't see a reason to raise compatibility concerns over an explicitly opt-in feature? \ud83e\udd14 ",
      "created_at": "2019-11-14T04:38:54Z",
      "updated_at": "2019-11-14T04:38:54Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> By allowing the $Is* variables, you give the ability for a module to require different dependencies for different platforms and only install the needed ones.\r\n\r\n@TylerLeonhardt What is the dependencies? Can you share examples?\r\n\r\nIn #11032 we are trying to address native dll resolving by using a folder tree. Perhaps we could enhance this on other scenarios.\r\nI'd prefer to do not delegate the problem to users and get solution OOB in engine. ",
      "created_at": "2019-11-14T10:05:34Z",
      "updated_at": "2019-11-14T10:11:34Z"
    },
    {
      "author": "TylerLeonhardt",
      "author_association": "MEMBER",
      "body": "I'm specifically talking about _module_ dependencies.\r\n\r\nLook at this [hack that we had to do in PoshNotify](https://github.com/Windos/PoshNotify/blob/master/src/PoshNotify.psm1#L1). That should not be the behavior we ask our customers to depend on if they want to write xplat models with different dependencies.\r\n\r\nNot only that, but the first import is slow having to install dependencies which is sad considering the module is about doing something in real time (notifications).\r\n\r\nI also think about the GraphicalTools module. We could probably leverage this feature (thus pulling down less junk) which will bring the size down drastically. That module only supports PowerShell 6+ so I would definitely opt-in to this behavior if given the opportunity.\r\n\r\n#11032 would not fix either of these because it's at the _install_ time that I care about.",
      "created_at": "2019-11-14T15:36:59Z",
      "updated_at": "2019-11-14T15:37:44Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "Related: https://github.com/PowerShell/PowerShell/issues/10958#issuecomment-553700107.\r\n\r\nAnd: https://github.com/PowerShell/PowerShell/issues/10251#issuecomment-553701465.\r\n\r\nY'all seem to want to keep manifests stagnant, with a focus on legacy support, but history has shown that manifest changes _do happen_ over time and _are necessary_. The changes that have happened over the past few years were not anticipated, but they still happened. Stop being the blocker for progress in this area so much, please, so that we can be forward thinking and move forward with better solutions. Otherwise we're going to be looking back again thinking gee, wouldn't it have been great if we fixed that problem before.\r\n\r\nAlso related, although in the other direction (this one is about backwards compatibility, and is an issue because not enough thought was put into manifest changes over time in the past): https://github.com/PowerShell/PowerShell/issues/10931.",
      "created_at": "2019-11-14T16:16:47Z",
      "updated_at": "2019-11-14T20:37:46Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> #11032 would not fix either of these because it's at the install time that I care about.\r\n\r\n@TylerLeonhardt  My proposal is to put all in one nuget using subfolders named as portable RID - PowerShell could be load right components in runtime based on current environment.\r\n\r\n```\r\nnotify.psd1\r\n    |\r\n    |--- linux-x64\r\n    |        |\r\n    |        |--- notify.psm1, notify.so\r\n    |\r\n    |--- osx-x64\r\n    |        |\r\n    |        |--- notify.psm1, notify.dylib\r\n```\r\n\r\nIt looks so simple that we could add this in days before 7.0 GA.",
      "created_at": "2019-11-15T07:39:42Z",
      "updated_at": "2019-11-15T07:41:43Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "@iSazonov that still has a significant disadvantage of requiring components for all platforms to be present in the nupkg, whereas if we have the ability to do an install-time check, we can have PSGet only pull dependencies for the platform required. \ud83d\ude42 \r\n\r\nThis is typically relatively minor, but for modules like GraphicalTools where the dependency is quite large, it would make a very big difference.",
      "created_at": "2019-11-15T13:34:45Z",
      "updated_at": "2019-11-15T13:34:45Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@vexx32 I don't see problems. You could split a project to some nugets, only keep proposed folder tree.",
      "created_at": "2019-11-15T14:02:51Z",
      "updated_at": "2019-11-15T14:02:51Z"
    },
    {
      "author": "rokejulianlockhart",
      "author_association": "NONE",
      "body": "@fMichaleczek, why was this closed?",
      "created_at": "2022-08-24T11:37:39Z",
      "updated_at": "2022-08-24T11:37:39Z"
    }
  ],
  "created_at": "2019-06-16T18:45:48Z",
  "number": 9908,
  "state": "closed",
  "title": "Add more Extra variables to be allowed to be referenced in module manifest",
  "updated_at": "2022-08-24T11:37:39Z"
}