{
  "_url": "https://github.com/PowerShell/PowerShell/issues/1171",
  "author": "vors",
  "body": "This is a final integration of SD changes for one-codebase\n\nOnce it's merged, the following should be done:\n- [x] re-create source-depot branch\n- [x] add tag for SD integration\n- [x] from the new source-depot branch, create `master-sd` branch. It would be used to produce Nano build and Full build and run existing tests on them. It will allow us to distinguish build problems from code regressions. master-sd should contain very tiny set of changes compare to source-depot.\n\nmaster-sd and source-depot would exists for references.\nNo development should be done there.\n",
  "closed_at": "2016-06-22T17:11:48Z",
  "comments": [
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "Note: failures in PSDebugging.Tests.ps1 are almost-consistent on all 3 platforms (same tests fails but for different reasons)\n\n### Windows\n\n```\nDescribing PowerShell Command Debugging\n [+] Should be able to step into debugging 949ms\n [+] Should be able to continue into debugging 429ms\n [-] Should be able to list help for debugging 404ms\n   Expected: {For instructions about how to customize your debugger prompt, type \"help about_prompt\".}\n   But was:  {}\n   101:         $line | Should Be  \"For instructions about how to customize your debugger prompt, type `\"help about_prompt`\".\n   at <ScriptBlock>, D:\\dev\\PowerShell\\test\\powershell\\PSDebugging.Tests.ps1: line 101\n [+] Should be able to step over debugging 470ms\n [+] Should be able to step out of debugging 374ms\n [+] Should be able to quit debugging 360ms\n [-] Should be able to list source code in debugging 372ms\n   Expected: {    1:* $function:foo = { 'bar' }}\n   But was:  {}\n   166:         $line | Should Be \"    1:* `$function:foo = { 'bar' }\"\n   at <ScriptBlock>, D:\\dev\\PowerShell\\test\\powershell\\PSDebugging.Tests.ps1: line 166\n [-] Should be able to get the call stack in debugging 390ms\n   Expected: {foo           {}        <No file>}\n   But was:  {}\n   185:         $line | Should Be \"foo           {}        <No file>\"\n   at <ScriptBlock>, D:\\dev\\PowerShell\\test\\powershell\\PSDebugging.Tests.ps1: line 185\n```\n\n### Linux (and OS X)\n\n```\nDescribing PowerShell Command Debugging\n [+] Should be able to step into debugging 2.62s\n [+] Should be able to continue into debugging 2.32s\n [-] Should be able to list help for debugging 2.37s\n   Exception calling \"Write\" with \"1\" argument(s): \"Broken pipe\"\n   at line: 95 in /home/travis/build/PowerShell/PowerShell/test/powershell/PSDebugging.Tests.ps1\n [+] Should be able to step over debugging 2.44s\n [+] Should be able to step out of debugging 2.63s\n [+] Should be able to quit debugging 2.54s\n [-] Should be able to list source code in debugging 2.37s\n   Exception calling \"Write\" with \"1\" argument(s): \"Broken pipe\"\n   at line: 162 in /home/travis/build/PowerShell/PowerShell/test/powershell/PSDebugging.Tests.ps1\n [-] Should be able to get the call stack in debugging 2.44s\n   Expected: {foo           {}        <No file>}\n   But was:  {}\n   at line: 185 in /home/travis/build/PowerShell/PowerShell/test/powershell/PSDebugging.Tests.ps1\n   185:         $line | Should Be \"foo           {}        <No file>\"\n```\n",
      "created_at": "2016-06-22T05:34:23Z",
      "updated_at": "2016-06-22T05:34:23Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "Windows CoreCLR tests results are also consistent with windows inbox powershell\n",
      "created_at": "2016-06-22T05:59:00Z",
      "updated_at": "2016-06-22T05:59:00Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I'd posit the test failures are due to changes around readfromstdin logic, as the tests use redirected stdin to send commands.\n",
      "created_at": "2016-06-22T06:52:02Z",
      "updated_at": "2016-06-22T06:52:02Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "Yeap, the head of psl-monad is @lzybkr's fix for stdin redirection logic. It's probably related.\n",
      "created_at": "2016-06-22T06:54:07Z",
      "updated_at": "2016-06-22T06:54:07Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "The stdin logic has been hairy at best, note the multiple pending console host tests.\n",
      "created_at": "2016-06-22T06:56:33Z",
      "updated_at": "2016-06-22T06:56:33Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "@andschwa I disabled these 3 tests on Linux, but enabled 5 existing tests on Windows and Mac. The total number of running test across all platforms is `(5 * 2) - 3 = +7` :D\n",
      "created_at": "2016-06-22T14:16:26Z",
      "updated_at": "2016-06-22T14:16:26Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "LGTM. We'll revisit tests.\n",
      "created_at": "2016-06-22T16:47:44Z",
      "updated_at": "2016-06-22T16:47:44Z"
    }
  ],
  "created_at": "2016-06-22T02:29:02Z",
  "number": 1171,
  "state": "closed",
  "title": "Integrate changes from SD between [SD:715912] and [SD:717473]",
  "updated_at": "2016-06-22T17:36:47Z"
}