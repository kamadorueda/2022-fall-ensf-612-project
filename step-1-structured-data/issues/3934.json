{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3934",
  "author": "iSazonov",
  "body": "Close #3751\r\n\r\nMotivation\r\n---\r\nPowerShell Core is a cross-platform, so a module author can write a module for only specific platform.\r\n\r\nEnhancement\r\n---\r\nNow in a module import time '#requires' support:\r\n\r\n#requires -OS Windows\r\n#requires -OS Linux\r\n#requires -OS OSX\r\n#requires -OS Unix\r\n#requires -OS Inbox\r\n#requires -OS IoT\r\n#requires -OS Nano\r\n\r\nHere:\r\n - Unix is Linux or OSX\r\n - InBox is IoT or Nano\r\n - Nano is Nano Server\r\n\r\nAdditional considerations\r\n---\r\nOur CI systems don't run tests for IoT and Nano so we have to run it in a special way.\r\n",
  "closed_at": "2017-06-14T23:18:09Z",
  "comments": [
    {
      "author": "rkeithhill",
      "author_association": "COLLABORATOR",
      "body": "Does this allow for:\r\n```posh\r\n#Requires -OS Windows,Linux\r\n```\r\nAlso, I thought the preferred term is `macOS` instead of `OSX`?\r\n",
      "created_at": "2017-06-05T16:26:22Z",
      "updated_at": "2017-06-05T16:26:22Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> #Requires -OS Windows,Linux\r\n\r\nNo, while only single value. It is good for a discussion.\r\n\r\n>  macOS  instead of  OSX \r\n\r\nI use names that we already use (`$isOSX`). No problem move to `macOS` if it will be approved.\r\n",
      "created_at": "2017-06-05T17:32:00Z",
      "updated_at": "2017-06-05T17:32:00Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT Have we conclusion from PowerShell-Committee?",
      "created_at": "2017-06-14T06:39:50Z",
      "updated_at": "2017-06-14T06:39:50Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov we had to cancel the committee meeting last week due to too many committee members being out, we're meeting today",
      "created_at": "2017-06-14T16:00:17Z",
      "updated_at": "2017-06-14T16:00:17Z"
    },
    {
      "author": "joeyaiello",
      "author_association": "CONTRIBUTOR",
      "body": "@PowerShell/powershell-committee discussed this and we'd rather expose this sort of behavior through other means. I still have a half-written RFC that has yet to come out (and I apologize for the delay there), but it's unlikely that we want this behavior. (Among other reasons, we don't want to completely block execution, e.g. of `#requires -OS Linux` on macOS.)\r\n\r\nAgain, until that RFC comes out, I think wrapping everything in an `$IsLinux` conditional is an acceptable workaround. ",
      "created_at": "2017-06-14T23:18:07Z",
      "updated_at": "2017-06-14T23:18:07Z"
    }
  ],
  "created_at": "2017-06-05T16:04:02Z",
  "number": 3934,
  "state": "closed",
  "title": "Enhance '#requires' directive to check OS",
  "updated_at": "2017-06-14T23:18:09Z"
}