{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2848",
  "author": "Francisco-Gamino",
  "body": "Fixing 'InFile parameter of Invoke-WebRequest doesn't work' #2754 \r\n\r\nFor Invoke-WebRequest/RestMethod InFile, we use a filestream to read the file as we populate the HttpRequestMessage. However, by the time we actual do the request, the file stream has already been disposed, and an exception is thrown. To work around this issue, a possible option is to use File.ReadAllBytes(filepath). However, with this approach, the file will be locked while is being read. In this current fix, I am creating a class member _fileStream to be used to read the file. Then, once we are done reading the file and making the request, we dispose the resource in the main finally block.\r\nAlso, I have added tests for both Invoke-WebRequest and Invoke-RestMethod using the -InFile parameter. These new tests cover both positive and negative test cases.\r\n\r\nFixing 'Missing command alias: iwr ' #1778\r\nAdded aliases 'iwr' for Invoke-WebRequest and 'irm' for Invoke-RestMethod. This PR includes the code changes as well as new tests.\r\n",
  "closed_at": "2017-02-01T18:14:25Z",
  "comments": [
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": ":shipit: Approved with minor changes suggested.",
      "created_at": "2016-12-07T23:11:15Z",
      "updated_at": "2016-12-07T23:11:43Z"
    },
    {
      "author": "Francisco-Gamino",
      "author_association": "CONTRIBUTOR",
      "body": "@mirichmo : I've addressed all your comments. Could you please take another look? Thanks.",
      "created_at": "2017-01-20T00:22:17Z",
      "updated_at": "2017-01-20T00:22:31Z"
    },
    {
      "author": "codecov-io",
      "author_association": "NONE",
      "body": "# [Codecov](https://codecov.io/gh/PowerShell/PowerShell/pull/2848?src=pr&el=h1) Report\n> :exclamation: No coverage uploaded for pull request head (`webrequest-fix@978ac4b`).\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/PowerShell/PowerShell/pull/2848?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `\u0394 = absolute <relative> (impact)`, `\u00f8 = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/PowerShell/PowerShell/pull/2848?src=pr&el=footer). Last update [d6daf1f...978ac4b](https://codecov.io/gh/PowerShell/PowerShell/compare/d6daf1f068fd5af110396680c290e73b85a80db4...978ac4b21a7b1b2cd2eaafe819040604b4b97cbb?src=pr&el=footer&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).",
      "created_at": "2017-01-31T23:10:35Z",
      "updated_at": "2017-01-31T23:10:35Z"
    },
    {
      "author": "Francisco-Gamino",
      "author_association": "CONTRIBUTOR",
      "body": "This PR has been merge.",
      "created_at": "2017-02-01T18:21:27Z",
      "updated_at": "2017-02-01T18:21:27Z"
    }
  ],
  "created_at": "2016-12-06T22:41:01Z",
  "number": 2848,
  "state": "closed",
  "title": "Fixing 'InFile parameter of Invoke-WebRequest doesn't work' and adding aliases (iwr for invoke-webrequest and irm for invoke-restmethod) to the web cmdlets.",
  "updated_at": "2017-03-27T06:08:09Z"
}