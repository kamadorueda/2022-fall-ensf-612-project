{
  "_url": "https://github.com/PowerShell/PowerShell/issues/1246",
  "author": "andschwa",
  "body": "Resolves #984.\n\nYou can simulate not having a TTY by running over SSH, a la `ssh localhost ./powershell test/powershell`.\n\nThis is passing tests, except for redirected stdin, which I need to revisit anyway.\n\nI don't totally like the approach here, but much of PowerShell mandates that the RawUI class exist, so it seems safest to guard its use of Console. I think it's probably better to check for interactivity (a bool) versus try/catches.\n\nAlso our Write-Host tests were bad.\n",
  "closed_at": "2016-07-02T00:20:03Z",
  "comments": [
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Notes to self:\n- [x] pull in latest PSReadLine\n- [x] fix -file path normalization\n- [x] fix `-` being cut to nothing\n",
      "created_at": "2016-06-30T23:19:49Z",
      "updated_at": "2016-07-01T18:54:19Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Thanks for all the help debugging @lzybkr. This passed (all the tests from SD) on OS X (meaning on Travis without a TTY, the main thing I was attempting to fix) and Windows and Linux.\n\nIt's re-running because I rebased, but this should be good-to-go once CI finishes.\n",
      "created_at": "2016-07-01T19:09:54Z",
      "updated_at": "2016-07-01T19:09:54Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Waiting for approval @lzybkr, @vors, @JamesWTruher.\n",
      "created_at": "2016-07-01T19:26:41Z",
      "updated_at": "2016-07-01T19:26:41Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "I have no expertise here, sign-off from @lzybkr would be enough.\n",
      "created_at": "2016-07-01T19:42:47Z",
      "updated_at": "2016-07-01T19:42:47Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "I sign off.\n",
      "created_at": "2016-07-01T20:34:08Z",
      "updated_at": "2016-07-01T20:34:08Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@lzybkr Can you review again? I think I found a much better solution throughout the RawUI.\n",
      "created_at": "2016-07-01T21:38:32Z",
      "updated_at": "2016-07-01T21:38:32Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "What the? How did I break Windows?\n",
      "created_at": "2016-07-01T21:45:48Z",
      "updated_at": "2016-07-01T21:45:48Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "This now partially resolves #1257 by bringing back the `ConsoleControl` implementation on Windows.\n\nI hate to have two console implementations, but we don't have a better option currently. There are some unfortunately hard to track down exceptions that can by thrown by `System.Console` when stdout is redirected, and the behavior is different between Windows and Linux.\n\nWhat's more, this at least enables things like Write-Progress and ReadLineSafe for Windows (by bringing back the original implementation), leaving us with a better one-codebase state for Windows, and simply missing some re-implementation on Linux.\n",
      "created_at": "2016-07-01T23:50:41Z",
      "updated_at": "2016-07-01T23:50:41Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "LGTM\n",
      "created_at": "2016-07-02T00:19:59Z",
      "updated_at": "2016-07-02T00:19:59Z"
    }
  ],
  "created_at": "2016-06-29T21:53:54Z",
  "number": 1246,
  "state": "closed",
  "title": "Guard RawUI when TTY is non-existent",
  "updated_at": "2016-07-02T00:20:03Z"
}