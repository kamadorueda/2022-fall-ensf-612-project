{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5934",
  "author": "mklement0",
  "body": "In order to abort execution of a script / function from inside a `trap` handler, you must use `break`.\r\n\r\nHowever, using `break` invariably also _outputs the error that triggered the trap_.\r\nWhile using `continue` instead does suppress the error, it doesn't _abort_ execution.\r\n\r\nThus, there is currently no way for traps to do their own, custom error reporting when the intent is to _abort_ execution.\r\n\r\nCustom error reporting is desirable as an alternative to the \"noisy\" default error output format (see also: #3647), especially when writing scripts or functions for use by non-PS-savvy end users; see also: [this SO question](https://stackoverflow.com/q/38064704/45375).\r\n\r\nCurrent behavior\r\n------------------\r\n\r\n```powershell\r\ntrap { $host.UI.WriteErrorLine($_); break }\r\n1/0  # provoke a terminating error\r\n```\r\n\r\nyields:\r\n\r\n```none\r\nAttempted to divide by zero.\r\nAttempted to divide by zero.\r\nAt C:\\Users\\MKT6\\Desktop\\pg\\pg.ps1:14 char:1\r\n+ 1/0\r\n+ ~~~\r\n    + CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException\r\n    + FullyQualifiedErrorId : RuntimeException\r\n```\r\n\r\nNote how the single-line, message-only representation generated by `$host.UI.WriteErrorLine($_)` is followed by the regular error output.\r\n\r\nDesired behavior \r\n-----------------\r\n\r\nPerhaps something like a `-Quiet` switch could be introduced that suppresses the default error output when `break` is used:\r\n\r\n```none\r\ntrap -Quiet { $host.UI.WriteErrorLine($_); break }\r\n1/0\r\n```\r\n\r\nwhich would yield:\r\n\r\n```none\r\nAttempted to divide by zero.\r\n```\r\n\r\nEnvironment data\r\n----------------\r\n\r\n\r\n```powershell\r\nPowerShell Core v6.0.0\r\n```\r\n",
  "closed_at": null,
  "comments": [],
  "created_at": "2018-01-18T14:16:10Z",
  "labels": [
    "WG-Language",
    "Issue-Discussion"
  ],
  "number": 5934,
  "state": "open",
  "title": "trap statement should provide a way to abort silently to support custom error output",
  "updated_at": "2018-01-18T14:39:19Z"
}