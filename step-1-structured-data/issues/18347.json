{
  "_url": "https://github.com/PowerShell/PowerShell/issues/18347",
  "author": "theuserbl",
  "body": "### Summary of the new feature / enhancement\r\n\r\nThe output of Get-ChildItem is VERY wide.\r\nEspecially on Unix.\r\n\r\n<img width=\"516\" alt=\"pwsh\" src=\"https://user-images.githubusercontent.com/8337032/197284313-032f0338-65f2-42bc-8bf0-f31e5ff713e6.png\">\r\n\r\nThere are so much space between the username and the group name. Most times the standard width of a terminal window on Linux isn't width enough.\r\n\r\nOn Windows are only four rows (Mode, LastWriteTime, Length and Name) instead of the six on Unix (UnixMode, User, Group, LastWriteTime, Size and Name), so it haven't so much effect. But it is also more width then needed.\r\n\r\n<img width=\"516\" alt=\"pwsh2\" src=\"https://user-images.githubusercontent.com/8337032/197287846-3d4918b3-7b7f-4fb5-a565-ea1dd7707e3f.png\">\r\n\r\nBtw: Why is the same column with the same thing on Unix called \"Size\" and on Windows called \"Length\" ?\r\n\r\n### Proposed technical implementation details (optional)\r\n\r\n_No response_",
  "closed_at": null,
  "comments": [
    {
      "author": "237dmitry",
      "author_association": "NONE",
      "body": "> Especially on Unix.\r\n\r\nThis depends on your custom settings of format data output. `Get-Command *-FormatData`\r\n\r\n![ArcoLinux_2022-10-22_00-27-26](https://user-images.githubusercontent.com/78153320/197291395-fb98ee22-c6bd-48db-8d76-4b412eaf0917.png)\r\n\r\n<details>\r\n<summary>CustomFormat.FileInfo.ps1xml</summary>\r\n\r\n```\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n\r\n<!--  Thanks to James O'Neill (jhoneill) -->\r\n\r\n<Configuration>\r\n  <SelectionSets>\r\n    <SelectionSet>\r\n      <Name>FileSystemTypes</Name>\r\n      <Types>\r\n        <TypeName>System.IO.DirectoryInfo</TypeName>\r\n        <TypeName>System.IO.FileInfo</TypeName>\r\n      </Types>\r\n    </SelectionSet>\r\n  </SelectionSets>\r\n\r\n<!-- ################ GLOBAL CONTROL DEFINITIONS ################ -->\r\n\r\n  <Controls>\r\n    <Control>\r\n      <Name>FileSystemTypes-GroupingFormat</Name>\r\n      <CustomControl>\r\n        <CustomEntries>\r\n          <CustomEntry>\r\n            <CustomItem>\r\n              <Frame>\r\n                <CustomItem>\r\n                  <Text AssemblyName=\"System.Management.Automation\" BaseName=\"FileSystemProviderStrings\" ResourceId=\"DirectoryDisplayGrouping\" />\r\n                  <ExpressionBinding>\r\n                    <ScriptBlock>\r\n\r\n                    $_.PSParentPath.Replace(\"Microsoft.PowerShell.Core\\FileSystem::\", \"\").Replace($HOME,\"~\")\r\n\r\n                    </ScriptBlock>\r\n                  </ExpressionBinding>\r\n                </CustomItem>\r\n              </Frame>\r\n            </CustomItem>\r\n          </CustomEntry>\r\n        </CustomEntries>\r\n      </CustomControl>\r\n    </Control>\r\n  </Controls>\r\n\r\n<!-- ################ VIEW DEFINITIONS ################ -->\r\n\r\n  <ViewDefinitions>\r\n\r\n<!-- Table View -->\r\n\r\n    <View>\r\n      <Name>children</Name>\r\n      <ViewSelectedBy>\r\n        <SelectionSetName>FileSystemTypes</SelectionSetName>\r\n      </ViewSelectedBy>\r\n      <GroupBy>\r\n        <PropertyName>PSParentPath</PropertyName>\r\n        <CustomControlName>FileSystemTypes-GroupingFormat</CustomControlName>\r\n      </GroupBy>\r\n      <TableControl>\r\n        <TableHeaders>\r\n          <TableColumnHeader>\r\n            <Label>UnixMode</Label>\r\n            <Width>10</Width>\r\n            <Alignment>left</Alignment>\r\n          </TableColumnHeader>\r\n          <TableColumnHeader>\r\n            <Label>ACL</Label>\r\n            <Width>5</Width>\r\n            <Alignment>right</Alignment>\r\n          </TableColumnHeader>\r\n          <TableColumnHeader>\r\n            <Label>User</Label>\r\n            <Width>7</Width>\r\n            <Alignment>right</Alignment>\r\n          </TableColumnHeader>\r\n          <TableColumnHeader>\r\n            <Label>Group</Label>\r\n            <Width>7</Width>\r\n            <Alignment>right</Alignment>\r\n          </TableColumnHeader>\r\n          <TableColumnHeader>\r\n            <Label>LastWriteTime</Label>\r\n            <Width>18</Width>\r\n            <Alignment>right</Alignment>\r\n          </TableColumnHeader>\r\n          <TableColumnHeader>\r\n            <Label>Size</Label>\r\n            <Width>7</Width>\r\n            <Alignment>right</Alignment>\r\n          </TableColumnHeader>\r\n          <TableColumnHeader>\r\n            <Label>Name</Label>\r\n          </TableColumnHeader>\r\n        </TableHeaders>\r\n        <TableRowEntries>\r\n          <TableRowEntry>\r\n            <Wrap />\r\n            <TableColumnItems>\r\n              <TableColumnItem>\r\n                <PropertyName>UnixMode</PropertyName>\r\n              </TableColumnItem>\r\n              <TableColumnItem>\r\n                <ScriptBlock>\r\n\r\n                switch ($_.UnixStat.ItemType)\r\n                {\r\n                    'NamedPipe'       { $a =  4096 }\r\n                    'CharacterDevice' { $a =  8192 }\r\n                    'Directory'       { $a = 16384 }\r\n                    'BlockDevice'     { $a = 24576 }\r\n                    'File'            { $a = 32768 }\r\n                    'SymbolicLink'    { $a = 40960 }\r\n                    'Socket'          { $a = 49152 }\r\n                }\r\n\r\n                [convert]::ToString(($_.UnixStat.Mode - $a),8)\r\n\r\n                </ScriptBlock>\r\n              </TableColumnItem>\r\n              <TableColumnItem>\r\n                <PropertyName>User</PropertyName>\r\n              </TableColumnItem>\r\n              <TableColumnItem>\r\n                <PropertyName>Group</PropertyName>\r\n              </TableColumnItem>\r\n              <TableColumnItem>\r\n                <ScriptBlock>\r\n\r\n                '{0,16:dd.MM.yyyy HH:mm}' -f $_.LastWriteTime\r\n\r\n                </ScriptBlock>\r\n              </TableColumnItem>\r\n              <TableColumnItem>\r\n                <ScriptBlock>\r\n\r\n                switch ($_)\r\n                {\r\n                    { $_ -is [System.IO.DirectoryInfo] } { $null }\r\n                    { $_.Length -gt 1TB } { '{0:#.#}T' -f ($_.Length / 1TB); break }\r\n                    { $_.Length -gt 1GB } { '{0:#.#}G' -f ($_.Length / 1GB); break }\r\n                    { $_.Length -gt 1MB } { '{0:#.#}M' -f ($_.Length / 1MB); break }\r\n                    { $_.Length -gt 1KB } { '{0:#.#}K' -f ($_.Length / 1KB); break }\r\n                                  default { $_.Length }\r\n                }\r\n\r\n                </ScriptBlock>\r\n              </TableColumnItem>\r\n              <TableColumnItem>\r\n                <PropertyName>NameString</PropertyName>\r\n              </TableColumnItem>\r\n            </TableColumnItems>\r\n          </TableRowEntry>\r\n        </TableRowEntries>\r\n      </TableControl>\r\n    </View>\r\n\r\n<!-- List View -->\r\n\r\n    <View>\r\n      <Name>children</Name>\r\n      <ViewSelectedBy>\r\n        <SelectionSetName>FileSystemTypes</SelectionSetName>\r\n      </ViewSelectedBy>\r\n      <GroupBy>\r\n        <PropertyName>PSParentPath</PropertyName>\r\n        <CustomControlName>FileSystemTypes-GroupingFormat</CustomControlName>\r\n      </GroupBy>\r\n      <ListControl>\r\n        <ListEntries>\r\n          <ListEntry>\r\n            <ListItems>\r\n              <ListItem>\r\n                <PropertyName>Name</PropertyName>\r\n              </ListItem>\r\n              <ListItem>\r\n                <Label>Size</Label>\r\n                <ScriptBlock>\r\n\r\n                switch ($_)\r\n                {\r\n                    { $_ -is [System.IO.DirectoryInfo] } { $null }\r\n                    { $_.Length -gt 1TB } { '{0:#.#}T' -f ($_.Length / 1TB); break }\r\n                    { $_.Length -gt 1GB } { '{0:#.#}G' -f ($_.Length / 1GB); break }\r\n                    { $_.Length -gt 1MB } { '{0:#.#}M' -f ($_.Length / 1MB); break }\r\n                    { $_.Length -gt 1KB } { '{0:#.#}K' -f ($_.Length / 1KB); break }\r\n                                  default { $_.Length }\r\n                }\r\n\r\n                </ScriptBlock>\r\n              </ListItem>\r\n              <ListItem>\r\n                <PropertyName>CreationTime</PropertyName>\r\n              </ListItem>\r\n              <ListItem>\r\n                <PropertyName>LastWriteTime</PropertyName>\r\n              </ListItem>\r\n              <ListItem>\r\n                <PropertyName>LastAccessTime</PropertyName>\r\n              </ListItem>\r\n              <ListItem>\r\n                <PropertyName>UnixMode</PropertyName>\r\n              </ListItem>\r\n              <ListItem>\r\n                <Label>ACL</Label>\r\n                <ScriptBlock>\r\n\r\n                switch ($_.UnixStat.ItemType)\r\n                {\r\n                    'NamedPipe'       { $a =  4096 }\r\n                    'CharacterDevice' { $a =  8192 }\r\n                    'Directory'       { $a = 16384 }\r\n                    'BlockDevice'     { $a = 24576 }\r\n                    'File'            { $a = 32768 }\r\n                    'SymbolicLink'    { $a = 40960 }\r\n                    'Socket'          { $a = 49152 }\r\n                }\r\n\r\n                [convert]::ToString(($_.UnixStat.Mode - $a),8)\r\n\r\n                </ScriptBlock>\r\n              </ListItem>\r\n              <ListItem>\r\n                <PropertyName>LinkType</PropertyName>\r\n              </ListItem>\r\n              <ListItem>\r\n                <PropertyName>Target</PropertyName>\r\n              </ListItem>\r\n            </ListItems>\r\n          </ListEntry>\r\n        </ListEntries>\r\n      </ListControl>\r\n    </View>\r\n\r\n<!-- Wide View -->\r\n\r\n    <View>\r\n      <Name>children</Name>\r\n      <ViewSelectedBy>\r\n        <SelectionSetName>FileSystemTypes</SelectionSetName>\r\n      </ViewSelectedBy>\r\n      <GroupBy>\r\n        <PropertyName>PSParentPath</PropertyName>\r\n        <CustomControlName>FileSystemTypes-GroupingFormat</CustomControlName>\r\n      </GroupBy>\r\n      <WideControl>\r\n        <WideEntries>\r\n          <WideEntry>\r\n            <WideItem>\r\n              <PropertyName>NameString</PropertyName>\r\n            </WideItem>\r\n          </WideEntry>\r\n        </WideEntries>\r\n      </WideControl>\r\n    </View>\r\n\r\n  </ViewDefinitions>\r\n</Configuration>\r\n\r\n```\r\n</details>",
      "created_at": "2022-10-21T21:34:47Z",
      "updated_at": "2022-10-21T22:10:01Z"
    },
    {
      "author": "MartinGC94",
      "author_association": "CONTRIBUTOR",
      "body": "There was a recent update to address this: https://github.com/PowerShell/PowerShell/pull/18183 so the next preview will probably include this change.",
      "created_at": "2022-10-21T23:12:12Z",
      "updated_at": "2022-10-21T23:12:12Z"
    },
    {
      "author": "jhoneill",
      "author_association": "NONE",
      "body": "This is a duplicate. \r\nI've posted a replacement of for the file XML \r\nhttps://gist.github.com/jhoneill/4b74aa82cb5b4608687b24dddef293f8 \r\nThis removes some columns but you can have exactly the columns you wish.  Because the `get-childitem` outputs file and directory objects and they go through a generic formatter, it is preferable to make the columns fixed width, so user, group and size are wider than they need to be. \r\n\n\n<blockquote><img src=\"https://github.githubassets.com/images/modules/gists/gist-og-image.png\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> Gist</div><div><strong><a href=\"https://gist.github.com/jhoneill/4b74aa82cb5b4608687b24dddef293f8\">files.ps1xml1</a></strong></div><div>GitHub Gist: instantly share code, notes, and snippets.</div></blockquote>",
      "created_at": "2022-10-22T11:04:28Z",
      "updated_at": "2022-10-22T11:04:30Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Unix and Windows have different format definitions for `FileSystemInfo` type as Unix has the additional properties.  However, it seems that it should be `Length` instead of `Size` to be consistent.  The Cmdlets WG should discuss.  Since this is formatting only, it's not considered a breaking change.\r\n\r\nAs noted, the format definition takes either no column width or a fixed width.  It's dynamic only if you specify no column width and determines the appropriate width based on a few instances then uses that for the rest.  So this means that if `root` (4 chars) is the first few instances, then something longer, you'll get a truncated name for anything > 4 chars.\r\n\r\nIt might make sense to reduce the column width for user/group to maybe 8 chars?  It's currently set to 10 chars (https://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/FormatAndOutput/DefaultFormatters/FileSystem_format_ps1xml.cs#L49-L50)\n\n<blockquote><img src=\"https://repository-images.githubusercontent.com/49609581/aad0ad80-cdec-11ea-8248-a37bc0571bfd\" width=\"48\" align=\"right\"><div><img src=\"https://github.githubassets.com/favicons/favicon.svg\" height=\"14\"> GitHub</div><div><strong><a href=\"https://github.com/PowerShell/PowerShell\">PowerShell/FileSystem_format_ps1xml.cs at master \u00b7 PowerShell/PowerShell</a></strong></div><div>PowerShell for every system! Contribute to PowerShell/PowerShell development by creating an account on GitHub.</div></blockquote>",
      "created_at": "2022-10-24T18:23:08Z",
      "updated_at": "2022-10-24T18:23:10Z"
    },
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "the reason it's size is because that's how this value is referred to on Unix. It can also be different than length. Or rather, size is completely legitimate for a directory on Unix where the property `Length` is not even present for DirectoryInfo. I would rather keep these separate as there may be some code that uses this missing property to disambiguate between directories and files.",
      "created_at": "2022-10-24T18:28:10Z",
      "updated_at": "2022-10-24T18:28:10Z"
    }
  ],
  "created_at": "2022-10-21T21:03:31Z",
  "labels": [
    "Issue-Enhancement",
    "WG-Cmdlets",
    "Needs-Triage"
  ],
  "number": 18347,
  "state": "open",
  "title": "More compact Get-ChildItem output",
  "updated_at": "2022-10-24T18:28:10Z"
}