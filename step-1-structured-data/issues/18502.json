{
  "_url": "https://github.com/PowerShell/PowerShell/issues/18502",
  "author": "conioh",
  "body": "### Prerequisites\n\n- [X] Write a descriptive title.\n- [X] Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\n- [X] Search the existing issues.\n- [X] Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\n- [X] Refer to [Differences between Windows PowerShell 5.1 and PowerShell](https://docs.microsoft.com/powershell/scripting/whats-new/differences-from-windows-powershell).\n\n### Steps to reproduce\n\nWhen launching an executable from PowerShell, with `$PSNativeCommandArgumentPassing <> \"Legacy\"` if the arguments contain a comma, the variables/cmdlets are evaluated, but the results of the evaluation don't go to the child process.\r\n\r\n```powershell\r\nC:\\Windows\\System32> $PSNativeCommandArgumentPassing = \"Windows\"\r\nC:\\Windows\\System32> $x = \"lame\"\r\nC:\\Windows\\System32> cmd /c echo x=$x\r\nx=lame\r\nC:\\Windows\\System32> cmd /c echo a,x=$x\r\na,x=$x\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo x=$x }\r\nDEBUG: 2022-11-09 20:39:02.1548 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:39:02.1551 ParameterBinding Information: 0 :     BIND argument [/c echo x=lame]\r\nDEBUG: 2022-11-09 20:39:02.1702 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nx=lame\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo a,x=$x }\r\nDEBUG: 2022-11-09 20:39:07.6131 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:39:07.6134 ParameterBinding Information: 0 :     BIND argument [/c echo a,x=$x]\r\nDEBUG: 2022-11-09 20:39:07.6194 ParameterBinding Information: 0 : CALLING BeginProcessing\r\na,x=$x\r\nC:\\Windows\\System32> $PSNativeCommandArgumentPassing = \"Standard\"\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo x=$x }\r\nDEBUG: 2022-11-09 20:39:22.6507 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:39:22.6510 ParameterBinding Information: 0 :     BIND cmd line arg [/c] to position [0]\r\nDEBUG: 2022-11-09 20:39:22.6513 ParameterBinding Information: 0 :     BIND cmd line arg [echo] to position [1]\r\nDEBUG: 2022-11-09 20:39:22.6515 ParameterBinding Information: 0 :     BIND cmd line arg [x=lame] to position [2]\r\nDEBUG: 2022-11-09 20:39:22.6681 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nx=lame\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo a,x=$x }\r\nDEBUG: 2022-11-09 20:39:25.2418 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:39:25.2422 ParameterBinding Information: 0 :     BIND cmd line arg [/c] to position [0]\r\nDEBUG: 2022-11-09 20:39:25.2425 ParameterBinding Information: 0 :     BIND cmd line arg [echo] to position [1]\r\nDEBUG: 2022-11-09 20:39:25.2428 ParameterBinding Information: 0 :     BIND cmd line arg [a,x=$x] to position [2]\r\nDEBUG: 2022-11-09 20:39:25.2666 ParameterBinding Information: 0 : CALLING BeginProcessing\r\na,x=$x\r\nC:\\Windows\\System32> $PSNativeCommandArgumentPassing = \"Legacy\"\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo x=$x }\r\nDEBUG: 2022-11-09 20:39:36.2214 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:39:36.2218 ParameterBinding Information: 0 :     BIND argument [/c echo x=lame]\r\nDEBUG: 2022-11-09 20:39:36.2561 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nx=lame\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo a,x=$x }\r\nDEBUG: 2022-11-09 20:39:38.4751 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:39:38.4755 ParameterBinding Information: 0 :     BIND argument [/c echo a,x=lame]\r\nDEBUG: 2022-11-09 20:39:38.4822 ParameterBinding Information: 0 : CALLING BeginProcessing\r\na,x=lame\r\nC:\\Windows\\System32>\r\n```\r\n\r\nWe can see that the cmdlet is executed (or attempted):\r\n\r\n```powershell\r\nC:\\Windows\\System32> $PSNativeCommandArgumentPassing = \"Standard\"\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo cd=$(Get-Location) }\r\nDEBUG: 2022-11-09 20:48:15.0675 ParameterBinding Information: 0 : BIND NAMED cmd line args [Get-Location]\r\nDEBUG: 2022-11-09 20:48:15.0677 ParameterBinding Information: 0 : BIND POSITIONAL cmd line args [Get-Location]\r\nDEBUG: 2022-11-09 20:48:15.0679 ParameterBinding Information: 0 : BIND cmd line args to DYNAMIC parameters.\r\nDEBUG: 2022-11-09 20:48:15.0681 ParameterBinding Information: 0 : MANDATORY PARAMETER CHECK on cmdlet [Get-Location]\r\nDEBUG: 2022-11-09 20:48:15.0683 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:15.0685 ParameterBinding Information: 0 : CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:15.0687 ParameterBinding Information: 0 : CALLING EndProcessing\r\nDEBUG: 2022-11-09 20:48:15.0762 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:48:15.0767 ParameterBinding Information: 0 :     BIND cmd line arg [/c] to position [0]\r\nDEBUG: 2022-11-09 20:48:15.0770 ParameterBinding Information: 0 :     BIND cmd line arg [echo] to position [1]\r\nDEBUG: 2022-11-09 20:48:15.0773 ParameterBinding Information: 0 :     BIND cmd line arg [cd=C:\\Windows\\System32] to position [2]\r\nDEBUG: 2022-11-09 20:48:15.0943 ParameterBinding Information: 0 : CALLING BeginProcessing\r\ncd=C:\\Windows\\System32\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo foo,cd=$(Get-Location) }\r\nDEBUG: 2022-11-09 20:48:18.2709 ParameterBinding Information: 0 : BIND NAMED cmd line args [Get-Location]\r\nDEBUG: 2022-11-09 20:48:18.2712 ParameterBinding Information: 0 : BIND POSITIONAL cmd line args [Get-Location]\r\nDEBUG: 2022-11-09 20:48:18.2714 ParameterBinding Information: 0 : BIND cmd line args to DYNAMIC parameters.\r\nDEBUG: 2022-11-09 20:48:18.2717 ParameterBinding Information: 0 : MANDATORY PARAMETER CHECK on cmdlet [Get-Location]\r\nDEBUG: 2022-11-09 20:48:18.2719 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:18.2721 ParameterBinding Information: 0 : CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:18.2723 ParameterBinding Information: 0 : CALLING EndProcessing\r\nDEBUG: 2022-11-09 20:48:18.2815 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:48:18.2819 ParameterBinding Information: 0 :     BIND cmd line arg [/c] to position [0]\r\nDEBUG: 2022-11-09 20:48:18.2821 ParameterBinding Information: 0 :     BIND cmd line arg [echo] to position [1]\r\nDEBUG: 2022-11-09 20:48:18.2824 ParameterBinding Information: 0 :     BIND cmd line arg [foo,cd=$(Get-Location)] to position [2]\r\nDEBUG: 2022-11-09 20:48:18.2999 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nfoo,cd=$(Get-Location)\r\nC:\\Windows\\System32> Trace-Command -PSHost -Name \"ParameterBinding\" { cmd /c echo foo,cd=$(Get-Locatio) }\r\nDEBUG: 2022-11-09 20:48:24.7753 ParameterBinding Information: 0 : BIND PIPELINE object to parameters: [Out-Default]\r\nDEBUG: 2022-11-09 20:48:24.7756 ParameterBinding Information: 0 :     PIPELINE object TYPE = [System.Management.Automation.ErrorRecord]\r\nDEBUG: 2022-11-09 20:48:24.7759 ParameterBinding Information: 0 :     RESTORING pipeline parameter's original values\r\nDEBUG: 2022-11-09 20:48:24.7762 ParameterBinding Information: 0 :     Parameter [InputObject] PIPELINE INPUT ValueFromPipeline NO COERCION\r\nDEBUG: 2022-11-09 20:48:24.7765 ParameterBinding Information: 0 :     BIND arg [The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.] to parameter [InputObject]\r\nDEBUG: 2022-11-09 20:48:24.7768 ParameterBinding Information: 0 :         BIND arg [The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.] to param [InputObject] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.7771 ParameterBinding Information: 0 : MANDATORY PARAMETER CHECK on cmdlet [Out-Default]\r\nDEBUG: 2022-11-09 20:48:24.7774 ParameterBinding Information: 0 : CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:24.7778 ParameterBinding Information: 0 :     BIND NAMED cmd line args [Out-LineOutput]\r\nDEBUG: 2022-11-09 20:48:24.7785 ParameterBinding Information: 0 :         BIND arg [Microsoft.PowerShell.Commands.Internal.Format.ConsoleLineOutput] to parameter [LineOutput]\r\nDEBUG: 2022-11-09 20:48:24.7803 ParameterBinding Information: 0 :             COERCE arg to [System.Object]\r\nDEBUG: 2022-11-09 20:48:24.7830 ParameterBinding Information: 0 :                 Parameter and arg types the same, no coercion is needed.\r\nDEBUG: 2022-11-09 20:48:24.7845 ParameterBinding Information: 0 :             BIND arg [Microsoft.PowerShell.Commands.Internal.Format.ConsoleLineOutput] to param [LineOutput] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.7853 ParameterBinding Information: 0 :     BIND POSITIONAL cmd line args [Out-LineOutput]\r\nDEBUG: 2022-11-09 20:48:24.7858 ParameterBinding Information: 0 :     MANDATORY PARAMETER CHECK on cmdlet [Out-LineOutput]\r\nDEBUG: 2022-11-09 20:48:24.7863 ParameterBinding Information: 0 :     CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:24.7868 ParameterBinding Information: 0 :     BIND PIPELINE object to parameters: [Out-LineOutput]\r\nDEBUG: 2022-11-09 20:48:24.7873 ParameterBinding Information: 0 :         PIPELINE object TYPE = [System.Management.Automation.ErrorRecord]\r\nDEBUG: 2022-11-09 20:48:24.7878 ParameterBinding Information: 0 :         RESTORING pipeline parameter's original values\r\nDEBUG: 2022-11-09 20:48:24.7885 ParameterBinding Information: 0 :         Parameter [InputObject] PIPELINE INPUT ValueFromPipeline NO COERCION\r\nDEBUG: 2022-11-09 20:48:24.7890 ParameterBinding Information: 0 :         BIND arg [The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.] to parameter [InputObject]\r\nDEBUG: 2022-11-09 20:48:24.7895 ParameterBinding Information: 0 :             BIND arg [The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.] to param [InputObject] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.7901 ParameterBinding Information: 0 :     MANDATORY PARAMETER CHECK on cmdlet [out-lineoutput]\r\nDEBUG: 2022-11-09 20:48:24.7904 ParameterBinding Information: 0 :     CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:24.7911 ParameterBinding Information: 0 :         BIND NAMED cmd line args [Format-Default]\r\nDEBUG: 2022-11-09 20:48:24.7916 ParameterBinding Information: 0 :         BIND POSITIONAL cmd line args [Format-Default]\r\nDEBUG: 2022-11-09 20:48:24.7920 ParameterBinding Information: 0 :         MANDATORY PARAMETER CHECK on cmdlet [Format-Default]\r\nDEBUG: 2022-11-09 20:48:24.7924 ParameterBinding Information: 0 :         CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:24.7928 ParameterBinding Information: 0 :         BIND PIPELINE object to parameters: [Format-Default]\r\nDEBUG: 2022-11-09 20:48:24.7932 ParameterBinding Information: 0 :             PIPELINE object TYPE = [System.Management.Automation.ErrorRecord]\r\nDEBUG: 2022-11-09 20:48:24.7937 ParameterBinding Information: 0 :             RESTORING pipeline parameter's original values\r\nDEBUG: 2022-11-09 20:48:24.7946 ParameterBinding Information: 0 :             Parameter [InputObject] PIPELINE INPUT ValueFromPipeline NO COERCION\r\nDEBUG: 2022-11-09 20:48:24.7954 ParameterBinding Information: 0 :             BIND arg [The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.] to parameter [InputObject]\r\nDEBUG: 2022-11-09 20:48:24.7967 ParameterBinding Information: 0 :                 BIND arg [The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.] to param [InputObject] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.7974 ParameterBinding Information: 0 :         MANDATORY PARAMETER CHECK on cmdlet [format-default]\r\nDEBUG: 2022-11-09 20:48:24.7978 ParameterBinding Information: 0 :         CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:24.8372 ParameterBinding Information: 0 :             BIND NAMED cmd line args [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8377 ParameterBinding Information: 0 :                 BIND arg [True] to parameter [Off]\r\nDEBUG: 2022-11-09 20:48:24.8381 ParameterBinding Information: 0 :                     COERCE arg to [System.Management.Automation.SwitchParameter]\r\nDEBUG: 2022-11-09 20:48:24.8384 ParameterBinding Information: 0 :                         Parameter and arg types the same, no coercion is needed.\r\nDEBUG: 2022-11-09 20:48:24.8388 ParameterBinding Information: 0 :                     BIND arg [True] to param [Off] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.8392 ParameterBinding Information: 0 :             BIND POSITIONAL cmd line args [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8395 ParameterBinding Information: 0 :             MANDATORY PARAMETER CHECK on cmdlet [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8399 ParameterBinding Information: 0 :             CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:24.8402 ParameterBinding Information: 0 :             CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:24.8406 ParameterBinding Information: 0 :             CALLING EndProcessing\r\nDEBUG: 2022-11-09 20:48:24.8539 ParameterBinding Information: 0 :             BIND NAMED cmd line args [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8544 ParameterBinding Information: 0 :                 BIND arg [1] to parameter [Version]\r\nDEBUG: 2022-11-09 20:48:24.8548 ParameterBinding Information: 0 :                     Executing DATA GENERATION metadata: [Microsoft.PowerShell.Commands.SetStrictModeCommand+ArgumentToPSVersionTransformationAttribute]\r\nDEBUG: 2022-11-09 20:48:24.8553 ParameterBinding Information: 0 :                         result returned from DATA GENERATION: 1.0\r\nDEBUG: 2022-11-09 20:48:24.8556 ParameterBinding Information: 0 :                     COERCE arg to [System.Version]\r\nDEBUG: 2022-11-09 20:48:24.8560 ParameterBinding Information: 0 :                         Parameter and arg types the same, no coercion is needed.\r\nDEBUG: 2022-11-09 20:48:24.8564 ParameterBinding Information: 0 :                     Executing VALIDATION metadata: [Microsoft.PowerShell.Commands.SetStrictModeCommand+ValidateVersionAttribute]\r\nDEBUG: 2022-11-09 20:48:24.8568 ParameterBinding Information: 0 :                     BIND arg [1.0] to param [Version] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.8571 ParameterBinding Information: 0 :             BIND POSITIONAL cmd line args [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8575 ParameterBinding Information: 0 :             MANDATORY PARAMETER CHECK on cmdlet [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8578 ParameterBinding Information: 0 :             CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:24.8582 ParameterBinding Information: 0 :             CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:24.8585 ParameterBinding Information: 0 :             CALLING EndProcessing\r\nDEBUG: 2022-11-09 20:48:24.8592 ParameterBinding Information: 0 :             BIND NAMED cmd line args [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8595 ParameterBinding Information: 0 :                 BIND arg [1] to parameter [Version]\r\nDEBUG: 2022-11-09 20:48:24.8599 ParameterBinding Information: 0 :                     Executing DATA GENERATION metadata: [Microsoft.PowerShell.Commands.SetStrictModeCommand+ArgumentToPSVersionTransformationAttribute]\r\nDEBUG: 2022-11-09 20:48:24.8604 ParameterBinding Information: 0 :                         result returned from DATA GENERATION: 1.0\r\nDEBUG: 2022-11-09 20:48:24.8607 ParameterBinding Information: 0 :                     COERCE arg to [System.Version]\r\nDEBUG: 2022-11-09 20:48:24.8610 ParameterBinding Information: 0 :                         Parameter and arg types the same, no coercion is needed.\r\nDEBUG: 2022-11-09 20:48:24.8614 ParameterBinding Information: 0 :                     Executing VALIDATION metadata: [Microsoft.PowerShell.Commands.SetStrictModeCommand+ValidateVersionAttribute]\r\nDEBUG: 2022-11-09 20:48:24.8618 ParameterBinding Information: 0 :                     BIND arg [1.0] to param [Version] SUCCESSFUL\r\nDEBUG: 2022-11-09 20:48:24.8621 ParameterBinding Information: 0 :             BIND POSITIONAL cmd line args [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8625 ParameterBinding Information: 0 :             MANDATORY PARAMETER CHECK on cmdlet [Set-StrictMode]\r\nDEBUG: 2022-11-09 20:48:24.8628 ParameterBinding Information: 0 :             CALLING BeginProcessing\r\nDEBUG: 2022-11-09 20:48:24.8632 ParameterBinding Information: 0 :             CALLING ProcessRecord\r\nDEBUG: 2022-11-09 20:48:24.8635 ParameterBinding Information: 0 :             CALLING EndProcessing\r\nGet-Locatio: The term 'Get-Locatio' is not recognized as a name of a cmdlet, function, script file, or executable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.\r\nDEBUG: 2022-11-09 20:48:24.8905 ParameterBinding Information: 0 : BIND NAMED native application line args [C:\\Windows\\system32\\cmd.exe]\r\nDEBUG: 2022-11-09 20:48:24.8912 ParameterBinding Information: 0 :     BIND cmd line arg [/c] to position [0]\r\nDEBUG: 2022-11-09 20:48:24.8917 ParameterBinding Information: 0 :     BIND cmd line arg [echo] to position [1]\r\nDEBUG: 2022-11-09 20:48:24.8928 ParameterBinding Information: 0 :     BIND cmd line arg [foo,cd=$(Get-Locatio)] to position [2]\r\nDEBUG: 2022-11-09 20:48:24.9049 ParameterBinding Information: 0 : CALLING BeginProcessing\r\nfoo,cd=$(Get-Locatio)\r\nC:\\Windows\\System32>\r\n```\n\n### Expected behavior\n\n```console\nC:\\Foo> docker run --rm -it --mount type=bind,src=$(Get-Location),dst=C:\\target mcr.microsoft.com/windows/servercore:10.0.20348.887 powershell.exe\r\nWindows PowerShell\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nInstall the latest PowerShell for new features and improvements! https://aka.ms/PSWindows\r\n\r\nPS C:\\> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      5.1.20348.859\r\nPSEdition                      Desktop\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nBuildVersion                   10.0.20348.859\r\nCLRVersion                     4.0.30319.42000\r\nWSManStackVersion              3.0\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\n\r\n\r\nPS C:\\>\n```\n\n\n### Actual behavior\n\n```console\nC:\\Foo> docker run --rm -it --mount type=bind,src=$(Get-Location),dst=C:\\target mcr.microsoft.com/windows/servercore:10.0.20348.887 powershell.exe\r\ndocker: Error response from daemon: invalid mount config for type \"bind\": invalid mount path: '$(Get-Location)' mount path must be absolute.\r\nSee 'docker run --help'.\r\nC:\\Foo>\n```\n\n\n### Error details\n\n_No response_\n\n### Environment data\n\n```powershell\nC:\\> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.3.0\r\nPSEdition                      Core\r\nGitCommitId                    7.3.0\r\nOS                             Microsoft Windows 10.0.22621\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\n```\n\n\n### Visuals\n\n_No response_",
  "closed_at": null,
  "comments": [
    {
      "author": "mklement0",
      "author_association": "CONTRIBUTOR",
      "body": "Wow - that is very unfortunate. The workaround for now is to double-quote the argument (`cmd /c echo \"a,x=$x\"`).\r\n\r\nThe problem isn't Windows-specific; Unix repro: `/bin/echo a,$HOME` and even `/bin/echo a, $HOME`; that is, a trailing unquoted `,` in an argument prevents expansion of the _next_ one.\r\n\r\nNote that there's an older, similar bug: `/bin/echo -foo=$HOME` doesn't expand either (there are [several bugs related to `-`-prefixed arguments](https://github.com/PowerShell/PowerShell/issues?q=is%3Aissue+is%3Aopen+in%3Atitle+argument+parsing+passing)):\r\n* #14587\r\n\r\n",
      "created_at": "2022-11-09T20:42:32Z",
      "updated_at": "2022-11-09T20:42:32Z"
    },
    {
      "author": "conioh",
      "author_association": "NONE",
      "body": "@mklement0, thanks. This is very helpful.\r\n\r\nI'm sure there are lots of other bugs here (I know some of them up close \u2639\ufe0f), but this is a regression which makes it even worse.",
      "created_at": "2022-11-09T20:54:35Z",
      "updated_at": "2022-11-09T20:54:35Z"
    },
    {
      "author": "237dmitry",
      "author_association": "NONE",
      "body": "\r\n\r\n```powershell\r\n\r\n$ $PSNativeCommandArgumentPassing = 'Legacy' \r\n$ /bin/echo a,$PShome\r\na,/opt/microsoft/powershell/7\r\n```\r\nBut:\r\n```powershell\r\n$ /bin/echo -foo=$PShome\r\n-foo=$PShome\r\n```",
      "created_at": "2022-11-09T23:22:45Z",
      "updated_at": "2022-11-09T23:22:45Z"
    }
  ],
  "created_at": "2022-11-09T18:56:09Z",
  "number": 18502,
  "state": "open",
  "title": "PowerShell 7.3 doesn't pass variable values / cmdlet results arguments to child processes when comma is present",
  "updated_at": "2022-11-09T23:22:45Z"
}