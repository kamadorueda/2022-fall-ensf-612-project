{
  "_url": "https://github.com/PowerShell/PowerShell/issues/8626",
  "author": "kvprasoon",
  "body": "## PR Summary\r\n\r\n<!-- summarize your PR between here and the checklist -->\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [x] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [x] Issue filed - Issue link:https://github.com/PowerShell/PowerShell/issues/5690\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2019-07-11T20:23:58Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "There is an Issue for gMSA. @kvprasoon Did you investigations for this?",
      "created_at": "2019-01-23T08:49:20Z",
      "updated_at": "2019-01-23T08:49:20Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "> There is an Issue for gMSA. @kvprasoon Did you investigations for this?\r\n\r\nI saw it and will go through it. ",
      "created_at": "2019-01-25T05:37:10Z",
      "updated_at": "2019-01-25T05:37:10Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PaulHigin can you re-review?  Looks like @kvprasoon addressed your concerns",
      "created_at": "2019-02-01T18:52:41Z",
      "updated_at": "2019-02-01T18:52:41Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@kvprasoon for validation, you can use the CIM cmdlets to call the WMI instance method Win32_Service.GetSecurityDescriptor() to verify the SD was changed correctly.  I believe there's an existing test that creates a test service so you can reuse that code.",
      "created_at": "2019-02-11T17:32:11Z",
      "updated_at": "2019-02-11T17:32:11Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "@PaulHigin Thanks, I have created #8872 for `Get-Service` . I will have the changes done for the review comments in upcoming weekends.",
      "created_at": "2019-02-12T18:22:34Z",
      "updated_at": "2019-02-12T18:22:43Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "> @kvprasoon for validation, you can use the CIM cmdlets to call the WMI instance method Win32_Service.GetSecurityDescriptor() to verify the SD was changed correctly.  I believe there's an existing test that creates a test service so you can reuse that code.\r\n\r\n\r\n`GetSecurityDescriptor()` method returns a returnvalue, hence I though using `SC SDSHOW`  as it will give the exact output which can be compared with the input.\r\n",
      "created_at": "2019-02-18T16:44:18Z",
      "updated_at": "2019-02-18T16:44:32Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "Hi @PaulHigin , I have updated with required changes and unit tests and CI has failed, seems like not related to this commit.\r\n\r\nDoc changes: https://github.com/MicrosoftDocs/PowerShell-Docs/pull/3880 \r\n\r\nCc: @SteveL-MSFT ",
      "created_at": "2019-03-12T19:29:46Z",
      "updated_at": "2019-03-25T18:24:53Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@PoshChan \tPlease get test failures\r\n",
      "created_at": "2019-03-29T22:25:20Z",
      "updated_at": "2019-03-29T22:26:09Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, all requests start with the magic word `Please`.",
      "created_at": "2019-03-29T22:25:26Z",
      "updated_at": "2019-03-29T22:26:16Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@PoshChan Please get test failures",
      "created_at": "2019-03-29T22:26:39Z",
      "updated_at": "2019-03-29T22:26:39Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, did not find any test failures or test failures were not published to results",
      "created_at": "2019-03-29T22:27:04Z",
      "updated_at": "2019-03-29T22:27:51Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, did not find any test failures or test failures were not published to results",
      "created_at": "2019-03-29T22:27:05Z",
      "updated_at": "2019-03-29T22:27:44Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, did not find any test failures or test failures were not published to results",
      "created_at": "2019-03-29T22:27:06Z",
      "updated_at": "2019-03-29T22:27:38Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, your last commit had 3 failures in `PowerShell-CI-windows`\r\n### Set/New/Remove-Service cmdlet tests.Set-Service test cases on the services with dependent relationship.Set-Service can stop a service with dependency\r\n  Error: Expected exactly 'Running', but got Stopped.\r\n```stacktrace\r\nat <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 374\r\n374:             (Get-Service $testservicename1).Status | Should -BeExactly \"Running\"\r\n```\r\n### Set/New/Remove-Service cmdlet tests.Set-Service test cases on the services with dependent relationship.Set-Service cannot stop a service with running dependent service\r\n  Error: Expected exactly 'Running', but got Stopped.\r\n```stacktrace\r\nat <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 374\r\n374:             (Get-Service $testservicename1).Status | Should -BeExactly \"Running\"\r\n```\r\n### Set/New/Remove-Service cmdlet tests.Set-Service test cases on the services with dependent relationship.Set-Service can stop a service with running dependent service by parameter -Force\r\n  Error: Expected exactly 'Running', but got Stopped.\r\n```stacktrace\r\nat <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 374\r\n374:             (Get-Service $testservicename1).Status | Should -BeExactly \"Running\"\r\n```\r\n",
      "created_at": "2019-03-29T22:27:07Z",
      "updated_at": "2019-03-29T22:27:07Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@PoshChan please get test failures",
      "created_at": "2019-04-08T22:47:03Z",
      "updated_at": "2019-04-08T22:47:03Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, test results were not published for PowerShell-CI-linux at vstfs:///Build/Build/19649",
      "created_at": "2019-04-08T22:47:19Z",
      "updated_at": "2019-04-08T22:47:44Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, test results were not published for PowerShell-CI-macos at vstfs:///Build/Build/19648",
      "created_at": "2019-04-08T22:47:20Z",
      "updated_at": "2019-04-08T22:47:39Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, test results were not published for PowerShell-CI-static-analysis at vstfs:///Build/Build/19650",
      "created_at": "2019-04-08T22:47:21Z",
      "updated_at": "2019-04-08T22:47:34Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, your last commit had 2 failures in `PowerShell-CI-windows`\r\nSet/New/Remove-Service cmdlet tests.Set-Service can change credentials of a service\r\n```powershell\r\nExpected a value, but got $null or empty.\r\nat <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 183\r\n183:             $service | Should -Not -BeNullOrEmpty\r\n```\r\nSet/New/Remove-Service cmdlet tests.Get-Service can get the 'UserName' of a service\r\n```powershell\r\nExpected a value, but got $null or empty.\r\nat <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 304\r\n304:             $service | Should -Not -BeNullOrEmpty\r\n```\r\n",
      "created_at": "2019-04-08T22:47:22Z",
      "updated_at": "2019-04-08T22:47:22Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "Hope there is nothing pending from my side here.\r\n\r\nCc @SteveL-MSFT @TravisEz13  @PaulHigin @daxian-dbw @adityapatwardhan ",
      "created_at": "2019-05-31T17:35:28Z",
      "updated_at": "2019-06-18T02:54:50Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@PoshChan Please rerun windows",
      "created_at": "2019-06-17T18:54:10Z",
      "updated_at": "2019-06-17T18:54:10Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, could not find build at: , error: Invoke-RestMethod : {\"$id\":\"1\",\"innerException\":null,\"message\":\"The requested build 24524 could not be found.\",\"typeName\":\"Microsoft.TeamFoundation.Build.WebApi.BuildNotFoundException, Microsoft.TeamFoundation.Build2.WebApi\",\"typeKey\":\"BuildNotFoundException\",\"errorCode\":0,\"eventId\":3000}\r\nAt D:\\home\\site\\wwwroot\\Modules\\AzDevOps\\AzDevOps.psm1:7 char:9\r\n+         Invoke-RestMethod -Uri $url -Authentication Basic -Credential ...\r\n+         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : InvalidOperation: (Method: GET, Reques\\u2026PowerShell/6.2.0\r\n}:HttpRequestMessage) [Invoke-RestMethod], HttpResponseException\r\n+ FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeRestMethodCommand\r\n",
      "created_at": "2019-06-17T18:54:49Z",
      "updated_at": "2019-06-17T18:55:21Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@PoshChan Please remind me in 1 hour",
      "created_at": "2019-06-17T18:54:59Z",
      "updated_at": "2019-06-17T18:54:59Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, this is the reminder you requested 1 hour ago",
      "created_at": "2019-06-17T19:55:14Z",
      "updated_at": "2019-06-17T19:55:14Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "CI fails as no 7.x endpoints available, issue https://github.com/PowerShell/PowerShell/issues/9999 ",
      "created_at": "2019-06-25T01:04:15Z",
      "updated_at": "2019-06-25T01:04:42Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@PoshChan Please remind me in 1 hour",
      "created_at": "2019-06-25T17:48:28Z",
      "updated_at": "2019-06-25T17:48:28Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13, this is the reminder you requested 1 hour ago",
      "created_at": "2019-06-25T18:49:31Z",
      "updated_at": "2019-06-25T18:49:31Z"
    },
    {
      "author": "kvprasoon",
      "author_association": "CONTRIBUTOR",
      "body": "@SteveL-MSFT CI is failing due to below error I think. I've closed #9999 \r\n\r\n```\r\n  Describing Set/New/Remove-Service cmdlet tests\r\nThe password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\r\n\r\nMore help is available by typing NET HELPMSG 2245.\r\n\r\nThe password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\r\n\r\nMore help is available by typing NET HELPMSG 2245.\r\n\r\nThe password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\r\n\r\nMore help is available by typing NET HELPMSG 2245.\r\n\r\nNew-Service : Service ' (testsetcredential)' cannot be created due to the following error: The account name is invalid or does not exist, or the password is invalid for the account name specified.\r\nAt D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1:181 char:24\r\n+             $service = New-Service @parameters\r\n+                        ~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : PermissionDenied: (testsetcredential:String) [New-Service], ServiceCommandException\r\n+ FullyQualifiedErrorId : CouldNotNewService,Microsoft.PowerShell.Commands.NewServiceCommand\r\n \r\nThe user name could not be found.\r\n\r\nMore help is available by typing NET HELPMSG 2221.\r\n\r\nThe user name could not be found.\r\n\r\nMore help is available by typing NET HELPMSG 2221.\r\n\r\n++++++++++++++++++++++++++++\r\n    [-] Set-Service can change credentials of a service 357ms\r\n      Expected a value, but got $null or empty.\r\n      182:             $service | Should -Not -BeNullOrEmpty\r\n      at <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 182\r\nNew-Service : Service ' (testgetservice)' cannot be created due to the following error: The account name is invalid or does not exist, or the password is invalid for the account name specified.\r\nAt D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1:302 char:24\r\n+             $service = New-Service @startparameters\r\n+                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : PermissionDenied: (testgetservice:String) [New-Service], ServiceCommandException\r\n+ FullyQualifiedErrorId : CouldNotNewService,Microsoft.PowerShell.Commands.NewServiceCommand\r\n \r\n++++++++\r\n    [-] Get-Service can get the 'UserName' of a service 155ms\r\n      Expected a value, but got $null or empty.\r\n      303:             $service | Should -Not -BeNullOrEmpty\r\n      at <ScriptBlock>, D:\\a\\1\\s\\test\\powershell\\Modules\\Microsoft.PowerShell.Management\\Set-Service.Tests.ps1: line 303\r\n+++++++\r\n\r\n    Context Set-Service test cases on the services with dependent relationship\r\nThe user name could not be found.\r\n\r\nMore help is available by typing NET HELPMSG 2221.\r\n```",
      "created_at": "2019-07-02T14:50:52Z",
      "updated_at": "2019-07-02T14:50:52Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@kvprasoon Thanks for your contribution",
      "created_at": "2019-07-11T20:24:16Z",
      "updated_at": "2019-07-11T20:24:16Z"
    },
    {
      "author": "msftbot[bot]",
      "author_association": "NONE",
      "body": ":tada:`v7.0.0-preview.2` has been released which incorporates this pull request.:tada:\n\nHandy links:\n* [Release Notes](https://github.com/PowerShell/PowerShell/releases/tag/v7.0.0-preview.2)\n",
      "created_at": "2019-07-17T20:56:08Z",
      "updated_at": "2019-07-17T20:56:08Z"
    }
  ],
  "created_at": "2019-01-11T18:06:01Z",
  "number": 8626,
  "state": "closed",
  "title": "Add -SecurityDescriptorSddl parameter to Set-Service",
  "updated_at": "2019-07-17T20:56:09Z"
}