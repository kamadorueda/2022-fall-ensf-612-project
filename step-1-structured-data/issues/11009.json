{
  "_url": "https://github.com/PowerShell/PowerShell/issues/11009",
  "author": "guhuajun",
  "body": "# Steps to reproduce\r\n\r\n1. docker pull mcr.microsoft.com/powershell:nanoserver-1903\r\n2. docker run --rm -i mcr.microsoft.com/powershell:nanoserver-1903 pwsh -c \"& { Get-CimInstance -Class Win32_Process }\"\r\n\r\n# Expected behavior\r\n```none\r\nPS C:\\Users\\admin> Get-CimInstance -ClassName Win32_Process                                                         \r\n                                                                                                                     \r\nProcessId Name                                                               HandleCount WorkingSetSize VirtualSize  \r\n--------- ----                                                               ----------- -------------- -----------  \r\n0         System Idle Process                                                0           8192           8192         \r\n4         System                                                             5862        131072         3948544      \r\n56        Secure System                                                      0           24317952       2232320      \r\n104       Registry                                                           0           61591552       258736128    \r\n460       smss.exe                                                           53          901120         2203359744000\r\n716       csrss.exe                                                          888         3915776        2203416748032\r\n800       wininit.exe                                                        164         4775936        2203387940864\r\n872       services.exe                                                       903         8056832        2203386822656\r\n892       LsaIso.exe                                                         43          2498560        2203368558592\r\n900       lsass.exe                                                          2147        18436096       2203423879168\r\n```\r\n\r\n# Actual behavior\r\n```none\r\n$ docker run --rm -i mcr.microsoft.com/powershell:nanoserver-1903 pwsh -c \"& { Get-CimInstance -Class Win32_Process }\"                         \r\nGet-CimInstance : FAILED                                                                                                                       \r\nAt line:1 char:5                                                                                                                               \r\n+ & { Get-CimInstance -Class Win32_Process }                                                                                                   \r\n+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~                                                                                                     \r\n+ CategoryInfo          : NotSpecified: (:) [Get-CimInstance], CimException                                                                    \r\n+ FullyQualifiedErrorId : Microsoft.Management.Infrastructure.CimException,Microsoft.Management.Infrastructure.CimCmdlets.GetCimInstanceCommand\r\n```\r\n\r\n# Environment data\r\ndocker run --rm -i mcr.microsoft.com/powershell:nanoserver-1903 pwsh -c \"& { $PSVersionTable }\"\r\n```none\r\nName                           Value                       \r\n----                           -----                       \r\nPSVersion                      6.2.3                       \r\nPSEdition                      Core                        \r\nGitCommitId                    6.2.3                       \r\nOS                             Microsoft Windows 10.0.18362\r\nPlatform                       Win32NT                     \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}       \r\nPSRemotingProtocolVersion      2.3                         \r\nSerializationVersion           1.1.0.1                     \r\nWSManStackVersion              3.0                         \r\n```\r\n\r\ndocker info\r\n```\r\n$ docker info                                                                       \r\nClient:                                                                             \r\n Debug Mode: false                                                                  \r\n                                                                                    \r\nServer:                                                                             \r\n Containers: 0                                                                      \r\n  Running: 0                                                                        \r\n  Paused: 0                                                                         \r\n  Stopped: 0                                                                        \r\n Images: 20                                                                         \r\n Server Version: 19.03.4                                                            \r\n Storage Driver: windowsfilter                                                      \r\n  Windows:                                                                          \r\n Logging Driver: json-file                                                          \r\n Plugins:                                                                           \r\n  Volume: local                                                                     \r\n  Network: ics internal l2bridge l2tunnel nat null overlay private transparent      \r\n  Log: awslogs etwlogs fluentd gcplogs gelf json-file local logentries splunk syslog\r\n Swarm: inactive                                                                    \r\n Default Isolation: hyperv                                                          \r\n Kernel Version: 10.0 18362 (18362.1.amd64fre.19h1_release.190318-1202)             \r\n Operating System: Windows 10 Pro Version 1903 (OS Build 18362.418)                 \r\n OSType: windows                                                                    \r\n Architecture: x86_64                                                               \r\n CPUs: 4                                                                            \r\n Total Memory: 7.927GiB                                                             \r\n Name: my-workbook                                                              \r\n ID: FVWP:2J5A:6OYE:5AQV:VURP:W7B2:FB3L:OP5O:CRSP:MR6P:B5QT:DEVF                    \r\n Docker Root Dir: C:\\ProgramData\\Docker                                             \r\n Debug Mode: true                                                                   \r\n  File Descriptors: -1                                                              \r\n  Goroutines: 28                                                                    \r\n  System Time: 2019-11-07T16:19:09.6436622+08:00                                    \r\n  EventsListeners: 1                                                                \r\n Registry: https://index.docker.io/v1/                                              \r\n Labels:                                                                            \r\n Experimental: false                                                                \r\n Insecure Registries:                                                               \r\n  127.0.0.0/8                                                                       \r\n Registry Mirrors:                                                                                                           \r\n Live Restore Enabled: false                                                        \r\n Product License: Community Engine\r\n```\r\n",
  "closed_at": null,
  "comments": [],
  "created_at": "2019-11-07T08:20:28Z",
  "number": 11009,
  "state": "open",
  "title": "Get-CimInstance failed in mcr.microsoft.com/powershell:nanoserver-1903",
  "updated_at": "2021-01-15T18:46:42Z"
}