{
  "_url": "https://github.com/PowerShell/PowerShell/issues/486",
  "author": "palladia",
  "body": " Work item #254 \n",
  "closed_at": "2016-02-08T20:31:42Z",
  "comments": [
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Thanks, this is almost done.\n\nThe `Remove-Item` tests need to be fixed too. They have a couple issues: they use a hard-coded `/tmp/` folder which is going to be strange on Windows (other tests need to be checked for this too), and they leave around `testfile.txt`.\n",
      "created_at": "2016-02-04T21:29:44Z",
      "updated_at": "2016-02-04T21:29:44Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "Interesting.  If you run all the pester tests, no file is left behind in /tmp, but if you just run Remove-Item test, you do get a /tmp/testfile.txt.   Probably another test is cleaning up the file. :)\n\nI will see what I can do about the hard-coded /tmp...\n",
      "created_at": "2016-02-04T21:46:51Z",
      "updated_at": "2016-02-04T21:46:51Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "Cleaned up hard-coding of paths, and fixed some bugs in Pester scripts.  All scripts now run cleanly on Linux and CoreCLR Windows.\n",
      "created_at": "2016-02-05T23:04:30Z",
      "updated_at": "2016-02-05T23:04:30Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "This is good so far. I still had two tests fail locally, documented above. The 38 tests due to an invalid handle still fail on the CI server per #488, but there's not much we can do about it.\n\nI quite like the improvements using the test drive and `Join-Path` :smile: \n",
      "created_at": "2016-02-06T00:02:06Z",
      "updated_at": "2016-02-06T00:02:06Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "So you created an account, logged in, changed user name, and you want $USERNAME to show new name without logging out and then back in?\n",
      "created_at": "2016-02-06T00:04:06Z",
      "updated_at": "2016-02-06T00:04:06Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "No, this shouldn't depend on `$USERNAME`. I'm saying that the home directory on Windows != `C:\\Users\\$USERNAME`, that's a false assumption.\n",
      "created_at": "2016-02-06T00:05:43Z",
      "updated_at": "2016-02-06T00:05:43Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "How about ElapsedMilliseconds > 500 && < 1500?\n",
      "created_at": "2016-02-06T00:06:25Z",
      "updated_at": "2016-02-06T00:06:25Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I think that would work for the duration.\n\nFor the home path, I think we'll just need to match on `\\Users\\.*`; I didn't see an easy way to determine its value besides the environment variable we're already testing.\n",
      "created_at": "2016-02-06T00:07:33Z",
      "updated_at": "2016-02-06T00:07:33Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "OK, pushed changes to the two tests per our discussions.\n",
      "created_at": "2016-02-06T00:32:50Z",
      "updated_at": "2016-02-06T00:32:50Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Fantastic, zero failing on my machine (37 on AppVeyor, but oh well for now). :smiley:\n\nChanges approved. Please rebase onto master and squash, and we'll merge.\n",
      "created_at": "2016-02-06T00:41:11Z",
      "updated_at": "2016-02-06T00:41:11Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "I rebased and it says it's up-to-date.  Please merge.\n",
      "created_at": "2016-02-08T16:39:28Z",
      "updated_at": "2016-02-08T16:39:28Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Okay, I'll amend feb27c17e5afa94523a040cd3f8a5fb6f87a911d myself then, just a minute.\n",
      "created_at": "2016-02-08T18:58:39Z",
      "updated_at": "2016-02-08T18:58:39Z"
    }
  ],
  "created_at": "2016-02-04T16:48:27Z",
  "number": 486,
  "state": "closed",
  "title": "Clean up temp files in pester scripts",
  "updated_at": "2016-02-08T20:31:45Z"
}