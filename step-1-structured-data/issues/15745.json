{
  "_url": "https://github.com/PowerShell/PowerShell/issues/15745",
  "author": "L-Markham",
  "body": "### Prerequisites\n\n- [X] Write a descriptive title.\n- [X] Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\n- [X] Search the existing issues.\n- [ ] Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\n- [x] Refer to [Differences between Windows PowerShell 5.1 and PowerShell](https://docs.microsoft.com/powershell/scripting/whats-new/differences-from-windows-powershell).\n\n### Steps to reproduce\n\nThis is essentially identical to [this](https://github.com/pulumi/pulumi-azure-native/issues/646) issue. Except the \"solution\" in that thread is not working for me, and it was really not a solution in the first place, so the issue should have never been closed.\r\n\r\nTo give a quick summary: the `New-AzCdnDeliveryRuleCondition` is faulty. If you specify the Operator parameter to be _Any_, then it does not allow a _MatchValue_ parameter to be specified. This is a problem because _MatchValue_ is a required parameter for the `New-AzCdnDeliveryRuleCondition` command. \r\n\r\nHere is an example of what I am trying to accomplish:\r\n`$deliveryRuleCondition = New-AzCdnDeliveryRuleCondition -MatchVariable RequestHeader -Operator \"Any\" -Selector \"origin\"`\r\n\r\nThe command fails because I am not specifying a _MatchValue_ parameter. But when I do specify one (even an empty list as suggested in the linked issue) it fails.\r\n\r\nError Examples when specifying _MatchValue_:\r\n- `Long running operation failed with status 'Failed'. Additional Info:'{\"ErrorMessage\":\"Invalid\r\n     | RulesEngineConfig: (Match value(s) must not be provided for Operator 'Any').\"}'`\r\n- Attempting empty List solution - `Cannot bind argument to parameter 'MatchValue' because it is an empty array.`\r\n\r\nBut as I said, leaving MatchValue blank returns an error as well. Are there any workaround I could use to create a CDN Delivery Rule Condition via Powershell? It is a requirement that it is automated via Powershell.\n\n### Expected behavior\n\n```console\nNew-AzCdnDeliveryRuleCondition -MatchVariable RequestHeader -Operator \"Any\" -Selector \"origin\" -MatchValue \"AnyString\"\r\n\r\n#I expect this to work, or for MatchValue to not be required\n```\n\n\n### Actual behavior\n\n```console\n# The above throws an error. Omitting MatchValue throws an error.\n```\n\n\n### Error details\n\n_No response_\n\n### Environment data\n\n```powershell\nName                           Value\r\n----                           -----\r\nPSVersion                      5.1.18362.1171\r\nPSEdition                      Desktop\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nBuildVersion                   10.0.18362.1171\r\nCLRVersion                     4.0.30319.42000\r\nWSManStackVersion              3.0\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\n```\n\n\n### Visuals\n\n_No response_",
  "closed_at": "2021-07-08T20:20:49Z",
  "comments": [],
  "created_at": "2021-07-08T19:40:24Z",
  "number": 15745,
  "state": "closed",
  "title": "Can't use the 'Any' Operator when calling New-AzCdnDeliveryRuleCondition",
  "updated_at": "2021-07-08T20:20:51Z"
}