{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3222",
  "author": "PetSerAl",
  "body": "Type data for `System.Array` type contains single alias property `Count` -> `Length`. It was good for consistency, as `ICollection.Count` is implemented explicitly by arrays and was not visible while other collections types do not have `Length` property. But since PowerShell v3 it is possible to reference explicitly implemented interface members. So, this alias property no longer necessary. It also cause some headaches with `ConvertTo-Json` cmdlet:\r\n```powershell\r\nPS> ConvertTo-Json (,1)\r\n[\r\n  1\r\n]\r\nPS> ConvertTo-Json ([PSObject](,1))\r\n{\r\n  \"value\": [\r\n    1\r\n  ],\r\n  \"Count\": 1\r\n}\r\nPS> Remove-TypeData System.Array\r\nPS> ConvertTo-Json (,1)\r\n[\r\n  1\r\n]\r\nPS> ConvertTo-Json ([PSObject](,1))\r\n[\r\n  1\r\n]\r\n```\r\n",
  "closed_at": "2017-03-01T20:58:04Z",
  "comments": [
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "It feels reasonable to remove the AliasProperty `Count` from `System.Array`, given that powershell now exposes the `Count` property implementation from `ICollection` interface. Feel free to submit a PR, the AliasProperty is defined [here](https://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/engine/Types_Ps1Xml.generated.cs#L34).\r\n\r\n~~As for `ConvertTo-Json`, the issue you listed seems to have been fixed in powershell core:~~",
      "created_at": "2017-02-28T06:06:23Z",
      "updated_at": "2017-02-28T17:20:43Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw What build do you use? I see the issue in alfa.16 (Windows 10 14936):\r\n```powershell\r\nPS C:\\Program Files\\PowerShell\\6.0.0.16> ConvertTo-Json ([psobject](,1))\r\n{\r\n    \"value\":  [\r\n                  1\r\n              ],\r\n    \"Count\":  1\r\n}\r\n```",
      "created_at": "2017-02-28T14:33:24Z",
      "updated_at": "2017-02-28T14:38:14Z"
    },
    {
      "author": "PetSerAl",
      "author_association": "CONTRIBUTOR",
      "body": "@daxian-dbw Is it OK to edit `Types_Ps1Xml.generated.cs` directly? I mean it have `generated` in name and this header:\r\n```\r\n//------------------------------------------------------------------------------\r\n// <auto-generated>\r\n//     This code was generated by a tool.\r\n//\r\n//     Changes to this file may cause incorrect behavior and will be lost if\r\n//     the code is regenerated.\r\n// </auto-generated>\r\n//------------------------------------------------------------------------------\r\n```\r\nIt looks like it was automatically generated from `Types.ps1xml` file, but I can not find this file in repository.",
      "created_at": "2017-02-28T16:17:27Z",
      "updated_at": "2017-02-28T16:17:27Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@PetSerAl Now `Types.ps1xml` is in code for faster Powershell start. You can modify `Types_Ps1Xml.generated.cs` (see the file history on GitHub).",
      "created_at": "2017-02-28T16:22:42Z",
      "updated_at": "2017-02-28T16:23:00Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "The file was generated to keep the ps1xml in sync, but we no longer maintain the ps1xml, so we should remove the comment and rename the file.",
      "created_at": "2017-02-28T16:28:14Z",
      "updated_at": "2017-02-28T16:28:14Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@iSazonov My bad, I must have tried that after `Remove-TypeData`. Removing the alias property `Count` will fix that.",
      "created_at": "2017-02-28T17:21:38Z",
      "updated_at": "2017-02-28T17:21:38Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw Clear.\r\n\r\n@lzybkr I searched `*generated.*` - there are multiple files. Are there files that we also should fix?",
      "created_at": "2017-02-28T17:46:17Z",
      "updated_at": "2017-02-28T17:46:17Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "For now, I would just change:\r\n\r\n```\r\nGetEvent_Types_Ps1Xml.generated.cs\r\nTypesV3_Ps1Xml.generated.cs\r\nTypes_Ps1Xml.generated.cs\r\n```\r\n\r\nThe files in GraphicalHost can be ignored, and the ones in the interpreter come from another project, so it would be better to not rename those.",
      "created_at": "2017-02-28T18:17:10Z",
      "updated_at": "2017-02-28T18:17:10Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I opened Issue #3230 ",
      "created_at": "2017-02-28T19:34:47Z",
      "updated_at": "2017-02-28T19:34:47Z"
    }
  ],
  "created_at": "2017-02-27T22:43:03Z",
  "labels": [
    "Issue-Enhancement",
    "Resolution-Fixed"
  ],
  "number": 3222,
  "state": "closed",
  "title": "Remove type data for `System.Array` type",
  "updated_at": "2017-03-08T15:58:21Z"
}