{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6806",
  "author": "markekraus",
  "body": "## PR Summary\r\n\r\n* closes #6728\r\n* Breaking change approved in #6728 \r\n\r\nThis PR switches the logic of when the Web Cmdlets handle redirects when the Authorization header is present. .NET Core 2.1 no longer sends the Authorization header by default (dotnet/corefx#26864). however, we introduced the ability to do so leveraging the previous default behavior through the use of the `-PreserveAuthorizationOnRedirect` switch. \r\n\r\nThis PR also corrects a bug introduced 6.0.0 where certain redirect types redirect from POST to GET were set which should have passed through POST to POST and some were improperly passing through POST to POST which should have been doing POST to GET. This correction is a breaking change. It was made apparent as now the redirection behavior is being managed by CoreFX which is doing the correct behavior, test were added for both when CoreFX and the Web Cmdlets manage redirection.\r\n\r\n## PR Checklist\r\n\r\n- [X] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [X] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [X] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [X] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [X] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [X] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-05-14T18:37:32Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I restarted CI Travis MacOs - it seems temporary failed.",
      "created_at": "2018-05-03T08:24:37Z",
      "updated_at": "2018-05-03T08:24:37Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 can you ping someone to review? I'd definitely like this to be merged before the next preview or RC since without it, there are effectively known regressions in master.",
      "created_at": "2018-05-10T12:50:24Z",
      "updated_at": "2018-05-10T12:50:24Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@iSazonov Could you review this change?  ",
      "created_at": "2018-05-10T18:04:08Z",
      "updated_at": "2018-05-10T18:04:08Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov I have #5610 for tracking refactoring the Web Cmdlets. There is much work to be done there.. but every time I try, the PRs are a nightmare. I'm pretty discourage from wasting my time on it further until I can get clear answers on the way to move forward. ",
      "created_at": "2018-05-11T08:20:07Z",
      "updated_at": "2018-05-11T08:20:07Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "Note: there are CodeFactor issues.  We should try to fix these error in the new and changed code.  This was added after you started this PR so I think we can defer this.",
      "created_at": "2018-05-14T18:36:35Z",
      "updated_at": "2018-05-14T18:36:35Z"
    }
  ],
  "created_at": "2018-05-03T01:07:55Z",
  "number": 6806,
  "state": "closed",
  "title": "Fix Web Cmdlets for .NET Core 2.1",
  "updated_at": "2018-05-14T18:37:32Z"
}