{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6849",
  "author": "DarwinJS",
  "body": "## PR Summary\r\n\r\nFixed #6815 by adding -allowprereleases parameter\r\nFixed #6405 by adding -allowprereleases parameter\r\nAdded parameters to documentation\r\nReady for prerelease repositories if Microsoft starts providing them\r\nAdded -skip-sudo-check for all distros\r\nFixed -interactivetesting should do nothing if -includeide was not used\r\n \r\n## PR Checklist\r\n\r\n- [X] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [X] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X ] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [X] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [X] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [X] Issue filed - Issue link: #6815\r\n- **Testing - New and feature**\r\n    - [X] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n\r\n@TravisEz13 - If you create pre-release repos as per #6496 this switch can be used to add those repo links in the relevant distro install scripts.  Currently it just issues a warning that whatever is on the repo dictates whether pre-releases will be installed.",
  "closed_at": "2018-06-25T18:44:44Z",
  "comments": [
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - I can't recall what to do about spelling errors in MD files - can you please remind me what we did last time?",
      "created_at": "2018-05-11T11:05:13Z",
      "updated_at": "2018-05-11T11:05:13Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "You need to add the missing words in this section https://github.com/PowerShell/PowerShell/blob/master/.spelling#L215\r\n![image](https://user-images.githubusercontent.com/10873629/40016163-43381c6c-576a-11e8-8f28-b9533e30338f.png)\r\n",
      "created_at": "2018-05-14T18:32:28Z",
      "updated_at": "2018-05-14T18:32:28Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - Looks like this is failing at the OSX sudo password prompt?  How to handle this?  Thanks! https://travis-ci.org/PowerShell/PowerShell/jobs/380487406",
      "created_at": "2018-05-18T12:11:33Z",
      "updated_at": "2018-05-18T12:11:33Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS  `SUDO -v` almost never works in CI.  You'll have to update the code to skip this check.  Or remove it altogether as unreliable.",
      "created_at": "2018-05-21T21:34:19Z",
      "updated_at": "2018-05-21T21:34:52Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "Is there a way to detect CI?  Is checking for POWERSHELL_TELEMETRY_OPTOUT=1 good enough or is there a better way?\r\n\r\nThere have not been any complaints about the sudo check (that I know of) beyond CI.\r\n\r\nFYI - I updated the sudo check to be non-interactive.",
      "created_at": "2018-05-22T11:42:13Z",
      "updated_at": "2018-05-22T11:42:48Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "most CI systems, except VSTS define a variable called `CI`.  You can just doc that you expect that variable to be defined.",
      "created_at": "2018-05-22T22:43:55Z",
      "updated_at": "2018-05-22T22:43:55Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - I put in place the skipping of the sudo check, but also skipped sudo assuming I had admin.\r\n\r\nSo is the magic that I DO need to use SUDO - but I can't check for it?\r\n\r\nHow has this not been failing for months - it used to work without any special SUDO handling, but didn't break until I touched it.\r\n\r\nCan you look at the build log?",
      "created_at": "2018-06-13T23:14:21Z",
      "updated_at": "2018-06-13T23:14:21Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "My statement about `sudo -v` never working was too broad.  It never worked in macOS, but other CI systems it doesn't work in debian.  When in CI, we need to use `sudo` but not run `sudo -v` as it may fail.  The equivalent of `skip-sudo-check`, these other systems is what I added this switch for.  Just detecting CI and automatically skipping should be enough.\r\n\r\nAlso, you should look at the package renaming during preview.3 and see if this affects your change.",
      "created_at": "2018-06-14T01:59:03Z",
      "updated_at": "2018-06-14T01:59:03Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - builds are passing - should I remove \"WIP\" ?",
      "created_at": "2018-06-22T10:46:28Z",
      "updated_at": "2018-06-22T10:46:28Z"
    }
  ],
  "created_at": "2018-05-10T11:07:20Z",
  "number": 6849,
  "state": "closed",
  "title": "install-powershell.sh filter prereleases (when available), params documentation",
  "updated_at": "2018-06-25T18:44:44Z"
}