{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5345",
  "author": "MathiasMagnus",
  "body": "Nomen est omen.\r\n\r\nSteps to reproduce\r\n------------------\r\n\r\n```powershell\r\nPS C:\\Users\\Matty> Remove-Item $PROFILE\r\nPS C:\\Users\\Matty> Measure-Command { pwsh.exe -Command { Test-Path $PROFILE } }\r\n\r\n\r\nDays              : 0\r\nHours             : 0\r\nMinutes           : 0\r\nSeconds           : 1\r\nMilliseconds      : 121\r\nTicks             : 11210756\r\nTotalDays         : 1,2975412037037E-05\r\nTotalHours        : 0,000311409888888889\r\nTotalMinutes      : 0,0186845933333333\r\nTotalSeconds      : 1,1210756\r\nTotalMilliseconds : 1121,0756\r\n\r\n\r\n\r\nPS C:\\Users\\Matty> New-Item $PROFILE -Type File -Value \"\"\r\n\r\n\r\n    Directory: C:\\Users\\Matty\\Documents\\PowerShell\r\n\r\n\r\nMode                LastWriteTime         Length Name\r\n----                -------------         ------ ----\r\n-a----    2017. 11. 05.     17:18              0 Microsoft.PowerShell_profile.ps1\r\n\r\n\r\nPS C:\\Users\\Matty> Measure-Command { pwsh.exe -Command { Test-Path $PROFILE } }\r\n\r\n\r\nDays              : 0\r\nHours             : 0\r\nMinutes           : 0\r\nSeconds           : 5\r\nMilliseconds      : 653\r\nTicks             : 56535473\r\nTotalDays         : 6,54345752314815E-05\r\nTotalHours        : 0,00157042980555556\r\nTotalMinutes      : 0,0942257883333333\r\nTotalSeconds      : 5,6535473\r\nTotalMilliseconds : 5653,5473\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\n\r\nRoughly identical startup times.\r\n\r\nActual behavior\r\n---------------\r\n\r\nThere's a fair 5 seconds difference.\r\n\r\nEnvironment data\r\n----------------\r\n\r\n```powershell\r\nPS C:\\Users\\Matty> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.0.0-beta.9\r\nPSEdition                      Core\r\nGitCommitId                    v6.0.0-beta.9\r\nOS                             Microsoft Windows 10.0.16232\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n\r\nPS C:\\Users\\Matty> (Get-ComputerInfo).CsProcessors\r\n\r\n\r\nName                      : AMD FX-7500 Radeon R7, 10 Compute Cores 4C+6G\r\nManufacturer              : AuthenticAMD\r\nDescription               : AMD64 Family 21 Model 48 Stepping 1\r\nArchitecture              : x64\r\nAddressWidth              : 64\r\nDataWidth                 : 64\r\nMaxClockSpeed             : 2100\r\nCurrentClockSpeed         : 2100\r\nNumberOfCores             : 4\r\nNumberOfLogicalProcessors : 4\r\nProcessorID               : 178BFBFF00630F01\r\nSocketDesignation         : Socket FS1r2\r\nProcessorType             : CentralProcessor\r\nRole                      : CPU\r\nStatus                    : OK\r\nCpuStatus                 : Enabled\r\nAvailability              : RunningOrFullPower\r\n```\r\n",
  "closed_at": "2020-07-06T22:28:19Z",
  "comments": [
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "I believe this was addressed by #8341 and other perf related work.\r\n\r\n```none\r\nPS C:\\> Remove-Item $PROFILE\r\nPS C:\\> Measure-Command { pwsh.exe -Command { Test-Path $PROFILE } }\r\n\r\nDays              : 0\r\nHours             : 0\r\nMinutes           : 0\r\nSeconds           : 0\r\nMilliseconds      : 441\r\nTicks             : 4414452\r\nTotalDays         : 5.10931944444444E-06\r\nTotalHours        : 0.000122623666666667\r\nTotalMinutes      : 0.00735742\r\nTotalSeconds      : 0.4414452\r\nTotalMilliseconds : 441.4452\r\n\r\n\r\nPS C:\\> New-Item $PROFILE -Type File -Value \"\"\r\n\r\n\r\n    Directory: C:\\Users\\rocky\\Documents\\PowerShell\r\n\r\nMode                 LastWriteTime         Length Name\r\n----                 -------------         ------ ----\r\n-a---            7/6/2020  3:23 PM              0 Microsoft.PowerShell_profile.ps1\r\n\r\nPS C:\\> Measure-Command { pwsh.exe -Command { Test-Path $PROFILE } }\r\n\r\nDays              : 0\r\nHours             : 0\r\nMinutes           : 0\r\nSeconds           : 0\r\nMilliseconds      : 438\r\nTicks             : 4385962\r\nTotalDays         : 5.07634490740741E-06\r\nTotalHours        : 0.000121832277777778\r\nTotalMinutes      : 0.00730993666666667\r\nTotalSeconds      : 0.4385962\r\nTotalMilliseconds : 438.5962\r\n```",
      "created_at": "2020-07-06T22:28:18Z",
      "updated_at": "2020-07-06T22:28:18Z"
    }
  ],
  "created_at": "2017-11-05T16:24:10Z",
  "labels": [
    "WG-Engine-Performance",
    "Resolution-Fixed"
  ],
  "number": 5345,
  "state": "closed",
  "title": "Adding a $PROFILE file has significant impact on startup time",
  "updated_at": "2020-07-06T22:28:32Z"
}