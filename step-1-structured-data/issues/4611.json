{
  "_url": "https://github.com/PowerShell/PowerShell/issues/4611",
  "author": "adumont",
  "body": "Steps to reproduce\r\n------------------\r\n\r\n```powershell\r\n\r\nPS C:\\> Install-Module AzureRM\r\nWARNING: Source Location 'https://www.powershellgallery.com/api/v2/package/AzureRM.Sql/3.3.1' is not valid.\r\nPackageManagement\\Install-Package : Package 'AzureRM.Sql' failed to download.\r\nAt C:\\Program Files\\WindowsPowerShell\\Modules\\PowerShellGet\\1.0.0.1\\PSModule.psm1:1375 char:21\r\n+ ...          $null = PackageManagement\\Install-Package @PSBoundParameters\r\n+                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : ResourceUnavailable: (C:\\Users\\adumon...ureRM.Sql.nupkg:String) [Install-Package], Excep\r\n   tion\r\n    + FullyQualifiedErrorId : PackageFailedInstallOrDownload,Microsoft.PowerShell.PackageManagement.Cmdlets.InstallPac\r\n   kage\r\n\r\nPackageManagement\\Install-Package : Collection was modified; enumeration operation may not execute.\r\nAt C:\\Program Files\\WindowsPowerShell\\Modules\\PowerShellGet\\1.0.0.1\\PSModule.psm1:1375 char:21\r\n+ ...          $null = PackageManagement\\Install-Package @PSBoundParameters\r\n+                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException\r\n    + FullyQualifiedErrorId : System.InvalidOperationException,Microsoft.PowerShell.PackageManagement.Cmdlets.InstallP\r\n   ackage\r\n\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\n\r\nIt should not fail.\r\n\r\nActual behavior\r\n---------------\r\n\r\n```powershell\r\nPS C:\\> Install-Module AzureRM\r\nWARNING: Source Location 'https://www.powershellgallery.com/api/v2/package/AzureRM.Sql/3.3.1' is not valid.\r\nPackageManagement\\Install-Package : Package 'AzureRM.Sql' failed to download.\r\nAt C:\\Program Files\\WindowsPowerShell\\Modules\\PowerShellGet\\1.0.0.1\\PSModule.psm1:1375 char:21\r\n+ ...          $null = PackageManagement\\Install-Package @PSBoundParameters\r\n+                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : ResourceUnavailable: (C:\\Users\\adumon...ureRM.Sql.nupkg:String) [Install-Package], Excep\r\n   tion\r\n    + FullyQualifiedErrorId : PackageFailedInstallOrDownload,Microsoft.PowerShell.PackageManagement.Cmdlets.InstallPac\r\n   kage\r\n\r\nPackageManagement\\Install-Package : Collection was modified; enumeration operation may not execute.\r\nAt C:\\Program Files\\WindowsPowerShell\\Modules\\PowerShellGet\\1.0.0.1\\PSModule.psm1:1375 char:21\r\n+ ...          $null = PackageManagement\\Install-Package @PSBoundParameters\r\n+                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException\r\n    + FullyQualifiedErrorId : System.InvalidOperationException,Microsoft.PowerShell.PackageManagement.Cmdlets.InstallP\r\n   ackage\r\n\r\n```\r\n\r\nEnvironment data\r\n----------------\r\n\r\n```powershell\r\n> $PSVersionTable\r\nName                           Value\r\n----                           -----\r\nPSVersion                      5.0.10586.117\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nBuildVersion                   10.0.10586.117\r\nCLRVersion                     4.0.30319.42000\r\nWSManStackVersion              3.0\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\n\r\nPS C:\\> Get-InstalledModule\r\n\r\nVersion    Name                                Type       Repository\r\n-------    ----                                ----       ----------\r\n4.3.1      Azure                               Module     PSGallery\r\n0.4.4      Azure.AnalysisServices              Module     PSGallery\r\n3.3.1      Azure.Storage                       Module     PSGallery\r\n0.4.4      AzureRM.AnalysisServices            Module     PSGallery\r\n4.3.1      AzureRM.ApiManagement               Module     PSGallery\r\n3.3.1      AzureRM.Automation                  Module     PSGallery\r\n3.3.1      AzureRM.Backup                      Module     PSGallery\r\n3.3.1      AzureRM.Batch                       Module     PSGallery\r\n0.13.4     AzureRM.Billing                     Module     PSGallery\r\n3.3.1      AzureRM.Cdn                         Module     PSGallery\r\n0.8.4      AzureRM.CognitiveServices           Module     PSGallery\r\n3.3.1      AzureRM.Compute                     Module     PSGallery\r\n0.2.4      AzureRM.Consumption                 Module     PSGallery\r\n0.2.4      AzureRM.ContainerRegistry           Module     PSGallery\r\n3.3.1      AzureRM.DataFactories               Module     PSGallery\r\n3.3.1      AzureRM.DataLakeAnalytics           Module     PSGallery\r\n4.3.1      AzureRM.DataLakeStore               Module     PSGallery\r\n3.3.1      AzureRM.DevTestLabs                 Module     PSGallery\r\n3.3.1      AzureRM.Dns                         Module     PSGallery\r\n0.4.4      AzureRM.EventHub                    Module     PSGallery\r\n3.3.1      AzureRM.HDInsight                   Module     PSGallery\r\n3.3.1      AzureRM.Insights                    Module     PSGallery\r\n2.3.1      AzureRM.IotHub                      Module     PSGallery\r\n3.3.1      AzureRM.KeyVault                    Module     PSGallery\r\n3.3.1      AzureRM.LogicApp                    Module     PSGallery\r\n0.15.4     AzureRM.MachineLearning             Module     PSGallery\r\n0.7.4      AzureRM.Media                       Module     PSGallery\r\n4.3.1      AzureRM.Network                     Module     PSGallery\r\n3.3.1      AzureRM.NotificationHubs            Module     PSGallery\r\n3.3.1      AzureRM.OperationalInsights         Module     PSGallery\r\n3.3.1      AzureRM.PowerBIEmbedded             Module     PSGallery\r\n3.3.1      AzureRM.profile                     Module     PSGallery\r\n3.3.1      AzureRM.RecoveryServices            Module     PSGallery\r\n3.3.1      AzureRM.RecoveryServices.Backup     Module     PSGallery\r\n3.3.1      AzureRM.RedisCache                  Module     PSGallery\r\n0.2.4      AzureRM.Relay                       Module     PSGallery\r\n4.3.1      AzureRM.Resources                   Module     PSGallery\r\n0.15.4     AzureRM.Scheduler                   Module     PSGallery\r\n3.3.1      AzureRM.ServerManagement            Module     PSGallery\r\n0.4.4      AzureRM.ServiceBus                  Module     PSGallery\r\n0.2.4      AzureRM.ServiceFabric               Module     PSGallery\r\n```\r\n",
  "closed_at": "2017-08-18T15:58:00Z",
  "comments": [
    {
      "author": "adumont",
      "author_association": "NONE",
      "body": "Simply trying to install AzureRM.Sql also fails:\r\n\r\n```powershell\r\nPS C:\\> install-module AzureRM.Sql\r\nWARNING: Source Location 'https://www.powershellgallery.com/api/v2/package/AzureRM.Sql/3.3.1' is not valid.\r\nPackageManagement\\Install-Package : Package 'AzureRM.Sql' failed to download.\r\nAt C:\\Program Files\\WindowsPowerShell\\Modules\\PowerShellGet\\1.0.0.1\\PSModule.psm1:1375 char:21\r\n+ ...          $null = PackageManagement\\Install-Package @PSBoundParameters\r\n+                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : ResourceUnavailable: (C:\\Users\\adumon...ureRM.Sql.nupkg:String) [Install-Package], Excep\r\n   tion\r\n    + FullyQualifiedErrorId : PackageFailedInstallOrDownload,Microsoft.PowerShell.PackageManagement.Cmdlets.InstallPac\r\n   kage\r\n```",
      "created_at": "2017-08-18T10:45:16Z",
      "updated_at": "2017-08-18T10:45:16Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "Is the error you are getting happened in Windows PowerShell, you need to report this in UserVoice for Windows PowerShell: https://windowsserver.uservoice.com/forums/301869-powershell\r\n\r\nHere is only to report PowerShell Core Version v6.0.0-beta.5 incidents.\r\n:)",
      "created_at": "2017-08-18T15:50:37Z",
      "updated_at": "2017-08-18T15:50:37Z"
    },
    {
      "author": "adumont",
      "author_association": "NONE",
      "body": "Ok thanks. Sorry for the wrong place. ",
      "created_at": "2017-08-18T15:58:00Z",
      "updated_at": "2017-08-18T15:58:00Z"
    }
  ],
  "created_at": "2017-08-18T10:34:57Z",
  "labels": [
    "Resolution-External"
  ],
  "number": 4611,
  "state": "closed",
  "title": "Install-Module AzureRM failed ('AzureRM.Sql' failed to download)",
  "updated_at": "2017-09-04T05:24:29Z"
}