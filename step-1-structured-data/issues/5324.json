{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5324",
  "author": "iSazonov",
  "body": "Fix #4904.\r\n\r\n### Fix description\r\n1. `$isCoreCLR` is removed from C# code.\r\n2. `$isCoreCLR = $true` is added in tests because these tests are very different and each one requires a separate conclusion.\r\n\r\n",
  "closed_at": "2017-11-30T00:55:28Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "PowerShellGet depends heavily on $IsCoreCLR - its tests failed.\r\n\r\nShould we close the PR until PowerShellGet uses $IsCoreCLR?",
      "created_at": "2017-11-03T10:01:24Z",
      "updated_at": "2017-11-03T10:01:24Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "I opened the issue https://github.com/PowerShell/PowerShellGet/issues/187 on PowerShellGet repo and also submitted the PR https://github.com/PowerShell/PowerShellGet/pull/188 to update the IsCoreCLR check in their scripts. After the PR gets merged, we still need them to publish a new version of PowerShellGet module that we can use in PowerShell Core.\r\n\r\nI also found that they are still running test on powershell-beta.5. I opened https://github.com/PowerShell/PowerShellGet/issues/189 to ask them to update CIs to run on beta.9 powershell core.",
      "created_at": "2017-11-03T17:28:12Z",
      "updated_at": "2017-11-03T17:28:12Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT I wonder ` $PSVersionTable.PSEdition -eq 'Core'` is just as dummy as the `$IsCoreCLR = $true` - we don't need to check anything, we only need skip them and need a conclusion on every test.\r\nI didn't remove these tests because I was worried that the situation was like removing `#if CoreCLR` from C# codes - maybe some features we porting later.",
      "created_at": "2017-11-04T18:13:54Z",
      "updated_at": "2017-11-04T18:13:54Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov if the concern is that these tests might be valuable in the future as we port more stuff (or corefx gets richer and we can just enable), then it seems that we should rename usage of $IsCoreClr to something like $NotCurrentlyPorted = $true.",
      "created_at": "2017-11-05T21:28:38Z",
      "updated_at": "2017-11-05T21:28:38Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "FYI, https://github.com/PowerShell/PowerShellGet/pull/188 has been merged. We still need them to publish  a new module (question asked in https://github.com/PowerShell/PowerShellGet/issues/187).",
      "created_at": "2017-11-06T16:44:40Z",
      "updated_at": "2017-11-06T16:44:40Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "The new module will published in weeks - can we wait?",
      "created_at": "2017-11-07T03:50:06Z",
      "updated_at": "2017-11-07T03:50:06Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "At this time, I'm thinking we should just leave `$IsCoreClr` as-is and focus our energy on something else.  I wouldn't block RC for this and wouldn't want to take this breaking change after RC either.",
      "created_at": "2017-11-11T06:36:33Z",
      "updated_at": "2017-11-11T06:36:33Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "At this point, I don't think it's worth additional effort on this.  `$IsCoreClr` is staying.",
      "created_at": "2017-11-30T00:55:28Z",
      "updated_at": "2017-11-30T00:55:28Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT Is this delayed or canceled at all? Should I keep iSazonov:remove-iscoreclr branch?",
      "created_at": "2017-11-30T07:08:33Z",
      "updated_at": "2017-11-30T07:08:33Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov I appreciate the work you've done already, but it seems that your time may be better spent on other issues (as well as other people needed to review the changes).  I would consider this closed and you can delete your branch.",
      "created_at": "2017-11-30T23:29:46Z",
      "updated_at": "2017-11-30T23:30:09Z"
    }
  ],
  "created_at": "2017-11-03T06:03:32Z",
  "number": 5324,
  "state": "closed",
  "title": "Remove $IsCoreClr",
  "updated_at": "2017-12-01T04:52:05Z"
}