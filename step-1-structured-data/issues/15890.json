{
  "_url": "https://github.com/PowerShell/PowerShell/issues/15890",
  "author": "simon-eda",
  "body": "### Prerequisites\r\n\r\n- [X] Write a descriptive title.\r\n- [X] Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\r\n- [X] Search the existing issues.\r\n- [X] Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\r\n- [X] Refer to [Differences between Windows PowerShell 5.1 and PowerShell](https://docs.microsoft.com/powershell/scripting/whats-new/differences-from-windows-powershell).\r\n\r\n### Steps to reproduce\r\n\r\ni am experiencing an issue with installation of ubuntu 18.04 after succesfull installation of wsl2 and ubuntu20.4 on windows developer. \r\nthe installation fails in microsoft store and powershell using following commands: \r\n\r\n1.\r\nPS C:\\WINDOWS\\system32> wsl --install -d Ubuntu-18.04\r\ndownload: Ubuntu 18.04 LTS\r\ninstall: Ubuntu 18.04 LTS\r\nUbuntu 18.04 LTS installed.\r\nUbuntu 18.04 LTS will start... # installation stopps here withour error message\r\nPS C:\\WINDOWS\\system32>\r\n\r\n\r\n2.\r\nPS C:\\WINDOWS\\system32> curl.exe -L -o ubuntu-1804.appx https://aka.ms/wsl-ubuntu-1804       \r\nPS C:\\WINDOWS\\system32> Add-AppxPackage .\\ubuntu-1804.appx\r\nAdd-AppxPackage : Fehler bei Bereitstellung. HRESULT: 0x80073CF6, Das Paket konnte nicht registriert werden.\r\nInterner Fehler 0x80070005. Weitere Informationen zum Diagnostizieren von Problemen bei der Bereitstellung von Apps\r\nfinden Sie unter \"http://go.microsoft.com/fwlink/?LinkId=235160\".\r\nHINWEIS: Wenn Sie weitere Informationen w\u00fcnschen, suchen Sie im Ereignisprotokoll nach [ActivityId]\r\nabea83d0-8c48-0005-59e1-fdab488cd701, oder verwenden Sie die Befehlszeile Get-AppxLog -ActivityID\r\nabea83d0-8c48-0005-59e1-fdab488cd701\r\nIn Zeile:1 Zeichen:1\r\n+ Add-AppxPackage .\\ubuntu-1804.appx\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : WriteError: (C:\\WINDOWS\\system32\\ubuntu-1804.appx:String) [Add-AppxPackage], IOException\r\n    + FullyQualifiedErrorId : DeploymentError,Microsoft.Windows.Appx.PackageManager.Commands.AddAppxPackageCommand\r\n\r\n\r\nwhen starting powershell i get following error:\r\n. : Die Datei \"C:\\Users\\Simon\\Documents\\WindowsPowerShell\\profile.ps1\" kann nicht geladen werden. Die Datei             \"C:\\Users\\Simon\\Documents\\WindowsPowerShell\\profile.ps1\" ist nicht digital signiert. Sie k\u00f6nnen dieses Skript im        aktuellen System nicht ausf\u00fchren. Weitere Informationen zum Ausf\u00fchren von Skripts und Festlegen der\r\nAusf\u00fchrungsrichtlinie erhalten Sie unter \"about_Execution_Policies\" (https:/go.microsoft.com/fwlink/?LinkID=135170)..\r\nIn Zeile:1 Zeichen:3\r\n+ . 'C:\\Users\\Simon\\Documents\\WindowsPowerShell\\profile.ps1'\r\n+   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : Sicherheitsfehler: (:) [], PSSecurityException\r\n    + FullyQualifiedErrorId : UnauthorizedAccess\r\n\r\n3. microsoft store error  Code: 0x80070005\r\n\r\ncan you please help to fix the issue?\r\n\r\nthanks,\r\nSimon \r\n\r\n### Expected behavior\r\n\r\n```console\r\ninstalling ubuntu 18.04\r\n```\r\n\r\n\r\n### Actual behavior\r\n\r\n```console\r\ninstallation of ubuntu 18.04 fails\r\n```\r\n\r\n\r\n### Error details\r\n\r\n```console\r\n1.\r\nPS C:\\WINDOWS\\system32> wsl --install -d Ubuntu-18.04\r\ndownload: Ubuntu 18.04 LTS\r\ninstall: Ubuntu 18.04 LTS\r\nUbuntu 18.04 LTS installed.\r\nUbuntu 18.04 LTS will start... # installation stopps here withour error message\r\nPS C:\\WINDOWS\\system32>\r\n\r\n\r\n2.\r\nPS C:\\WINDOWS\\system32> curl.exe -L -o ubuntu-1804.appx https://aka.ms/wsl-ubuntu-1804       \r\nPS C:\\WINDOWS\\system32> Add-AppxPackage .\\ubuntu-1804.appx\r\nAdd-AppxPackage : Fehler bei Bereitstellung. HRESULT: 0x80073CF6, Das Paket konnte nicht registriert werden.\r\nInterner Fehler 0x80070005. Weitere Informationen zum Diagnostizieren von Problemen bei der Bereitstellung von Apps\r\nfinden Sie unter \"http://go.microsoft.com/fwlink/?LinkId=235160\".\r\nHINWEIS: Wenn Sie weitere Informationen w\u00fcnschen, suchen Sie im Ereignisprotokoll nach [ActivityId]\r\nabea83d0-8c48-0005-59e1-fdab488cd701, oder verwenden Sie die Befehlszeile Get-AppxLog -ActivityID\r\nabea83d0-8c48-0005-59e1-fdab488cd701\r\nIn Zeile:1 Zeichen:1\r\n+ Add-AppxPackage .\\ubuntu-1804.appx\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : WriteError: (C:\\WINDOWS\\system32\\ubuntu-1804.appx:String) [Add-AppxPackage], IOException\r\n    + FullyQualifiedErrorId : DeploymentError,Microsoft.Windows.Appx.PackageManager.Commands.AddAppxPackageCommand\r\n\r\n\r\nwhen starting powershell i get following error:\r\n. : Die Datei \"C:\\Users\\Simon\\Documents\\WindowsPowerShell\\profile.ps1\" kann nicht geladen werden. Die Datei             \"C:\\Users\\Simon\\Documents\\WindowsPowerShell\\profile.ps1\" ist nicht digital signiert. Sie k\u00f6nnen dieses Skript im        aktuellen System nicht ausf\u00fchren. Weitere Informationen zum Ausf\u00fchren von Skripts und Festlegen der\r\nAusf\u00fchrungsrichtlinie erhalten Sie unter \"about_Execution_Policies\" (https:/go.microsoft.com/fwlink/?LinkID=135170)..\r\nIn Zeile:1 Zeichen:3\r\n+ . 'C:\\Users\\Simon\\Documents\\WindowsPowerShell\\profile.ps1'\r\n+   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : Sicherheitsfehler: (:) [], PSSecurityException\r\n    + FullyQualifiedErrorId : UnauthorizedAccess\r\n```\r\n3. microsoft store error  Code: 0x80070005\r\n\r\n### Environment data\r\n\r\n```powershell\r\nPS C:\\WINDOWS\\system32> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      5.1.21387.1\r\nPSEdition                      Desktop\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nBuildVersion                   10.0.21387.1\r\nCLRVersion                     4.0.30319.42000\r\nWSManStackVersion              3.0\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\n```\r\n\r\n\r\n### Visuals\r\n\r\n_No response_",
  "closed_at": null,
  "comments": [
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "@simon-eda \r\n\r\nCurious!! Have you tried using PowerShell 7.1.3 console? or, reopen the console, and try:\r\n\r\n```\r\n## - to verify after installation status:\r\nwsl -l -v\r\n\r\n## start distribution from within PowerShell session: \r\nwsl --distribution ubuntu-18.04\r\n\r\n```\r\n\r\nSometimes I use the \"wsl --shutdown\" to clear any failed condition.\r\n\r\n\r\n",
      "created_at": "2021-08-09T16:28:22Z",
      "updated_at": "2021-08-09T16:28:22Z"
    },
    {
      "author": "simon-eda",
      "author_association": "NONE",
      "body": "> @simon-eda\r\n> \r\n> Curious!! Have you tried using PowerShell 7.1.3 console? or, reopen the console, and try:\r\n> \r\n> ```\r\n> ## - to verify after installation status:\r\n> wsl -l -v\r\n> \r\n> ## start distribution from within PowerShell session: \r\n> wsl --distribution ubuntu-18.04\r\n> ```\r\n> \r\n> Sometimes I use the \"wsl --shutdown\" to clear any failed condition.\r\n\r\nthanks for the suggestions. same issue in powershell 7 ",
      "created_at": "2021-08-12T15:45:43Z",
      "updated_at": "2021-08-12T15:45:43Z"
    },
    {
      "author": "simon-eda",
      "author_association": "NONE",
      "body": "16.04, 20.4 and docker image can be installed, only 18.04 wont work ",
      "created_at": "2021-08-12T20:29:52Z",
      "updated_at": "2021-08-12T20:29:52Z"
    }
  ],
  "created_at": "2021-08-08T20:49:12Z",
  "labels": [
    "Issue-Question",
    "Area-Maintainers-Build",
    "Needs-Triage"
  ],
  "number": 15890,
  "state": "open",
  "title": "ubuntu 18.04 installation fails",
  "updated_at": "2021-08-12T20:29:52Z"
}