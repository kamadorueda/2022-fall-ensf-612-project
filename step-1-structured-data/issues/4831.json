{
  "_url": "https://github.com/PowerShell/PowerShell/issues/4831",
  "author": "bergmeister",
  "body": "Although PR #4795 fixed the main issue of #4760 (to make the build red if there is a `WiX` compilation error), it did not fix the problem that currently the `WiX` log is not outputted at all and therefore one cannot see the compilation error in the log. This PR fixes this and outputs the `WiX` log only if no `MSI` could be produced because the `WiX` log is quite verbose (around 250 lines) and would be unnecessary noise in a green build.\r\n\r\nThe reason why the log is currently not displayed in the log is because the resulting object is piped directly to `Write-Verbose` but is of type array and therefore needs to be converted to a string using `Out-String` beforehand.",
  "closed_at": "2017-09-14T21:12:51Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "\r\n@bergmeister,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\n_Thanks,\nMicrosoft Pull Request Bot_",
      "created_at": "2017-09-13T19:21:10Z",
      "updated_at": "2017-09-13T19:21:10Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "Our logs are already very long.  If we are on AppVeyor and not local, it may be better to add these logs as artifacts and reference them, If local we can just reference the logs.\r\nHere are the docs on how to push an artifact\r\nhttps://www.appveyor.com/docs/build-worker-api/#push-artifact\r\nYou can test if we are in AppVeyor using an environment variable:\r\nhttps://www.appveyor.com/docs/environment-variables/\r\n\r\n\r\nI filed an issue for this:\r\nhttps://github.com/PowerShell/PowerShell/issues/4838\r\nFeel free to merge this.",
      "created_at": "2017-09-14T17:56:21Z",
      "updated_at": "2017-09-14T18:00:07Z"
    },
    {
      "author": "bergmeister",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 : That's why the WiX log (around 250 lines) gets only output in the case of a failure to not pollute normal green builds.",
      "created_at": "2017-09-14T18:06:33Z",
      "updated_at": "2017-09-14T18:06:33Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "unless the logs are very short, 1-5 line, an artifact would be better.  The logs are very long and become difficult to find details in.",
      "created_at": "2017-09-14T18:12:20Z",
      "updated_at": "2017-09-14T18:12:20Z"
    }
  ],
  "created_at": "2017-09-13T19:21:06Z",
  "number": 4831,
  "state": "closed",
  "title": "Make the build output the WiX compilation log if it failed.",
  "updated_at": "2017-09-14T21:12:51Z"
}