{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2280",
  "author": "vors",
  "body": "Fixes #1486 \n- Add 'RequireAdminOnWindows' tag to some tests suites\n- Change install scope for Install-PackageProvider.Tests.ps1\n  This helps avoid problem when run as non-elevated user.\n- Restructure PowerShellGet.Tests.ps1 to enable 'RequireAdminOnWindows' tagging\n- Add Start-PSPester -Unelevated\n  That will enable running tests without Admin in CI\n- Make Invoke-AppVeyorTest run elevated and non-elevated tests separately\n\nBefore merging, we would need to update documentation:\n- [ ] About using `Start-PSPester -Unelevate`\n- [x] About Tags that are used in our Pester tests (add `RequireAdminOnWindows`)\n",
  "closed_at": "2016-09-29T23:28:29Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "Hi **@vors**, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    <p>\n        It looks like you're a Microsoft contributor (Sergei Vorobev). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    </p>\n\nTTYL, MSBOT;\n",
      "created_at": "2016-09-16T02:42:12Z",
      "updated_at": "2016-09-16T02:42:12Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "I observed that we get test failures because we run tests that require admin without admin.\nCurrently I didn't find to `Invoke-Pester` with tests with **all** tests.\nOpened https://github.com/pester/Pester/issues/608 for discussion.\n",
      "created_at": "2016-09-17T00:16:18Z",
      "updated_at": "2016-09-17T00:16:18Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "This is blocked on https://github.com/PowerShell/PowerShell/issues/2346\ncc @mirichmo \n",
      "created_at": "2016-09-22T22:21:09Z",
      "updated_at": "2016-09-22T22:21:09Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "Also found #2366 during this work. Will include fix for it in the next iteration of the PR.\n",
      "created_at": "2016-09-26T23:49:46Z",
      "updated_at": "2016-09-26T23:49:46Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "Alright, tests are green and now it's finally ready for the review.\n\n@mirichmo , can you please take a look at c758b2e ?\n@JamesWTruher can you take a look at the rest?\n",
      "created_at": "2016-09-29T01:41:43Z",
      "updated_at": "2016-09-29T01:41:43Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "@mirichmo done\n",
      "created_at": "2016-09-29T19:31:46Z",
      "updated_at": "2016-09-29T19:31:46Z"
    },
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": ":shipit: \n",
      "created_at": "2016-09-29T23:56:09Z",
      "updated_at": "2016-09-29T23:56:09Z"
    }
  ],
  "created_at": "2016-09-16T02:42:07Z",
  "number": 2280,
  "state": "closed",
  "title": "Separate tests on Windows CI to Admin-Required and Non-Admin-Required",
  "updated_at": "2016-09-29T23:56:09Z"
}