{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2320",
  "author": "daxian-dbw",
  "body": "Fix #2243 \n\nThere is another fix for this bug, which is to remove `|| (details.LocalTupleIndex == ForceDynamic && details.Automatic)` at\n\n```\nvar orderedLocals = (from details in _variables.Values\n                     where (details.LocalTupleIndex >= 0 || (details.LocalTupleIndex == ForceDynamic && details.Automatic))\n```\n\nI think it's OK to do so because the real automatic variable would have LocalTupleIndex set to be `ForceDynamic` only if there is type conversion or attributes associated with an assignment of the automatic variable, such as `[datetime]$pscmdlet=1` or `[ValidateNotNullOrEmpty]$PSCmdlet =1`. In that case, we will throw parsing error in semantic check at https://github.com/PowerShell/PowerShell/blob/master/src/System.Management.Automation/engine/parser/SemanticChecks.cs#L739\n\ncc @lzybkr \n",
  "closed_at": "2016-09-26T18:56:12Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "Hi **@daxian-dbw**, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    <p>\n        It looks like you're a Microsoft contributor (Dongbo Wang). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    </p>\n\nTTYL, MSBOT;\n",
      "created_at": "2016-09-20T21:14:17Z",
      "updated_at": "2016-09-20T21:14:17Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": ":shipit: \n",
      "created_at": "2016-09-20T21:50:52Z",
      "updated_at": "2016-09-20T21:50:52Z"
    }
  ],
  "created_at": "2016-09-20T21:14:13Z",
  "number": 2320,
  "state": "closed",
  "title": "Fix $? assignment to not crash powershell",
  "updated_at": "2018-01-22T23:05:41Z"
}