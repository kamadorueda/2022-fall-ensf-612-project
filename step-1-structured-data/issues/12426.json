{
  "_url": "https://github.com/PowerShell/PowerShell/issues/12426",
  "author": "michaelmhoffman",
  "body": "Steps to reproduce\r\n\r\n```powershell\r\n\r\nUpdate-Help Microsoft.PowerShell.Utility -Verbose\r\nUpdate-Help Microsoft.PowerShell.Utility -Verbose\r\n```\r\n\r\n# Expected behavior\r\n\r\n```none\r\nPS C:\\Windows\\System32\\WindowsPowerShell\\v1.0> Update-Help Microsoft.PowerShell.Utility -Verbose\r\nVERBOSE: Resolving URI: \"http://go.microsoft.com/fwlink/?linkid=390787\"\r\nVERBOSE: Your connection has been redirected to the following URI: \"http://download.microsoft.com/download/B/8/1/B8175F7D-C2B2-4E7F-AE8F-7272FACF79BB/\"\r\nVERBOSE: Performing the operation \"Update-Help\" on target \"Microsoft.PowerShell.Utility, Current Version: 5.1.1.0, Available Version: 5.1.1.0, UICulture: en-US\".\r\nVERBOSE: Microsoft.PowerShell.Utility: The most current Help files are already installed.. Culture en-US Version 5.1.1.0\r\nPS C:\\Windows\\System32\\WindowsPowerShell\\v1.0> Update-Help Microsoft.PowerShell.Utility -Verbose\r\nVERBOSE: Help was not updated for the module Microsoft.PowerShell.Utility, because the Update-Help command was run on this computer within the last 24 hours.\r\nTo update help again, add the Force parameter to your command.\r\n```\r\n\r\n# Actual behavior\r\n\r\n```none\r\nPS C:\\Windows\\System32\\WindowsPowerShell\\v1.0> Update-Help Microsoft.PowerShell.Utility -Verbose\r\nVERBOSE: Resolving URI: \"http://go.microsoft.com/fwlink/?linkid=390787\"\r\nVERBOSE: Your connection has been redirected to the following URI: \"http://download.microsoft.com/download/B/8/1/B8175F7D-C2B2-4E7F-AE8F-7272FACF79BB/\"\r\nVERBOSE: Performing the operation \"Update-Help\" on target \"Microsoft.PowerShell.Utility, Current Version: 5.1.1.0, Available Version: 5.1.1.0, UICulture: en-US\".\r\nVERBOSE: Microsoft.PowerShell.Utility: The most current Help files are already installed.. Culture en-US Version 5.1.1.0\r\nPS C:\\Windows\\System32\\WindowsPowerShell\\v1.0> Update-Help Microsoft.PowerShell.Utility -Verbose\r\nVERBOSE: Resolving URI: \"http://go.microsoft.com/fwlink/?linkid=390787\"\r\nVERBOSE: Your connection has been redirected to the following URI: \"http://download.microsoft.com/download/B/8/1/B8175F7D-C2B2-4E7F-AE8F-7272FACF79BB/\"\r\nVERBOSE: Performing the operation \"Update-Help\" on target \"Microsoft.PowerShell.Utility, Current Version: 5.1.1.0, Available Version: 5.1.1.0, UICulture: en-US\".\r\nVERBOSE: Microsoft.PowerShell.Utility: The most current Help files are already installed.. Culture en-US Version 5.1.1.0\r\n```\r\n\r\n[`Microsoft.PowerShell.Commands.UpdatableHelpCommandBase.CheckOncePerDayPerModule()`](https://github.com/PowerShell/PowerShell/blob/b1e998046e12ebe5da9dee479f20d479aa2256d7/src/System.Management.Automation/help/UpdatableHelpCommandBase.cs#L680) checks whether `Update-Help` was run recently by checking the last-modified timestamp on the help info file. But it doesn't also touch the timestamp itself. This means that 24 hours after the last actual write to the file, running `Update-Help` will continue to return true, even if `Update-Help` was previously run a few seconds ago.\r\n\r\nThis does not match the [documentation](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/update-help), which says that unless `-Force` is supplied, `Update-Help` runs only once in each 24-hour period. This causes a lot of extra network traffic and hits to Microsoft's servers, and is slow for the user.",
  "closed_at": null,
  "comments": [],
  "created_at": "2020-04-22T14:47:36Z",
  "number": 12426,
  "state": "open",
  "title": "`CheckOncePerDayPerModule()` returns true even when `Update-Help` has run within less than 24 hours",
  "updated_at": "2020-04-22T14:48:18Z"
}