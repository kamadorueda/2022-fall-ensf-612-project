{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3608",
  "author": "DarwinJS",
  "body": "I am an intermediate-noob at bash so I would love to have some testing of the new installer before doing a pull request.\r\n\r\nThe goals and overall idea is described in #3547 \r\n\r\n## Features (and fixes of download.sh):\r\n* Bare minimum requirements to get going (wget & sed) (attempts to install curl if not present)\r\n* defaults to only install PowerShell core (using repos where they are available)\r\n* For non-repo based installs - detects latest version from git tags\r\n* Optional -includeide switch installs VS Code and PowerShell Extension (using repos where they are available)\r\n* Fix/Cleanup: Installs on OpenSUSE using download from regular github releases page (until repo is established)\r\n* Removed restriction to OpenSUSE 42.1, should install 42.1 and later.\r\n* Removed restriction to CentOS only - should install on Redhat as well.\r\n* Uses brew repository for OSX.\r\n\r\n## I have it working and tested under:\r\n* Ubuntu Desktop 16.04\r\n* CentOS 7.2 with GNOME Desktop\r\n* OpenSUSE 42.2 with KDE Desktop\r\n\r\n## Known Issues (and Help Needed):\r\n* The -appimage switch just calls the pre-existing appimage.sh which did not work on any of the above test cases\r\n* The OSX install was pieced together from various sources and is untested.\r\n\r\nHere is the readme: https://github.com/DarwinJS/PowerShell/blob/feature/install-powershell.sh/tools/install-powershell.readme.md\r\n\r\n## Here are the commands to kick off the install (also covered in readme):\r\n\r\n### Only Install PowerShell Core:\r\n```bash\r\nbash <(wget -O - https://raw.githubusercontent.com/DarwinJS/PowerShell/feature/install-powershell.sh/tools/install-powershell.sh)\r\n```\r\n###  Install PowerShell Core with IDE:\r\n```bash\r\nbash <(wget -O - https://raw.githubusercontent.com/DarwinJS/PowerShell/feature/install-powershell.sh/tools/install-powershell.sh) -includeide\r\n```\r\n###  Install PowerShell Core with IDE and do tests that require a human to interact with the install process:\r\n```bash\r\nbash <(wget -O - https://raw.githubusercontent.com/DarwinJS/PowerShell/feature/install-powershell.sh/tools/install-powershell.sh) -includeide -interactivetesting\r\n```",
  "closed_at": "2017-07-26T01:48:20Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "\r\n@DarwinJS,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\n_Thanks,\nMicrosoft Pull Request Bot_",
      "created_at": "2017-04-20T17:22:04Z",
      "updated_at": "2017-04-20T17:22:04Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - I read the contributing information for pull requests and it says \"clean up your commit history\"\r\n\r\nI did that by rebasing - but now I'm wondering if the idea is to keep at least one new commit for each update to the PR?\r\n\r\nLet me know whether I should be squashing into my originally submitted commit or something else.",
      "created_at": "2017-04-24T12:15:30Z",
      "updated_at": "2017-04-24T12:15:39Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@DarwinJS We must preserve the history, we should avoid rebaseing for _already published_ commits. For new commits we should do one commit per one logical work piece: putting 10 commits with removing extra lines is bad.",
      "created_at": "2017-04-24T12:51:13Z",
      "updated_at": "2017-04-24T12:51:45Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - I added to spelling exceptions to the repo root's .spelling - but they seem to be ignored when checking my .md in the tools subfolder.\r\n\r\nShould I create a .spelling in the tools subfolder - or is there something that has to be adjusted about the calling to the spelling checker?",
      "created_at": "2017-04-25T12:25:36Z",
      "updated_at": "2017-04-25T12:25:36Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@DarwinJS Maybe you can do spell checking on WSL.",
      "created_at": "2017-04-25T13:05:09Z",
      "updated_at": "2017-04-25T13:05:09Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov - I neglected to mention I ran spell checking locally with the exact same code as used by CI and generated two spelling exceptions which it automatically added to .spelling in the repo root.  However, when travis runs the build it does not seem to pickup on that .spelling file when it is processing the tools folder - so just trying to figure our the correct next step.",
      "created_at": "2017-04-25T13:15:27Z",
      "updated_at": "2017-04-25T13:15:27Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@joeyaiello - this PR is being blocked by the \"spelling errors\" on 'sed' and '-includeide' in the md help document I put together.\r\n\r\nI have these exceptions in the main .spelling exception file and copied the .spelling file to the tools subfolder - still won't make it through.\r\n\r\nWhat else might I do to pass the checks?\r\n\r\nThe command \"powershell -File tools/travis.ps1\" exited with 0.\r\n1.83s$ if [[ \"$TRAVIS_OS_NAME\" == \"linux\" ]]; then mdspell '**/*.md' '!powershell/**/*.md' --ignore-numbers --ignore-acronyms --report; fi\r\n    tools/install-powershell.readme.md\r\n        6 | werShell IDE) using optional -includeide switch \r\n       18 | * sed ",
      "created_at": "2017-04-25T23:45:22Z",
      "updated_at": "2017-04-25T23:45:22Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@DarwinJS You added \"includeide\" - try \"-includeide\".\r\nFor \"sed\": 1. try add Newline after \"sed\" 2. Try \"* sed\"",
      "created_at": "2017-04-26T06:51:09Z",
      "updated_at": "2017-04-26T06:51:09Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov - I have tried you solutions in both .spelling files.  There already was a newline after sed and the original additions to the file was done by interactively running mdspell.",
      "created_at": "2017-04-26T11:15:28Z",
      "updated_at": "2017-04-26T11:15:28Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "We can wrap \"-includeide\" with apostrophes `` in line 6 (and remove from `.spelling`)\r\nBut I dont understand that problem with \"sed\". Maybe use apostrophes too.\r\n",
      "created_at": "2017-04-26T13:50:17Z",
      "updated_at": "2017-04-26T13:50:17Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "mdspell runs clean on that file on my local system (windows 10) with the exact same .spelling file:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/11597190/25463787/a088390a-2ac6-11e7-857d-45f5fdeab9bd.png)\r\n\r\nIs the version running in CI the latest?\r\n\r\nI am out of ideas :(",
      "created_at": "2017-04-27T01:23:50Z",
      "updated_at": "2017-04-27T01:25:22Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@DarwinJS It seems a mdspell issue. Did you try to use apostrophes?",
      "created_at": "2017-04-27T11:32:58Z",
      "updated_at": "2017-04-27T11:32:58Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 and @iSazonov  - Phew - Finally!",
      "created_at": "2017-04-27T17:50:24Z",
      "updated_at": "2017-04-27T17:50:24Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "Also, what is the plan on download.sh?",
      "created_at": "2017-05-10T21:28:35Z",
      "updated_at": "2017-05-10T21:28:35Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "I no longer understand what is holding up this PR - can someone please enlighten me?  Thanks!",
      "created_at": "2017-07-05T13:12:17Z",
      "updated_at": "2017-07-05T13:12:17Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "Please resolve file conflicting.",
      "created_at": "2017-07-05T13:37:17Z",
      "updated_at": "2017-07-05T13:37:17Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "I forked this here: https://github.com/travisez13/powershell/tree/feature/install-powershell.sh and cleaned up the history, and re-based it against the current code.\r\nTests are running here:  https://travis-ci.org/TravisEz13/PowerShell/builds/256155006\r\nand here:  \r\nhttps://ci.appveyor.com/project/TravisEz13/powershell/build/6.0.0-beta.4-543",
      "created_at": "2017-07-21T18:10:46Z",
      "updated_at": "2017-07-21T18:11:56Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - I am interested in being listed as a contributor in this repo - will that still be the case with the actions you've taken?",
      "created_at": "2017-07-21T18:21:07Z",
      "updated_at": "2017-07-21T18:21:07Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS , Yup, Only one commit I had to merge by hand got rewritten completely.  You can see on 2 of the 3 remaining commits, you are listed as the main contributor:\r\nhttps://github.com/TravisEz13/PowerShell/commits/feature/install-powershell.sh",
      "created_at": "2017-07-21T18:28:00Z",
      "updated_at": "2017-07-21T18:28:41Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for your explanation and for your help @TravisEz13  !",
      "created_at": "2017-07-21T18:34:57Z",
      "updated_at": "2017-07-21T18:34:57Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS, I'll see if GitHub will let me update your PR (force push to your branch) once the tests pass.  If that doesn't work, you are also welcome to pull my branch, then push it to your fork and submit the PR yourself, but it matters very little which of us submits the PR.  ",
      "created_at": "2017-07-21T18:35:57Z",
      "updated_at": "2017-07-21T18:35:57Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS   I reviewed the PR again.  I enabled some tests on the markdown you added and fixed the issues it found and changed the default installer for PowerShell in our CI system to the one you wrote.  I found the script didn't have execute permissions, I added them, and now I'm waiting for the tests again.",
      "created_at": "2017-07-21T19:22:48Z",
      "updated_at": "2017-07-21T19:22:48Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS I think I have macOS working.  I removed the openSSL because we already have code in start-psbootstrap to do this.  There is a syntax error on line 99 of the macOS script, but it doesn't cause an issue, so, I'm not going to touch it for now.  Using brew take about 150-160 seconds to install on the mac while download.sh took about 40 seconds.  But bootstrapping is quicker by about the same time, So, I think this is acceptable.",
      "created_at": "2017-07-21T21:37:11Z",
      "updated_at": "2017-07-21T21:42:20Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - thanks for all the fixups - exactly what I was asking for in one of the previous conference calls!",
      "created_at": "2017-07-22T18:35:12Z",
      "updated_at": "2017-07-22T18:35:12Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "I'm going to merge this soon... Please don't touch the branch.  I'm going to clean-up the history first.\r\n",
      "created_at": "2017-07-26T00:55:00Z",
      "updated_at": "2017-07-26T00:55:00Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - maybe this should just call install-powershell.sh now?",
      "created_at": "2017-07-26T01:18:40Z",
      "updated_at": "2017-07-26T01:18:40Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS  What is this?",
      "created_at": "2017-07-26T01:44:07Z",
      "updated_at": "2017-07-26T01:44:07Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "If you are talking about our CI systems, I mention previously, that I changed `install-powershell.sh` to be used in CI in this PR.  See https://github.com/DarwinJS/PowerShell/blob/e4dc9387320ec0107f3efecb25f2cdadebcdadbe/.travis.yml#L24\r\n",
      "created_at": "2017-07-26T01:46:45Z",
      "updated_at": "2017-07-26T01:46:45Z"
    },
    {
      "author": "DarwinJS",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 - apologies got this confused with one for download.sh",
      "created_at": "2017-07-26T01:47:34Z",
      "updated_at": "2017-07-26T01:47:34Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS No Problem, This is merged.  Thanks for your help.",
      "created_at": "2017-07-26T01:48:50Z",
      "updated_at": "2017-07-26T01:48:50Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@DarwinJS FYI, Your commits are here: https://github.com/PowerShell/PowerShell/commit/fdabe868800b19c53976cbc201b7572a6f37236a and here: https://github.com/PowerShell/PowerShell/commit/c31f274767613a64f651fb0af31896b6c4439412",
      "created_at": "2017-07-26T01:52:54Z",
      "updated_at": "2017-07-26T01:52:54Z"
    }
  ],
  "created_at": "2017-04-20T17:21:57Z",
  "number": 3608,
  "state": "closed",
  "title": "create script to install latest powershell from repositories",
  "updated_at": "2017-07-26T01:52:54Z"
}