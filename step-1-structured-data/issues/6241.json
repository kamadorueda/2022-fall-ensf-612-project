{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6241",
  "author": "SteveL-MSFT",
  "body": "## PR Summary\r\n\r\nif `Start-PSPester -sudo` is used, make sure to only run tests tagged with `RequireSudoOnUnix` (note that `CI`,`Feature`,etc.. no longer apply)\r\nif `Start-PSPester` is used, make sure to exclude `RequireSudoOnUnix` tests on Unix\r\n\r\nFix https://github.com/PowerShell/PowerShell/issues/6227\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [x] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-02-27T17:23:05Z",
  "comments": [
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "AppVeyor failure due to #6228 ",
      "created_at": "2018-02-26T15:10:20Z",
      "updated_at": "2018-02-26T15:10:20Z"
    },
    {
      "author": "dantraMSFT",
      "author_association": "CONTRIBUTOR",
      "body": "At the risk of splitting hairs; why isn't the tag simply RequireSudo or Sudo?  Isn't the 'OnUnix' redundant?\r\nFWIW: My first thought, does it work on MacOS?",
      "created_at": "2018-02-26T22:45:25Z",
      "updated_at": "2018-02-26T22:45:25Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@dantraMSFT yes, it works on macOS.  I think the `OnUnix` is just to be consistent with `RequireAdminOnWindows`.",
      "created_at": "2018-02-26T22:47:27Z",
      "updated_at": "2018-02-26T22:47:27Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@dantraMSFT Some people on the original PR though it needed clarification.  I agreed to be consistent.",
      "created_at": "2018-02-26T23:19:07Z",
      "updated_at": "2018-02-26T23:19:07Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "The `set-date` test failures have been fixed in #6249 \r\nShall we close this PR?",
      "created_at": "2018-02-26T23:42:18Z",
      "updated_at": "2018-02-26T23:42:18Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "this gets closer to something that @anmenaga asked for.  making the travis and start-pspester behavior the same.",
      "created_at": "2018-02-26T23:49:43Z",
      "updated_at": "2018-02-26T23:49:43Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "I guess we want the changes in `build.psm1`.\r\n@SteveL-MSFT can you please revert the changes in other files?",
      "created_at": "2018-02-26T23:55:07Z",
      "updated_at": "2018-02-26T23:55:07Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@daxian-dbw @TravisEz13 in general, the way individuals run tests and the way our automated systems run it should be as similar as possible otherwise tests fail in one environment and not the other making it more difficult to diagnose",
      "created_at": "2018-02-26T23:55:12Z",
      "updated_at": "2018-02-26T23:55:12Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@daxian-dbw will do",
      "created_at": "2018-02-27T00:04:05Z",
      "updated_at": "2018-02-27T00:04:05Z"
    }
  ],
  "created_at": "2018-02-26T04:35:49Z",
  "number": 6241,
  "state": "closed",
  "title": "Fix `Start-PSPester` support for running tests w/ `sudo`",
  "updated_at": "2018-02-27T21:37:49Z"
}