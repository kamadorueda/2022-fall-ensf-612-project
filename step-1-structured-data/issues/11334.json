{
  "_url": "https://github.com/PowerShell/PowerShell/issues/11334",
  "author": "vexx32",
  "body": "# Steps to reproduce\r\n\r\n```powershell\r\nTest-Connection 1.1.1.1 -Traceroute\r\n```\r\n\r\n# Expected behavior\r\n\r\nIntermediate hops are shown with their respective hostnames / IP addresses, where available.\r\n\r\n```none\r\n   Target: 1.1.1.1\r\n\r\nHop Hostname                  Ping Latency Status           Source       TargetAddress\r\n                                      (ms)\r\n--- --------                  ---- ------- ------           ------       -------------\r\n  1 172.20.0.1                   1       1 Success          Lira         1.1.1.1\r\n  1 172.20.0.1                   2       2 Success          Lira         1.1.1.1\r\n  1 172.20.0.1                   3       2 Success          Lira         1.1.1.1\r\n  2 12.108.153.193               1       3 Success          Lira         1.1.1.1\r\n  2 12.108.153.193               2       3 Success          Lira         1.1.1.1\r\n  2 12.108.153.193               3       2 Success          Lira         1.1.1.1\r\n  3 12.244.85.177                1      14 Success          Lira         1.1.1.1\r\n  3 12.244.85.177                2      12 Success          Lira         1.1.1.1\r\n  3 12.244.85.177                3      16 Success          Lira         1.1.1.1\r\n  4 *                            1      15 DestinationNetw\u2026 Lira         1.1.1.1\r\n  4 *                            2       * TimedOut         Lira         1.1.1.1\r\n  4 *                            3      16 DestinationNetw\u2026 Lira         1.1.1.1\r\n  5 *                            1       * TimedOut         Lira         1.1.1.1\r\n  5 *                            2      18 DestinationNetw\u2026 Lira         1.1.1.1\r\n  5 *                            3       * TimedOut         Lira         1.1.1.1\r\n  6 *                            1      13 DestinationNetw\u2026 Lira         1.1.1.1\r\n  6 *                            2       * TimedOut         Lira         1.1.1.1\r\n  6 *                            3      15 DestinationNetw\u2026 Lira         1.1.1.1\r\n  7 *                            1       * TimedOut         Lira         1.1.1.1\r\n  7 *                            2       * TimedOut         Lira         1.1.1.1\r\n  7 *                            3       * TimedOut         Lira         1.1.1.1\r\n  8 *                            1       * TimedOut         Lira         1.1.1.1\r\n  8 *                            2       * TimedOut         Lira         1.1.1.1\r\n  8 *                            3       * TimedOut         Lira         1.1.1.1\r\n  9 4.16.234.182                 1      23 Success          Lira         1.1.1.1\r\n  9 4.16.234.182                 2      23 Success          Lira         1.1.1.1\r\n  9 4.16.234.182                 3      27 Success          Lira         1.1.1.1\r\n 10 1.1.1.1                      1      24 Success          Lira         1.1.1.1\r\n 10 1.1.1.1                      2      24 Success          Lira         1.1.1.1\r\n 10 1.1.1.1                      3      22 Success          Lira         1.1.1.1\r\n```\r\n\r\n# Actual behavior\r\n\r\nAll hostnames are empty, although pings succeed and IP addresses for each response are available in the object.\r\n\r\n```none\r\n   Target: 1.1.1.1\r\n\r\nHop Hostname                  Ping Latency Status           Source       TargetAddress\r\n                                      (ms)\r\n--- --------                  ---- ------- ------           ------       -------------\r\n  1 *                            1       1 Success          Lira         1.1.1.1\r\n  1 *                            2       2 Success          Lira         1.1.1.1\r\n  1 *                            3       2 Success          Lira         1.1.1.1\r\n  2 *                            1       3 Success          Lira         1.1.1.1\r\n  2 *                            2       3 Success          Lira         1.1.1.1\r\n  2 *                            3       2 Success          Lira         1.1.1.1\r\n  3 *                            1      14 Success          Lira         1.1.1.1\r\n  3 *                            2      12 Success          Lira         1.1.1.1\r\n  3 *                            3      16 Success          Lira         1.1.1.1\r\n  4 *                            1      15 DestinationNetw\u2026 Lira         1.1.1.1\r\n  4 *                            2       * TimedOut         Lira         1.1.1.1\r\n  4 *                            3      16 DestinationNetw\u2026 Lira         1.1.1.1\r\n  5 *                            1       * TimedOut         Lira         1.1.1.1\r\n  5 *                            2      18 DestinationNetw\u2026 Lira         1.1.1.1\r\n  5 *                            3       * TimedOut         Lira         1.1.1.1\r\n  6 *                            1      13 DestinationNetw\u2026 Lira         1.1.1.1\r\n  6 *                            2       * TimedOut         Lira         1.1.1.1\r\n  6 *                            3      15 DestinationNetw\u2026 Lira         1.1.1.1\r\n  7 *                            1       * TimedOut         Lira         1.1.1.1\r\n  7 *                            2       * TimedOut         Lira         1.1.1.1\r\n  7 *                            3       * TimedOut         Lira         1.1.1.1\r\n  8 *                            1       * TimedOut         Lira         1.1.1.1\r\n  8 *                            2       * TimedOut         Lira         1.1.1.1\r\n  8 *                            3       * TimedOut         Lira         1.1.1.1\r\n  9 *                            1      23 Success          Lira         1.1.1.1\r\n  9 *                            2      23 Success          Lira         1.1.1.1\r\n  9 *                            3      27 Success          Lira         1.1.1.1\r\n 10 *                            1      24 Success          Lira         1.1.1.1\r\n 10 *                            2      24 Success          Lira         1.1.1.1\r\n 10 *                            3      22 Success          Lira         1.1.1.1\r\n```\r\n\r\n# Environment data\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n\r\n```none\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.0.0-preview.6\r\nPSEdition                      Core\r\nGitCommitId                    7.0.0-preview.6\r\nOS                             Microsoft Windows 10.0.18363\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n\r\n# Additional info\r\n\r\nThe issue is here:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/3923ca172854b8f3b00dcd02b0f1829917758f10/src/Microsoft.PowerShell.Commands.Management/commands/management/TestConnectionCommand.cs#L1023-L1029\r\n\r\nIt's perfectly possible, and valid, for `Destination` to be empty when not using `-ResolveDestination`; the fallback when `Destination` is an empty string should be `_status.DisplayAddress`.",
  "closed_at": "2019-12-19T17:51:35Z",
  "comments": [
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "I have a fix for this; I will submit a PR soon.",
      "created_at": "2019-12-13T05:36:42Z",
      "updated_at": "2019-12-13T05:36:42Z"
    },
    {
      "author": "he852100",
      "author_association": "NONE",
      "body": "good",
      "created_at": "2019-12-13T11:05:00Z",
      "updated_at": "2019-12-13T11:05:00Z"
    },
    {
      "author": "msftbot[bot]",
      "author_association": "NONE",
      "body": ":tada:This issue was addressed in #11335, which has now been successfully released as `v7.0.0-rc.2`.:tada:\n\nHandy links:\n* [Release Notes](https://github.com/PowerShell/PowerShell/releases/tag/v7.0.0-rc.2)\n",
      "created_at": "2020-01-16T23:37:34Z",
      "updated_at": "2020-01-16T23:37:34Z"
    }
  ],
  "created_at": "2019-12-13T05:22:44Z",
  "number": 11334,
  "state": "closed",
  "title": "Test-Connection -Traceroute doesn't show hostnames at all",
  "updated_at": "2020-01-16T23:37:35Z"
}