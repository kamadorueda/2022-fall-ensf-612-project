{
  "_url": "https://github.com/PowerShell/PowerShell/issues/4100",
  "author": "bmaccagnan",
  "body": "When using the Invoke-WebRequest command on Linux I am not seeing it return forms or parsedHTML.  I am using github's login page as an example:\r\n\r\nSteps to reproduce\r\n------------------\r\n```\r\nPS /opt/microsoft/powershell> $wr=Invoke-WebRequest -Uri https://github.com/login -Method Get                                                  \r\nPS /opt/microsoft/powershell> $wr.forms                                                                                                        PS /opt/microsoft/powershell> $wr.parsedHTML                                                                                                   PS /opt/microsoft/powershell>                                 \r\nPS /opt/microsoft/powershell> $wr                                                                                                                                                                                                                                                             \r\n\r\nStatusCode        : 200\r\nStatusDescription : OK\r\nContent           : \r\n                    \r\n                    \r\n                    \r\n                    \r\n                    <!DOCTYPE html>\r\n                    <html lang=\"en\">\r\n                      <head>\r\n                        <meta charset=\"utf-8\">\r\n                      <link rel=\"dns-prefetch\" href=\"https://assets-cdn.github.com\">\r\n                      <link rel=\"dns-prefetch\" href=\"https://avatars0.githubuserc...\r\nRawContent        : HTTP/1.1 200 OK\r\n                    Server: GitHub.com\r\n                    Date: Sat, 24 Jun 2017 13:53:14 GMT\r\n                    Transfer-Encoding: chunked\r\n                    Status: 200 OK\r\n                    Cache-Control: no-store, no-cache\r\n                    Vary: X-PJAX\r\n                    X-UA-Compatible: IE=Edge,chrome=1\r\n                    Set-Co...\r\nForms             : \r\nHeaders           : {[Server, System.String[]], [Date, System.String[]], [Transfer-Encoding, System.String[]], [Status, System.String[]]...}\r\nImages            : {}\r\nInputFields       : {@{outerHTML=<input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" />; tagName=INPUT; name=utf8; type=hidden; \r\n                    value=&#x2713;}, @{outerHTML=<input name=\"authenticity_token\" type=\"hidden\" \r\n                    value=\"L6GGsWLmwfbG4Pxh0R9fytqFLn3NdYB9qJzcIy1unNyzBEJRCPOLwb6o4M+TT7AsyizT1Vobbvh/zzBTa9GOww==\" />; tagName=INPUT; \r\n                    name=authenticity_token; type=hidden; \r\n                    value=L6GGsWLmwfbG4Pxh0R9fytqFLn3NdYB9qJzcIy1unNyzBEJRCPOLwb6o4M+TT7AsyizT1Vobbvh/zzBTa9GOww==}, @{outerHTML=<input \r\n                    autocapitalize=\"off\" autocorrect=\"off\" autofocus=\"autofocus\" class=\"form-control input-block\" id=\"login_field\" \r\n                    name=\"login\" tabindex=\"1\" type=\"text\" />; tagName=INPUT; autocapitalize=off; autocorrect=off; autofocus=autofocus; \r\n                    class=form-control input-block; id=login_field; name=login; tabindex=1; type=text}, @{outerHTML=<input \r\n                    class=\"form-control form-control input-block\" id=\"password\" name=\"password\" tabindex=\"2\" type=\"password\" />; \r\n                    tagName=INPUT; class=form-control form-control input-block; id=password; name=password; tabindex=2; type=password}...}\r\nLinks             : {@{outerHTML=<a href=\"#start-of-content\" tabindex=\"1\" class=\"px-2 py-4 show-on-focus js-skip-to-content\">Skip to \r\n                    content</a>; tagName=A; href=#start-of-content; tabindex=1; class=px-2 py-4 show-on-focus js-skip-to-content}, \r\n                    @{outerHTML=<a class=\"header-logo\" href=\"https://github.com/\" aria-label=\"Homepage\" data-ga-click=\"(Logged out) Header, \r\n                    go to homepage, icon:logo-wordmark\">\r\n                          <svg aria-hidden=\"true\" class=\"octicon octicon-mark-github\" height=\"48\" version=\"1.1\" viewBox=\"0 0 16 16\" \r\n                    width=\"48\"><path fill-rule=\"evenodd\" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 \r\n                    0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 \r\n                    1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 \r\n                    0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 \r\n                    2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 \r\n                    1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z\"/></svg>\r\n                        </a>; tagName=A; class=header-logo; href=https://github.com/; aria-label=Homepage; data-ga-click=(Logged out) Header, \r\n                    go to homepage, icon:logo-wordmark}, @{outerHTML=<a href=\"/password_reset\" class=\"label-link\">Forgot password?</a>; \r\n                    tagName=A; href=/password_reset; class=label-link}, @{outerHTML=<a href=\"/join?source=login\" data-ga-click=\"Sign in, \r\n                    switch to sign up\">Create an account</a>; tagName=A; href=/join?source=login; data-ga-click=Sign in, switch to sign \r\n                    up}...}\r\nParsedHtml        : \r\nRawContentLength  : 11620\r\nRelationLink      : {}\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\n```\r\nPS C:\\Users\\badmin> $wr=Invoke-WebRequest -Uri https://github.com/login -Method Get\r\nPS C:\\Users\\badmin> $wr.Forms\r\n\r\nId                            Method                        Action                        Fields\r\n--                            ------                        ------                        ------\r\n                              post                          /session                      {[utf8, \u2713], [authenticity_..\r\n\r\nPS C:\\Users\\badmin> $wr\r\n\r\n\r\nStatusCode        : 200\r\nStatusDescription : OK\r\nContent           :\r\n\r\n\r\n\r\n\r\n                    <!DOCTYPE html>\r\n                    <html lang=\"en\">\r\n                      <head>\r\n                        <meta charset=\"utf-8\">\r\n                      <link rel=\"dns-prefetch\" href=\"https://assets-cdn.github.com\">\r\n                      <link rel=\"dns-prefetch\" href=\"https://avatars0.githubuserc...\r\nRawContent        : HTTP/1.1 200 OK\r\n                    Transfer-Encoding: chunked\r\n                    Status: 200 OK\r\n                    Vary: X-PJAX\r\n                    X-UA-Compatible: IE=Edge,chrome=1\r\n                    Cache-Control: no-cache, no-store\r\n                    Content-Type: text/html; charset=utf-8\r\n                    Date: Sat, 24 J...\r\nForms             : {}\r\nHeaders           : {[Transfer-Encoding, chunked], [Status, 200 OK], [Vary, X-PJAX], [X-UA-Compatible,\r\n                    IE=Edge,chrome=1]...}\r\nImages            : {}\r\nInputFields       : {@{innerHTML=; innerText=; outerHTML=<INPUT type=hidden value=\u2713 name=utf8>; outerText=;\r\n                    tagName=INPUT; type=hidden; value=\u2713; name=utf8}, @{innerHTML=; innerText=; outerHTML=<INPUT\r\n                    type=hidden\r\n                    value=mTqX/0LQfnxeuGtQzSlEi3dsq3ptanMLz4+CiLhodXF/zDBJumN+2jXf14shgI+3ArnEoFKvpB74Mj0LpbjCDQ==\r\n                    name=authenticity_token>; outerText=; tagName=INPUT; type=hidden;\r\n                    value=mTqX/0LQfnxeuGtQzSlEi3dsq3ptanMLz4+CiLhodXF/zDBJumN+2jXf14shgI+3ArnEoFKvpB74Mj0LpbjCDQ==;\r\n                    name=authenticity_token}, @{innerHTML=; innerText=; outerHTML=<INPUT tabIndex=1 id=login_field\r\n                    class=\"form-control input-block\" name=login autofocus=\"autofocus\" autocorrect=\"off\"\r\n                    autocapitalize=\"off\">; outerText=; tagName=INPUT; tabIndex=1; id=login_field; class=form-control\r\n                    input-block; name=login; autofocus=autofocus; autocorrect=off; autocapitalize=off}, @{innerHTML=;\r\n                    innerText=; outerHTML=<INPUT tabIndex=2 id=password class=\"form-control form-control input-block\"\r\n                    type=password value=\"\" name=password>; outerText=; tagName=INPUT; tabIndex=2; id=password;\r\n                    class=form-control form-control input-block; type=password; value=; name=password}...}\r\nLinks             : {@{innerHTML=Skip to content; innerText=Skip to content; outerHTML=<A tabIndex=1 class=\"px-2 py-4\r\n                    show-on-focus js-skip-to-content\" href=\"#start-of-content\">Skip to content</A>; outerText=Skip to\r\n                    content; tagName=A; tabIndex=1; class=px-2 py-4 show-on-focus js-skip-to-content;\r\n                    href=#start-of-content}, @{innerHTML=<SVG aria-hidden=true class=\"octicon octicon-mark-github\"\r\n                    width=\"48\" viewBox=\"0 0 16 16\" version=\"1.1\" height=\"48\"><PATH d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54\r\n                    2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48\r\n                    -.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87\r\n                    2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95\r\n                    0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0\r\n                    1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87\r\n                    3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16\r\n                    8c0-4.42-3.58-8-8-8z\" fill-rule=\"evenodd\" /></SVG>; innerText=; outerHTML=<A aria-label=Homepage\r\n                    class=header-logo href=\"https://github.com/\" data-ga-click=\"(Logged out) Header, go to homepage,\r\n                    icon:logo-wordmark\"><SVG aria-hidden=true class=\"octicon octicon-mark-github\" width=\"48\"\r\n                    viewBox=\"0 0 16 16\" version=\"1.1\" height=\"48\"><PATH d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53\r\n                    5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1\r\n                    .13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87\r\n                    2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95\r\n                    0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0\r\n                    1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87\r\n                    3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16\r\n                    8c0-4.42-3.58-8-8-8z\" fill-rule=\"evenodd\" /></SVG></A>; outerText=; tagName=A;\r\n                    aria-label=Homepage; class=header-logo; href=https://github.com/; data-ga-click=(Logged out)\r\n                    Header, go to homepage, icon:logo-wordmark}, @{innerHTML=Forgot password?; innerText=Forgot\r\n                    password?; outerHTML=<A class=label-link href=\"/password_reset\">Forgot password?</A>;\r\n                    outerText=Forgot password?; tagName=A; class=label-link; href=/password_reset}, @{innerHTML=Create\r\n                    an account; innerText=Create an account; outerHTML=<A href=\"/join?source=login\"\r\n                    data-ga-click=\"Sign in, switch to sign up\">Create an account</A>; outerText=Create an account;\r\n                    tagName=A; href=/join?source=login; data-ga-click=Sign in, switch to sign up}...}\r\nParsedHtml        : mshtml.HTMLDocumentClass\r\nRawContentLength  : 11620\r\n```\r\n\r\nActual behavior\r\n---------------\r\n\r\n```\r\nThe output does not have any forms or parsedHTML\r\n\r\n```\r\n\r\nEnvironment data\r\n----------------\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n\r\n```PS /opt/microsoft/powershell> $psversiontable                                                                                                  \r\n\r\nName                           Value                                                                                                          \r\n----                           -----                                                                                                          \r\nPSVersion                      6.0.0-beta                                                                                                     \r\nPSEdition                      Core                                                                                                           \r\nGitCommitId                    v6.0.0-beta.3                                                                                                  \r\nOS                             Linux 4.4.0-72-generic #93-Ubuntu SMP Fri Mar 31 14:07:41 UTC 2017                                             \r\nPlatform                       Unix                                                                                                           \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                                                                                        \r\nPSRemotingProtocolVersion      2.3                                                                                                            \r\nSerializationVersion           1.1.0.1                                                                                                        \r\nWSManStackVersion              3.0                                                      \r\n\r\n```\r\n",
  "closed_at": "2017-06-26T16:26:13Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@bmaccagnan  Thanks for your report!\r\n\r\nIt seems duplicate #2867 .",
      "created_at": "2017-06-24T18:17:58Z",
      "updated_at": "2017-06-24T18:18:31Z"
    }
  ],
  "created_at": "2017-06-24T14:02:03Z",
  "number": 4100,
  "state": "closed",
  "title": "invoke-webrequest not returning forms or parsedhtml on Linux",
  "updated_at": "2017-06-26T16:26:13Z"
}