{
  "_url": "https://github.com/PowerShell/PowerShell/issues/8327",
  "author": "stamminator",
  "body": "<!--\r\n\r\nFor Windows PowerShell 5.1 issues, suggestions, or feature requests please use the following link instead:\r\nWindows PowerShell [UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell)\r\n\r\nThis repository is **ONLY** for PowerShell Core 6 issues.\r\n\r\n- Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\r\n- Search the existing issues.\r\n- Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\r\n- Refer to the [known issues](https://docs.microsoft.com/powershell/scripting/whats-new/known-issues-ps6?view=powershell-6).\r\n\r\n-->\r\n\r\n# Steps to reproduce\r\n\r\nLaunch PowerShell Core as administrator\r\n\r\n# Expected behavior\r\n\r\nPS Core launches with admin permissions\r\n\r\n# Actual behavior\r\n\r\nConsole window briefly opens, but before PS Core initializes, the window crashes. The following two Windows error logs correspond to the crash:\r\n\r\n```none\r\nLog Name:      Application\r\nSource:        .NET Runtime\r\nDate:          11/20/2018 5:33:59 PM\r\nEvent ID:      1023\r\nTask Category: None\r\nLevel:         Error\r\nKeywords:      Classic\r\nUser:          N/A\r\nComputer:      ****\r\nDescription:\r\nApplication: pwsh.exe\r\nCoreCLR Version: 4.6.26919.2\r\nDescription: The process was terminated due to an internal error in the .NET Runtime at IP 00007FFAD92324CA (00007FFAD9230000) with exit code 80131506.\r\n\r\nEvent Xml:\r\n<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\r\n  <System>\r\n    <Provider Name=\".NET Runtime\" />\r\n    <EventID Qualifiers=\"0\">1023</EventID>\r\n    <Level>2</Level>\r\n    <Task>0</Task>\r\n    <Keywords>0x80000000000000</Keywords>\r\n    <TimeCreated SystemTime=\"2018-11-20T22:33:59.143639200Z\" />\r\n    <EventRecordID>58605</EventRecordID>\r\n    <Channel>Application</Channel>\r\n    <Computer>****</Computer>\r\n    <Security />\r\n  </System>\r\n  <EventData>\r\n    <Data>Application: pwsh.exe\r\nCoreCLR Version: 4.6.26919.2\r\nDescription: The process was terminated due to an internal error in the .NET Runtime at IP 00007FFAD92324CA (00007FFAD9230000) with exit code 80131506.\r\n</Data>\r\n  </EventData>\r\n</Event>\r\n```\r\n\r\n```none\r\nLog Name:      Application\r\nSource:        Application Error\r\nDate:          11/20/2018 5:33:59 PM\r\nEvent ID:      1000\r\nTask Category: (100)\r\nLevel:         Error\r\nKeywords:      Classic\r\nUser:          N/A\r\nComputer:      ****\r\nDescription:\r\nFaulting application name: pwsh.exe, version: 6.1.1.0, time stamp: 0x5ba1bb46\r\nFaulting module name: coreclr.dll, version: 4.6.26919.2, time stamp: 0x5ba198ed\r\nException code: 0xc0000005\r\nFault offset: 0x00000000000024ca\r\nFaulting process id: 0x5f44\r\nFaulting application start time: 0x01d4812120c88def\r\nFaulting application path: C:\\Program Files\\PowerShell\\6\\pwsh.exe\r\nFaulting module path: C:\\Program Files\\PowerShell\\6\\coreclr.dll\r\nReport Id: 6898f317-19f1-41db-9a57-d4c431fad29f\r\nFaulting package full name: \r\nFaulting package-relative application ID: \r\nEvent Xml:\r\n<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\r\n  <System>\r\n    <Provider Name=\"Application Error\" />\r\n    <EventID Qualifiers=\"0\">1000</EventID>\r\n    <Level>2</Level>\r\n    <Task>100</Task>\r\n    <Keywords>0x80000000000000</Keywords>\r\n    <TimeCreated SystemTime=\"2018-11-20T22:33:59.340632200Z\" />\r\n    <EventRecordID>58606</EventRecordID>\r\n    <Channel>Application</Channel>\r\n    <Computer>****</Computer>\r\n    <Security />\r\n  </System>\r\n  <EventData>\r\n    <Data>pwsh.exe</Data>\r\n    <Data>6.1.1.0</Data>\r\n    <Data>5ba1bb46</Data>\r\n    <Data>coreclr.dll</Data>\r\n    <Data>4.6.26919.2</Data>\r\n    <Data>5ba198ed</Data>\r\n    <Data>c0000005</Data>\r\n    <Data>00000000000024ca</Data>\r\n    <Data>5f44</Data>\r\n    <Data>01d4812120c88def</Data>\r\n    <Data>C:\\Program Files\\PowerShell\\6\\pwsh.exe</Data>\r\n    <Data>C:\\Program Files\\PowerShell\\6\\coreclr.dll</Data>\r\n    <Data>6898f317-19f1-41db-9a57-d4c431fad29f</Data>\r\n    <Data>\r\n    </Data>\r\n    <Data>\r\n    </Data>\r\n  </EventData>\r\n</Event>\r\n```\r\n\r\n# Environment data\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n```none\r\nPSVersion                      6.1.1\r\nPSEdition                      Core\r\nGitCommitId                    6.1.1\r\nOS                             Microsoft Windows 10.0.17134\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n",
  "closed_at": "2018-11-20T23:28:38Z",
  "comments": [
    {
      "author": "stamminator",
      "author_association": "NONE",
      "body": "Reboot fixed it \ud83e\udd37\u200d\u2642\ufe0f",
      "created_at": "2018-11-20T23:28:38Z",
      "updated_at": "2018-11-20T23:28:38Z"
    }
  ],
  "created_at": "2018-11-20T23:02:49Z",
  "number": 8327,
  "state": "closed",
  "title": "\"Run as Administrator\" crashes",
  "updated_at": "2018-11-20T23:28:38Z"
}