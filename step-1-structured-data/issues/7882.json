{
  "_url": "https://github.com/PowerShell/PowerShell/issues/7882",
  "author": "malhovic",
  "body": "Unable to log onto an azure account. States Login-AzureRmAccount (or Connect-AzureRmAccount or Add-AzureRmAccount) doesn't exist.\r\n\r\n`$psversiontable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.1.0\r\nPSEdition                      Core\r\nGitCommitId                    6.1.0\r\nOS                             Microsoft Windows 10.0.17134\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0`\r\n\r\n`Get-Module -ListAvailable\r\n\r\n\r\n    Directory: C:\\Program Files\\PowerShell\\Modules\r\n\r\n\r\nModuleType Version    Name                                PSEdition ExportedCommands\r\n---------- -------    ----                                --------- ----------------\r\nScript     0.5.4      Azure.AnalysisServices              Desk      {Add-AzureAnalysisServicesAccount, Restart-AzureAnalysisServicesInstance, Export-AzureAnalysisServicesInstanceLog, Sync-AzureAnalysisServicesInstance}\r\nScript     4.6.0      Azure.Storage                       Desk      {Get-AzureStorageTable, New-AzureStorageTableSASToken, New-AzureStorageTableStoredAccessPolicy, New-AzureStorageTable...}\r\nBinary     2.0.1.16   AzureAD                             Desk\r\nScript     6.9.0      AzureRM                             Desk\r\nScript     0.6.14     AzureRM.AnalysisServices            Desk      {Resume-AzureRmAnalysisServicesServer, Suspend-AzureRmAnalysisServicesServer, Get-AzureRmAnalysisServicesServer, Remove-AzureRmAnalysisServicesServer...}\r\nScript     6.1.5      AzureRM.ApiManagement               Desk      {Add-AzureRmApiManagementRegion, Get-AzureRmApiManagementSsoToken, New-AzureRmApiManagementHostnameConfiguration, New-AzureRmApiManagementCustomHostnameConfig...\r\nScript     0.1.8      AzureRM.ApplicationInsights         Desk      {Get-AzureRmApplicationInsights, New-AzureRmApplicationInsights, Remove-AzureRmApplicationInsights, Set-AzureRmApplicationInsightsPricingPlan...}\r\nScript     5.1.1      AzureRM.Automation                  Desk      {Get-AzureRMAutomationHybridWorkerGroup, Get-AzureRmAutomationJobOutputRecord, Import-AzureRmAutomationDscNodeConfiguration, Export-AzureRmAutomationDscConfig...\r\nScript     4.0.10     AzureRM.Backup                      Desk      {Backup-AzureRmBackupItem, Enable-AzureRmBackupContainerReregistration, Get-AzureRmBackupContainer, Register-AzureRmBackupContainer...}\r\nScript     4.1.5      AzureRM.Batch                       Desk      {Remove-AzureRmBatchAccount, Get-AzureRmBatchAccount, Get-AzureRmBatchAccountKeys, New-AzureRmBatchAccount...}\r\nScript     0.14.6     AzureRM.Billing                     Desk      {Get-AzureRmBillingInvoice, Get-AzureRmBillingPeriod, Get-AzureRmEnrollmentAccount}\r\nScript     5.0.6      AzureRM.Cdn                         Desk      {Get-AzureRmCdnProfile, Get-AzureRmCdnProfileSsoUrl, New-AzureRmCdnProfile, Remove-AzureRmCdnProfile...}\r\nScript     0.9.10     AzureRM.CognitiveServices           Desk      {Get-AzureRmCognitiveServicesAccount, Get-AzureRmCognitiveServicesAccountKey, Get-AzureRmCognitiveServicesAccountSkus, Get-AzureRmCognitiveServicesAccountUsag...\r\nScript     5.6.0      AzureRM.Compute                     Desk      {Remove-AzureRmAvailabilitySet, Get-AzureRmAvailabilitySet, New-AzureRmAvailabilitySet, Update-AzureRmAvailabilitySet...}\r\nScript     0.3.7      AzureRM.Consumption                 Desk      {Get-AzureRmConsumptionBudget, Get-AzureRmConsumptionMarketplace, Get-AzureRmConsumptionPriceSheet, Get-AzureRmConsumptionReservationDetail...}\r\nScript     0.2.10     AzureRM.ContainerInstance           Desk      {New-AzureRmContainerGroup, Get-AzureRmContainerGroup, Remove-AzureRmContainerGroup, Get-AzureRmContainerInstanceLog}\r\nScript     1.0.10     AzureRM.ContainerRegistry           Desk      {New-AzureRmContainerRegistry, Get-AzureRmContainerRegistry, Update-AzureRmContainerRegistry, Remove-AzureRmContainerRegistry...}\r\nScript     5.0.3      AzureRM.DataFactories               Desk      {Remove-AzureRmDataFactory, Get-AzureRmDataFactoryRun, Get-AzureRmDataFactorySlice, Save-AzureRmDataFactoryLog...}\r\nScript     0.5.10     AzureRM.DataFactoryV2               Desk      {Set-AzureRmDataFactoryV2, Update-AzureRmDataFactoryV2, Get-AzureRmDataFactoryV2, Remove-AzureRmDataFactoryV2...}\r\nScript     5.1.4      AzureRM.DataLakeAnalytics           Desk      {Get-AzureRmDataLakeAnalyticsDataSource, New-AzureRmDataLakeAnalyticsCatalogCredential, Remove-AzureRmDataLakeAnalyticsCatalogCredential, Remove-AzureRmDataLa...\r\nScript     6.1.2      AzureRM.DataLakeStore               Desk      {Get-AzureRmDataLakeStoreTrustedIdProvider, Remove-AzureRmDataLakeStoreTrustedIdProvider, Remove-AzureRmDataLakeStoreFirewallRule, Set-AzureRmDataLakeStoreTru...\r\nScript     4.0.9      AzureRM.DevTestLabs                 Desk      {Get-AzureRmDtlAllowedVMSizesPolicy, Get-AzureRmDtlAutoShutdownPolicy, Get-AzureRmDtlAutoStartPolicy, Get-AzureRmDtlVMsPerLabPolicy...}\r\nScript     5.1.0      AzureRM.Dns                         Desk      {Get-AzureRmDnsRecordSet, New-AzureRmDnsRecordConfig, Remove-AzureRmDnsRecordSet, Set-AzureRmDnsRecordSet...}\r\nScript     0.3.7      AzureRM.EventGrid                   Desk      {New-AzureRmEventGridTopic, Get-AzureRmEventGridTopic, Set-AzureRmEventGridTopic, New-AzureRmEventGridTopicKey...}\r\nScript     0.6.10     AzureRM.EventHub                    Desk      {New-AzureRmEventHubNamespace, Get-AzureRmEventHubNamespace, Set-AzureRmEventHubNamespace, Remove-AzureRmEventHubNamespace...}\r\nScript     4.1.8      AzureRM.HDInsight                   Desk      {Get-AzureRmHDInsightJob, New-AzureRmHDInsightSqoopJobDefinition, Wait-AzureRmHDInsightJob, New-AzureRmHDInsightStreamingMapReduceJobDefinition...}\r\nScript     5.1.4      AzureRM.Insights                    Desk      {Get-AzureRmMetricDefinition, Get-AzureRmMetric, Remove-AzureRmLogProfile, Get-AzureRmLogProfile...}\r\nScript     3.1.8      AzureRM.IotHub                      Desk      {Add-AzureRmIotHubKey, Get-AzureRmIotHubEventHubConsumerGroup, Get-AzureRmIotHubConnectionString, Get-AzureRmIotHubJob...}\r\nScript     5.2.1      AzureRM.KeyVault                    Desk      {Add-AzureKeyVaultCertificate, Update-AzureKeyVaultCertificate, Stop-AzureKeyVaultCertificateOperation, Get-AzureKeyVaultCertificateOperation...}\r\nScript     4.1.4      AzureRM.LogicApp                    Desk      {Get-AzureRmIntegrationAccountAgreement, Get-AzureRmIntegrationAccountCallbackUrl, Get-AzureRmIntegrationAccountCertificate, Get-AzureRmIntegrationAccount...}\r\nScript     0.18.5     AzureRM.MachineLearning             Desk      {Move-AzureRmMlCommitmentAssociation, Get-AzureRmMlCommitmentAssociation, Get-AzureRmMlCommitmentPlanUsageHistory, Remove-AzureRmMlCommitmentPlan...}\r\nScript     0.4.8      AzureRM.MachineLearningCompute      Desk      {Get-AzureRmMlOpCluster, Get-AzureRmMlOpClusterKey, Test-AzureRmMlOpClusterSystemServicesUpdateAvailability, Update-AzureRmMlOpClusterSystemService...}\r\nScript     0.2.5      AzureRM.MarketplaceOrdering         Desk      {Get-AzureRmMarketplaceTerms, Set-AzureRmMarketplaceTerms}\r\nScript     0.10.4     AzureRM.Media                       Desk      {Sync-AzureRmMediaServiceStorageKeys, Set-AzureRmMediaServiceKey, Get-AzureRmMediaServiceKeys, Get-AzureRmMediaServiceNameAvailability...}\r\nScript     6.8.0      AzureRM.Network                     Desk      {Add-AzureRmApplicationGatewayAuthenticationCertificate, Get-AzureRmApplicationGatewayAuthenticationCertificate, New-AzureRmApplicationGatewayAuthenticationCe...\r\nScript     5.0.3      AzureRM.NotificationHubs            Desk      {Get-AzureRmNotificationHub, Get-AzureRmNotificationHubAuthorizationRules, Get-AzureRmNotificationHubListKeys, Get-AzureRmNotificationHubPNSCredentials...}\r\nScript     5.0.6      AzureRM.OperationalInsights         Desk      {New-AzureRmOperationalInsightsAzureActivityLogDataSource, New-AzureRmOperationalInsightsCustomLogDataSource, Disable-AzureRmOperationalInsightsLinuxCustomLog...\r\nScript     1.0.4      AzureRM.PolicyInsights              Desk      {Get-AzureRmPolicyEvent, Get-AzureRmPolicyState, Get-AzureRmPolicyStateSummary}\r\nScript     4.1.10     AzureRM.PowerBIEmbedded             Desk      {Remove-AzureRmPowerBIWorkspaceCollection, Get-AzureRmPowerBIWorkspaceCollection, Get-AzureRmPowerBIWorkspaceCollectionAccessKeys, Get-AzureRmPowerBIWorkspace...\r\nScript     5.6.0      AzureRM.profile                     Desk      {Disable-AzureRmDataCollection, Disable-AzureRmContextAutosave, Enable-AzureRmDataCollection, Enable-AzureRmContextAutosave...}\r\nScript     4.1.8      AzureRM.RecoveryServices            Desk      {Get-AzureRmRecoveryServicesBackupProperty, Get-AzureRmRecoveryServicesVault, Get-AzureRmRecoveryServicesVaultSettingsFile, New-AzureRmRecoveryServicesVault...}\r\nScript     4.4.1      AzureRM.RecoveryServices.Backup     Desk      {Backup-AzureRmRecoveryServicesBackupItem, Get-AzureRmRecoveryServicesBackupManagementServer, Get-AzureRmRecoveryServicesBackupContainer, Unregister-AzureRmRe...\r\nScript     0.2.10     AzureRM.RecoveryServices.SiteRec... Desk      {Edit-AzureRmRecoveryServicesAsrRecoveryPlan, Get-AzureRmRecoveryServicesAsrAlertSetting, Get-AzureRmRecoveryServicesAsrEvent, Get-AzureRmRecoveryServicesAsrF...\r\nScript     5.0.6      AzureRM.RedisCache                  Desk      {Remove-AzureRmRedisCachePatchSchedule, New-AzureRmRedisCacheScheduleEntry, Get-AzureRmRedisCachePatchSchedule, New-AzureRmRedisCachePatchSchedule...}\r\nScript     0.3.10     AzureRM.Relay                       Desk      {New-AzureRmRelayNamespace, Get-AzureRmRelayNamespace, Set-AzureRmRelayNamespace, Remove-AzureRmRelayNamespace...}\r\nScript     6.5.0      AzureRM.Resources                   Desk      {Get-AzureRmProviderOperation, Remove-AzureRmRoleAssignment, Get-AzureRmRoleAssignment, New-AzureRmRoleAssignment...}\r\nScript     0.16.10    AzureRM.Scheduler                   Desk      {Disable-AzureRmSchedulerJobCollection, Enable-AzureRmSchedulerJobCollection, Get-AzureRmSchedulerJobCollection, Get-AzureRmSchedulerJob...}\r\nScript     0.6.12     AzureRM.ServiceBus                  Desk      {New-AzureRmServiceBusNamespace, Get-AzureRmServiceBusNamespace, Set-AzureRmServiceBusNamespace, Remove-AzureRmServiceBusNamespace...}\r\nScript     0.3.12     AzureRM.ServiceFabric               Desk      {Add-AzureRmServiceFabricApplicationCertificate, Add-AzureRmServiceFabricClientCertificate, Add-AzureRmServiceFabricClusterCertificate, Add-AzureRmServiceFabr...\r\nScript     1.0.0      AzureRM.SignalR                     Desk      {New-AzureRmSignalR, Get-AzureRmSignalR, Get-AzureRmSignalRKey, New-AzureRmSignalRKey...}\r\nScript     4.11.3     AzureRM.Sql                         Desk      {Get-AzureRmSqlDatabaseTransparentDataEncryption, Get-AzureRmSqlDatabaseTransparentDataEncryptionActivity, Set-AzureRmSqlDatabaseTransparentDataEncryption, Ge...\r\nScript     5.1.0      AzureRM.Storage                     Desk      {Get-AzureRmStorageAccount, Get-AzureRmStorageAccountKey, New-AzureRmStorageAccount, New-AzureRmStorageAccountKey...}\r\nScript     4.0.10     AzureRM.StreamAnalytics             Desk      {Get-AzureRmStreamAnalyticsFunction, Get-AzureRmStreamAnalyticsDefaultFunctionDefinition, New-AzureRmStreamAnalyticsFunction, Remove-AzureRmStreamAnalyticsFun...\r\nScript     4.0.5      AzureRM.Tags                        Desk      {Remove-AzureRmTag, Get-AzureRmTag, New-AzureRmTag}\r\nScript     4.1.1      AzureRM.TrafficManager              Desk      {Add-AzureRmTrafficManagerCustomHeaderToEndpoint, Remove-AzureRmTrafficManagerCustomHeaderFromEndpoint, Add-AzureRmTrafficManagerCustomHeaderToProfile, Remove...\r\nScript     4.0.5      AzureRM.UsageAggregates             Desk      Get-UsageAggregates\r\nScript     5.1.0      AzureRM.Websites                    Desk      {Get-AzureRmAppServicePlan, Set-AzureRmAppServicePlan, New-AzureRmAppServicePlan, Remove-AzureRmAppServicePlan...}\r\nScript     2.0.1      PowerShellGet                       Desk      {Find-Command, Find-DSCResource, Find-Module, Find-RoleCapability...}\r\nScript     6.7.0.8... VMware.DeployAutomation             Desk      {Add-DeployRule, Add-ProxyServer, Add-ScriptBundle, Copy-DeployRule...}\r\nScript     6.7.0.8... VMware.ImageBuilder                 Desk      {Add-EsxSoftwareDepot, Add-EsxSoftwarePackage, Compare-EsxImageProfile, Export-EsxImageProfile...}\r\nManifest   10.2.0.... VMware.PowerCLI                     Desk\r\nScript     6.7.0.9... VMware.Vim                          Desk\r\nScript     10.1.0.... VMware.VimAutomation.Cis.Core       Desk      {Connect-CisServer, Disconnect-CisServer, Get-CisService}\r\nScript     10.0.0.... VMware.VimAutomation.Cloud          Desk      {Add-CIDatastore, Connect-CIServer, Disconnect-CIServer, Get-Catalog...}\r\nScript     10.1.0.... VMware.VimAutomation.Common         Desk\r\nScript     10.1.0.... VMware.VimAutomation.Core           Desk      {Add-PassthroughDevice, Add-VirtualSwitchPhysicalNetworkAdapter, Add-VMHost, Add-VMHostNtpServer...}\r\nScript     6.5.4.7... VMware.VimAutomation.HA             Desk      Get-DrmInfo\r\nScript     7.5.0.8... VMware.VimAutomation.HorizonView    Desk      {Connect-HVServer, Disconnect-HVServer}\r\nScript     10.0.0.... VMware.VimAutomation.License        Desk      Get-LicenseDataManager\r\nScript     10.2.0.... VMware.VimAutomation.Nsxt           Desk      {Connect-NsxtServer, Disconnect-NsxtServer, Get-NsxtService}\r\nScript     10.0.0.... VMware.VimAutomation.PCloud         Desk      {Connect-PIServer, Disconnect-PIServer, Get-PIComputeInstance, Get-PIDatacenter}\r\nScript     10.1.0.... VMware.VimAutomation.Sdk            Desk\r\nScript     10.0.0.... VMware.VimAutomation.Srm            Desk      {Connect-SrmServer, Disconnect-SrmServer}\r\nScript     10.1.0.... VMware.VimAutomation.Storage        Desk      {Add-KeyManagementServer, Copy-VDisk, Export-SpbmStoragePolicy, Get-KeyManagementServer...}\r\nScript     1.2.0.0    VMware.VimAutomation.StorageUtility Desk      Update-VmfsDatastore\r\nScript     10.1.0.... VMware.VimAutomation.Vds            Desk      {Add-VDSwitchPhysicalNetworkAdapter, Add-VDSwitchVMHost, Export-VDPortGroup, Export-VDSwitch...}\r\nScript     10.0.0.... VMware.VimAutomation.Vmc            Desk      {Connect-Vmc, Disconnect-Vmc, Get-VmcService, Connect-VmcServer...}\r\nScript     10.0.0.... VMware.VimAutomation.vROps          Desk      {Connect-OMServer, Disconnect-OMServer, Get-OMAlert, Get-OMAlertDefinition...}\r\nScript     6.5.1.7... VMware.VumAutomation                Desk      {Add-EntityBaseline, Copy-Patch, Get-Baseline, Get-Compliance...}\r\n\r\n\r\n    Directory: C:\\program files\\powershell\\6\\Modules\r\n\r\n\r\nModuleType Version    Name                                PSEdition ExportedCommands\r\n---------- -------    ----                                --------- ----------------\r\nManifest   6.1.0.0    CimCmdlets                          Core      {Get-CimAssociatedInstance, Get-CimClass, Get-CimInstance, Get-CimSession...}\r\nManifest   1.1.0.0    Microsoft.PowerShell.Archive        Desk      {Compress-Archive, Expand-Archive}\r\nManifest   6.1.0.0    Microsoft.PowerShell.Diagnostics    Core      {Get-WinEvent, New-WinEvent}\r\nManifest   6.1.0.0    Microsoft.PowerShell.Host           Core      {Start-Transcript, Stop-Transcript}\r\nManifest   6.1.0.0    Microsoft.PowerShell.Management     Core      {Add-Content, Clear-Content, Clear-ItemProperty, Join-Path...}\r\nManifest   6.1.0.0    Microsoft.PowerShell.Security       Core      {Get-Acl, Set-Acl, Get-PfxCertificate, Get-Credential...}\r\nManifest   6.1.0.0    Microsoft.PowerShell.Utility        Core      {Format-List, Format-Custom, Format-Table, Format-Wide...}\r\nManifest   6.1.0.0    Microsoft.WSMan.Management          Core      {Disable-WSManCredSSP, Enable-WSManCredSSP, Get-WSManCredSSP, Set-WSManQuickConfig...}\r\nScript     1.1.7.2    PackageManagement                   Desk      {Find-Package, Get-Package, Get-PackageProvider, Get-PackageSource...}\r\nScript     1.6.7      PowerShellGet                       Desk      {Find-Command, Find-DSCResource, Find-Module, Find-RoleCapability...}\r\nScript     0.0        PSDesiredStateConfiguration         Desk      {Initialize-ConfigurationRuntimeState, ValidateNodeManager, Get-PSDefaultConfigurationDocument, Test-NodeResources...}\r\nScript     6.1.0.0    PSDiagnostics                       Core      {Disable-PSTrace, Disable-PSWSManCombinedTrace, Disable-WSManTrace, Enable-PSTrace...}\r\nScript     2.0.0      PSReadLine                          Desk      {Get-PSReadLineKeyHandler, Set-PSReadLineKeyHandler, Remove-PSReadLineKeyHandler, Get-PSReadLineOption...}\r\nBinary     1.1.2      ThreadJob                           Desk      Start-ThreadJob`\r\n\r\n`Login-AzureRmAccount\r\nLogin-AzureRmAccount : The term 'Login-AzureRmAccount' is not recognized as the name of a cmdlet, function, script file, or operable program.\r\nCheck the spelling of the name, or if a path was included, verify that the path is correct and try again.\r\nAt line:1 char:1\r\n+ Login-AzureRmAccount\r\n+ ~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : ObjectNotFound: (Login-AzureRmAccount:String) [], CommandNotFoundException\r\n+ FullyQualifiedErrorId : CommandNotFoundException`\r\n\r\nIf I move over to PowerShell 5.1, I am able to run the commands as normal without issue.",
  "closed_at": "2018-09-28T20:01:09Z",
  "comments": [
    {
      "author": "kilasuit",
      "author_association": "COLLABORATOR",
      "body": "This isn't an issue with PowerShell but with the Azure PowerShell modules and should be raised over at https://github.com/Azure/azure-powershell/issues",
      "created_at": "2018-09-28T12:50:56Z",
      "updated_at": "2018-09-28T12:50:56Z"
    },
    {
      "author": "malhovic",
      "author_association": "NONE",
      "body": "What's convening is that it works in Powershell 5.X. not sure that makes it\na azure Powershell issue unless they need to recode to be compatible with\n6/Core.\n\nOn Fri, Sep 28, 2018 at 8:51 AM Ryan Yates <notifications@github.com> wrote:\n\n> This isn't an issue with PowerShell but with the Azure PowerShell modules\n> and should be raised over at\n> https://github.com/Azure/azure-powershell/issues\n>\n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/PowerShell/PowerShell/issues/7882#issuecomment-425425535>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AMKRP2ORztv5GmNWAMQB-xVtxuAI7QGNks5ufhtogaJpZM4W9eMD>\n> .\n>\n",
      "created_at": "2018-09-28T17:06:32Z",
      "updated_at": "2018-09-28T17:06:32Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@malhovic if you look at the Az PowerShell repo, you'll see that they are in progress of having a single `Az` module that works for both Windows PowerShell and PowerShell Core.  The current AzureRM module only works with Windows PowerShell and similarly, the AzureRM.NetCore module only works with PowerShell Core.  The new `Az` module will resolve this issue.  As suggested by @kilasuit you should follow up in their repo as this is not a PowerShell Core problem we can fix.",
      "created_at": "2018-09-28T20:01:09Z",
      "updated_at": "2018-09-28T20:01:09Z"
    }
  ],
  "created_at": "2018-09-27T21:15:25Z",
  "number": 7882,
  "state": "closed",
  "title": "Unable to Log Onto Azure Accounts",
  "updated_at": "2018-09-28T20:01:16Z"
}