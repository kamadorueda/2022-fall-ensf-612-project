{
  "_url": "https://github.com/PowerShell/PowerShell/issues/8356",
  "author": "iSazonov",
  "body": "(Replace #8237)\r\n\r\n## Motivation\r\n\r\nI have a PR where there are many new xUnit tests.\r\nIt would also be useful to create new xUnit tests for public APIs.\r\nThe number of xUnit tests will increase and their ordering is required.\r\n\r\n## PR Summary\r\n\r\n- Move C# xUnit tests in new folder. This allows to put new xUnit tests in directory structure in accordance with directory structure where cs files are.\r\n- Use an xUnit TestCaseOrderer attribute to sequentially process tests for `powershell.config.json`.\r\n- Update README.md\r\n- A race condition was fixed which allowed  to run all XUnit tests in single batch job.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-12-13T22:22:08Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw @TravisEz13 @adityapatwardhan Could you please review the PR? It blocks my follow PRs (one could be used to speed up startup).",
      "created_at": "2018-11-30T07:26:30Z",
      "updated_at": "2018-11-30T07:26:30Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "@iSazonov Please resolve the merge conflict.",
      "created_at": "2018-12-06T00:55:33Z",
      "updated_at": "2018-12-06T00:55:33Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I restarted [CI-Windows ](https://powershell.visualstudio.com/PowerShell/_build/results?buildId=7548) - there was a race condition again. Perhaps it is only test specific issue. @adityapatwardhan @daxian-dbw could you please look? There test cleanup code failed but I don't understand that process lock the config file. I guess it is other test processes. In this case we need improve the test cleanup code like we did in `WaitFile()`.",
      "created_at": "2018-12-06T05:26:51Z",
      "updated_at": "2018-12-06T05:28:04Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I updated #8400 to fix the rare race condition in tests.\r\n\r\n@adityapatwardhan We could merge.",
      "created_at": "2018-12-07T07:41:54Z",
      "updated_at": "2018-12-07T07:41:54Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@adityapatwardhan Could you please update your code review and merge?",
      "created_at": "2018-12-11T18:43:45Z",
      "updated_at": "2018-12-11T18:43:45Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@iSazonov \t@adityapatwardhan \tIs out of the office until the new year.",
      "created_at": "2018-12-11T22:42:04Z",
      "updated_at": "2018-12-11T22:42:04Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13 If you could merge I could continue my work.",
      "created_at": "2018-12-12T05:43:55Z",
      "updated_at": "2018-12-12T05:43:55Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "rebased the branch mainly to verify the tests still pass",
      "created_at": "2018-12-12T21:12:53Z",
      "updated_at": "2018-12-12T21:12:53Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "The test TestRunspaceWithPowerShellAndInitialSessionState fail exclusively and randomly on MacOs if we use `CreateDefault2()`. The test passes with `CreateDefault()`. I guess that previously we hided an race condition issue on MacOs by using sequential tests.\r\nI added the issue to #8400 for tracking the issue and added commit to use ``CreateDefault()`.",
      "created_at": "2018-12-13T12:36:28Z",
      "updated_at": "2018-12-13T12:36:28Z"
    }
  ],
  "created_at": "2018-11-29T05:11:35Z",
  "number": 8356,
  "state": "closed",
  "title": "Move xUnit tests in new folder",
  "updated_at": "2018-12-14T06:24:18Z"
}