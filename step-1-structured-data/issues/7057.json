{
  "_url": "https://github.com/PowerShell/PowerShell/issues/7057",
  "author": "kylesferrazza",
  "body": "<!--\r\n\r\nFor Windows PowerShell 5.1 issues, suggestions, or feature requests please use the following link instead:\r\n- Windows PowerShell [UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell)\r\n\r\nIf it is a bug report:\r\n- make sure you are able to repro it on the latest released version. \r\nYou can install the latest version from https://github.com/PowerShell/PowerShell/releases\r\n- Search the existing issues.\r\n- Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\r\n- Refer to the [known issues](https://docs.microsoft.com/powershell/scripting/whats-new/known-issues-ps6?view=powershell-6).\r\n- Fill out the following repro template:\r\n\r\nIf it's not a bug, please remove the template and elaborate the issue in your own words.\r\n-->\r\n\r\nHi there, I am the maintainer of the [powershell](https://aur.archlinux.org/packages/powershell/) package for Arch Linux.\r\n\r\nI was just working on updating the PKGBUILD for the latest version of dotnet, and encountered the following error message:\r\n```\r\nUnhandled Exception: System.ArgumentException: Cannot find the file that contains the reference list. The path '[build directory]/src/TypeCatalogGen/powershell.inc' doesn't exist.\r\n```\r\nAfter closer inspection, it seems that `powershell.inc` is not generated by the given msbuild target any more.\r\n\r\nIs this an error on my end, or has the build process changed?\r\n\r\nSteps to reproduce\r\n------------------\r\nFollowing the steps in [docs/building/internals.md](/PowerShell/PowerShell/blob/master/docs/building/internals.md)\r\n```bash\r\ndotnet msbuild src/Microsoft.PowerShell.SDK/Microsoft.PowerShell.SDK.csproj /t:_GetDependencies \"/property:DesignTimeBuild=true;_DependencyFile=$(pwd)/src/TypeCatalogGen/powershell.inc\" /nologo\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\npowershell.inc gets generated at `src/TypeCatalogGen/powershell.inc`.\r\n\r\nActual behavior\r\n---------------\r\nPowershell.inc is not created, but no errors are reported.",
  "closed_at": "2018-06-14T18:06:17Z",
  "comments": [
    {
      "author": "rjmholt",
      "author_association": "COLLABORATOR",
      "body": "Hi @kylesferrazza! How are you building PowerShell itself? I'm not very savvy on `.inc` files, but have you tried `Start-PSBuild <other options> -TypeGen`?",
      "created_at": "2018-06-13T16:45:54Z",
      "updated_at": "2018-06-13T16:46:24Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@kylesferrazza The change is in .Net Core. Please see code and comments\r\nhttps://github.com/PowerShell/PowerShell/blob/master/build.psm1#L1922-L1940",
      "created_at": "2018-06-13T16:48:45Z",
      "updated_at": "2018-06-13T16:48:45Z"
    },
    {
      "author": "kylesferrazza",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov thanks! That fixed it.",
      "created_at": "2018-06-13T16:55:22Z",
      "updated_at": "2018-06-13T16:55:22Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "I will update the document `internals.md`. Will close this issue along with the doc update.",
      "created_at": "2018-06-13T17:19:14Z",
      "updated_at": "2018-06-13T17:19:14Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@kylesferrazza If you have automatically build indicator we could add it in our readme.md to see Arch Linux night build status.",
      "created_at": "2018-06-13T17:22:06Z",
      "updated_at": "2018-06-13T17:22:06Z"
    }
  ],
  "created_at": "2018-06-13T15:25:53Z",
  "labels": [
    "Issue-Question",
    "Area-Maintainers-Build",
    "Resolution-Answered"
  ],
  "number": 7057,
  "state": "closed",
  "title": "Trouble generating powershell.inc using the msbuild target from internals.md",
  "updated_at": "2018-06-14T18:06:17Z"
}