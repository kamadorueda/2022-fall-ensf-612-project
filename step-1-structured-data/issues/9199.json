{
  "_url": "https://github.com/PowerShell/PowerShell/issues/9199",
  "author": "SteveL-MSFT",
  "body": "<!-- Anything that looks like this is a comment and can't be seen after the Pull Request is created. -->\r\n\r\n# PR Summary\r\n\r\nOn Unix systems, fallback to plaintext manipulation instead of using the DPAPI which is not available.\r\n\r\n## PR Context\r\n\r\nCurrently, existing scripts that use SecureString cmdlets fail with an error complaining about crypt32.dll not being available.  This change allows these cmdlets to be used, but there is no encryption of the string.\r\n.Net already [states](https://docs.microsoft.com/en-us/dotnet/api/system.security.securestring?view=netcore-2.1#remarks) that the contents of a SecureString are not encrypted on .Net Core.\r\n\r\nFix https://github.com/PowerShell/PowerShell/issues/1654\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` or `[ WIP ]` to the beginning of the title (the `WIP` bot will keep its status check at `Pending` while the prefix is present) and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [x] [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [x] PR: https://github.com/MicrosoftDocs/PowerShell-Docs/pull/4030 https://github.com/MicrosoftDocs/PowerShell-Docs/pull/4034\r\n- **Testing - New and feature**\r\n    - [ ] N/A or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` to your commit messages if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2019-03-23T17:11:06Z",
  "comments": [
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Reviewed the CodeFactor issues, all are for code I didn't change (but wrapped in `#if`), made some fixes that I agreed with, but the remaining are not applicable in the context of this PR (false hungarian detection, underscores in fields)",
      "created_at": "2019-03-22T17:43:15Z",
      "updated_at": "2019-03-22T17:43:15Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "From mentioned docs:\r\n> On the Windows operating system, the contents of a SecureString instance's internal character array are encrypted.\r\n\r\nIt seems we need to correct our already merged docs.\r\n\r\nAlso have we problems in remote scenarios?",
      "created_at": "2019-03-22T18:12:06Z",
      "updated_at": "2019-03-22T18:12:06Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov Looking at the corefx sources, it appears that on Windows, it does call into the crypt32 apis and encrypts the in memory representation in SecureString.  I'll submit a PR to update the docs to reflect this.  As far as remoting, SecureString encryption is local to the machine so it is always decrypted before sending over the encrypted PSRP channel before being re-secured as a SecureString, so no impact there.",
      "created_at": "2019-03-22T19:36:15Z",
      "updated_at": "2019-03-22T19:36:15Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PoshChan Remind me in 1 minute",
      "created_at": "2019-03-22T20:22:41Z",
      "updated_at": "2019-03-22T20:22:41Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT, I do not understand: Remind me in 1 minute",
      "created_at": "2019-03-22T20:23:02Z",
      "updated_at": "2019-03-22T20:23:02Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PoshChan Please remind me in 1 minute",
      "created_at": "2019-03-22T20:23:40Z",
      "updated_at": "2019-03-22T20:23:40Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT, will remind you in 1 minute",
      "created_at": "2019-03-22T20:23:50Z",
      "updated_at": "2019-03-22T20:23:50Z"
    },
    {
      "author": "PoshChan",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT, this is the reminder you requested 1 minute ago",
      "created_at": "2019-03-22T20:24:45Z",
      "updated_at": "2019-03-22T20:24:45Z"
    }
  ],
  "created_at": "2019-03-22T17:09:50Z",
  "number": 9199,
  "state": "closed",
  "title": "Enable securestring cmdlets for non-Windows",
  "updated_at": "2019-03-25T17:03:26Z"
}