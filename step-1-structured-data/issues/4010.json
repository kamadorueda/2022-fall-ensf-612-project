{
  "_url": "https://github.com/PowerShell/PowerShell/issues/4010",
  "author": "anmenaga",
  "body": "NestedModules/RootModule are fields in a module manifest (.psd1) that reference other modules using string paths. Assuming that a module is written to be cross-platform, the same psd1 module manifest should be successfully imported on both Windows and Linux platforms.\r\nThe bug is that in some cases Import-Module on Linux fails for a totally valid module. It depends on format of NestedModules/RootModule paths.\r\n\r\nThe root of the problem is using simple Path.Combine for constructing a path to the submodule, that is then tested using NativeItemExists methods, resulting in calls like\r\n`Unix.NativeMethods.IsFile(\"/home/testuser/TestRootModule/.\\SubModule\\SubModule.psm1\")`\r\nwhich fails and Import-Module returns an error.\r\n\r\nThe fix is to resolve submodule paths using existing FileSystem provider utilities.\r\n\r\nTest results on Ubuntu 14 after the fix:\r\n![afterfix](https://user-images.githubusercontent.com/11860095/27152409-9c1e2714-5102-11e7-8157-4bcb903aa042.png)\r\n\r\nTest results on Ubuntu 14 before the fix:\r\n![beforefix](https://user-images.githubusercontent.com/11860095/27152408-9c1ccf86-5102-11e7-830f-fcee2fdc2ebb.png)\r\n\r\nFix #3693 ",
  "closed_at": "2017-06-28T23:35:34Z",
  "comments": [],
  "created_at": "2017-06-14T20:17:34Z",
  "number": 4010,
  "state": "closed",
  "title": "Fixing Import-Module on Linux for special cases of NestedModules/RootModule path format",
  "updated_at": "2018-10-31T21:20:09Z"
}