{
  "_url": "https://github.com/PowerShell/PowerShell/issues/1599",
  "author": "vors",
  "body": "- [x] Resolves issue #1465.\n- [x] Code is [rebased](https://github.com/PowerShell/PowerShell/blob/master/docs/git/README.md#sync-your-local-repo) on `origin/master`.\n- [x] Add tests that fail without your changes.\n- [ ] N/A: Update all relevant [documentation](https://github.com/PowerShell/PowerShell/tree/master/docs).\n  \n  On Linux, it's common to use error stream (2) as an information stream.\n  There is no errors in this case, it's just a way to report info.\n  When PowerShell redirects error stream, it wraps all output from stream 2\n  in NativeCommandError ErrorRecord and subsequent text in\n  NativeCommandErrorMessage ErrorRecord. \n  \n  That doesn't happen for interactive experience (when there is no\n  redirection), but it shows up in logs, scripting and non-console\n  powershell hosts (i.e. PowerShell ISE).\n  \n  Here we change the formatter, so we are keeping the ErrorRecords\n  objects, but we are changing their default representation.\n  \n  If it's a NativeCommandError, we don't use the regular ErrorRecord\n  formatter. It allows us keep ErrorRecord object,\n  but in redirection case it will look exectly like on the screen.\n  \n  Also, we are change NativeCommandErrorMessage to use one line per\n  ErrorRecord to enable this scenario.\n  \n  We also make the error stream messages show-up without red color.\n\ncc @lzybkr @JamesWTruher @BrucePay \n",
  "closed_at": "2016-08-02T19:15:13Z",
  "comments": [
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "Should we suppress writing to $error as well for stderr output?  I think probably. #Closed\n\n---\n\nRefers to: src/System.Management.Automation/engine/MshCommandRuntime.cs:2919 in 5690b1a. [](commit_id = 5690b1a0d9d7502a27fe12c2c41f5beea967a4aa, deletion_comment = False)\n",
      "created_at": "2016-08-02T00:55:03Z",
      "updated_at": "2016-08-02T01:44:39Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "@lzybkr and me agreed, we are not going to change `$error` variable behavior this time. It's a breaking change (probably from the 2nd bucket), we will discuss it and go thru [breaking change process](https://github.com/PowerShell/PowerShell/blob/master/docs/dev-process/breaking-change-contract.md).\n",
      "created_at": "2016-08-02T01:21:35Z",
      "updated_at": "2016-08-02T01:27:50Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": ":shipit:\n",
      "created_at": "2016-08-02T01:49:58Z",
      "updated_at": "2016-08-02T01:49:58Z"
    },
    {
      "author": "vors",
      "author_association": "COLLABORATOR",
      "body": "@lzybkr I will leave it for comments a little bit. Please, merge it tomorrow, if there are no objections.\n",
      "created_at": "2016-08-02T02:00:27Z",
      "updated_at": "2016-08-02T02:00:36Z"
    }
  ],
  "created_at": "2016-08-02T00:16:58Z",
  "number": 1599,
  "state": "closed",
  "title": "Error stream",
  "updated_at": "2016-08-02T19:15:17Z"
}