{
  "_url": "https://github.com/PowerShell/PowerShell/issues/14306",
  "author": "xtqqczze",
  "body": "https://lgtm.com/projects/g/PowerShell/PowerShell/logs/languages/lang:csharp\r\n\r\n```log\r\n/opt/out/snapshot: Running in /opt/dist: [/opt/dist/tools/linux64/java/bin/java, -jar, /opt/lgtm-worker-tools.jar, interpretConfig, /opt/lgtm-worker-tools.jar, csharp, /opt/out/lgtm.effective.yml]\r\n[2020-12-02 04:29:42] [build] Configuration file:\r\n[2020-12-02 04:29:42] [build] extraction:\r\n[2020-12-02 04:29:42] [build]   csharp:\r\n[2020-12-02 04:29:42] [build]     index:\r\n[2020-12-02 04:29:42] [build]       build_command: \"pwsh -Command \\\"Import-Module ./build.psm1; Start-PSBuild\\\"\"\r\n/opt/out/snapshot: Running in /opt/dist: [/opt/work/lgtm-workspace/lgtm/extract.sh]\r\n[2020-12-02 04:29:45] [build] prepare:\r\n[2020-12-02 04:29:45] [build] index:\r\n[2020-12-02 04:29:46] [build-err] /opt/out/snapshot: Running in /opt/src: [/opt/dist/csharp/tools/autobuild.sh]\r\n[2020-12-02 04:29:48] [build] [2020-12-02 04:29:48] [build] CodeQL C# autobuilder\r\n[2020-12-02 04:29:48] [build] [2020-12-02 04:29:48] [build] Working directory: /opt/src\r\n[2020-12-02 04:29:49] [build] [2020-12-02 04:29:49] [build] Attempting to download .NET Core 5.0.100\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] Running chmod u+x dotnet-install.sh\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] Exit code 0\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] Running ./dotnet-install.sh --channel release --version 5.0.100 --install-dir /opt/src/.dotnet\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] dotnet-install: Note that the intended use of this script is for Continuous Integration (CI) scenarios, where:\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] dotnet-install: - The SDK needs to be installed without user interaction and without admin rights.\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] dotnet-install: - The SDK installation doesn't need to persist across multiple CI runs.\r\n[2020-12-02 04:29:51] [build] [2020-12-02 04:29:51] [build] dotnet-install: To set up a development environment or to run apps, use installers rather than this script. Visit https://dotnet.microsoft.com/download to get the installer.\r\n[2020-12-02 04:29:53] [build] [2020-12-02 04:29:53] [build] dotnet-install: Downloading link: https://dotnetcli.azureedge.net/dotnet/Sdk/5.0.100/dotnet-sdk-5.0.100-linux-x64.tar.gz\r\n[2020-12-02 04:29:55] [build] [2020-12-02 04:29:55] [build] dotnet-install: Extracting zip from https://dotnetcli.azureedge.net/dotnet/Sdk/5.0.100/dotnet-sdk-5.0.100-linux-x64.tar.gz\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] dotnet-install: Adding to current process PATH: `/opt/src/.dotnet`. Note: This change will be visible only when sourcing script.\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] dotnet-install: Note that the script does not resolve dependencies during installation.\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] dotnet-install: To check the list of dependencies, go to https://docs.microsoft.com/dotnet/core/install, select your operating system and check the \"Dependencies\" section.\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] dotnet-install: Installation finished successfully.\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] Exit code 0\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] Running rm dotnet-install.sh\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] Exit code 0\r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build] Running /opt/work/lgtm-workspace/lgtm/index_build_command.sh \r\n[2020-12-02 04:29:59] [build] [2020-12-02 04:29:59] [build-err] + pwsh -Command 'Import-Module ./build.psm1; Start-PSBuild'\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] VERBOSE: Using configuration 'Debug'\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] VERBOSE: Using framework 'net5.0'\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] VERBOSE: Using runtime 'linux-x64'\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] VERBOSE: Top project directory is /opt/src/src/powershell-unix\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Run dotnet restore /opt/src/src/powershell-unix --runtime linux-x64 /property:SDKToUse=Microsoft.NET.Sdk --verbosity quiet\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Welcome to .NET 5.0!\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] ---------------------\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] SDK Version: 5.0.100\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] ----------------\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Installed an ASP.NET Core HTTPS development certificate.\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] To trust the certificate run 'dotnet dev-certs https --trust' (Windows and macOS only).\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Learn about HTTPS: https://aka.ms/dotnet-https\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] ----------------\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Write your first app: https://aka.ms/dotnet-hello-world\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Find out what's new: https://aka.ms/dotnet-whats-new\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Explore documentation: https://aka.ms/dotnet-docs\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Report issues and find source on GitHub: https://github.com/dotnet/core\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] Use 'dotnet --help' to see available commands or visit: https://aka.ms/dotnet-cli\r\n[2020-12-02 04:30:02] [build] [2020-12-02 04:30:02] [build] --------------------------------------------------------------------------------------\r\n[2020-12-02 04:31:45] [build] [2020-12-02 04:31:45] [build] Done restoring /opt/src/src/powershell-unix\r\n[2020-12-02 04:31:45] [build] [2020-12-02 04:31:45] [build] Run dotnet restore /opt/src/src/TypeCatalogGen --runtime linux-x64 /property:SDKToUse=Microsoft.NET.Sdk --verbosity quiet\r\n[2020-12-02 04:31:49] [build] [2020-12-02 04:31:49] [build] Done restoring /opt/src/src/TypeCatalogGen\r\n[2020-12-02 04:31:49] [build] [2020-12-02 04:31:49] [build] Run dotnet restore /opt/src/src/ResGen --runtime linux-x64 /property:SDKToUse=Microsoft.NET.Sdk --verbosity quiet\r\n[2020-12-02 04:31:53] [build] [2020-12-02 04:31:53] [build] Done restoring /opt/src/src/ResGen\r\n[2020-12-02 04:31:53] [build] [2020-12-02 04:31:53] [build] Run dotnet restore /opt/src/src/Modules --runtime linux-x64 /property:SDKToUse=Microsoft.NET.Sdk --verbosity quiet\r\n[2020-12-02 04:32:01] [build] [2020-12-02 04:32:01] [build] Done restoring /opt/src/src/Modules\r\n[2020-12-02 04:32:01] [build] [2020-12-02 04:32:01] [build] Run ResGen (generating C# bindings for resx files)\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] It was not possible to find any compatible framework version\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] The framework 'Microsoft.NETCore.App', version '5.0.0' was not found.\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err]   - The following frameworks were found:\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err]       2.1.13 at [/opt/work/.dotnet/shared/Microsoft.NETCore.App]\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err]       3.1.5 at [/opt/work/.dotnet/shared/Microsoft.NETCore.App]\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] You can resolve the problem by installing the specified framework and/or SDK.\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] The specified framework can be found at:\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err]   - https://aka.ms/dotnet-core-applaunch?framework=Microsoft.NETCore.App&framework_version=5.0.0&arch=x64&rid=ubuntu.19.10-x64\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[91mException: \u001b[0m/opt/src/build.psm1:2228\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[96mLine |\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[96m2228 | \u001b[0m                 \u001b[96mthrow $errorMessage\u001b[0m\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[96m     | \u001b[91m                 ~~~~~~~~~~~~~~~~~~~\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[91m\u001b[96m     | \u001b[91mExecution of { dotnet run } by build.psm1: line 2075 failed\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[96m     | \u001b[91mwith exit code 150\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build-err] \u001b[0m\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [build] Exit code 1\r\n[2020-12-02 04:32:31] [build] [2020-12-02 04:32:31] [ERROR] Spawned process exited abnormally (code 1; tried to run: [/opt/dist/tools/linux64/preload_tracer, /opt/dist/csharp/tools/autobuild.sh])\r\n[2020-12-02 04:32:31] [build-err] A fatal error occurred: Exit status 1 from command: [/opt/dist/csharp/tools/autobuild.sh]\r\n[2020-12-02 04:32:31] [ERROR] Spawned process exited abnormally (code 2; tried to run: [/opt/work/lgtm-workspace/lgtm/extract.sh])\r\nA fatal error occurred: Exit status 2 from command: [/opt/work/lgtm-workspace/lgtm/extract.sh]\r\n\r\n```",
  "closed_at": "2020-12-08T20:43:41Z",
  "comments": [
    {
      "author": "xtqqczze",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov I was thinking we could use LGTM to find and fix issues in our code, for examples see:\r\nhttps://lgtm.com/projects/g/PowerShell/PowerShell/alerts/?mode=list",
      "created_at": "2020-12-02T17:19:09Z",
      "updated_at": "2020-12-02T17:19:09Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> The framework 'Microsoft.NETCore.App', version '5.0.0' was not found.\r\n\r\n",
      "created_at": "2020-12-02T18:04:28Z",
      "updated_at": "2020-12-02T18:04:28Z"
    },
    {
      "author": "xtqqczze",
      "author_association": "CONTRIBUTOR",
      "body": "https://lgtm.com/projects/g/dotnet/runtime/logs/languages/lang:csharp is failing as well",
      "created_at": "2020-12-04T16:20:01Z",
      "updated_at": "2020-12-04T16:20:01Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I guess it is a case for LGTM project - we can do nothing here.",
      "created_at": "2020-12-04T17:51:28Z",
      "updated_at": "2020-12-04T17:51:28Z"
    },
    {
      "author": "xtqqczze",
      "author_association": "CONTRIBUTOR",
      "body": "Related PR #13894 was submitted by @TravisEz13. CodeQL is the library used by LGTM.com.",
      "created_at": "2020-12-04T18:32:55Z",
      "updated_at": "2020-12-04T18:32:55Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "We have CodeQL don't need LGTM.",
      "created_at": "2020-12-08T20:43:41Z",
      "updated_at": "2020-12-08T20:43:41Z"
    },
    {
      "author": "xtqqczze",
      "author_association": "CONTRIBUTOR",
      "body": "This last good commit for LGTM build was [5da0697](https://lgtm.com/projects/g/PowerShell/PowerShell/rev/5da06978b1b10213cb39285977b4a364313e012c).\r\n\r\nThe next commit was 495dea07835c4716ebbe20216c8ea52cb4e44507: Move to `.NET 5 preview.1` (#12140).\r\n\r\nSo it would seem LGTM does not yet support .NET 5.0.\r\n",
      "created_at": "2020-12-09T12:31:47Z",
      "updated_at": "2020-12-09T12:31:47Z"
    },
    {
      "author": "xtqqczze",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 My thinking is we could use [interactive query console on LGTM.com](https://lgtm.com/help/lgtm/using-query-console), or LGTM database with the CodeQL extension for IDE to enable CodeQL queries at development time. This would be complementary to the existing CodeQL check in the PR process.",
      "created_at": "2020-12-09T12:40:00Z",
      "updated_at": "2020-12-09T12:43:14Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "If it's an LGTM issue, this isn't the repo.  You can also build your own database and query it.",
      "created_at": "2020-12-09T17:30:50Z",
      "updated_at": "2020-12-09T17:31:22Z"
    }
  ],
  "created_at": "2020-12-02T16:28:17Z",
  "number": 14306,
  "state": "closed",
  "title": "C# build failing on LGTM",
  "updated_at": "2020-12-09T17:31:22Z"
}