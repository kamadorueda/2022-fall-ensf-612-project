{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2513",
  "author": "praveenbhamidipati",
  "body": "<!--\n\nIf it is a bug report:\n- make sure you are able to repro it on the latest released version. \nYou can install the latest version from https://github.com/PowerShell/PowerShell/releases\n- Search the existing issues.\n- Refer to the [FAQ](../docs/FAQ.md).\n- Refer to the [known issues](../docs/KNOWNISSUES.md).\n- Fill out the following repro template\n\nIf it's not a bug, please remove the template and elaborate the issue in your own words.\n-->\n## Steps to reproduce\n1. Execute the following: `powershell -Command 'Invoke-Command -ComputerName localhost -ScriptBlock {$PSVersionTable}'`\n## Expected behavior\n\nPowershell to give out an error if the cmdlet is not supported\n## Actual behavior\n\nPowershell crashes\n\n```\nGNU gdb (Ubuntu 7.11.1-0ubuntu1~16.04) 7.11.1\nCopyright (C) 2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>.\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /opt/utilities/microsoft/powershell/6.0.0-alpha.11/powershell...(no debugging symbols found)...done.\n(gdb) run -Command '$PSVersionTable'\nStarting program: /opt/utilities/microsoft/powershell/6.0.0-alpha.11/powershell -Command '$PSVersionTable'\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff54cb700 (LWP 1287)]\n[New Thread 0x7ffff4cca700 (LWP 1289)]\n[New Thread 0x7ffff44c9700 (LWP 1291)]\n[New Thread 0x7ffff394f700 (LWP 1292)]\n[New Thread 0x7ffff0561700 (LWP 1295)]\n[New Thread 0x7fffefd60700 (LWP 1296)]\n[New Thread 0x7fffef55f700 (LWP 1297)]\n[New Thread 0x7fffeed5e700 (LWP 1298)]\n[New Thread 0x7fff57ffd700 (LWP 1299)]\n[New Thread 0x7fff577fc700 (LWP 1300)]\n[New Thread 0x7fff567bb700 (LWP 1301)]\n\nName                           Value                                          \n----                           -----                                          \nPSVersion                      6.0.0-alpha                                    \nPSEdition                      Core                                           \nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                        \nBuildVersion                   3.0.0.0                                        \nGitCommitId                    v6.0.0-alpha.11                                \nCLRVersion                                                                    \nWSManStackVersion              3.0                                            \nPSRemotingProtocolVersion      2.3                                            \nSerializationVersion           1.1.0.1                                        \n\n\n[Thread 0x7fff567bb700 (LWP 1301) exited]\n[New Thread 0x7fff567bb700 (LWP 1302)]\n[Thread 0x7fff567bb700 (LWP 1302) exited]\n[Thread 0x7fff577fc700 (LWP 1300) exited]\n[Thread 0x7fff57ffd700 (LWP 1299) exited]\n[Thread 0x7fffeed5e700 (LWP 1298) exited]\n[Thread 0x7fffef55f700 (LWP 1297) exited]\n[Thread 0x7fffefd60700 (LWP 1296) exited]\n[Thread 0x7ffff0561700 (LWP 1295) exited]\n[Thread 0x7ffff394f700 (LWP 1292) exited]\n[Thread 0x7ffff44c9700 (LWP 1291) exited]\n[Thread 0x7ffff4cca700 (LWP 1289) exited]\n[Thread 0x7ffff54cb700 (LWP 1287) exited]\n[Inferior 1 (process 1283) exited normally]\n(gdb) run -Command 'Invoke-Command -ComputerName localhost -ScriptBlock {$PSVersionTable}'\nStarting program: /opt/utilities/microsoft/powershell/6.0.0-alpha.11/powershell -Command 'Invoke-Command -ComputerName localhost -ScriptBlock {$PSVersionTable}'\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7ffff54cb700 (LWP 1309)]\n[New Thread 0x7ffff4cca700 (LWP 1310)]\n[New Thread 0x7ffff44c9700 (LWP 1311)]\n[New Thread 0x7ffff394f700 (LWP 1312)]\n[New Thread 0x7ffff0561700 (LWP 1313)]\n[New Thread 0x7fffefd60700 (LWP 1314)]\n[New Thread 0x7fffef55f700 (LWP 1315)]\n[New Thread 0x7fffeed5e700 (LWP 1316)]\n[New Thread 0x7fff57ffd700 (LWP 1319)]\n[New Thread 0x7fff577fc700 (LWP 1320)]\n[New Thread 0x7fff5674d700 (LWP 1321)]\n\nThread 5 \"powershell\" received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7ffff394f700 (LWP 1312)]\n0x00007fff7fa1e328 in ?? ()\n(gdb) bt\n#0  0x00007fff7fa1e328 in ?? ()\n#1  0x00007ffff394e970 in ?? ()\n#2  0x00007fff582c65e0 in ?? ()\n#3  0x0000000000000000 in ?? ()\n```\n## Environment data\n\n<!-- provide the output of $PSVersionTable -->\n\n``` powershell\n> $PSVersionTable\nName                           Value                                          \n----                           -----                                          \nPSVersion                      6.0.0-alpha                                    \nPSEdition                      Core                                           \nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                        \nBuildVersion                   3.0.0.0                                        \nGitCommitId                    v6.0.0-alpha.11                                \nCLRVersion                                                                    \nWSManStackVersion              3.0                                            \nPSRemotingProtocolVersion      2.3                                            \nSerializationVersion           1.1.0.1                                        \n```\n\n```\n> uname -a\nLinux somebody-lubuntu 4.4.0-31-generic #50-Ubuntu SMP Wed Jul 13 00:07:12 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n```\n> cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=16.04\nDISTRIB_CODENAME=xenial\nDISTRIB_DESCRIPTION=\"Ubuntu 16.04.1 LTS\"\n```\n",
  "closed_at": "2017-03-21T16:30:08Z",
  "comments": [
    {
      "author": "randomvariable",
      "author_association": "CONTRIBUTOR",
      "body": "This no longer crashes, as least in Alpha 14\r\n\r\nInstead, we get `MI_RESULT_ACCESS_DENIED`, which is possibly [obscure but correct](https://msdn.microsoft.com/en-us/library/hh437490(v=vs.85).aspx) given the lack of WinRM. \r\n\r\n``` powershell\r\nPS /> powershell -Command 'Invoke-Command -ComputerName localhost -ScriptBlock {$PSVersionTable}'\r\nInvoke-Command : MI_RESULT_ACCESS_DENIED\r\nAt line:1 char:1\r\n+ Invoke-Command -ComputerName localhost -ScriptBlock {$PSVersionTable}\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : InvalidOperation: (:) [Invoke-Command], PSInvalidOperationException\r\n+ FullyQualifiedErrorId : InvalidOperation,Microsoft.PowerShell.Commands.InvokeCommandCommand    \r\n```",
      "created_at": "2016-12-21T00:08:38Z",
      "updated_at": "2016-12-21T00:08:38Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "No longer repros",
      "created_at": "2017-03-21T16:30:08Z",
      "updated_at": "2017-03-21T16:30:08Z"
    }
  ],
  "created_at": "2016-10-20T22:48:09Z",
  "labels": [
    "OS-Linux",
    "WG-Engine",
    "Resolution-Answered"
  ],
  "number": 2513,
  "state": "closed",
  "title": "Crash when attempting to run Invoke-Command on Linux",
  "updated_at": "2017-03-21T16:30:08Z"
}