{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3201",
  "author": "SteveL-MSFT",
  "body": "Addresses #2193 \r\n\r\nWhen Invoke-WebRequest or Invoke-RestMethod receives a HTTS status error code, an exception is returned and the user can't get the HTTP response without additional work.  This change makes it more consistent with Windows PowerShell in that a Response property which contains the HttpResponse is a member of the resulting Exception.",
  "closed_at": "2017-02-25T06:29:12Z",
  "comments": [
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PaulHigin thanks for the feedback, addressed each of them",
      "created_at": "2017-02-24T23:16:13Z",
      "updated_at": "2017-02-24T23:16:13Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@SteveL-MSFT We have another similar PR here #3089, please take a look at the comments in that PR to see any of them apply in this fix as well.\r\nI suggest we have our `HttpResponseException` derive from `System.Net.Http.HttpRequestException`, so that `try { Invoke-WebRequest <url> } catch [HttpRequestException] { }` would continue to work after this change.",
      "created_at": "2017-02-24T23:35:56Z",
      "updated_at": "2017-02-24T23:54:26Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@2xmax (the author of #3089). would you mind take a look?",
      "created_at": "2017-02-24T23:41:51Z",
      "updated_at": "2017-02-24T23:41:51Z"
    },
    {
      "author": "2xmax",
      "author_association": "CONTRIBUTOR",
      "body": "will the new version of the cmdlet output the content if the code was unsuccessful? I could say in the context of my scope, that was a real issue and we even already rewrote our code to curl instead of powershell whereas the status code was not a case, afaik we were able to parse it using regex:)).\r\n\r\nUPD: sorry, I found it the response property. But now the problem is, the response now is not disposed properly as the FullClr impl does",
      "created_at": "2017-02-24T23:56:36Z",
      "updated_at": "2017-02-25T00:18:28Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@2xmax you are right, this PR only covers partial of #3089. It doesn't capture the content from the response and put it in `ErrorDetail` as full powershell does (see [code here](https://github.com/PowerShell/PowerShell/blob/master/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/FullClr/WebRequestPSCmdlet.FullClr.cs#L469)).\r\n\r\n@SteveL-MSFT, do you want to address it in this same PR or a different one?",
      "created_at": "2017-02-25T00:03:23Z",
      "updated_at": "2017-02-25T00:03:23Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Addressed feedback.  This should also address https://github.com/PowerShell/PowerShell/issues/2113\r\n\r\n\r\n",
      "created_at": "2017-02-25T00:34:11Z",
      "updated_at": "2017-02-25T00:34:11Z"
    }
  ],
  "created_at": "2017-02-24T19:02:23Z",
  "number": 3201,
  "state": "closed",
  "title": "return HTTP response for error status as part of exception",
  "updated_at": "2017-02-25T06:29:12Z"
}