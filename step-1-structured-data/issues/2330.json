{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2330",
  "author": "daxian-dbw",
  "body": "Fix #2306 \n",
  "closed_at": "2016-09-27T16:49:28Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "Hi **@daxian-dbw**, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\n    <p>\n        It looks like you're a Microsoft contributor (Dongbo Wang). If you're full-time, we DON'T require a Contribution License Agreement. If you are a vendor, please DO sign the electronic Contribution License Agreement. It will take 2 minutes and there's no faxing! https://cla.microsoft.com.\n    </p>\n\nTTYL, MSBOT;\n",
      "created_at": "2016-09-21T18:27:18Z",
      "updated_at": "2016-09-21T18:27:18Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@lzybkr can you please review this PR? Thanks!\n",
      "created_at": "2016-09-21T19:27:29Z",
      "updated_at": "2016-09-21T19:27:29Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "The `Credential` parameter set is the default parameter set, and `-Credential` is the only mandatory parameter in that parameter set, so it's natural that the parameter binder will kick in prompting for the missing mandatory parameter `-Credential` when no argument is specified.\n",
      "created_at": "2016-09-21T20:11:52Z",
      "updated_at": "2016-09-21T20:11:52Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "Of course - but I'm asking a different question - can we get the same effect of prompting in `Get-Credential` without relying on the parameter binder?\n\nFor example, if we changed the default message/title in `Get-Credential`, we'd also want a similar change in the parameter binder. I don't think that's obvious or ideal.\n\nBut really - I'm just saying we should be seeing the parameter binding prompts when asking the user for a credential. Ever.\n",
      "created_at": "2016-09-21T20:14:42Z",
      "updated_at": "2016-09-21T20:14:42Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "Got @lzybkr 's point now. The current change gives inconsistent prompting experience for `Get-Credential` and `Get-Credential -UserName bar`. Note that the default caption and message are not displayed for `Get-Credential`\n\n```\nPS D:\\> Get-Credential\n\ncmdlet Get-Credential at command pipeline position 1\nSupply values for the following parameters:\nCredential\nUser:\nPS D:\\>\nPS D:\\> Get-Credential -UserName bar\n\nWindows PowerShell credential request.\nPassword for user bar:\n```\n\nThis is because for `Get-Credential`, the prompting comes from the parameter binder, while the other comes from `Host.UI.PromptForCredential`. I will update the PR to provide consistent prompting experience.\n",
      "created_at": "2016-09-21T20:37:36Z",
      "updated_at": "2016-09-21T20:37:36Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw Please take a look #2315\n",
      "created_at": "2016-09-22T03:34:34Z",
      "updated_at": "2016-09-22T11:12:25Z"
    },
    {
      "author": "McAndersDK",
      "author_association": "CONTRIBUTOR",
      "body": "I approve this fix \ud83d\udc4d \n\nBut why not move the last writeobject to the try ?\n\n```\ntry\n{\n    Credential = this.Host.UI.PromptForCredential(_title, _message, _userName, string.Empty);\n    WriteObject(Credential);\n}\n```\n",
      "created_at": "2016-09-22T13:57:49Z",
      "updated_at": "2016-09-22T13:57:49Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@McAndersDK it's to avoid a very very rare edge case -- `WriteObject` somehow throws `ArgumentException`. If that really happens (unlikely), we should allow that exception to propagate and be handled by the engine.\n",
      "created_at": "2016-09-22T17:40:13Z",
      "updated_at": "2016-09-24T06:12:50Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@lzybkr The PR has been updated to address your comments. Please take another look when you have time. Thanks!\n",
      "created_at": "2016-09-24T06:12:12Z",
      "updated_at": "2016-09-24T06:12:12Z"
    }
  ],
  "created_at": "2016-09-21T18:27:13Z",
  "number": 2330,
  "state": "closed",
  "title": "Fix Get-Credential to not prompt twice when no parameter is specified",
  "updated_at": "2016-09-27T16:49:28Z"
}