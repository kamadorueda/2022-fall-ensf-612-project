{
  "_url": "https://github.com/PowerShell/PowerShell/issues/10317",
  "author": "KirkMunro",
  "body": "# PR Summary\r\n\r\nAs part of the cleanup of workflow code, this PR does the following:\r\n- Treats `ActionPreference.Suspend` enumeration value as not supported and reserved for future use.\r\n- Update internal logic dependent on `ActionPreference.Suspend` such that using that value results in appropriate error messages.\r\n- Remove unused resource strings.\r\n- Updated and added tests related to `ActionPreference.Suspend` to ensure that it is generating the errors we expect when it is used.\r\n- Remove unnecessary restriction around `ActionPreference.Ignore` (see [this discussion in issue 4348](https://github.com/PowerShell/PowerShell/issues/4348#issuecomment-490672315)). This change is made as part of this PR because it is in the exact same body of code, and it makes sense to include it here.\r\n\r\n## PR Context\r\n\r\nSee issue #9570.\r\n\r\n## PR Checklist\r\n\r\n- [X] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [X] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` or `[ WIP ]` to the beginning of the title (the `WIP` bot will keep its status check at `Pending` while the prefix is present) and remove the prefix when the PR is ready.\r\n- **[Breaking changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)**\r\n    - [X] None\r\n    - **OR**\r\n    - [ ] [Experimental feature(s) needed](https://github.com/MicrosoftDocs/PowerShell-Docs/blob/staging/reference/6/Microsoft.PowerShell.Core/About/about_Experimental_Features.md)\r\n        - [ ] Experimental feature name(s): <!-- Experimental feature name(s) here -->\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [X] [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [X] Issue filed: [MicrosoftDocs/PowerShell-Docs #4624](https://github.com/MicrosoftDocs/PowerShell-Docs/issues/4624)\r\n- **Testing - New and feature**\r\n    - [X] N/A\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n- **Tooling**\r\n    - [X] I have considered the user experience from a tooling perspective and don't believe tooling will be impacted.\r\n    - **OR**\r\n    - [ ] I have considered the user experience from a tooling perspective and enumerated concerns in the summary. This may include:\r\n        - Impact on [PowerShell Editor Services](https://github.com/PowerShell/PowerShellEditorServices) which is used in the [PowerShell extension](https://github.com/PowerShell/vscode-powershell) for VSCode (which runs in a different PS Host).\r\n        - Impact on Completions (both in the console and in editors) - one of PowerShell's most powerful features.\r\n        - Impact on [PSScriptAnalyzer](https://github.com/PowerShell/PSScriptAnalyzer) (which provides linting & formatting in the editor extensions).\r\n        - Impact on [EditorSyntax](https://github.com/PowerShell/EditorSyntax) (which provides syntax highlighting with in VSCode, GitHub, and many other editors).\r\n",
  "closed_at": "2019-09-07T18:45:37Z",
  "comments": [
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PowerShell/powershell-committee the decision here is what to do about removing a workflow specific value from the existing public enum.  One option is to mark it obsolete.",
      "created_at": "2019-08-21T21:44:15Z",
      "updated_at": "2019-08-21T21:44:15Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@PowerShell/powershell-committee reviewed this, we discussed removal, using `[obsolete]` attribute, and leaving as-is.  We discussed the possibility of using this value in the future for job control if there is a way to suspend a PSJob.  For that reason, we agreed to leave this enum value.  We also recommend that we explicitly number enum values so in the future, if we do decide to remove a value and add another one, then existing code will break/behavior appropriately.",
      "created_at": "2019-08-21T22:46:29Z",
      "updated_at": "2019-08-21T22:46:29Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "To address the committee review feedback, I just made the following changes:\r\n\r\n1. Put the enumerated value back.\r\n1. Updated internal logic to generate appropriate errors about using an enumerated value that is not supported and reserved for future use.\r\n1. Updated tests to ensure that it's behaving properly everywhere we need it to.\r\n\r\nI'll also update the OP accordingly.",
      "created_at": "2019-08-22T19:45:45Z",
      "updated_at": "2019-08-22T19:45:45Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "Note that regarding explicit numbering of the `ActionPreference` enumerated values, I have that handled in PR #8205.\r\n\r\nAlso, once either this PR or #8205 are merged in, I will update the other PR accordingly because there are some overlapping changes that I doubt will merge without manual intervention.",
      "created_at": "2019-08-22T19:49:47Z",
      "updated_at": "2019-08-22T19:50:02Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov Could you please remove the Breaking Change label from this PR?",
      "created_at": "2019-08-23T18:09:30Z",
      "updated_at": "2019-08-23T18:09:30Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "Just FYI in case it wasn't clear: I updated this PR once #8205 was merged into PowerShell, so this PR is one again ready for review/merge.\r\n\r\nTwo of the three Codacy issues are incorrect (looks like it needs to be updated for modern syntax), and the third one is related to a Pester test and will be ignored.",
      "created_at": "2019-08-26T17:57:48Z",
      "updated_at": "2019-08-26T17:57:48Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@PaulHigin Could you please update your review (we have new commits)?",
      "created_at": "2019-08-27T03:15:56Z",
      "updated_at": "2019-08-27T03:15:56Z"
    },
    {
      "author": "KirkMunro",
      "author_association": "CONTRIBUTOR",
      "body": "FYI, I will not be making changes based on the Codacy review because one of the issues is a false positive, and the other two are incorrect. This PR is ready for review by other reviewers.",
      "created_at": "2019-09-04T14:26:43Z",
      "updated_at": "2019-09-04T14:26:43Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT PowerShell Committee request was addressed. Can we merge?",
      "created_at": "2019-09-05T06:07:41Z",
      "updated_at": "2019-09-05T06:07:41Z"
    },
    {
      "author": "msftbot[bot]",
      "author_association": "NONE",
      "body": ":tada:`v7.0.0-preview.4` has been released which incorporates this pull request.:tada:\n\nHandy links:\n* [Release Notes](https://github.com/PowerShell/PowerShell/releases/tag/v7.0.0-preview.4)\n",
      "created_at": "2019-09-19T17:51:42Z",
      "updated_at": "2019-09-19T17:51:42Z"
    }
  ],
  "created_at": "2019-08-07T23:49:19Z",
  "number": 10317,
  "state": "closed",
  "title": "Transition ActionPreference.Suspend enumeration value into a non-supported, reserved state, and remove restriction on using ActionPreference.Ignore in preference variables",
  "updated_at": "2019-09-19T17:51:42Z"
}