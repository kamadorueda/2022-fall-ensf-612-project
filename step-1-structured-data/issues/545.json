{
  "_url": "https://github.com/PowerShell/PowerShell/issues/545",
  "author": "andschwa",
  "body": "This adds the new feed needed, and exposes the SMA library to the runner. It also bumps the packages to 23811, but this is already now out-of-date; I'd like to bump to 23812.\n\nFinal integration of the xUnit runner still requires #531.\n",
  "closed_at": "2016-02-18T01:34:10Z",
  "comments": [
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "This is still incomplete. I need to work-around the dependency's content not being published. Once that's done, I need to find a way to parse error failures from xUnit automatically on Travis.\n\nFinally, we also need to talk about tests. All our xUnit tests are super Linux specific.\n",
      "created_at": "2016-02-16T22:42:01Z",
      "updated_at": "2016-02-16T22:42:01Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Okay, all the tests can pass with `./xunit.sh`. This will only work on Linux. The test runner, however, still fails because some `SafeHandle` is being used that tries to do a `RegKeyClose()` when disposed. Checking to see if it is any of our tests, or the runner itself.\n",
      "created_at": "2016-02-16T23:55:57Z",
      "updated_at": "2016-02-16T23:55:57Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@PowerShell/linux Please review. This re-enables xUnit tests (though as noted, an exception is thrown due to `RegKeyClose()` regardless of the tests passing. This does not integrate the xUnit tests with CI, that will come later.\n\n~~However, this is also now required for master, because we had to pin the CLI versions so that our CI stops failing. Theoretically we could backport, but this should be safe, and bumps our package versions.~~\n\n~~This requires PowerShell/psl-monad#20.~~\n",
      "created_at": "2016-02-17T21:30:21Z",
      "updated_at": "2016-02-18T01:14:16Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "~~Rebased to bump monad submodule with @palladia's changes too.~~ Bump of monad will be in separate PR.\n",
      "created_at": "2016-02-17T21:31:35Z",
      "updated_at": "2016-02-18T01:14:03Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "~~@PowerShell/linux **This fixes failing CI.**~~ Fix moved to separate PR.\n",
      "created_at": "2016-02-17T22:05:13Z",
      "updated_at": "2016-02-18T01:13:49Z"
    },
    {
      "author": "palladia",
      "author_association": "CONTRIBUTOR",
      "body": "Trying to jam too much into one PR, but looks ok to me.\n",
      "created_at": "2016-02-17T22:11:17Z",
      "updated_at": "2016-02-17T22:11:17Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@palladia Fair enough, see #552 instead.\n",
      "created_at": "2016-02-17T22:21:09Z",
      "updated_at": "2016-02-17T22:21:09Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@PowerShell/linux I need another review, rebased to get the pinning of CLI packages into master before this. This is now just xUnit integration.\n",
      "created_at": "2016-02-18T00:58:22Z",
      "updated_at": "2016-02-18T00:58:22Z"
    },
    {
      "author": "zach-folwick",
      "author_association": "CONTRIBUTOR",
      "body": "Assuming Travis-CI comes back ok, LGTM.  Many of these are the changes required to get my project up and running.  This should resolve #538, #20, #379, right?\n",
      "created_at": "2016-02-18T01:06:47Z",
      "updated_at": "2016-02-18T01:06:47Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@zach-folwick Travis CI has been back since #552 \n",
      "created_at": "2016-02-18T01:10:39Z",
      "updated_at": "2016-02-18T01:10:39Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@zach-folwick This does nothing about #20, only #379. #538 should be rebased and a folder added to test for your MMI tests.\n",
      "created_at": "2016-02-18T01:12:06Z",
      "updated_at": "2016-02-18T01:12:06Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I've actually gone ahead and removed the bumping of the submodules, as @palladia was right and this PR got too big.\n\nIf this last CI round passes, I'm taking your comments as sign-offs and merging :smile: \n",
      "created_at": "2016-02-18T01:13:33Z",
      "updated_at": "2016-02-18T01:13:33Z"
    },
    {
      "author": "zach-folwick",
      "author_association": "CONTRIBUTOR",
      "body": "hmmm... I meant the Append<T> stuff.  For whatever reason it's linking to the securestring work item.\n\nSounds great!\n",
      "created_at": "2016-02-18T01:13:41Z",
      "updated_at": "2016-02-18T01:13:57Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@zach-folwick Oh you mean PowerShell/psl-monad#20, that's in a different repo, and I've removed it from this PR.\n",
      "created_at": "2016-02-18T01:15:06Z",
      "updated_at": "2016-02-18T01:15:06Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "... We have six failing tests if we _don't_ bump the packages. Well okay then, putting it back.\n",
      "created_at": "2016-02-18T01:22:30Z",
      "updated_at": "2016-02-18T01:22:30Z"
    },
    {
      "author": "zach-folwick",
      "author_association": "CONTRIBUTOR",
      "body": "These are breaking changes from .Net?\n",
      "created_at": "2016-02-18T01:23:53Z",
      "updated_at": "2016-02-18T01:23:53Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I just saw 6 Pester tests fail on build 23729, that hadn't been failing on 23811/16/17, so I'm adding that back to the PR so they all pass.\n",
      "created_at": "2016-02-18T01:25:29Z",
      "updated_at": "2016-02-18T01:25:29Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Heh, I bumped the packages after updating the type catalog. Whatever. Calling it good.\n",
      "created_at": "2016-02-18T01:32:11Z",
      "updated_at": "2016-02-18T01:32:11Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "We should probably turn off the PR builds... at least until we have external PRs being submitting to us.\n",
      "created_at": "2016-02-18T01:34:06Z",
      "updated_at": "2016-02-18T01:34:06Z"
    }
  ],
  "created_at": "2016-02-13T01:43:45Z",
  "number": 545,
  "state": "closed",
  "title": "xUnit test runner integration",
  "updated_at": "2016-02-18T01:34:18Z"
}