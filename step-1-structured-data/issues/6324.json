{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6324",
  "author": "rayterrill",
  "body": "It appears that PowerShell Core creates some pretty verbose logging into syslog on Ubuntu1604, as well as created a GUID directory in /tmp during script execution.\r\n\r\nSyslog messages:\r\n```\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:1:10) [Perftrack_ConsoleStartupStart:PowershellConsoleStartup.WinStart.Informational] PowerShell console is starting up\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:6:11) [Provider_Lifecycle:ProviderStart.Method.Informational] Provider Alias changed state to Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = #012        Runspace ID = #012        Pipeline ID = #012        Command Name = #012        Command Type = #012        Script Name = #012        Command Path = #012        Sequence Number = 1#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:6:11) [Provider_Lifecycle:ProviderStart.Method.Informational] Provider Environment changed state to Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = #012        Runspace ID = #012        Pipeline ID = #012        Command Name = #012        Command Type = #012        Script Name = #012        Command Path = #012        Sequence Number = 2#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:6:11) [Provider_Lifecycle:ProviderStart.Method.Informational] Provider FileSystem changed state to Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = #012        Runspace ID = #012        Pipeline ID = #012        Command Name = #012        Command Type = #012        Script Name = #012        Command Path = #012        Sequence Number = 3#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:6:11) [Provider_Lifecycle:ProviderStart.Method.Informational] Provider Function changed state to Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = #012        Runspace ID = #012        Pipeline ID = #012        Command Name = #012        Command Type = #012        Script Name = #012        Command Path = #012        Sequence Number = 4#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:6:11) [Provider_Lifecycle:ProviderStart.Method.Informational] Provider Variable changed state to Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = #012        Runspace ID = #012        Pipeline ID = #012        Command Name = #012        Command Type = #012        Script Name = #012        Command Path = #012        Sequence Number = 5#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:1:11) [Engine_Lifecycle:EngineStart.Method.Informational] Engine state changed from None to Available.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = #012        Command Name = #012        Command Type = #012        Script Name = #012        Command Path = #012        Sequence Number = 6#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command Import-Module is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 1#012        Command Name = Import-Module#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 7#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command Out-Default is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 1#012        Command Name = Out-Default#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 8#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command Import-Module is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 1#012        Command Name = Import-Module#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 9#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command Out-Default is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 1#012        Command Name = Out-Default#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 10#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:1:10) [Perftrack_ConsoleStartupStop:PowershellConsoleStartup.WinStop.Informational] PowerShell console is ready for user input\r\nMar  5 11:35:16 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Script execution is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 2#012        Command Name = #012        Command Type = Script#012        Script Name = #012        Command Path = #012        Sequence Number = 11#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command prompt is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 2#012        Command Name = prompt#012        Command Type = Function#012        Script Name = #012        Command Path = #012        Sequence Number = 12#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command prompt is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 2#012        Command Name = prompt#012        Command Type = Function#012        Script Name = #012        Command Path = #012        Sequence Number = 13#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Script execution is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 2#012        Command Name = #012        Command Type = Script#012        Script Name = #012        Command Path = #012        Sequence Number = 14#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command PSConsoleHostReadline is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 3#012        Command Name = PSConsoleHostReadline#012        Command Type = Function#012        Script Name = #012        Command Path = #012        Sequence Number = 15#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command Set-StrictMode is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 3#012        Command Name = Set-StrictMode#012        Command Type = Cmdlet#012        Script Name = /opt/microsoft/powershell/6.0.1/Modules/PSReadLine/PSReadLine.psm1#012        Command Path = #012        Sequence Number = 16#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command Set-StrictMode is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 3#012        Command Name = Set-StrictMode#012        Command Type = Cmdlet#012        Script Name = /opt/microsoft/powershell/6.0.1/Modules/PSReadLine/PSReadLine.psm1#012        Command Path = #012        Sequence Number = 17#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command Import-Module is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 5#012        Command Name = Import-Module#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 18#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command Import-Module is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 5#012        Command Name = Import-Module#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 19#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command Get-Variable is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 4#012        Command Name = Get-Variable#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 20#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command Get-Variable is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 4#012        Command Name = Get-Variable#012        Command Type = Cmdlet#012        Script Name = #012        Command Path = #012        Sequence Number = 21#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStart.Method.Informational] Command prompt is Started.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 6#012        Command Name = prompt#012        Command Type = Function#012        Script Name = #012        Command Path = #012        Sequence Number = 22#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\nMar  5 11:35:17 MYHOST powershell[4930]: (v6.0.1:9:11) [Command_Lifecycle:CommandStop.Method.Informational] Command prompt is Stopped.#012%n%nContext:%n        Severity = Informational#012        Host Name = ConsoleHost#012        Host Version = 6.0.1#012        Host ID = f85e018a-3700-4255-b508-c71bdb3b809d#012        Host Application = /opt/microsoft/powershell/6.0.1/pwsh.dll#012        Engine Version = 6.0.1#012        Runspace ID = 3ce268c9-c288-47d9-8b00-aff8c6154184#012        Pipeline ID = 6#012        Command Name = prompt#012        Command Type = Function#012        Script Name = #012        Command Path = #012        Sequence Number = 23#012        User = MYHOST\\nagios#012        Connected User = #012        Shell ID = Microsoft.PowerShell#012%n%nUser Data:%n%n\r\n```\r\n\r\nExample of pipes from dotnet clr and GUI directory being created (visible using \"inotifywait -e create -m /tmp\" to monitor /tmp):\r\n\r\n/tmp/ CREATE clr-debug-pipe-9951-96248424-in\r\n/tmp/ CREATE clr-debug-pipe-9951-96248424-out\r\n/tmp/ CREATE,ISDIR 63b11b94-e868-42ea-96a2-5f3ae578fdcf\r\n\r\nIs there a way to disable these messages/the GUID directory from being created?",
  "closed_at": null,
  "comments": [
    {
      "author": "anmenaga",
      "author_association": "CONTRIBUTOR",
      "body": "syslog problem was a known bug that got fixed.\r\nYou can get the fix by rebuilding from current sources or wait couple of days for the next release.\r\nFor more info see #6032 and #6218  ",
      "created_at": "2018-03-06T19:34:15Z",
      "updated_at": "2018-03-06T19:34:15Z"
    },
    {
      "author": "rayterrill",
      "author_association": "NONE",
      "body": "@anmenaga what about the GUID directory? that's what's currently killing me right now. It leaves behind a ton of GUID directories until /tmp has so many files it falls over.",
      "created_at": "2018-03-06T19:46:10Z",
      "updated_at": "2018-03-06T19:46:10Z"
    },
    {
      "author": "anmenaga",
      "author_association": "CONTRIBUTOR",
      "body": "@dantraMSFT @daxian-dbw for info about GUID directories in /tmp",
      "created_at": "2018-03-06T19:52:46Z",
      "updated_at": "2018-03-06T19:52:46Z"
    },
    {
      "author": "rayterrill",
      "author_association": "NONE",
      "body": "It sounds like this might be coming from dotnet clr. They have me post a ticket over here about the syslog and they're now checking but they believe it might be coming from dotnet.",
      "created_at": "2018-03-06T19:53:32Z",
      "updated_at": "2018-03-06T19:53:32Z"
    },
    {
      "author": "rayterrill",
      "author_association": "NONE",
      "body": "dotnet says the GUID directory is coming from PowerShell https://github.com/dotnet/coreclr/issues/8844",
      "created_at": "2018-03-06T21:32:50Z",
      "updated_at": "2018-03-06T21:32:50Z"
    },
    {
      "author": "mattykay",
      "author_association": "NONE",
      "body": "Hi all,\r\n\r\nThis still appears to be a problem for me as well - as per dotnet/coreclr#8844 they reference the GUID/Verbose logging as a PowerShell issue. Anyone have any ideas how to fix?\r\n\r\nOS: RHEL 7.6\r\nPowerShell version: PowerShell 6.2.0\r\n\r\nSeeing mass amounts of verbose logging like;\r\n```\r\nApr 04 18:38:11 <SERVER> powershell[5783]: [24.5K blob data]\r\nApr 04 18:38:11 <SERVER> powershell[5783]: [20.6K blob data]\r\nApr 04 18:38:11 <SERVER> powershell[5783]: (6.2.0:9:80) [Command_Health:ExecutePipeline.Exception.Warning] Error Message = System error.\r\n\r\n\r\n                                                           Context:\r\n                                                                   Severity = Warning\r\n                                                                   Host Name = ConsoleHost\r\n                                                                   Host Version = 6.2.0\r\n                                                                   Host ID = 5ffe6342-0494-4afb-815c-ea93c75c6662\r\n                                                                   Host Application = /opt/microsoft/powershell/6/pwsh.dll <SOME SCRIPT>\r\n                                                                   Engine Version = 6.2.0\r\n                                                                   Runspace ID = 3bbece8e-69f7-447a-ac4f-813adb83a86a\r\n                                                                   Pipeline ID = 1\r\n                                                                   Command Name =\r\n                                                                   Command Type =\r\n                                                                   Script Name =\r\n                                                                   Command Path =\r\n                                                                   Sequence Number = 37\r\n                                                                   User = <USER>\r\n                                                                   Connected User =\r\n                                                                   Shell ID = Microsoft.PowerShell\r\n\r\n```\r\n\r\nWith files created like (note: this doesn't correlate to logging above); \r\n```\r\n/tmp/d839926e-40dc-4256-9def-efa0e3e59de5\r\n/tmp/CoreFxPipe_PSHost.D4F03146.15029.None.pwsh\r\n/tmp/d839926e-40dc-4256-9def-efa0e3e59de5/.cache/powershell/StartupProfileData-NonInteractive\r\n/tmp/d839926e-40dc-4256-9def-efa0e3e59de5/.local/share/powershell/Modules/  # <-- Empty\r\n```\r\n\r\n## Suspected Cause\r\n\r\nIn my case, PowerShell is a subprocess (of Zabbix monitoring scripts) which has a timeout value of 30 seconds. After this time I believe it kills the sub-process, so I'm suspecting it isn't cleaning up properly but not 100% sure yet.\r\n\r\n## Workaround:\r\nAdded a cron job to find/delete those files and added the following file (/etc/rsyslog.d/40-powershell.conf) to stop logging which seems to work okay.\r\n```\r\n:syslogtag, contains, \"powershell[\" stop\r\n```",
      "created_at": "2019-04-12T00:56:53Z",
      "updated_at": "2019-04-12T00:56:53Z"
    },
    {
      "author": "mtnielsen",
      "author_association": "NONE",
      "body": "This is obviously still an issue and it seems to be ignored?\r\n\r\nCentOS Linux release 7.5.1804 (Core)\r\n6.2.1-1.rhel.7 from packages-microsoft-com-prod\r\n\r\nMy Nagios is creating so many files and folders in /tmp that it has literally become unusable. Can't read, can't delete, can't do anything.\r\n\r\nI could just workaround by creating a cron that empties /tmp every 5 minutes, but that **really** shouldn't be necessary.",
      "created_at": "2019-07-05T12:50:59Z",
      "updated_at": "2019-07-05T12:50:59Z"
    },
    {
      "author": "Didr",
      "author_association": "NONE",
      "body": "I have the same problem as @mattykay.\r\nLowering the log level from Powershell by doing the following fixes the verbose logging:\r\n\r\n1. Find out where $PSHOME is. My $PSHOME pointed to **/opt/microsoft/powershell/6/**. Take note that $PSHOME is a variable in PWSH, not in any other shell.\r\n2. Create a file in $PSHOME named **powershell.config.json**.\r\n3. Add the following JSON to the file: \r\n`{\r\n  \"LogLevel\": \"error\"\r\n}\r\n`\r\nOther log levels are found here: https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_logging_non-windows?view=powershell-6#configuring-logging-on-non-windows-system\r\n\r\nI haven't found a solution for the creation of \"CoreFxPipe\" files in /tmp yet. A cron script will do for now.\r\nHere's another issue about the file creation: https://github.com/Microsoft/dotnet/issues/880\r\n\n\n<blockquote><div><strong><a href=\"https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_logging_non-windows\">about_Logging_Non-Windows</a></strong></div></blockquote>",
      "created_at": "2019-08-23T08:54:35Z",
      "updated_at": "2019-08-23T08:54:37Z"
    },
    {
      "author": "eduardcloud",
      "author_association": "NONE",
      "body": "@Didr This works like a charm on Ubuntu 1804 with 6.2.0\r\nThanks",
      "created_at": "2019-08-27T08:59:01Z",
      "updated_at": "2019-08-27T08:59:22Z"
    },
    {
      "author": "nomoresecrets",
      "author_association": "NONE",
      "body": "The problem with the massive amount of UUID directories and CoreFX files in /tmp still exists.\r\n\r\nOS: CentOS Linux release 7.7.1908 (Core)\r\nPowershell: 7.0.0",
      "created_at": "2020-03-12T13:26:20Z",
      "updated_at": "2020-03-12T13:26:20Z"
    },
    {
      "author": "MaFreiberger",
      "author_association": "NONE",
      "body": "Same problem on debian 9.12, pwsh 7.0.0\r\n\r\nitb filled up root /tmp with so many files that i had no inode left :-(",
      "created_at": "2020-04-20T14:22:50Z",
      "updated_at": "2020-04-20T14:22:50Z"
    },
    {
      "author": "K0nne",
      "author_association": "NONE",
      "body": "I have the same problem with RHEL 7.8 and powershell 7.0.0 :(",
      "created_at": "2020-06-24T10:10:24Z",
      "updated_at": "2020-06-24T10:10:24Z"
    },
    {
      "author": "eduardcloud",
      "author_association": "NONE",
      "body": "Hi all,\r\nIs there any forecast to solve this issue?\r\nThanks.",
      "created_at": "2020-09-22T07:33:03Z",
      "updated_at": "2020-09-22T07:33:03Z"
    },
    {
      "author": "jorgeyanesdiez",
      "author_association": "NONE",
      "body": "Same with Ubuntu 22.04 and PowerShell 7.2.5 + zabbix calling a powershell script.\r\n\r\n**EDIT:** I now have a bit more info.\r\nIf I create `/tmp/Test-Call.ps1` with\r\n```\r\n#!/bin/pwsh\r\nWrite-Host \"Hello\"\r\n```\r\nand chmod +x it then:\r\n\r\n`/tmp/Test-Call.ps1` -> No files left behind in /tmp\r\n`pwsh -NoLogo -NonInteractive -NoProfile -File /tmp/Test-Call.ps1` -> No files left behind in /tmp\r\n`sudo pwsh -NoLogo -NonInteractive -NoProfile -File /tmp/Test-Call.ps1` -> No files left behind in /tmp\r\n`sudo -u zabbix -g zabbix pwsh -NoLogo -NonInteractive -NoProfile -File /tmp/Test-Call.ps1` -> Guid folders with stuff in them!\r\n\r\nWill report back if I find more details.\r\n\r\n**EDIT 2:** I found it. The zabbix user is created by the installer as\r\n`zabbix:x:133:140::/var/lib/zabbix/:/usr/sbin/nologin`\r\n(uid and gid will vary)\r\nThe problem is that home dir `/var/lib/zabbix/` does not exist!\r\nIf you\r\n```\r\nsudo mkdir /var/lib/zabbix\r\nsudo chown zabbix:zabbix /var/lib/zabbix\r\nsudo systemctl stop zabbix-agent.service\r\nsudo systemctl start zabbix-agent.service\r\n```\r\nthe problem is solved!\r\n\r\nI suppose this is the same issue for people running Nagios.\r\nSo, it seems like it's a PowerShell requirement: The home folder of users that run PowerShell must exist and have valid permissions!",
      "created_at": "2022-07-28T16:21:47Z",
      "updated_at": "2022-07-29T08:03:12Z"
    }
  ],
  "created_at": "2018-03-06T19:27:50Z",
  "number": 6324,
  "state": "open",
  "title": "Verbose Syslog logging + GUID directory created for PowerShell Script Execution on Ubuntu1604",
  "updated_at": "2022-07-29T08:03:12Z"
}