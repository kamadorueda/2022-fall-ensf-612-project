{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6447",
  "author": "markekraus",
  "body": "## PR Summary\r\n\r\n* Fixes #5964\r\n* Adds `-Resume` switch to `Invoke-WebRequest` and `Invoke-RestMethod`\r\n* `-Resume` requires `-OutFile`\r\n* Enables ability to resume downloading a partially or incompletely downloaded file. \r\n* File Size is the only indicator of local and remote file parity.\r\n* If the local file is smaller than the remote file and the remote endpoint supports resume, the local file will be appended with the remaining bytes.\r\n* If the local file is larger than the remote file, the local file will be overwritten\r\n* If the remote server does not support resume, the local file will be over written\r\n* If the local file is the same size as the remote file, the remote endpoint will return a `416` status code. This response is special-cased as a success in this instance. The local file remains untouched and it is assumed the file was already successfully downloaded previously.\r\n* If the local file does not exist it will be created and the entire remote file will be requested.\r\n\r\n* Added tests for all code new code paths (I'm pretty sure anyway)\r\n* Added `/Resume` Controller to WebListener\r\n* Documented `/Resume` Controller\r\n* Updated `.spelling` to reflect terms in WebListener docs\r\n\r\nNote: I had to change the we `GetResponse()` tracks the current URI as we now have 3 places where the call is taking place. I don't foresee this causing any regressions. This area needs some refactoring. especially if we want to implement a retry mechanism.\r\n\r\n## PR Checklist\r\n\r\n- [X] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [X] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [X] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [X] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [X] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [X] Issue filed - Issue link: PowerShell/PowerShell-Docs#2195\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [X] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [X] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-03-26T19:23:25Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I restarted CI Travis MacOS.",
      "created_at": "2018-03-21T14:28:28Z",
      "updated_at": "2018-03-21T14:28:28Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "Test fails appear to be due to https://www.nuget.org issues.",
      "created_at": "2018-03-22T11:02:47Z",
      "updated_at": "2018-03-22T11:02:47Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@markekraus I restarted the AppVeyor build",
      "created_at": "2018-03-23T01:08:28Z",
      "updated_at": "2018-03-23T01:08:28Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 @iSazonov I don't have anything outstanding on this PR do I?",
      "created_at": "2018-03-26T18:43:40Z",
      "updated_at": "2018-03-26T18:43:40Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@markekraus Sorry, I was hoping we get a feedback from code owners. ",
      "created_at": "2018-03-27T03:42:42Z",
      "updated_at": "2018-03-27T03:43:21Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "Is there any possibility of implementing some kind of checksum on the local/remote file to check for the 'right/wrong' file? Having a checksum would also allow for a check on completion of the download to ensure that the downloaded file contains the correct data, and prompt for redownload if necessary. \r\n\r\nBut this is me talking, and I don't have any more than a basic idea of how checksums work, so... take with a grain of salt and no more \ud83d\ude01 ",
      "created_at": "2018-03-27T14:57:39Z",
      "updated_at": "2018-03-27T14:57:39Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@vexx32 can you create a new issue to discuss this? thanks!",
      "created_at": "2018-03-27T15:02:59Z",
      "updated_at": "2018-03-27T15:02:59Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@vexx32 I did some analysis and the implementation in PR appears to be not much different than what is in use in FireFox, Edge, and Chrome. You can read more here https://www.reddit.com/r/PowerShell/comments/87dku0/new_feature_for_610_resume_partial_downloads_with/dwdwv1k/",
      "created_at": "2018-03-27T21:46:06Z",
      "updated_at": "2018-03-27T21:46:06Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "Thanks for the additional effort! You always are one to go above and beyond, ahaha! ",
      "created_at": "2018-03-28T00:20:19Z",
      "updated_at": "2018-03-28T00:20:19Z"
    }
  ],
  "created_at": "2018-03-21T09:35:43Z",
  "number": 6447,
  "state": "closed",
  "title": "Add -Resume Feature to Web Cmdlets",
  "updated_at": "2018-10-15T21:44:54Z"
}