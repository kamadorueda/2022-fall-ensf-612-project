{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6331",
  "author": "mklement0",
  "body": "An (adapted) copy of [this uservoice issue](https://windowsserver.uservoice.com/forums/301869-powershell/suggestions/33558298-dynamic-param-is-silently-ignored), reposted here because it affects PS Core too.\r\n\r\nA `DynamicParam` block is silently ignored, and no errors are thrown when a function has no `param()` block or its `param()` block is not decorated with  `[CmdletBinding()]`.\r\n\r\nSteps to reproduce\r\n------------------\r\n\r\n```powershell\r\nFunction Add-Control() { \r\n  # Define a dynamic parameter -Type that accepts only 3 values: TextBox, Label, DataGrid\r\n  DynamicParam { \r\n    $ParamAttribute = New-Object Parameter \r\n    $ParamAttribute.Mandatory = $true \r\n    $ParamAttribute.ParameterSetName = '__AllParameterSets'\r\n  \r\n    $AttributeCollection = New-Object System.Collections.ObjectModel.Collection[System.Attribute]\r\n  \r\n    $AttributeCollection.Add($ParamAttribute)\r\n  \r\n    $controlTypes = @(\"TextBox\", \"Label\", \"DataGrid\")\r\n  \r\n    $AttributeCollection.Add((New-Object ValidateSet($controlTypes)))\r\n  \r\n    $RuntimeParam = New-Object System.Management.Automation.RuntimeDefinedParameter('Type', [string], $AttributeCollection)\r\n  \r\n    $RuntimeParamDictionary = New-Object System.Management.Automation.RuntimeDefinedParameterDictionary\r\n  \r\n    $RuntimeParamDictionary.Add('Type', $RuntimeParam)\r\n  \r\n    return $RuntimeParamDictionary \r\n  }\r\n  \r\n  Process { \r\n    Write-Host ($PSBoundParameters['Type']) \r\n  } \r\n\r\n}\r\n\r\n# Invoke the function with an invalid `-Type` argument  \r\nAdd-Control -Type \"Test\" \r\n```\r\n\r\nExpected behavior\r\n-----------------\r\n\r\nAn error should occur, because `Test` is not a valid `-Type` argument value.\r\n\r\n```none\r\nAdd-Control : Cannot validate argument on parameter 'Type'\r\n...\r\n```\r\n\r\nActual behavior\r\n---------------\r\n\r\nNothing happens - the dynamic-parameter definition  is silently ignored.\r\n\r\nNote that `Get-Help add-control` does show the dynamic parameter, including its set of valid values, but the parameter is never _bound_.\r\n\r\nEnvironment data\r\n----------------\r\n\r\n```powershell\r\nPowerShell Core v6.0.1 on macOS 10.13.3\r\nPowerShell Core v6.0.1 on Ubuntu 16.04.3 LTS\r\nPowerShell Core v6.0.1 on Microsoft Windows 10 Pro (64-bit; v10.0.15063)\r\nWindows PowerShell v5.1.15063.674 on Microsoft Windows 10 Pro (64-bit; v10.0.15063)\r\n```\r\n",
  "closed_at": null,
  "comments": [],
  "created_at": "2018-03-07T16:56:18Z",
  "labels": [],
  "number": 6331,
  "state": "open",
  "title": "DynamicParam block is silently ignored without a Param block with explicit CmdletBinding attribute",
  "updated_at": "2018-03-19T15:25:15Z"
}