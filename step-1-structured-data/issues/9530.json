{
  "_url": "https://github.com/PowerShell/PowerShell/issues/9530",
  "author": "iSazonov",
  "body": "<!-- Anything that looks like this is a comment and can't be seen after the Pull Request is created. -->\r\n\r\n# PR Summary\r\n\r\nOn Windows we use System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties to get computer name and domain name. The API was ported so we can remove P/Invokes for Unix-es.\r\n\r\n[On Unix CoreFX](https://github.com/dotnet/corefx/blob/a10890f4ffe0fadf090c922578ba0e606ebdd16c/src/Common/src/System/Net/NetworkInformation/HostInformationPal.Unix.cs#L16) ([then](https://github.com/dotnet/corefx/blob/a6f76f4f620cbe74821c6445af3f13e048361658/src/Common/src/Interop/Unix/System.Native/Interop.GetDomainName.cs#L15) and [then](https://github.com/dotnet/corefx/blob/dda3289ce64a68613057758f53c20cc4768548de/src/Native/Unix/System.Native/pal_networking.c#L401)) calls GLibc getdomainname() which returns \"(none)\" if a domain name is not set by setdomainname(). (See https://access.redhat.com/solutions/352963) So we ignore the value.\r\n\r\n## PR Context\r\n\r\nRelated #9526.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` or `[ WIP ]` to the beginning of the title (the `WIP` bot will keep its status check at `Pending` while the prefix is present) and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed: <!-- Number/link of that issue here -->\r\n- **Testing - New and feature**\r\n    - [x] N/A or can only be tested interactively\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n",
  "closed_at": "2019-05-08T23:25:03Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "It seems it is impossible to create useful test for the API.\r\n\r\n@adityapatwardhan Could you please check Ubuntu container?",
      "created_at": "2019-05-04T05:27:08Z",
      "updated_at": "2019-05-04T05:27:08Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "The change looks good to me. I verified the code on an Unbuntu 18.04 container:\r\n\r\n```PowerShell\r\nPowerShell 6.2.0\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\n\r\nhttps://aka.ms/pscore6-docs\r\nType 'help' to get help.\r\n\r\nPS /> cat /etc/os-release\r\nNAME=\"Ubuntu\"\r\nVERSION=\"18.04.2 LTS (Bionic Beaver)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 18.04.2 LTS\"\r\nVERSION_ID=\"18.04\"\r\nHOME_URL=\"https://www.ubuntu.com/\"\r\nSUPPORT_URL=\"https://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\r\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\r\nVERSION_CODENAME=bionic\r\nUBUNTU_CODENAME=bionic\r\nPS /> [System.Net.NetworkInformation.IPGlobalProperties]::GetIPGlobalProperties() | sv x\r\nPS /> $x\r\n\r\nDhcpScopeName :\r\nDomainName    : (none)\r\nHostName      : 7af9466760d8\r\nIsWinsProxy   :\r\nNodeType      : Unknown\r\n\r\n\r\nPS />\r\n```",
      "created_at": "2019-05-08T23:22:35Z",
      "updated_at": "2019-05-08T23:22:35Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "I also agree adding a test for this is useless.",
      "created_at": "2019-05-08T23:22:49Z",
      "updated_at": "2019-05-08T23:22:49Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "@iSazonov Thank you for your contribution!",
      "created_at": "2019-05-08T23:25:21Z",
      "updated_at": "2019-05-08T23:25:21Z"
    }
  ],
  "created_at": "2019-05-04T05:20:47Z",
  "number": 9530,
  "state": "closed",
  "title": "Use IPGlobalProperties on all platforms",
  "updated_at": "2019-05-09T18:53:51Z"
}