{
  "_url": "https://github.com/PowerShell/PowerShell/issues/1279",
  "author": "andschwa",
  "body": "This resolves #1099, and resolves an item of #1234.\n\nThe artifacts (should, waiting on build) get uploaded to the AWS endpoint provided by @TravisEz13.\n\n/cc @raghushantha @TravisEz13 \n",
  "closed_at": "2016-07-06T21:41:45Z",
  "comments": [
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "- [x] Debian packages [uploaded](https://travis-ci.com/PowerShell/PowerShell/jobs/44310703#L2064)\n- [x] OS X packages [uploaded](https://travis-ci.com/PowerShell/PowerShell/jobs/44310704#L1953)\n",
      "created_at": "2016-07-05T20:09:12Z",
      "updated_at": "2016-07-05T20:09:12Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "So, unfortunately, unlike AppVeyor, Travis CI doesn't provide a nice simple \"here are the artifacts you uploaded\" page. Meaning they have to be downloaded from the AWS bucket manually. Hm.\n",
      "created_at": "2016-07-05T20:11:50Z",
      "updated_at": "2016-07-05T20:11:50Z"
    },
    {
      "author": "raghushantha",
      "author_association": "MEMBER",
      "body": "Awesome addition - @andschwa How do I download the package non-interactively? Is the endpoint authenticated?\n\nhttps://s3.amazonaws.com/powershell-travis-ci-artifacts/PowerShell/PowerShell/2774/2774.1/powershell_0.5.0-260-g970641e-1_amd64.deb\n",
      "created_at": "2016-07-05T20:38:01Z",
      "updated_at": "2016-07-05T20:38:26Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@raghushantha that's what I was wondering. @TravisEz13?\n",
      "created_at": "2016-07-05T21:19:46Z",
      "updated_at": "2016-07-05T21:19:46Z"
    },
    {
      "author": "raghushantha",
      "author_association": "MEMBER",
      "body": "@andschwa Did you specify the region in the config? Looks like it is defaulting to something else\n\nget this error when accessing the endpoint:\n\n<Message>\nThe bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.\n</Message>\n",
      "created_at": "2016-07-05T21:36:52Z",
      "updated_at": "2016-07-05T21:36:52Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "The region is set to [us-west-2](https://github.com/PowerShell/PowerShell/pull/1279/files#diff-354f30a63fb0907d4ad57269548329e3R12) per Travis's email.\n",
      "created_at": "2016-07-05T21:40:10Z",
      "updated_at": "2016-07-05T21:41:14Z"
    },
    {
      "author": "raghushantha",
      "author_association": "MEMBER",
      "body": "@TravisEz13 dropped by. Here is an update:\n\n1) Need to have the region in the url: \nhttps://s3-us-west-2.amazonaws.com/powershell-travis-ci-artifacts/PowerShell/PowerShell/2774/2774.1/powershell_0.5.0-260-g970641e-1_amd64.deb\n\nDon't think travis-ci yml allows us to configure this.\n\n2) Still get access denied with the new url. This is expected since we need to pass the secrets in the body of the request. This problem must go away once we make this system public.\n\nSo for now, we need to solve problem 1\n",
      "created_at": "2016-07-05T23:10:48Z",
      "updated_at": "2016-07-05T23:10:48Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@raghushantha I'm not sure what's wrong. The region is set correctly. The URL we're getting back is just from Travis's [artifacts plugin](https://github.com/travis-ci/artifacts). @TravisEz13 where the artifacts not uploaded to the end point?\n",
      "created_at": "2016-07-06T20:46:56Z",
      "updated_at": "2016-07-06T20:46:56Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "When attempting to access the URL, I just get a permanent redirect:\n\n```\nThis XML file does not appear to have any style information associated with it. The document tree is shown below.\n<Error>\n<Code>PermanentRedirect</Code>\n<Message>\nThe bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.\n</Message>\n<Bucket>powershell-travis-ci-artifacts</Bucket>\n<Endpoint>powershell-travis-ci-artifacts.s3.amazonaws.com</Endpoint>\n<RequestId>8ABFD83338C35113</RequestId>\n<HostId>\ntPkOrkKvXWNnt8sesI+Kmdpurr1QApgRmufDEu4QyKoDpbroPjtU6DrhG8bRfevdJFj344DUSmU=\n</HostId>\n</Error>\n```\n\nWhich I think is fine, as you just follow the redirect to https://powershell-travis-ci-artifacts.s3.amazonaws.com/powershell-travis-ci-artifacts/PowerShell/PowerShell/2774/2774.2/powershell-0.5.0-260-g970641e.pkg, and then authenticate (somehow).\n",
      "created_at": "2016-07-06T20:57:14Z",
      "updated_at": "2016-07-06T20:57:14Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I just set up the `awscli` and synced the bucket down, it has what I expected. Can I merge now?\n",
      "created_at": "2016-07-06T20:57:41Z",
      "updated_at": "2016-07-06T20:57:41Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I believe what we would do when we go public is to make the bucket public, and then files would be available.\n",
      "created_at": "2016-07-06T20:58:48Z",
      "updated_at": "2016-07-06T20:58:48Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I think I see what you mean about the URL it publishes, looks like https://github.com/travis-ci/artifacts/issues/69.\n",
      "created_at": "2016-07-06T21:00:33Z",
      "updated_at": "2016-07-06T21:00:33Z"
    },
    {
      "author": "raghushantha",
      "author_association": "MEMBER",
      "body": "Ideally Travis-CI must emit the actual url (without redirection). I guess once https://github.com/travis-ci/artifacts/issues/69 issue is resolved we get to see it.\n\nFor now these changes are good. :shipit: \n",
      "created_at": "2016-07-06T21:40:47Z",
      "updated_at": "2016-07-06T21:40:47Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Yeah they could certainly do better on that. It's annoying. For now, I can get builds no problem, which means I can release packages from Travis :smile: \n",
      "created_at": "2016-07-06T21:42:31Z",
      "updated_at": "2016-07-06T21:42:31Z"
    }
  ],
  "created_at": "2016-07-05T19:04:44Z",
  "number": 1279,
  "state": "closed",
  "title": "Build Linux and OS X packages on Travis",
  "updated_at": "2016-07-06T21:42:31Z"
}