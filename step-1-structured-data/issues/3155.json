{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3155",
  "author": "jcoryatjr",
  "body": "Steps to reproduce\r\n------------------\r\nThe Invoke-WebRequest is provided for contrast.\r\nBuild and submit request to Remedy 9.1 REST API using appropriate form\r\n```powershell\r\n$loginUri = \"https://test.domain.com/api/jwt/login\"\r\n$body = \"username=ldapusername&password=mysecretpassword\"\r\n$loginToken = Invoke-RestMethod -Uri $loginUri -Body $body -Method Post -ContentType \"application/x-www-form-urlencoded\"\r\n$uri = \"https://test.domain.com/api/arsys/v1/entry/HPD:IncidentInterface_Create\"\r\n$body = \"{\"values\":{Provide json encoded parameters as per Remedy form}}\"\r\n$headers = @{\"Authorization\"=\"AR-JWT $loginToken\"}\r\nInvoke-RestMethod -Uri $uri -Body $body -Method Post -ContentType \"application/json\" -Headers $headers\r\nInvoke-WebRequest -Uri $uri -Body $body -Method Post -ContentType \"application/json\" -Headers $headers\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\nA valid http response from both calls that are similar except for the identity of the created request (below) as well as two different Remedy requests created vai the REST call.\r\n\r\nContent           : {}\r\nBaseResponse      : System.Net.HttpWebResponse\r\nStatusCode        : 201\r\nStatusDescription : Created\r\nHeaders           : {[Content-Length, 0], [Date, Wed, 15 Feb 2017 17:29:40 GMT], [Location, https://test.domain.com.com:9443/api/arsys/v1/entry/HPD:IncidentInterface_Create/000000001069517], \r\n                    [Server, Jetty(8.1.15.v20140411)]}\r\nRawContentStream  : Microsoft.PowerShell.Commands.WebResponseContentMemoryStream\r\nRawContentLength  : 0\r\nRawContent        : HTTP/1.1 201 Created\r\n                    Content-Length: 0\r\n                    Date: Wed, 15 Feb 2017 17:29:40 GMT\r\n                    Location: https://test.domain.com:9443/api/arsys/v1/entry/HPD:IncidentInterface_Create/000000001069517\r\n                    Server: Jetty(8.1.15.v20140411)\r\n\r\nActual behavior\r\n---------------\r\nThe Invoke-RestMethod returns a zero byte string, the Invoke-WebRequest returns the expected result a WebResponseObject (shown above).  Both requests are created successfully within Remedy.  It appears the Invoke-RestMethod cmdlet in version 5.1 fails to return the response object.  No errors are raised for either request.\r\n\r\nIn version 4.0 of powershell both cmdlets return the same result.  The target Remedy environment is identical for both versions.\r\n\r\nEnvironment data\r\n----------------\r\nWindows Server 2008 R2 Enterprise SP1\r\nRemedy ITSM version 9.1\r\n\r\n```powershell\r\n> $PSVersionTable (failing environment)\r\nName                           Value                                                                                                                                                                    ----                           -----                                                                                                                                                                                 \r\nPSVersion                      5.0.10586.117                                                                                                                                                   \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                                                                                                                                         \r\nBuildVersion                   10.0.10586.117                                                                                                                                                  \r\nCLRVersion                     4.0.30319.36373                                                                                                                                                 \r\nWSManStackVersion              3.0                                                                                                                                                             \r\nPSRemotingProtocolVersion      2.3                                                                                                                                                             \r\nSerializationVersion           1.1.0.1 \r\n\r\n> $PSVersionTable (successful environment)\r\nName                           Value                                                                                                                                                                                 \r\n----                           -----                                                                                                                                                                                 \r\nPSVersion                      4.0                                                                                                                                                                                   \r\nWSManStackVersion              3.0                                                                                                                                                                                   \r\nSerializationVersion           1.1.0.1                                                                                                                                                                               \r\nCLRVersion                     4.0.30319.17929                                                                                                                                                                       \r\nBuildVersion                   6.3.9600.16406                                                                                                                                                                        \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0}                                                                                                                                                                  \r\nPSRemotingProtocolVersion      2.2  \r\n```\r\n",
  "closed_at": "2017-02-15T19:42:44Z",
  "comments": [
    {
      "author": "jcoryatjr",
      "author_association": "NONE",
      "body": "Upon further investigation, I have another host (2012 R2 Standard) with PS 5.1 which does not exhibit this issue.  My impression is that there is an underlying issue on the problem host that is causing this behavior.",
      "created_at": "2017-02-15T19:42:44Z",
      "updated_at": "2017-02-15T19:42:44Z"
    }
  ],
  "created_at": "2017-02-15T19:15:51Z",
  "number": 3155,
  "state": "closed",
  "title": "Different Response objects from Invoke-RestMethod calls between 4.0 and 5.1",
  "updated_at": "2018-02-20T19:11:39Z"
}