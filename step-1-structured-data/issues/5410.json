{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5410",
  "author": "SteveL-MSFT",
  "body": "- Support '[package]' tag in PR CI to validate packaging changes in PR CI runs.\r\n  When using '[package]' tag, regular CI tests will run and packaging steps will also run.\r\n- Fix nightly build on macOS.\r\n",
  "closed_at": "2017-11-11T01:28:56Z",
  "comments": [
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@SteveL-MSFT Linux CI finished, please check if the package got uploaded.\r\nFor the broken macOS CI, #5400 is out trying to fix it.",
      "created_at": "2017-11-10T17:45:58Z",
      "updated_at": "2017-11-10T17:45:58Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "For the `[package]` tag, I think it may be unnecessary to run all test like the full build. How about making `[package]` run tests like a regular PR CI but include the package related operation?\r\nBTW, the regular AppVeyor PR CI always generates `msi` `nupkg` packages.\r\n\r\n**This comment doesn't block the PR.** If we think that's the right way to go, we can submit a separate PR to do it.",
      "created_at": "2017-11-10T19:33:11Z",
      "updated_at": "2017-11-10T19:48:22Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@daxian-dbw that makes sense since the intent is to test the packaging",
      "created_at": "2017-11-10T21:26:10Z",
      "updated_at": "2017-11-10T21:26:10Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "Since the line `Start-PSBootstrap -Package:(-not $isPr)` is not updated, the build will fail to create the package. I have canceled the Travis CI because of this.",
      "created_at": "2017-11-10T22:12:31Z",
      "updated_at": "2017-11-10T22:12:31Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "per @TravisEz13 Travis-CI doesn't upload the artifacts on PRs, so I'll have to wait til this is merged and a daily build kicks off to verify the actual package got uploaded, but it does appear to have been built",
      "created_at": "2017-11-10T23:10:45Z",
      "updated_at": "2017-11-10T23:10:45Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "It took forever for the macOS CI to start. I will merge this PR without waiting on the macOS because\r\n1. This PR will fix the current build break in macOS -- packaging is broken.\r\n2. The packages are not uploaded for PR CI runs. Merge CI run or daily run will trigger the uploading. @SteveL-MSFT cannot validate the generated arm32 package until this is merged.",
      "created_at": "2017-11-11T01:24:36Z",
      "updated_at": "2017-11-11T01:24:36Z"
    }
  ],
  "created_at": "2017-11-10T16:56:30Z",
  "number": 5410,
  "state": "closed",
  "title": "Support '[package]' tag in PR CI and fix nightly build on macOS",
  "updated_at": "2018-10-26T21:34:13Z"
}