{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5328",
  "author": "iSazonov",
  "body": "## PR Summary\r\n\r\nThe Test-Connection cmdlet works on Windows and Unix.\r\n\r\n### Implemented:\r\n- Ping\r\n- Continues Ping\r\n- Traceroute\r\n- Detect MTU size (seems don't works on Unix because .Net Core issue)\r\n- Connect to TCP port\r\n\r\n### Not jet implemented:\r\nI'm putting this off for the future.\r\n- Detect blackhole routers\r\n- PingPath\r\n\r\n### Additional considerations\r\n\r\nAs you can see in the tests .Net Core has issues in API implementation. As a result, some tests are skipped on Unix. There is also one issue on Windows. Related comments added to tests.\r\nI'm going to open an issue(s) in CoreFX repo.\r\n\r\nI think we should break the feedback into two parts:\r\n1. scripting functionality\r\n2. interactive functionality (display output)\r\n\r\nNow I have implemented the output to the screen as progress bar and as text (without ETS) - we have to decide what is best to use.\r\n\r\nAlso we could do a merge if scripting functionality is good and wait feedback for interactive functionality (display output).\r\nI am waiting feedback how we better make the output to the screen for all options.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [ ] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [x] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-04-03T18:59:27Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I really don't know how make reliable CI tests.",
      "created_at": "2017-11-08T13:06:39Z",
      "updated_at": "2017-11-08T13:06:39Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT @TravisEz13 Can we have IPv6 on CIs to pass the tests?",
      "created_at": "2018-01-04T18:05:33Z",
      "updated_at": "2018-01-04T18:05:33Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "On windows, you can detect if the machine has an IPv6 address and run the test or skip it.",
      "created_at": "2018-01-04T21:30:43Z",
      "updated_at": "2018-01-04T21:30:43Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I believe we shouldn't skip any tests and we should pass the same test set on all platforms. The tests is passed locally. Is it acceptable pending the IPv6 tests on CIs? Or remove all the IPv6 tests and leave only IPv4 test?\r\nIPv6 protocol is enabled on Windows by default (CI AppVeyor). It seems we could enable IPv6 on CI Travis too. We can pass the tests without real IPv6 addresses.\r\n",
      "created_at": "2018-01-05T08:55:09Z",
      "updated_at": "2018-01-05T08:55:09Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "If you think you can enable IPv6 on travis-ci, feel free to add it to the PR.  I think I miss understood the question.",
      "created_at": "2018-01-06T00:50:15Z",
      "updated_at": "2018-01-06T00:50:15Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13 Thanks! I discover that CI Travis has problems with IPv6. I push new commit with workaround https://github.com/travis-ci/travis-ci/issues/8361#issuecomment-350497804\r\n",
      "created_at": "2018-01-06T13:31:11Z",
      "updated_at": "2018-01-06T13:31:11Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "The workaround don't help \ud83d\ude15 They removed [localhost alias for ::1](https://github.com/travis-ci/travis-ci/issues/8891).\r\nI can make the tests more stable on CI Appveyor but it doesn't seem to make sense to fight this on CI Travis since they can't do IPv6 for many years. \r\n\r\nI suggest skip (or pending) the test on CI Travis and enable them local and on CI Appveyor.\r\n",
      "created_at": "2018-01-06T14:18:15Z",
      "updated_at": "2018-01-06T14:18:15Z"
    },
    {
      "author": "stale[bot]",
      "author_association": "NONE",
      "body": "This PR has been automatically marked as stale because it has not had activity in the last 30 days. It will be closed if no further activity occurs within 10 days. Thank you for your contributions.\n",
      "created_at": "2018-03-16T23:47:23Z",
      "updated_at": "2018-03-16T23:47:23Z"
    },
    {
      "author": "FriedCircuits",
      "author_association": "NONE",
      "body": "Would be great to get this merged. We use test-connection to check VPN connections. ",
      "created_at": "2018-03-16T23:53:42Z",
      "updated_at": "2018-03-16T23:53:42Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@FriedCircuits The tests are failing.  We need the tests to be fixed before we can merge.",
      "created_at": "2018-03-16T23:56:20Z",
      "updated_at": "2018-03-16T23:56:20Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "Updated PR description with current Template",
      "created_at": "2018-03-16T23:57:58Z",
      "updated_at": "2018-03-16T23:57:58Z"
    },
    {
      "author": "FriedCircuits",
      "author_association": "NONE",
      "body": "@TravisEz13 for sure, I saw the bot marked it as stale. ",
      "created_at": "2018-03-16T23:59:57Z",
      "updated_at": "2018-03-16T23:59:57Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "@FriedCircuits Yup, Please feel free to comment to keep a PR from being closed.  But eventually, someone needs to be interested in continuing the work.  An open PR takes some time to track and manage, although we are finding tools to help with that.",
      "created_at": "2018-03-17T00:05:48Z",
      "updated_at": "2018-03-17T00:05:48Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I don't know how fix tests because of IPV6. I could  re-write tests for only IPv4.",
      "created_at": "2018-03-19T05:32:16Z",
      "updated_at": "2018-03-19T05:32:16Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov perhaps we should update the PR for ipv4 and open an issue to add ipv6 tests later",
      "created_at": "2018-03-20T18:29:55Z",
      "updated_at": "2018-03-20T18:29:55Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13 @SteveL-MSFT The PR is ready for review.",
      "created_at": "2018-04-02T03:56:17Z",
      "updated_at": "2018-04-02T03:56:17Z"
    },
    {
      "author": "enekux",
      "author_association": "NONE",
      "body": "There is a workaround here. You can use the .Net Ping Class instead and until the Test-Connection cmdlet is ported.\r\nMore info here:\r\nhttp://ilovepowershell.com/2010/04/13/powershell-how-to-ping-computers/",
      "created_at": "2018-05-03T13:59:47Z",
      "updated_at": "2018-05-03T13:59:47Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@enekux It has _already_ been ported - you can get it in latest builds. We are waiting feedbacks.",
      "created_at": "2018-05-03T14:14:30Z",
      "updated_at": "2018-05-03T14:14:30Z"
    }
  ],
  "created_at": "2017-11-03T15:09:43Z",
  "number": 5328,
  "state": "closed",
  "title": "Add ported Test-Connection cmdlet",
  "updated_at": "2018-05-03T14:14:31Z"
}