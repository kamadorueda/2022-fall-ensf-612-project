{
  "_url": "https://github.com/PowerShell/PowerShell/issues/13670",
  "author": "rjmholt",
  "body": "From https://github.com/PowerShell/PowerShell/pull/13643.\r\n\r\nAn example of the failure:\r\n\r\n```\r\n2020-09-18T22:42:29.2955211Z       [-] Verifies Invoke-WebRequest -SslProtocol Tls works on Tls 101ms\r\n2020-09-18T22:42:29.2955800Z         OpenSslCryptographicException: error:141A90B5:SSL routines:ssl_cipher_list_to_bytes:no ciphers available\r\n2020-09-18T22:42:29.2956608Z         SslException: SSL Handshake failed with OpenSSL error - SSL_ERROR_SSL.\r\n2020-09-18T22:42:29.2957106Z         AuthenticationException: Authentication failed, see inner exception.\r\n2020-09-18T22:42:29.2957636Z         HttpRequestException: The SSL connection could not be established, see inner exception.\r\n2020-09-18T22:42:29.2958223Z         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1746\r\n2020-09-18T22:42:29.2958957Z VERBOSE:    at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Boolean async, Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2959667Z    at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2960329Z    at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2960985Z    at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2961677Z    at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2962334Z    at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2963128Z    at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2964199Z    at Microsoft.PowerShell.Commands.WebRequestPSCmdlet.GetResponse(HttpClient client, HttpRequestMessage request, Boolean keepAuthorization) in /home/vsts/work/1/s/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs:line 1361\r\n2020-09-18T22:42:29.2965234Z    at Microsoft.PowerShell.Commands.WebRequestPSCmdlet.ProcessRecord() in /home/vsts/work/1/s/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs:line 1518\r\n2020-09-18T22:42:29.2966061Z VERBOSE:    at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)\r\n2020-09-18T22:42:29.2966834Z    at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Boolean async, Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2967362Z VERBOSE: \r\n2020-09-18T22:42:29.2967651Z PSMessageDetails      : \r\n2020-09-18T22:42:29.2968153Z Exception             : System.Net.Http.HttpRequestException: The SSL connection could not be established, see inner exception.\r\n2020-09-18T22:42:29.2969120Z                          ---> System.Security.Authentication.AuthenticationException: Authentication failed, see inner exception.\r\n2020-09-18T22:42:29.2970065Z                          ---> Interop+OpenSsl+SslException: SSL Handshake failed with OpenSSL error - SSL_ERROR_SSL.\r\n2020-09-18T22:42:29.2971078Z                          ---> Interop+Crypto+OpenSslCryptographicException: error:141A90B5:SSL routines:ssl_cipher_list_to_bytes:no ciphers available\r\n2020-09-18T22:42:29.2971925Z                            --- End of inner exception stack trace ---\r\n2020-09-18T22:42:29.2972478Z                            at Interop.OpenSsl.DoSslHandshake(SafeSslHandle context, ReadOnlySpan`1 input, Byte[]& sendBuf, Int32& sendCount)\r\n2020-09-18T22:42:29.2973294Z                            at System.Net.Security.SslStreamPal.HandshakeInternal(SafeFreeCredentials credential, SafeDeleteSslContext& context, ReadOnlySpan`1 inputBuffer, Byte[]& outputBuffer, SslAuthenticationOptions sslAuthenticationOptions)\r\n2020-09-18T22:42:29.2974285Z                            --- End of inner exception stack trace ---\r\n2020-09-18T22:42:29.2974912Z                            at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)\r\n2020-09-18T22:42:29.2975716Z                            at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Boolean async, Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2976571Z                            --- End of inner exception stack trace ---\r\n2020-09-18T22:42:29.2977209Z                            at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Boolean async, Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2977994Z                            at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2978740Z                            at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2979640Z                            at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2980472Z                            at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2981330Z                            at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2982192Z                            at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.2983300Z                            at Microsoft.PowerShell.Commands.WebRequestPSCmdlet.GetResponse(HttpClient client, HttpRequestMessage request, Boolean keepAuthorization) in /home/vsts/work/1/s/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs:line 1361\r\n2020-09-18T22:42:29.2984528Z                            at Microsoft.PowerShell.Commands.WebRequestPSCmdlet.ProcessRecord() in /home/vsts/work/1/s/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs:line 1518\r\n2020-09-18T22:42:29.2985877Z TargetObject          : Method: GET, RequestUri: 'https://127.0.0.1:8085/Get', Version: 1.1, Content: System.Net.Http.StringContent, Headers:\r\n2020-09-18T22:42:29.2986533Z                         {\r\n2020-09-18T22:42:29.2987136Z                           User-Agent: Mozilla/5.0\r\n2020-09-18T22:42:29.2988030Z                           User-Agent: (Linux; Linux 4.15.0-1095-azure #105~16.04.1-Ubuntu SMP Sun Sep 6 00:30:35 UTC 2020; en-US)\r\n2020-09-18T22:42:29.2988861Z                           User-Agent: PowerShell/7.1.0\r\n2020-09-18T22:42:29.2989505Z                           Content-Length: 0\r\n2020-09-18T22:42:29.2990681Z                         }\r\n2020-09-18T22:42:29.2991401Z CategoryInfo          : InvalidOperation: (Method: GET, Reques\u00e2\u20ac\u00a6Content-Length: 0\r\n2020-09-18T22:42:29.2992258Z                         }:HttpRequestMessage) [Invoke-WebRequest], HttpRequestException\r\n2020-09-18T22:42:29.2992897Z FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand\r\n2020-09-18T22:42:29.2993467Z ErrorDetails          : Authentication failed, see inner exception.\r\n2020-09-18T22:42:29.2993968Z InvocationInfo        : System.Management.Automation.InvocationInfo\r\n2020-09-18T22:42:29.2994690Z ScriptStackTrace      : at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1746\r\n2020-09-18T22:42:29.2995703Z                         at Invoke-Test, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/It.ps1: line 289\r\n2020-09-18T22:42:29.3001270Z                         at ItImpl, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/It.ps1: line 237\r\n2020-09-18T22:42:29.3002065Z                         at It, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/It.ps1: line 132\r\n2020-09-18T22:42:29.3002743Z                         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1736\r\n2020-09-18T22:42:29.3003480Z                         at DescribeImpl, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Describe.ps1: line 213\r\n2020-09-18T22:42:29.3004323Z                         at Context, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Context.ps1: line 92\r\n2020-09-18T22:42:29.3005054Z                         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1689\r\n2020-09-18T22:42:29.3007282Z                         at DescribeImpl, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Describe.ps1: line 213\r\n2020-09-18T22:42:29.3012485Z                         at Describe, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Describe.ps1: line 105\r\n2020-09-18T22:42:29.3013468Z                         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 371\r\n2020-09-18T22:42:29.3014340Z                         at <ScriptBlock>, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Pester.psm1: line 1111\r\n2020-09-18T22:42:29.3015446Z                         at Invoke-Pester<End>, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Pester.psm1: line 1137\r\n2020-09-18T22:42:29.3021746Z                         at <ScriptBlock>, <No file>: line 1\r\n2020-09-18T22:42:29.3022306Z PipelineIterationInfo : {}\r\n2020-09-18T22:42:29.3022643Z \r\n2020-09-18T22:42:29.3022863Z \r\n2020-09-18T22:42:29.3023078Z \r\n2020-09-18T22:42:29.3023355Z VERBOSE: \r\n2020-09-18T22:42:29.3024035Z \u001b[92mException             : \u001b[0m\r\n2020-09-18T22:42:29.3024713Z     \u001b[92mType           : \u001b[0mSystem.Net.Http.HttpRequestException\r\n2020-09-18T22:42:29.3025363Z     \u001b[92mTargetSite     : \u001b[0m\r\n2020-09-18T22:42:29.3026037Z         \u001b[92mName          : \u001b[0mMoveNext\r\n2020-09-18T22:42:29.3032447Z         \u001b[92mDeclaringType : \u001b[0mSystem.Net.Http.ConnectHelper+<EstablishSslConnectionAsyncCore>d__4, System.Net.Http, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\r\n2020-09-18T22:42:29.3044598Z         \u001b[92mMemberType    : \u001b[0mMethod\r\n2020-09-18T22:42:29.3045541Z         \u001b[92mModule        : \u001b[0mSystem.Net.Http.dll\r\n2020-09-18T22:42:29.3046159Z     \u001b[92mStackTrace     : \u001b[0m\r\n2020-09-18T22:42:29.3048092Z    at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Boolean async, Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3053632Z    at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3054505Z    at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3055219Z    at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3055982Z    at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3056688Z    at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3063204Z    at System.Net.Http.HttpClient.SendAsyncCore(HttpRequestMessage request, HttpCompletionOption completionOption, Boolean async, Boolean emitTelemetryStartStop, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3064374Z    at Microsoft.PowerShell.Commands.WebRequestPSCmdlet.GetResponse(HttpClient client, HttpRequestMessage request, Boolean keepAuthorization) in /home/vsts/work/1/s/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs:line 1361\r\n2020-09-18T22:42:29.3065505Z    at Microsoft.PowerShell.Commands.WebRequestPSCmdlet.ProcessRecord() in /home/vsts/work/1/s/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs:line 1518\r\n2020-09-18T22:42:29.3066709Z     \u001b[92mMessage        : \u001b[0mThe SSL connection could not be established, see inner exception.\r\n2020-09-18T22:42:29.3130514Z     \u001b[92mInnerException : \u001b[0m\r\n2020-09-18T22:42:29.3131453Z         \u001b[92mType           : \u001b[0mSystem.Security.Authentication.AuthenticationException\r\n2020-09-18T22:42:29.3132151Z         \u001b[92mTargetSite     : \u001b[0m\r\n2020-09-18T22:42:29.3132763Z             \u001b[92mName          : \u001b[0mMoveNext\r\n2020-09-18T22:42:29.3133605Z             \u001b[92mDeclaringType : \u001b[0mSystem.Net.Security.SslStream+<ForceAuthenticationAsync>d__171`1[TIOAdapter]\r\n2020-09-18T22:42:29.3134341Z             \u001b[92mMemberType    : \u001b[0mMethod\r\n2020-09-18T22:42:29.3140907Z             \u001b[92mModule        : \u001b[0mSystem.Net.Security.dll\r\n2020-09-18T22:42:29.3141683Z         \u001b[92mStackTrace     : \u001b[0m\r\n2020-09-18T22:42:29.3142308Z    at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)\r\n2020-09-18T22:42:29.3143262Z    at System.Net.Http.ConnectHelper.EstablishSslConnectionAsyncCore(Boolean async, Stream stream, SslClientAuthenticationOptions sslOptions, CancellationToken cancellationToken)\r\n2020-09-18T22:42:29.3144207Z         \u001b[92mMessage        : \u001b[0mAuthentication failed, see inner exception.\r\n2020-09-18T22:42:29.3150635Z         \u001b[92mInnerException : \u001b[0m\r\n2020-09-18T22:42:29.3151421Z             \u001b[92mType           : \u001b[0mInterop+OpenSsl+SslException\r\n2020-09-18T22:42:29.3152038Z             \u001b[92mTargetSite     : \u001b[0m\r\n2020-09-18T22:42:29.3152841Z                 \u001b[92mName          : \u001b[0mDoSslHandshake\r\n2020-09-18T22:42:29.3153762Z                 \u001b[92mDeclaringType : \u001b[0mInterop+OpenSsl, System.Net.Security, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a\r\n2020-09-18T22:42:29.3154593Z                 \u001b[92mMemberType    : \u001b[0mMethod\r\n2020-09-18T22:42:29.3161040Z                 \u001b[92mModule        : \u001b[0mSystem.Net.Security.dll\r\n2020-09-18T22:42:29.3161836Z             \u001b[92mStackTrace     : \u001b[0m\r\n2020-09-18T22:42:29.3162407Z    at Interop.OpenSsl.DoSslHandshake(SafeSslHandle context, ReadOnlySpan`1 input, Byte[]& sendBuf, Int32& sendCount)\r\n2020-09-18T22:42:29.3163204Z    at System.Net.Security.SslStreamPal.HandshakeInternal(SafeFreeCredentials credential, SafeDeleteSslContext& context, ReadOnlySpan`1 inputBuffer, Byte[]& outputBuffer, SslAuthenticationOptions sslAuthenticationOptions)\r\n2020-09-18T22:42:29.3180782Z             \u001b[92mMessage        : \u001b[0mSSL Handshake failed with OpenSSL error - SSL_ERROR_SSL.\r\n2020-09-18T22:42:29.3181822Z             \u001b[92mInnerException : \u001b[0m\r\n2020-09-18T22:42:29.3182553Z                 \u001b[92mType    : \u001b[0mInterop+Crypto+OpenSslCryptographicException\r\n2020-09-18T22:42:29.3183392Z                 \u001b[92mMessage : \u001b[0merror:141A90B5:SSL routines:ssl_cipher_list_to_bytes:no ciphers available\r\n2020-09-18T22:42:29.3184238Z                 \u001b[92mHResult : \u001b[0m337285301\r\n2020-09-18T22:42:29.3184862Z             \u001b[92mSource         : \u001b[0mSystem.Net.Security\r\n2020-09-18T22:42:29.3185505Z             \u001b[92mHResult        : \u001b[0m-2146233088\r\n2020-09-18T22:42:29.3191696Z         \u001b[92mSource         : \u001b[0mSystem.Net.Security\r\n2020-09-18T22:42:29.3192509Z         \u001b[92mHResult        : \u001b[0m-2146233087\r\n2020-09-18T22:42:29.3193318Z     \u001b[92mSource         : \u001b[0mSystem.Net.Http\r\n2020-09-18T22:42:29.3193936Z     \u001b[92mHResult        : \u001b[0m-2146233087\r\n2020-09-18T22:42:29.3195001Z \u001b[92mTargetObject          : \u001b[0mMethod: GET, RequestUri: 'https://127.0.0.1:8085/Get', Version: 1.1, Content: System.Net.Http.StringContent, Headers:\r\n2020-09-18T22:42:29.3200955Z                         {\r\n2020-09-18T22:42:29.3201850Z                         User-Agent: Mozilla/5.0\r\n2020-09-18T22:42:29.3202754Z                         User-Agent: (Linux; Linux 4.15.0-1095-azure #105~16.04.1-Ubuntu SMP Sun Sep 6 00:30:35 UTC 2020; en-US)\r\n2020-09-18T22:42:29.3203600Z                         User-Agent: PowerShell/7.1.0\r\n2020-09-18T22:42:29.3204776Z                         Content-Length: 0\r\n2020-09-18T22:42:29.3205975Z                         }\r\n2020-09-18T22:42:29.3212173Z \u001b[92mCategoryInfo          : \u001b[0mInvalidOperation: (Method: GET, Reques\u00e2\u20ac\u00a6Content-Length: 0\r\n2020-09-18T22:42:29.3213267Z                         }:HttpRequestMessage) [Invoke-WebRequest], HttpRequestException\r\n2020-09-18T22:42:29.3214194Z \u001b[92mFullyQualifiedErrorId : \u001b[0mWebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand\r\n2020-09-18T22:42:29.3215050Z \u001b[92mErrorDetails          : \u001b[0mAuthentication failed, see inner exception.\r\n2020-09-18T22:42:29.3220185Z \u001b[92mInvocationInfo        : \u001b[0m\r\n2020-09-18T22:42:29.3220947Z     \u001b[92mMyCommand        : \u001b[0mInvoke-WebRequest\r\n2020-09-18T22:42:29.3221601Z     \u001b[92mScriptLineNumber : \u001b[0m1746\r\n2020-09-18T22:42:29.3222187Z     \u001b[92mOffsetInLine     : \u001b[0m33\r\n2020-09-18T22:42:29.3222789Z     \u001b[92mHistoryId        : \u001b[0m1\r\n2020-09-18T22:42:29.3223605Z     \u001b[92mScriptName       : \u001b[0m/home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1\r\n2020-09-18T22:42:29.3229414Z     \u001b[92mLine             : \u001b[0m$response = Invoke-WebRequest @params -ErrorAction Stop\r\n2020-09-18T22:42:29.3230009Z                        \r\n2020-09-18T22:42:29.3231040Z     \u001b[92mPositionMessage  : \u001b[0mAt /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1:1746 char:33\r\n2020-09-18T22:42:29.3232016Z                        + \u00e2\u20ac\u00a6               $response = Invoke-WebRequest @params -ErrorAction Stop\r\n2020-09-18T22:42:29.3237296Z                        +                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n2020-09-18T22:42:29.3238403Z     \u001b[92mPSScriptRoot     : \u001b[0m/home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility\r\n2020-09-18T22:42:29.3239446Z     \u001b[92mPSCommandPath    : \u001b[0m/home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1\r\n2020-09-18T22:42:29.3240174Z     \u001b[92mInvocationName   : \u001b[0mInvoke-WebRequest\r\n2020-09-18T22:42:29.3240807Z     \u001b[92mCommandOrigin    : \u001b[0mInternal\r\n2020-09-18T22:42:29.3247461Z \u001b[92mScriptStackTrace      : \u001b[0mat <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1746\r\n2020-09-18T22:42:29.3248580Z                         at Invoke-Test, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/It.ps1: line 289\r\n2020-09-18T22:42:29.3249270Z                         at ItImpl, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/It.ps1: line 237\r\n2020-09-18T22:42:29.3249848Z                         at It, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/It.ps1: line 132\r\n2020-09-18T22:42:29.3250494Z                         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1736\r\n2020-09-18T22:42:29.3252473Z                         at DescribeImpl, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Describe.ps1: line 213\r\n2020-09-18T22:42:29.3258278Z                         at Context, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Context.ps1: line 92\r\n2020-09-18T22:42:29.3259125Z                         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 1689\r\n2020-09-18T22:42:29.3259994Z                         at DescribeImpl, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Describe.ps1: line 213\r\n2020-09-18T22:42:29.3260680Z                         at Describe, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Functions/Describe.ps1: line 105\r\n2020-09-18T22:42:29.3261377Z                         at <ScriptBlock>, /home/vsts/work/1/s/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1: line 371\r\n2020-09-18T22:42:29.3267711Z                         at <ScriptBlock>, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Pester.psm1: line 1111\r\n2020-09-18T22:42:29.3268866Z                         at Invoke-Pester<End>, /home/vsts/work/1/a/bins/publish/Modules/Pester/4.10.1/Pester.psm1: line 1137\r\n2020-09-18T22:42:29.3269458Z                         at <ScriptBlock>, <No file>: line 1\r\n```\r\n\r\nThe error itself is thrown here:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/3effa204103460c996a8612aa70718fdf924047d/src/Microsoft.PowerShell.Commands.Utility/commands/utility/WebCmdlet/Common/WebRequestPSCmdlet.Common.cs#L1361\r\n\r\nWith the failing tests being:\r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/3effa204103460c996a8612aa70718fdf924047d/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1#L1736-L1747\r\n\r\nand \r\n\r\nhttps://github.com/PowerShell/PowerShell/blob/3effa204103460c996a8612aa70718fdf924047d/test/powershell/Modules/Microsoft.PowerShell.Utility/WebCmdlets.Tests.ps1#L3251-L3261\r\n\r\n## Suggested resolution\r\n\r\n`Interop+Crypto+OpenSslCryptographicException` is a private nested type, and the type it inherits from is internal. This makes them unsafe to depend on.\r\n\r\nGiven the way the underlying platform fails, I think we're going to have a hard time differentiating this failure from other failures to users.\r\n\r\nI think ideally we should:\r\n\r\n- Keep throwing an error -- since there's not much else we can do\r\n- Change the message or reason on the error if we think it's possible to do so consistently, so that fixing the issue is easier\r\n- Change the tests to expect the given errors on the platforms where they occur",
  "closed_at": null,
  "comments": [],
  "created_at": "2020-09-21T19:53:05Z",
  "number": 13670,
  "state": "open",
  "title": "Web cmdlet tests fail in Linux CI due to OpenSSL configuration",
  "updated_at": "2021-02-11T18:54:18Z"
}