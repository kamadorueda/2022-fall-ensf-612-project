{
  "_url": "https://github.com/PowerShell/PowerShell/issues/4090",
  "author": "unbreakabl3",
  "body": "Hello,\r\nWhen trying to import Azure Core modules, I am getting the following error on latest Mac OS:\r\n\r\nImport-Module : Could not load file or assembly 'Microsoft.Azure.Commands.ResourceManager.Common, Version=1.6.0.0, Cultur\r\ne=neutral, PublicKeyToken=31bf3856ad364e35'. The system cannot find the file specified.\r\nAt line:1 char:1\r\n+ Import-Module AzureRM.Profile.NetCore.Preview\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [Import-Module], FileNotFoundException\r\n    + FullyQualifiedErrorId : System.IO.FileNotFoundException,Microsoft.PowerShell.Commands.ImportModuleCommand\r\n\r\n\r\n$PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.0.0-beta\r\nPSEdition                      Core\r\nGitCommitId                    v6.0.0-beta.3\r\nOS                             Darwin 16.6.0 Darwin Kernel Version 16.6.0: Fri Apr 14 16:21:16 PDT 2017; root:xnu-3789...\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0",
  "closed_at": "2017-07-29T00:10:51Z",
  "comments": [
    {
      "author": "januschr",
      "author_association": "NONE",
      "body": "I get the same error. I first ran\r\n```\r\nInstall-Package -Name AzureRM.NetCore.Preview -Source https://www.powershellgallery.com/api/v2 -ProviderName NuGet -ExcludeVersion -Destination /usr/local/share/powershell/Modules\r\n```\r\nAnd after that Import-Module AzureRM.Profile.NetCore.Preview, where I get the same error as @unbreakabl3.\r\n\r\nGet-Module -ListAvailable shows the following:\r\n\r\n        Directory: /usr/local/share/powershell/Modules\r\n    \r\n    \r\n    ModuleType Version    Name                                ExportedCommands                                             \r\n    ---------- -------    ----                                ----------------                                             \r\n    Manifest   0.3.4      AzureRM.NetCore.Preview                                                                          \r\n    Manifest   0.3.4      AzureRM.Profile.NetCore.Preview     {Login-AzureRmAccount, Select-AzureRmSubscription}           \r\n    Manifest   0.3.4      AzureRM.Resources.NetCore.Preview                                                                \r\n    \r\n    \r\n        Directory: /usr/local/microsoft/powershell/6.0.0-beta.3/Modules\r\n    \r\n    \r\n    ModuleType Version    Name                                ExportedCommands                                             \r\n    ---------- -------    ----                                ----------------                                             \r\n    Manifest   1.1.0.0    Microsoft.PowerShell.Archive        {Compress-Archive, Expand-Archive}                           \r\n    Manifest   3.0.0.0    Microsoft.PowerShell.Host           {Start-Transcript, Stop-Transcript}                          \r\n    Manifest   3.1.0.0    Microsoft.PowerShell.Management     {Add-Content, Clear-Content, Clear-ItemProperty, Join-Path...\r\n    Manifest   3.0.0.0    Microsoft.PowerShell.Security       {Get-Credential, Get-ExecutionPolicy, Set-ExecutionPolicy,...\r\n    Manifest   3.1.0.0    Microsoft.PowerShell.Utility        {Format-List, Format-Custom, Format-Table, Format-Wide...}   \r\n    Script     1.1.4.0    PackageManagement                   {Find-Package, Get-Package, Get-PackageProvider, Get-Packa...\r\n    Script     3.3.9      Pester                              {Describe, Context, It, Should...}                           \r\n    Script     1.1.3.1    PowerShellGet                       {Install-Module, Find-Module, Save-Module, Update-Module...} \r\n    Script     0.0        PSDesiredStateConfiguration         {ThrowError, Get-PSMetaConfigDocumentInstVersionInfo, New-...\r\n    Script     1.2        PSReadLine                          {Get-PSReadlineKeyHandler, Set-PSReadlineKeyHandler, Remov...\r\n\r\nThank you in advance.",
      "created_at": "2017-06-24T09:22:00Z",
      "updated_at": "2017-06-24T09:22:00Z"
    },
    {
      "author": "amhendley",
      "author_association": "NONE",
      "body": "I would like to report the exact same behaviour, but where it appears to occur for any call made.\r\n\r\n```\r\nPS /> $PSVersionTable                                                                                                                       \r\n\r\nName                           Value                                                                                                       \r\n----                           -----                                                                                                       \r\nPSVersion                      6.0.0-beta                                                                                                  \r\nPSEdition                      Core                                                                                                        \r\nGitCommitId                    v6.0.0-beta.3                                                                                               \r\nOS                             Darwin 16.6.0 Darwin Kernel Version 16.6.0: Fri Apr 14 16:21:16 PDT 2017; root:xnu-3789.60.24~6/RELEASE_X...\r\nPlatform                       Unix                                                                                                        \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                                                                                     \r\nPSRemotingProtocolVersion      2.3                                                                                                         \r\nSerializationVersion           1.1.0.1                                                                                                     \r\nWSManStackVersion              3.0 \r\n```\r\nExamples\r\n```\r\nPS /> Install-Package PSScriptAnalyzer                                                                                                      \r\nUnable to find the specified file.\r\nAt line:1 char:1\r\n+ Install-Package PSScriptAnalyzer\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : OperationStopped: (:) [], FileNotFoundException\r\n    + FullyQualifiedErrorId : System.IO.FileNotFoundException\r\n \r\nPS /> Get-Command -verb Install                                                                                                             \r\n\r\nCommandType     Name                                               Version    Source                                                       \r\n-----------     ----                                               -------    ------                                                       \r\nFunction        Install-Module                                     1.1.3.1    PowerShellGet                                                \r\nFunction        Install-Script                                     1.1.3.1    PowerShellGet                                                \r\nCmdlet          Install-Package                                    1.1.4.0    PackageManagement                                            \r\nCmdlet          Install-PackageProvider                            1.1.4.0    PackageManagement     \r\n\r\nPS /> Get-ChildItem -Path /                                                                                                                 \r\nUnable to find the specified file.\r\nAt line:1 char:1\r\n+ Get-ChildItem -Path /\r\n+ ~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : OperationStopped: (:) [], FileNotFoundException\r\n    + FullyQualifiedErrorId : System.IO.FileNotFoundException\r\n\r\nPS /> Get-Command Get-ChildItem                                                                                                             \r\nGet-Command : Unable to find the specified file.\r\nAt line:1 char:1\r\n+ Get-Command Get-ChildItem\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [Get-Command], FileNotFoundException\r\n    + FullyQualifiedErrorId : System.IO.FileNotFoundException,Microsoft.PowerShell.Commands.GetCommandCommand\r\n\r\n```\r\n",
      "created_at": "2017-06-26T10:21:05Z",
      "updated_at": "2017-06-26T10:21:05Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "Hum!!  I don't think the 'PSScriptAnalyzer' can be installed in PowerShell Core Linux and is not part of AzureRM module.\r\n\r\nYou can use the following command to identify what's been tag for Linux:\r\n```\r\nFind-Module -tag Linux\r\n```\r\nFor sure there's a lot of work to be done in the PSGallery to properly identify the difference between Windows PowerShell vs PowerShell Core as they are not the same.\r\n\r\nHope this will clear some confusion,\r\n:)\r\n\r\n![psgallerylinux_2017-06-26_7-05-51](https://user-images.githubusercontent.com/19892435/27536618-fbcbae68-5a3d-11e7-9c73-4815c74e22c7.jpg)\r\n\r\n",
      "created_at": "2017-06-26T11:09:10Z",
      "updated_at": "2017-06-26T11:09:10Z"
    },
    {
      "author": "amhendley",
      "author_association": "NONE",
      "body": "I don't believe it is just `PSScriptAnalyzer` not being able to run on OSX. I ran the command you suggested `Find-Module` with the same result.\r\n\r\n```\r\nPowerShell v6.0.0-beta.3\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nPS /> Find-Module -tag Linux                                                                                                                \r\nUnable to find the specified file.\r\nAt line:1 char:1\r\n+ Find-Module -tag Linux\r\n+ ~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : OperationStopped: (:) [], FileNotFoundException\r\n    + FullyQualifiedErrorId : System.IO.FileNotFoundException\r\n```",
      "created_at": "2017-06-27T07:23:47Z",
      "updated_at": "2017-06-27T07:23:47Z"
    },
    {
      "author": "amhendley",
      "author_association": "NONE",
      "body": "Well, this is interesting. I just tried for the hell of it to change back to my `$HOME` directory and it worked.\r\n\r\n```\r\nPowerShell v6.0.0-beta.3\r\nCopyright (C) Microsoft Corporation. All rights reserved.\r\n\r\nPS /Users/*******> Find-Module -tag Linux                                                                                                    \r\n\r\nVersion    Name                                Repository           Description                                                            \r\n-------    ----                                ----------           -----------                                                            \r\n1.1.4.0    PackageManagement                   PSGallery            PackageManagement (a.k.a. OneGet) is a new way to discover and insta...\r\n1.1.3.1    PowerShellGet                       PSGallery            PowerShell module with commands for discovering, installing, updatin...\r\n0.3.4      AzureRM.Profile.NetCore.Preview     PSGallery            [PowerShell Core Edition] Microsoft Azure PowerShell - Profile crede...\r\n1.1.0.0    Microsoft.PowerShell.Archive        PSGallery            PowerShell module for working with ZIP archives.                       \r\n0.3.4      AzureRM.Resources.NetCore.Preview   PSGallery            [PowerShell Core Edition] Microsoft Azure PowerShell - Azure Resourc...\r\n0.3.4      AzureRM.NetCore.Preview             PSGallery            [PowerShell Core Edition] Azure Resource Manager Module - Management...\r\n1.0.0      SSH                                 PSGallery            Provides a PowerShell-based SSH client based on SSH.net  http://sshn...\r\n1.7.3.9    PoshRSJob                           PSGallery            Module designed to use PowerShell runspaces to create jobs that allo...\r\n2.0.4      Posh-SYSLOG                         PSGallery            Send SYSLOG messages from PowerShell                                   \r\n1.1.6.0    Microsoft.PowerShell.ODataUtils     PSGallery            Generates CDXML modules that contain cmdlets to manage OData and Red...\r\n0.1.1      PSPuTTY                             PSGallery            This PowerShell module enables you to switch between color themes fo...\r\n0.5.1.0    PSReleaseTools                      PSGallery            A set of commands for working with PowerShell 6.0 releases             \r\n```\r\n\r\nPreviously, I was running out of the root folder `/` (I have just noticed).  So is there something going on under the hood of PS and using relative paths or something else from where you currently are.\r\n",
      "created_at": "2017-06-27T07:28:51Z",
      "updated_at": "2017-06-27T07:32:32Z"
    },
    {
      "author": "amhendley",
      "author_association": "NONE",
      "body": "OK. I think I have found the possible cause. \r\n\r\n1. I was working in a particular folder in a bash session.\r\n2. Done some stuff, then deleted the same working folder via OSX Finder.\r\n2. Updated PowerShell to v6 beta 3 on my Mac OSX.\r\n3. Then back in the bash session without changing the working directory, started `powershell`.\r\n4. Not realising that the PS prompt `PS /> ` indicated that I was supposedly working in `/`.\r\n5. Executing the command `$PSVersionTable` obviously works as it not having to load up a script, cmdlet or module.\r\n6. Executing a call against a function where it wants to load a script, cmdlet or module is where the problem lies.\r\n\r\nI have been able to replicate this by repeating the process in session 1 changing to a folder like `/tmp/test`, then in another session (2) removing the `/tmp/test`, then back to the first session and run PS. Run a command calling a function and bingo - same result.\r\n\r\nUnix (and I assume for now Linux as well) do not lock a folder if another session is currently pointing to it or have a file open like Windows does. Hence the dramas.\r\n\r\nAnyway, I personally don't see this as a major bug, but the error message is not accurate as to the actual cause, but how or what is the best message to return, and how would PS determine the situation before running the executing command.\r\n",
      "created_at": "2017-06-27T09:33:02Z",
      "updated_at": "2017-06-27T09:33:02Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "Ah!!  @amhendley \r\n\r\nToo bad I don't have a Mac!  :(   \r\n\r\nIt works on Ubuntu 16.04,2.\r\n\r\n",
      "created_at": "2017-06-27T13:07:41Z",
      "updated_at": "2017-06-27T13:07:41Z"
    },
    {
      "author": "vszalma",
      "author_association": "NONE",
      "body": "Hello. I am also seeing the same issue.  I don't appear to be in the same situation as @amhendley . \r\n\r\n```\r\nPS /Users/******> get-module -listavailable azurerm.*                          \r\n\r\n\r\n    Directory: /usr/local/microsoft/powershell/6.0.0-beta.3/Modules\r\n\r\n\r\nModuleType Version    Name                                ExportedCommands     \r\n---------- -------    ----                                ----------------     \r\nManifest   0.3.4      AzureRM.NetCore.Preview                                  \r\nManifest   0.3.4      AzureRM.Profile.NetCore.Preview     {Login-AzureRmAcco...\r\nManifest   0.3.4      AzureRM.Resources.NetCore.Preview                        \r\n\r\n\r\n```\r\n\r\nGetting the same error on the import.\r\n```\r\nPS /Users/*****> get-module -listavailable azurerm.* | import-module          \r\nImport-Module : Could not load file or assembly \r\n'Microsoft.Azure.Commands.ResourceManager.Common, Version=1.6.0.0, \r\nCulture=neutral, PublicKeyToken=31bf3856ad364e35'. The system cannot find the \r\nfile specified.\r\nAt line:1 char:1\r\n+ get-module -listavailable azurerm.* | import-module\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : NotSpecified: (:) [Import-Module], FileNotFoundE \r\n   xception\r\n    + FullyQualifiedErrorId : System.IO.FileNotFoundException,Microsoft.PowerS \r\n   hell.Commands.ImportModuleCommand\r\n\r\n```\r\n\r\n```\r\nPS /Users/*****> $psversiontable                                              \r\n\r\nName                           Value                                           \r\n----                           -----                                           \r\nPSVersion                      6.0.0-beta                                      \r\nPSEdition                      Core                                            \r\nGitCommitId                    v6.0.0-beta.3                                   \r\nOS                             Darwin 16.6.0 Darwin Kernel Version 16.6.0: F...\r\nPlatform                       Unix                                            \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                         \r\nPSRemotingProtocolVersion      2.3                                             \r\nSerializationVersion           1.1.0.1                                         \r\nWSManStackVersion              3.0                                             \r\n\r\n```\r\n",
      "created_at": "2017-06-27T14:58:03Z",
      "updated_at": "2017-06-27T15:17:39Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "I would hold off on trying to use the Azure.NetCore.Preview module on Mac/Linux.  They have a new release coming, but it's blocked by a CoreFx bug and waiting on us to pick up a new dotnet core that has the fix.  Hopefully the stars align and everything works out in time for beta.4",
      "created_at": "2017-06-27T16:02:34Z",
      "updated_at": "2017-06-27T16:02:34Z"
    },
    {
      "author": "januschr",
      "author_association": "NONE",
      "body": "Hi @SteveL-MSFT,\r\n\r\nThat sounds promising. Any word on what the timeline is for the new release?\r\n\r\nThanks!",
      "created_at": "2017-06-27T16:42:44Z",
      "updated_at": "2017-06-27T16:42:44Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "I thought this was already been addressed back in the Alpha version: https://github.com/PowerShell/PowerShell/issues/3577 \r\n\r\n:)\r\n",
      "created_at": "2017-06-27T17:35:54Z",
      "updated_at": "2017-06-27T17:35:54Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@januschr we're working with Azure PowerShell team closely, but the underlying issue is in dotnet.  beta.4 is targeted for 7/13.  I ",
      "created_at": "2017-06-27T18:44:50Z",
      "updated_at": "2017-06-27T18:44:50Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "@SteveL-MSFT Awesome!!\r\nThat's just around the corner!  \r\n:)",
      "created_at": "2017-06-27T19:24:24Z",
      "updated_at": "2017-06-27T19:24:24Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "so it's tomorrow, any updates? thanks!",
      "created_at": "2017-07-12T21:04:32Z",
      "updated_at": "2017-07-14T20:35:15Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "Hello,\r\n\r\n@SteveL-MSFT  : Any ETA regarding >>> \"beta.4 is targeted for 7/13.\" <<<< Thank you. ",
      "created_at": "2017-07-14T13:30:56Z",
      "updated_at": "2017-07-14T13:30:56Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "I've just installed beta 4, nothing changed. cannot import AzureRM.NetCore.Preview",
      "created_at": "2017-07-14T20:49:54Z",
      "updated_at": "2017-07-14T20:49:54Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Azure PowerShell team hasn't published a necessary update yet to Azure.NetCore.Preview module.  We're still working with them on this.  No ETA, hopefully next week.",
      "created_at": "2017-07-14T21:50:55Z",
      "updated_at": "2017-07-14T21:50:55Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "please keep us updated here @SteveL-MSFT  thanks!",
      "created_at": "2017-07-15T07:38:45Z",
      "updated_at": "2017-07-15T07:38:45Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "Hello Lee, @SteveL-MSFT any chance to have this fixed ? - Still stuck, can not use Powershell/Azure on Mac - Many thanks in advance. Kind regards. Laurent.",
      "created_at": "2017-07-27T06:48:46Z",
      "updated_at": "2017-07-27T06:48:46Z"
    },
    {
      "author": "januschr",
      "author_association": "NONE",
      "body": "With beta4 out, I thought I would give it another go. First I removed beta3 and any modules that had been previously installed.\r\n\r\nI downloaded the beta4 package and installed it, and from the PowerShell prompt:\r\n\r\n    Install-Module AzureRM.NetCore.Preview\r\n    Import-Module AzureRM.NetCore.Preview\r\n\r\nImport-Module fails with this message:\r\n\r\n    Import-Module : Exception has been thrown by the target of an invocation.\r\n    At line:1 char:1\r\n    + Import-Module AzureRM.NetCore.Preview\r\n    + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n        + CategoryInfo          : NotSpecified: (:) [Import-Module], TargetInvocationException\r\n        + FullyQualifiedErrorId :     System.Reflection.TargetInvocationException,Microsoft.PowerShell.Commands.ImportModuleCommand\r\n\r\nKeeping my fingers crossed for a solution to this, and thank you!\r\n",
      "created_at": "2017-07-27T12:45:20Z",
      "updated_at": "2017-07-27T12:45:20Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Sorry no update that I'm aware of yet.",
      "created_at": "2017-07-27T20:38:07Z",
      "updated_at": "2017-07-27T20:38:07Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Just got published: https://www.powershellgallery.com/packages/AzureRM.Netcore/0.9.1\r\n\r\n```powershell\r\ninstall-module azurerm.netcore -scope currentuser\r\n```\r\n",
      "created_at": "2017-07-29T00:10:51Z",
      "updated_at": "2017-07-29T00:10:51Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "Thanks, working now!",
      "created_at": "2017-07-29T05:07:44Z",
      "updated_at": "2017-07-29T05:07:44Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "Does not work for me - is this related ? - \r\n\r\nNB : I have removed BETA3 & installed BETA4\r\nrun terminal\r\n> powershell\r\nit confirmed BETA4 has been installed\r\n\r\nTry to import modules\r\nPS > Import-Module azureRM\r\n\r\n### Import-Module : Could not load file or assembly 'System.Windows.Forms, \r\nVersion=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. The system \r\ncannot find the file specified.\r\nAt /usr/local/microsoft/powershell/6.0.0-beta.4/Modules/azureRM/4.2.1/AzureRM.p\r\nsm1:15 char:3\r\n+   Import-Module AzureRM.Profile -RequiredVersion 3.2.1\r\n\r\nMany thanks in advance.\r\nLaurent.\r\n",
      "created_at": "2017-07-29T07:23:44Z",
      "updated_at": "2017-07-29T07:23:44Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "Well.. weird. After trying multiple time it worked.. import azureRM modules\r\n\r\nPS /Users/laurentprat> import-module azureRM                                                                                                                    \r\nPS /Users/laurentprat> import-module azureRM                                                                                                                    \r\nPS /Users/laurentprat> Get-Module -All                                                                                                                          \r\n\r\nModuleType Version    Name                                ExportedCommands                                                                                     \r\n---------- -------    ----                                ----------------                                                                                     \r\nScript     0.4.2      Azure.AnalysisServices              {Add-AzureAnalysisServicesAccount, Export-AzureAnalysisServicesInstanceLog, Restart-AzureAnalysisS...\r\nScript     3.2.1      Azure.Storage                       {Get-AzureStorageBlob, Get-AzureStorageBlobContent, Get-AzureStorageBlobCopyState, Get-AzureStorag...\r\nScript     4.2.1      azureRM                             {Add-AzureAnalysisServicesAccount, Add-AzureKeyVaultCertificate, Add-AzureKeyVaultCertificateConta...\r\nScript     0.4.2      AzureRM.AnalysisServices            {Get-AzureRmAnalysisServicesServer, New-AzureRmAnalysisServicesServer, Remove-AzureRmAnalysisServi...\r\n\r\n\r\nGot some other issues, will check other trackers.\r\n\r\nBest regards,\r\nLaurent.\r\n\r\n\r\n\r\n",
      "created_at": "2017-07-29T07:29:42Z",
      "updated_at": "2017-07-29T07:29:42Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "@LaurentPrat how are you importing AzureRM on linux? O_O you are supposed to load azurerm.netcore ",
      "created_at": "2017-07-29T07:43:55Z",
      "updated_at": "2017-07-29T07:44:27Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "@4c74356b41, I am importing on Mac. (assuming it's the same for Linux). Module does not seems to be case sensitive.. and you are right azureRM.netcore loads fine\r\n\r\n> Manifest   0.9.1      azurerm.netcore  \r\n\r\nWill see if there are tracker regarding: Script     4.2.1      azureRM\r\nas I need to login to Azure account with PS (ideally from my Mac)\r\n\r\nThank you.\r\n\r\n",
      "created_at": "2017-07-29T07:53:25Z",
      "updated_at": "2017-07-29T07:53:25Z"
    },
    {
      "author": "januschr",
      "author_association": "NONE",
      "body": "@SteveL-MSFT install and import does not produce any errors anymore, and I can login to Azure from PowerShell on Mac now. Thanks!",
      "created_at": "2017-07-29T10:25:44Z",
      "updated_at": "2017-07-29T10:25:44Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "@januschr : Do you mind sharing. I am following an MS tuto to login:\r\n\r\nOnce the download and installation is finished, run the Import-Module Azure command.\r\nRun the Login-AzureRmAccount command and then authenticate with your Azure\r\nadministrative credentials\r\n\r\nThank in advance.\r\nBest regards,\r\nLaurent.",
      "created_at": "2017-07-29T10:42:27Z",
      "updated_at": "2017-07-29T10:42:27Z"
    },
    {
      "author": "januschr",
      "author_association": "NONE",
      "body": "Yes, sure, is it the login process you are uncertain about?\r\nYou just enter Login-AzureRmAccount on the Powershell prompt, it will then tell to go to https://aka.ms/devicelogin in a browser and enter the code Login-AzureRmAccount shows you.\r\n\r\nWhen you enter the code, you will be prompted to enter login and password to Azure. This will create a session in Powershell, giving you back the prompt.\r\n\r\nHope this helps,\r\nJanus",
      "created_at": "2017-07-29T11:38:24Z",
      "updated_at": "2017-07-29T11:38:24Z"
    },
    {
      "author": "tlisiecki",
      "author_association": "NONE",
      "body": "Just installed AzureRM.Netcore/0.9.1 on beta4 on linux and it works flawlessly.\r\nThe login procedure works just as @januschr described",
      "created_at": "2017-07-29T11:47:08Z",
      "updated_at": "2017-07-29T11:47:08Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "@tlisiecki & @januschr Thank you so much for your support.\r\n\r\nThe issue I have (on Mac) after successfully importing AzureRM (Import-Module AzureRM), is that when running the command : PS > Login-AzureRmAccount \r\n\r\nI got an error, see #4389\r\n\r\nBest regards,\r\nL.\r\n",
      "created_at": "2017-07-29T12:01:11Z",
      "updated_at": "2017-07-29T12:01:11Z"
    },
    {
      "author": "tlisiecki",
      "author_association": "NONE",
      "body": "@LaurentPrat are you sure you installed **AzureRM.netcore** and not AzureRM. Both of them are on powershellgallery but to run on linux or mac AzureRM.netcore is required. \r\n\r\nSteve posted the command to do exactly that:\r\n`install-module azurerm.netcore -scope currentuser`\r\n\r\nAlso - can you post the output of:\r\n`Get-Module -ListAvailable |Where-Object {$_.Name -like 'AzureRM*'}`",
      "created_at": "2017-07-29T12:07:49Z",
      "updated_at": "2017-07-29T12:08:25Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "@tlisiecki . Actually I had installed AzureRM long time back and was stuck waiting for the fix\r\nI did applied as specified by Steve. Still after that I ran into the issue explained, that Login command does not load.\r\n\r\nPlease see below the output request - Many thanks in advance\r\n\r\nPS /Users/laurentprat> Get-Module -ListAvailable |Where-Object {$_.Name -like 'AzureRM*'}                                                                       \r\n\r\n    Directory: /Users/laurentprat/.local/share/powershell/Modules\r\n\r\nModuleType Version    Name                                ExportedCommands                                                                                     \r\n---------- -------    ----                                ----------------                                                                                     \r\nManifest   0.9.1      AzureRM.Compute.Netcore             {Remove-AzureRmAvailabilitySet, Get-AzureRmAvailabilitySet, New-AzureRmAvailabilitySet, Update-Azu...\r\nManifest   0.9.1      AzureRM.Netcore                                                                                                                          \r\nManifest   0.9.1      AzureRM.Network.Netcore             {Add-AzureRmApplicationGatewayAuthenticationCertificate, Get-AzureRmApplicationGatewayAuthenticati...\r\nManifest   0.9.1      AzureRM.Profile.Netcore             {Disable-AzureRmDataCollection, Enable-AzureRmDataCollection, Remove-AzureRmEnvironment, Get-Azure...\r\nManifest   0.9.1      AzureRM.Resources.Netcore           {Get-AzureRmProviderOperation, Remove-AzureRmRoleAssignment, Get-AzureRmRoleAssignment, New-AzureR...\r\nManifest   0.9.1      AzureRM.Storage.Netcore             {Get-AzureRmStorageAccount, Get-AzureRmStorageAccountKey, New-AzureRmStorageAccount, New-AzureRmSt...\r\nManifest   0.9.1      AzureRM.Tags.Netcore                {Remove-AzureRmTag, Get-AzureRmTag, New-AzureRmTag}                                                  \r\nManifest   0.9.1      AzureRM.Websites.Netcore            {Get-AzureRmAppServicePlan, Set-AzureRmAppServicePlan, New-AzureRmAppServicePlan, Remove-AzureRmAp...\r\n\r\n\r\n    Directory: /usr/local/microsoft/powershell/6.0.0-beta.4/Modules\r\n\r\n\r\nModuleType Version    Name                                ExportedCommands                                                                                     \r\n---------- -------    ----                                ----------------                                                                                     \r\nScript     4.2.1      AzureRM                             {Remove-AzureRmSiteRecoveryServicesProvider, Get-AzureRmVMImageSku, Set-AzureRmVirtualNetworkGatew...\r\nScript     0.4.2      AzureRM.AnalysisServices            {Resume-AzureRmAnalysisServicesServer, Suspend-AzureRmAnalysisServicesServer, Get-AzureRmAnalysisS...\r\nScript     4.2.1      AzureRM.ApiManagement               {Add-AzureRmApiManagementRegion, Get-AzureRmApiManagementSsoToken, New-AzureRmApiManagementHostnam...\r\nScript     3.2.1      AzureRM.Automation                  {Get-AzureRMAutomationHybridWorkerGroup, Get-AzureRmAutomationJobOutputRecord, Import-AzureRmAutom...\r\nScript     3.2.1      AzureRM.Backup                      {Backup-AzureRmBackupItem, Enable-AzureRmBackupContainerReregistration, Get-AzureRmBackupContainer...\r\nScript     3.2.1      AzureRM.Batch                       {Remove-AzureRmBatchAccount, Get-AzureRmBatchAccount, Get-AzureRmBatchAccountKeys, New-AzureRmBatc...\r\nScript     0.13.2     AzureRM.Billing                     {Get-AzureRmBillingInvoice, Get-AzureRmBillingPeriod}                                                \r\nScript     3.2.1      AzureRM.Cdn                         {Get-AzureRmCdnProfile, Get-AzureRmCdnProfileSsoUrl, New-AzureRmCdnProfile, Remove-AzureRmCdnProfi...\r\nScript     0.8.2      AzureRM.CognitiveServices           {Get-AzureRmCognitiveServicesAccount, Get-AzureRmCognitiveServicesAccountKey, Get-AzureRmCognitive...\r\nScript     3.2.1      AzureRM.Compute                     {Remove-AzureRmAvailabilitySet, Get-AzureRmAvailabilitySet, New-AzureRmAvailabilitySet, Update-Azu...\r\nScript     0.2.2      AzureRM.Consumption                 Get-AzureRmConsumptionUsageDetail                                                                    \r\nScript     0.2.2      AzureRM.ContainerRegistry           {New-AzureRmContainerRegistry, Get-AzureRmContainerRegistry, Update-AzureRmContainerRegistry, Remo...\r\nScript     3.2.1      AzureRM.DataFactories               {Remove-AzureRmDataFactory, Get-AzureRmDataFactoryRun, Get-AzureRmDataFactorySlice, Save-AzureRmDa...\r\nScript     3.2.1      AzureRM.DataLakeAnalytics           {Get-AzureRmDataLakeAnalyticsDataSource, New-AzureRmDataLakeAnalyticsCatalogCredential, Remove-Azu...\r\nScript     4.2.1      AzureRM.DataLakeStore               {Get-AzureRmDataLakeStoreTrustedIdProvider, Remove-AzureRmDataLakeStoreTrustedIdProvider, Remove-A...\r\nScript     3.2.1      AzureRM.DevTestLabs                 {Get-AzureRmDtlAllowedVMSizesPolicy, Get-AzureRmDtlAutoShutdownPolicy, Get-AzureRmDtlAutoStartPoli...\r\nScript     3.2.1      AzureRM.Dns                         {Get-AzureRmDnsRecordSet, New-AzureRmDnsRecordConfig, Remove-AzureRmDnsRecordSet, Set-AzureRmDnsRe...\r\nScript     0.4.2      AzureRM.EventHub                    {New-AzureRmEventHubKey, Get-AzureRmEventHubNamespace, Get-AzureRmEventHubNamespaceAuthorizationRu...\r\nScript     3.2.1      AzureRM.HDInsight                   {Get-AzureRmHDInsightJob, New-AzureRmHDInsightSqoopJobDefinition, Wait-AzureRmHDInsightJob, New-Az...\r\nScript     3.2.1      AzureRM.Insights                    {Get-AzureRmUsage, Get-AzureRmMetricDefinition, Get-AzureRmMetric, Remove-AzureRmLogProfile...}      \r\nScript     2.2.1      AzureRM.IotHub                      {Add-AzureRmIotHubKey, Get-AzureRmIotHubEventHubConsumerGroup, Get-AzureRmIotHubConnectionString, ...\r\nScript     3.2.1      AzureRM.KeyVault                    {Add-AzureKeyVaultCertificate, Set-AzureKeyVaultCertificateAttribute, Stop-AzureKeyVaultCertificat...\r\nScript     3.2.1      AzureRM.LogicApp                    {Get-AzureRmIntegrationAccountAgreement, Get-AzureRmIntegrationAccountCallbackUrl, Get-AzureRmInte...\r\nScript     0.15.2     AzureRM.MachineLearning             {Move-AzureRmMlCommitmentAssociation, Get-AzureRmMlCommitmentAssociation, Get-AzureRmMlCommitmentP...\r\nScript     0.7.2      AzureRM.Media                       {Sync-AzureRmMediaServiceStorageKeys, Set-AzureRmMediaServiceKey, Get-AzureRmMediaServiceKeys, Get...\r\nScript     4.2.1      AzureRM.Network                     {Add-AzureRmApplicationGatewayAuthenticationCertificate, Get-AzureRmApplicationGatewayAuthenticati...\r\nScript     3.2.1      AzureRM.NotificationHubs            {Get-AzureRmNotificationHub, Get-AzureRmNotificationHubAuthorizationRules, Get-AzureRmNotification...\r\nScript     3.2.1      AzureRM.OperationalInsights         {New-AzureRmOperationalInsightsAzureActivityLogDataSource, New-AzureRmOperationalInsightsCustomLog...\r\nScript     3.2.1      AzureRM.PowerBIEmbedded             {Remove-AzureRmPowerBIWorkspaceCollection, Get-AzureRmPowerBIWorkspaceCollection, Get-AzureRmPower...\r\nScript     3.2.1      AzureRM.profile                     {Disable-AzureRmDataCollection, Enable-AzureRmDataCollection, Remove-AzureRmEnvironment, Get-Azure...\r\nScript     3.2.1      AzureRM.RecoveryServices            {Get-AzureRmRecoveryServicesBackupProperty, Get-AzureRmRecoveryServicesVault, Get-AzureRmRecoveryS...\r\nScript     3.2.1      AzureRM.RecoveryServices.Backup     {Backup-AzureRmRecoveryServicesBackupItem, Get-AzureRmRecoveryServicesBackupManagementServer, Get-...\r\nScript     3.2.1      AzureRM.RedisCache                  {Remove-AzureRmRedisCachePatchSchedule, New-AzureRmRedisCacheScheduleEntry, Get-AzureRmRedisCacheP...\r\nScript     0.2.2      AzureRM.Relay                       {New-AzureRmRelayNamespace, Get-AzureRmRelayNamespace, Set-AzureRmRelayNamespace, Remove-AzureRmRe...\r\nScript     4.2.1      AzureRM.Resources                   {Get-AzureRmProviderOperation, Remove-AzureRmRoleAssignment, Get-AzureRmRoleAssignment, New-AzureR...\r\nScript     0.15.2     AzureRM.Scheduler                   {Disable-AzureRmSchedulerJobCollection, Enable-AzureRmSchedulerJobCollection, Get-AzureRmScheduler...\r\nScript     3.2.1      AzureRM.ServerManagement            {Invoke-AzureRmServerManagementPowerShellCommand, Get-AzureRmServerManagementSession, New-AzureRmS...\r\nScript     0.4.2      AzureRM.ServiceBus                  {Get-AzureRmServiceBusTopic, Get-AzureRmServiceBusTopicAuthorizationRule, Get-AzureRmServiceBusTop...\r\nScript     0.2.2      AzureRM.ServiceFabric               {Add-AzureRmServiceFabricApplicationCertificate, Add-AzureRmServiceFabricClientCertificate, Add-Az...\r\nScript     4.2.1      AzureRM.SiteRecovery                {Get-AzureRmSiteRecoveryFabric, New-AzureRmSiteRecoveryFabric, Remove-AzureRmSiteRecoveryFabric, S...\r\nScript     3.2.1      AzureRM.Sql                         {Get-AzureRmSqlDatabaseTransparentDataEncryption, Get-AzureRmSqlDatabaseTransparentDataEncryptionA...\r\nScript     3.2.1      AzureRM.Storage                     {Get-AzureRmStorageAccount, Get-AzureRmStorageAccountKey, New-AzureRmStorageAccount, New-AzureRmSt...\r\nScript     3.2.1      AzureRM.StreamAnalytics             {Get-AzureRmStreamAnalyticsFunction, Get-AzureRmStreamAnalyticsDefaultFunctionDefinition, New-Azur...\r\nScript     3.2.1      AzureRM.Tags                        {Remove-AzureRmTag, Get-AzureRmTag, New-AzureRmTag}                                                  \r\nScript     3.2.1      AzureRM.TrafficManager              {Disable-AzureRmTrafficManagerEndpoint, Enable-AzureRmTrafficManagerEndpoint, Set-AzureRmTrafficMa...\r\nScript     3.2.1      AzureRM.UsageAggregates             Get-UsageAggregates                                                                                  \r\nScript     3.2.1      AzureRM.Websites                    {Get-AzureRmAppServicePlan, Set-AzureRmAppServicePlan, New-AzureRmAppServicePlan, Remove-AzureRmAp...\r\n\r\n\r\n\r\n",
      "created_at": "2017-07-29T14:28:56Z",
      "updated_at": "2017-07-29T14:29:43Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "@LaurentPrat so how did you port full net framework (to use AzureRM) to macos?",
      "created_at": "2017-07-29T14:29:46Z",
      "updated_at": "2017-07-29T14:29:56Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "@4c74356b41  Not sure I am following your mind - fyi, I have just installed the cross platform PowerShell package - the last is BETA4 for MacOs check the download page (powershell-6.0.0-beta.4-osx.10.12-x64.pkg).",
      "created_at": "2017-07-29T14:36:30Z",
      "updated_at": "2017-07-29T14:36:30Z"
    },
    {
      "author": "tlisiecki",
      "author_association": "NONE",
      "body": "@LaurentPrat well I guess there is some clash on command names from different modules and the proper modules do not auto load.\r\nI bielieve you could try \r\n`Import-Module AzureRM.Netcore` and then try to log in.\r\n\r\nBut if I were you I`d first uninstall AzureRM module completely. AzureRM is a module running on Full .NET framework as 4c74356b41 suggests between lines :) and there is no way it would ever run on linux/mac.\r\n\r\nOn mac you have **powershell core**, based on **.NET core** framework and thus you need **AzureRM.netcore** module.\r\nHope that is clear enough.",
      "created_at": "2017-07-29T14:39:31Z",
      "updated_at": "2017-07-29T14:39:31Z"
    },
    {
      "author": "janegilring",
      "author_association": "NONE",
      "body": "Is PSCredential objects supposed to work in the current version of Add-AzureRmAccount?\r\n\r\nI get this error:\r\n\r\nPS C:\\Program Files\\PowerShell\\6.0.0-beta.4> $cred = Get-Credential\r\n\r\nWindows PowerShell credential request\r\nEnter your credentials.\r\nUser: username@outlook.com\r\nPassword for user username@outlook.com: **********\r\n\r\nPS C:\\Program Files\\PowerShell\\6.0.0-beta.4> Add-AzureRmAccount -Credential $cred\r\nAdd-AzureRmAccount : accessing_ws_metadata_exchange_failed: Accessing WS metadata exchange failed:  Response status cod\r\ne does not indicate success: 406 (NotAcceptable).\r\nAt line:1 char:1\r\n+ Add-AzureRmAccount -Credential $cred\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : CloseError: (:) [Add-AzureRmAccount], AadAuthenticationFailedException\r\n    + FullyQualifiedErrorId : Microsoft.Azure.Commands.Profile.AddAzureRMAccountCommand\r\n\r\nPS C:\\Program Files\\PowerShell\\6.0.0-beta.4>\r\n",
      "created_at": "2017-07-29T14:56:06Z",
      "updated_at": "2017-07-29T14:56:28Z"
    },
    {
      "author": "LaurentPrat",
      "author_association": "NONE",
      "body": "@tlisiecki \r\n\r\nuninstalling/reinstalling, then checked the AzureRM* modules - where I saw there are only the AzureRM.netcore (Manifest 0.91) ... \r\n\r\nAnd it fixed it. As of now, can login, and execute powershell command successfully ;)\r\n\r\nbtw, I have closed the #4389 \r\n\r\nThank you so much\r\n",
      "created_at": "2017-07-29T15:18:37Z",
      "updated_at": "2017-07-29T15:19:04Z"
    },
    {
      "author": "tlisiecki",
      "author_association": "NONE",
      "body": "@LaurentPrat You`re most welcome :)\r\n\r\n@janegilring id doesn`t work for me either, but I get some different Exception\r\n```\r\n\r\nPS /home/liske> $cred = Get-Credential                                                                                                                                                                                                                                                                                                                                                                    Windows PowerShell credential request                                                                                                                                                                Enter your credentials.                                                                                                                                                                              User: XXXX                                                                                                                                                              \r\nPassword for user XXXX: *************\r\n\r\nPS /home/liske> Add-AzureRmAccount -Credential $cred                                                                                                                                                 \r\nAdd-AzureRmAccount : password_required_for_managed_user: Password is required for managed user\r\nAt line:1 char:1\r\n+ Add-AzureRmAccount -Credential $cred\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : CloseError: (:) [Add-AzureRmAccount], AadAuthenticationFailedException\r\n    + FullyQualifiedErrorId : Microsoft.Azure.Commands.Profile.AddAzureRMAccountCommand\r\n \r\nPS /home/liske>\r\n```",
      "created_at": "2017-07-29T15:55:54Z",
      "updated_at": "2017-07-29T15:55:54Z"
    },
    {
      "author": "janegilring",
      "author_association": "NONE",
      "body": "@tlisiecki Thanks for confirming. Forgot to mention that I ran PS Core on Windows 10, which is likely why we got slightly different error messages (you seem to be running a different OS).\r\n\r\nFYI: I`ve submitted an [issue](https://github.com/Azure/azure-powershell/issues/4386) in the Azure PowerShell repository",
      "created_at": "2017-07-29T17:50:29Z",
      "updated_at": "2017-07-29T18:02:02Z"
    },
    {
      "author": "LarrysGIT",
      "author_association": "NONE",
      "body": "Tried hundred of times finally made 1 step, after installed azurerm.netcore module, just import modules end with \"netcore\".\r\n`Get-Module -ListAvailable azurerm*netcore | Import-Module`\r\nPSVersion\r\n```\r\n> Name                           Value                                                                                                                                                        \r\n> ----                           -----                                                                                                                                                        \r\n> PSVersion                      6.0.0-beta                                                                                                                                                   \r\n> PSEdition                      Core                                                                                                                                                         \r\n> GitCommitId                    v6.0.0-beta.5                                                                                                                                                \r\n> OS                             Darwin 16.7.0 Darwin Kernel Version 16.7.0: Thu Jun 15 17:36:27 PDT 2017; root:xnu-3789.70.16~2/RELEASE_X86_64                                               \r\n> Platform                       Unix                                                                                                                                                         \r\n> PSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                                                                                                                                      \r\n> PSRemotingProtocolVersion      2.3                                                                                                                                                          \r\n> SerializationVersion           1.1.0.1                                                                                                                                                      \r\n> WSManStackVersion              3.0\r\n```",
      "created_at": "2017-08-08T01:02:43Z",
      "updated_at": "2017-08-08T01:04:12Z"
    },
    {
      "author": "4c74356b41",
      "author_association": "NONE",
      "body": "@SteveL-MSFT hey there, do you know why each time i run azure powershell it prompts for datacollection? it honestly looks like a bug. the '/home/user/.config/Windows Azure Powershell/AzureDataCollectionProfile.json' file is there and contains: `{\"enableAzureDataCollection\":true}`, yet each time i open new session and run azure cmdlets it prompts if i want to collect data",
      "created_at": "2017-08-14T11:04:54Z",
      "updated_at": "2017-08-14T11:04:54Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@4c74356b41 don't know, best to open an issue in their [repo](https://github.com/Azure/azure-powershell/issues)",
      "created_at": "2017-08-14T11:57:20Z",
      "updated_at": "2017-08-14T11:57:20Z"
    }
  ],
  "created_at": "2017-06-23T13:11:56Z",
  "number": 4090,
  "state": "closed",
  "title": "Can't import-module Core AzureRM on Mac",
  "updated_at": "2017-08-14T11:57:20Z"
}