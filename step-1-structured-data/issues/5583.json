{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5583",
  "author": "JohnLBevan",
  "body": "Steps to reproduce\r\n------------------\r\n\r\n```powershell\r\nfunction Test-CredentialAsString {\r\n    Param (\r\n        [Parameter()]\r\n        [PSCredential]$Credential\r\n    )\r\n    $Credential.UserName\r\n}\r\nTest-CredentialAsString -Credential 'usernameAsString'\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\n\r\nError:\r\n```none\r\nTest-CredentialAsString : Cannot process argument transformation on parameter 'Credential'. Cannot convert the \"usernameAsString\" value of type \"System.String\" to type \"System.Management.Automation.PSCredential\".\r\n```\r\nActual behavior\r\n---------------\r\n\r\nPrompts user for credentials (i.e. the same behaviour we'd expect had the `[System.Management.Automation.Credential()]` attribute been used.\r\n\r\nEnvironment data\r\n----------------\r\n\r\n```powershell\r\n> (Get-WmiObject -class Win32_OperatingSystem).Version\r\n6.1.7601\r\n```\r\n\r\n```powershell\r\n> $PSVersionTable\r\nName                           Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \r\n----                           -----                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \r\nPSVersion                      5.1.14409.1012                                                                                                                                                                                                                                                                                                                                                                                                                                                                      \r\nPSEdition                      Desktop                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}                                                                                                                                                                                                                                                                                                                                                                                                                                                             \r\nBuildVersion                   10.0.14409.1012                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \r\nCLRVersion                     4.0.30319.42000                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \r\nWSManStackVersion              3.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \r\nPSRemotingProtocolVersion      2.3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 \r\nSerializationVersion           1.1.0.1    \r\n```\r\n\r\n(Related discussion on SO: https://stackoverflow.com/questions/47560421/change-behaviour-of-credentials-when-in-non-interactive-mode)",
  "closed_at": "2017-12-01T13:44:45Z",
  "comments": [
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "Hi @JohnLBevan,\r\n\r\nAs stated in the PowerShell Github section \"Windows PowerShell vs PowerShell Core\". You can only post PowerShell Core issues here. Please, for Windows PowerShell issues yoiu need to use the following UserVoice link: https://windowsserver.uservoice.com/forums/301869-powershell\r\n\r\nThanks",
      "created_at": "2017-11-30T15:42:23Z",
      "updated_at": "2017-11-30T15:43:26Z"
    },
    {
      "author": "JohnLBevan",
      "author_association": "NONE",
      "body": "Apologies again / migrated: https://windowsserver.uservoice.com/forums/301869-powershell/suggestions/32453714-pscredential-prompts-for-credentials-even-without",
      "created_at": "2017-12-01T13:44:45Z",
      "updated_at": "2017-12-01T13:44:45Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@JohnLBevan Thanks! and do try out PowerShell Core when you have a chance. As you can see, this issue is fixed in it \ud83d\ude03 ",
      "created_at": "2017-12-01T13:46:41Z",
      "updated_at": "2017-12-01T13:46:41Z"
    }
  ],
  "created_at": "2017-11-29T23:39:36Z",
  "number": 5583,
  "state": "closed",
  "title": "PSCredential prompts for credentials even without Credential() attribute.",
  "updated_at": "2017-12-01T13:46:41Z"
}