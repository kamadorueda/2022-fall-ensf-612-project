{
  "_url": "https://github.com/PowerShell/PowerShell/issues/10764",
  "author": "aric49",
  "body": "<!--\r\n\r\nFor Windows PowerShell 5.1 issues, suggestions, or feature requests please use the following link instead:\r\nWindows PowerShell [UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell)\r\n\r\nThis repository is **ONLY** for PowerShell Core 6 issues.\r\n\r\n- Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\r\n- Search the existing issues.\r\n- Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\r\n- Refer to the [known issues](https://docs.microsoft.com/powershell/scripting/whats-new/known-issues-ps6?view=powershell-6).\r\n\r\n-->\r\n\r\n# Steps to reproduce\r\nI have the following script that works very well in PowerShell Core 6 running on windows:\r\n\r\n```powershell\r\n\r\n$servers = \r\n    \"myserver1.fqdn\",\r\n    \"myserver2.fqdn\"\r\n\r\n\r\nWrite-Host \"Starting Script......\"\r\n\r\n$creds = (Get-Credential)\r\n\r\n$servers | % {\r\n   Write-Host \"Running Commands on: $_\"\r\n   Invoke-Command -ComputerName $_ -Credential $creds -Command {\r\n        Write-Host \"Running A Command...\"\r\n        Get-Culture\r\n        Write-Host \"Running another command...\"\r\n        Get-Culture\r\n   }\r\n}\r\n\r\n```\r\n\r\nOn Windows, I get the following output:\r\n\r\n```powershell\r\n pwsh.exe .\\myscript.ps1\r\nStarting Script......\r\n\r\nPowerShell credential request\r\nEnter your credentials.\r\nUser:\r\nUser: myuser\r\nPassword for user myuser: ********************************\r\n\r\nRunning Commands on: server1.fqdn\r\nRunning A Command...\r\n\r\nLCID             Name             DisplayName                                                           PSComputerName\r\n----             ----             -----------                                                           --------------\r\n1033             en-US            English (United States)                                               server1.fqdn\r\nRunning another command...\r\n1033             en-US            English (United States)                                               server1.fqdn\r\n\r\nRunning Commands on: server2.fqdn\r\nRunning A Command...\r\n1033             en-US            English (United States)                                               server2.fqdn\r\nRunning another command...\r\n1033             en-US            English (United States)                                               server2.fqdn\r\n```\r\n\r\nHowever, on the same version of PowerShell core on Linux, I have the following output:\r\n\r\n```powershell\r\n$ pwsh ./myscript.ps1\r\nStarting Script......\r\n\r\nPowerShell credential request\r\nEnter your credentials.\r\nUser: myuser\r\nPassword for user myuser: ********************************\r\n\r\nRunning Commands on: server1.fqdn\r\nInvoke-Command : MI_RESULT_ACCESS_DENIED\r\nAt /systemfiles/myscript.ps1:12 char:4\r\n+    Invoke-Command -ComputerName $_ -Credential $creds -Command {\r\n+    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : InvalidOperation: (:) [Invoke-Command], PSInvalidOperationException\r\n+ FullyQualifiedErrorId : InvalidOperation,Microsoft.PowerShell.Commands.InvokeCommandCommand\r\n \r\nRunning Commands on: server2.fqdn\r\nInvoke-Command : MI_RESULT_ACCESS_DENIED\r\nAt /systemfiles/myscript.ps1:12 char:4\r\n+    Invoke-Command -ComputerName $_ -Credential $creds -Command {\r\n+    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : InvalidOperation: (:) [Invoke-Command], PSInvalidOperationException\r\n+ FullyQualifiedErrorId : InvalidOperation,Microsoft.PowerShell.Commands.InvokeCommandCommand\r\n\r\n```\r\n\r\n# Expected behavior\r\nI would imagine that since the `Invoke-Command` module is present on PowerShell for Linux, then the module should behave in exactly the same way between Linux and Windows. It appears to work on Windows, but it fails on Linux.  Any clarification about why this would happen would be super helpful in figuring out how to port some PowerShell scripts to Linux.\r\n\r\n\r\n\r\n# Actual behavior\r\nWorks on windows, fails on Linux\r\n\r\n# Environment data\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n**Windows 10:**\r\n```none\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.2.3\r\nPSEdition                      Core\r\nGitCommitId                    6.2.3\r\nOS                             Microsoft Windows 10.0.14393\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n\r\n**Linux:**\r\n```none\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.2.3\r\nPSEdition                      Core\r\nGitCommitId                    6.2.3\r\nOS                             Linux 5.2.17-200.fc30.x86_64 #1 SMP Mon Sep 23 13:42:32 UTC 2019\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n\r\n```\r\n\r\nTo be exact, I'm running these commands inside the container: `microsoft/powershell:latest` if you really want to try and re-create my environment :+1: \r\n",
  "closed_at": "2019-10-12T19:00:33Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "Dup #6647\r\nPlease discuss there.",
      "created_at": "2019-10-11T18:48:54Z",
      "updated_at": "2019-10-11T18:49:36Z"
    },
    {
      "author": "msftbot[bot]",
      "author_association": "NONE",
      "body": "This issue has been marked as duplicate and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
      "created_at": "2019-10-12T19:00:32Z",
      "updated_at": "2019-10-12T19:00:32Z"
    }
  ],
  "created_at": "2019-10-10T20:39:20Z",
  "number": 10764,
  "state": "closed",
  "title": "Script Executes on PowerShell Core 6 Windows, but does not work in Linux",
  "updated_at": "2019-10-12T19:00:33Z"
}