{
  "_url": "https://github.com/PowerShell/PowerShell/issues/18024",
  "author": "kilasuit",
  "body": "### Prerequisites\n\n- [X] Write a descriptive title.\n- [X] Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\n- [X] Search the existing issues.\n- [X] Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\n- [X] Refer to [Differences between Windows PowerShell 5.1 and PowerShell](https://docs.microsoft.com/powershell/scripting/whats-new/differences-from-windows-powershell).\n\n### Steps to reproduce\n\nInstall Ubuntu 20.04 LTS in WSL (may not be dependant on WSL)\r\nInstall PowerShell following instructions\r\nClone PowerShell repo\r\nAttempt to build PowerShell by following instructions\r\n\r\n\r\n*if this is intentional then we should update the docs to state that building on WSL installs is not supported\r\n\r\n\n\n### Expected behavior\n\n```console\nPowerShell can be built\n```\n\n\n### Actual behavior\n\n```console\nStart-PSBootstrap fails due to unable to download the `dotnet-install.sh` script - See Image 1\r\nEven on a manual download of this script & then rerunning Start-PSBootstrap it still fails - See Image 2\n```\n\n\n### Error details\n\n```console\npowershell\r\nException             :\r\n    Type                        : System.Management.Automation.RuntimeException\r\n    ErrorRecord                 :\r\n        Exception             :\r\n            Type    : System.Management.Automation.ParentContainsErrorRecordException\r\n            Message : Execution of {\r\n                      bash @bashArgs\r\n                      } by build.psm1: line 1820 failed with exit code 1\r\n            HResult : -2146233087\r\n        CategoryInfo          : NotSpecified: (:) [], ParentContainsErrorRecordException\r\n        FullyQualifiedErrorId : RuntimeException\r\n    WasThrownFromThrowStatement : True\r\n    Message                     : Execution of {\r\n                                  bash @bashArgs\r\n                                  } by build.psm1: line 1820 failed with exit code 1\r\n    HResult                     : -2146233087\r\nTargetObject          : Execution of {\r\n                        bash @bashArgs\r\n                        } by build.psm1: line 1820 failed with exit code 1\r\nCategoryInfo          : OperationStopped: (Execution of {\r\n                        \u2026ed with exit code 1:String) [], RuntimeException\r\nFullyQualifiedErrorId : Execution of {\r\n                        bash @bashArgs\r\n                        } by build.psm1: line 1820 failed with exit code 1\r\nInvocationInfo        :\r\n    ScriptLineNumber : 40\r\n    OffsetInLine     : 17\r\n    HistoryId        : -1\r\n    ScriptName       : /home/ryan/PowerShell/tools/buildCommon/startNativeExecution.ps1\r\n    Line             : throw $errorMessage\r\n\r\n    PositionMessage  : At /home/ryan/PowerShell/tools/buildCommon/startNativeExecution.ps1:40 char:17\r\n                       +                 throw $errorMessage\r\n                       +                 ~~~~~~~~~~~~~~~~~~~\r\n    PSScriptRoot     : /home/ryan/PowerShell/tools/buildCommon\r\n    PSCommandPath    : /home/ryan/PowerShell/tools/buildCommon/startNativeExecution.ps1\r\n    CommandOrigin    : Internal\r\nScriptStackTrace      : at script:Start-NativeExecution, /home/ryan/PowerShell/tools/buildCommon/\r\nstartNativeExecution.ps1: line 40\r\n                        at Install-Dotnet, /home/ryan/PowerShell/build.psm1: line 1820\r\n                        at Start-PSBootstrap, /home/ryan/PowerShell/build.psm1: line 2082\r\n                        at <ScriptBlock>, <No file>: line 1\r\n```\n```\n\n\n### Environment data\n\n```powershell\nName                           Value\r\n----                           -----\r\nPSVersion                      7.2.6\r\nPSEdition                      Core\r\nGitCommitId                    7.2.6\r\nOS                             Linux 5.10.102.1-microsoft-standard-WSL2 #1 SMP Wed Mar 2 00:30:59 UTC 2022\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\n```\n\n\n### Visuals\n\nImage 1\r\n![image](https://user-images.githubusercontent.com/6355225/188266355-ee7c4030-fa7f-4b2c-9b60-06dba152e86d.png)\r\n\r\nImage 2\r\n![image](https://user-images.githubusercontent.com/6355225/188266410-08c16636-42cb-4c7f-a904-36ad006880d5.png)",
  "closed_at": null,
  "comments": [],
  "created_at": "2022-09-03T22:03:22Z",
  "number": 18024,
  "state": "open",
  "title": "Cannot build PowerShell on Ubuntu 20.04 installed in WSL",
  "updated_at": "2022-09-03T22:03:34Z"
}