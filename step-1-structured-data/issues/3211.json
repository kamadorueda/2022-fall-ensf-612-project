{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3211",
  "author": "probonopd",
  "body": "Closes #3179. Be sure to change the line below `NOTE: REPLACE THIS WITH A MIRRORED COPY OF APPIMAGETOOL` as you see fit.",
  "closed_at": "2017-03-03T18:37:17Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "\r\n@probonopd,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\n_Thanks,\nMicrosoft Pull Request Bot_",
      "created_at": "2017-02-26T22:41:39Z",
      "updated_at": "2017-02-26T22:41:39Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Not successful in running appimage.sh to build:\r\n\r\n```\r\nPS /home/steve/repos/probonopd/tools> Start-PSPackage                           \r\nVERBOSE: Packaging RID: 'ubuntu.16.04-x64'; Packaging Configuration: 'Linux'\r\nVERBOSE: Packaging Source: \r\n'/home/steve/repos/probonopd/src/powershell-unix/bin/Linux/netcoreapp1.1/ubuntu\r\n.16.04-x64/publish'\r\nWARNING: -Type was not specified, continuing with deb!\r\nWARNING: Building for Ubuntu 16.04!\r\nWARNING: Suffix not given, building primary PowerShell package!\r\n     roff: /home/steve/repos/probonopd/assets/powershell.1\r\n\r\n\r\n    Directory: /home/steve/repos/probonopd\r\n\r\n\r\nMode                LastWriteTime         Length Name                          \r\n----                -------------         ------ ----                          \r\n------          2/27/17   1:32 PM       31134168 powershell_6.0.0-alpha.9-833-g\r\n                                                 83f5e73-1ubuntu1.16.04.1_amd64\r\n                                                 .deb                          \r\n\r\n\r\nPS /home/steve/repos/probonopd/tools> ./appimage.sh                             \r\ndpkg-scanpackages: warning: Packages in archive but missing from override file:\r\ndpkg-scanpackages: warning:   powershell\r\ndpkg-scanpackages: info: Wrote 1 entries to output Packages file.\r\nGet:1 file:/home/steve/repos/probonopd/tools/powershell ./ InRelease\r\nIgn:1 file:/home/steve/repos/probonopd/tools/powershell ./ InRelease\r\nGet:2 file:/home/steve/repos/probonopd/tools/powershell ./ Release\r\nIgn:2 file:/home/steve/repos/probonopd/tools/powershell ./ Release\r\nGet:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages\r\nIgn:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages\r\nGet:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nIgn:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nGet:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nGet:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages\r\nIgn:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages\r\nGet:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nIgn:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nGet:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nGet:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages\r\nIgn:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages\r\nGet:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nIgn:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nGet:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nGet:3 file:/home/steve/repos/probonopd/tools/powershell ./ Packages [528 B]\r\nGet:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nIgn:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nGet:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nGet:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nIgn:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nGet:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nGet:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nIgn:4 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en_US\r\nGet:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:5 file:/home/steve/repos/probonopd/tools/powershell ./ Translation-en\r\nIgn:6 http://archive.ubuntu.com/ubuntu trusty InRelease\r\nHit:7 http://archive.ubuntu.com/ubuntu trusty Release\r\nReading package lists... Done \r\nW: The repository 'file:/home/steve/repos/probonopd/tools/powershell ./ Release' does not have a Release file.\r\nN: Data from such a repository can't be authenticated and is therefore potentially dangerous to use.\r\nN: See apt-secure(8) manpage for repository creation and user configuration details.\r\n  powershell:amd64 Depends on libicu55 [ amd64 ] < none ->  > ( none ) can't be satisfied!\r\nStarting pkgProblemResolver with broken count: 1\r\nStarting 2 pkgProblemResolver with broken count: 1\r\nInvestigating (0) powershell [ amd64 ] < none -> 6.0.0-alpha.9-833-g83f5e73-1ubuntu1.16.04.1 > ( shells )\r\nBroken powershell:amd64 Depends on libc6 [ amd64 ] < none -> 2.19-0ubuntu6 > ( libs )\r\n  Considering libc6:amd64 1 as a solution to powershell:amd64 9998\r\n  Re-Instated multiarch-support:amd64\r\n  Re-Instated gcc-4.9-base:amd64\r\n  Re-Instated libgcc1:amd64\r\n  Re-Instated libc6:amd64\r\nBroken powershell:amd64 Depends on libcurl3 [ amd64 ] < none -> 7.35.0-1ubuntu2 > ( libs )\r\n  Considering libcurl3:amd64 1 as a solution to powershell:amd64 9998\r\n  Re-Instated libcomerr2:amd64\r\n  Re-Instated libkrb5support0:amd64\r\n  Re-Instated libk5crypto3:amd64\r\n  Re-Instated libkeyutils1:amd64\r\n  Re-Instated libkrb5-3:amd64\r\n  Re-Instated libgssapi-krb5-2:amd64\r\n  Re-Instated libidn11:amd64\r\n  Re-Instated libgpg-error0:amd64\r\n  Re-Instated libgcrypt11:amd64\r\n  Re-Instated libffi6:amd64\r\n  Re-Instated libp11-kit0:amd64\r\n  Re-Instated libtasn1-6:amd64\r\n  Re-Instated zlib1g:amd64\r\n  Re-Instated libgnutls26:amd64\r\n  Re-Instated libroken18-heimdal:amd64\r\n  Re-Instated libasn1-8-heimdal:amd64\r\n  Re-Instated libhcrypto4-heimdal:amd64\r\n  Re-Instated libheimbase1-heimdal:amd64\r\n  Re-Instated libwind0-heimdal:amd64\r\n  Re-Instated libhx509-5-heimdal:amd64\r\n  Re-Instated libsqlite3-0:amd64\r\n  Re-Instated libkrb5-26-heimdal:amd64\r\n  Re-Instated libheimntlm0-heimdal:amd64\r\n  Re-Instated libgssapi3-heimdal:amd64\r\n  Re-Instated libdb5.3:amd64\r\n  Re-Instated libsasl2-modules-db:amd64\r\n  Re-Instated libsasl2-2:amd64\r\n  Re-Instated libldap-2.4-2:amd64\r\n  Re-Instated librtmp0:amd64\r\n  Re-Instated libbz2-1.0:amd64\r\n  Re-Instated liblzma5:amd64\r\n  Re-Instated libpcre3:amd64\r\n  Re-Instated libselinux1:amd64\r\n  Re-Instated libattr1:amd64\r\n  Re-Instated libacl1:amd64\r\n  Re-Instated tar:amd64\r\n  Re-Instated dpkg:amd64\r\n  Re-Instated perl-base:amd64\r\n  Re-Instated debconf:amd64\r\n  Re-Instated libssl1.0.0:amd64\r\n  Re-Instated libcurl3:amd64\r\nBroken powershell:amd64 Depends on libstdc++6 [ amd64 ] < none -> 4.8.2-19ubuntu1 > ( libs )\r\n  Considering libstdc++6:amd64 1 as a solution to powershell:amd64 9998\r\n  Re-Instated gcc-4.8-base:amd64\r\n  Re-Instated libstdc++6:amd64\r\nBroken powershell:amd64 Depends on libtinfo5 [ amd64 ] < none -> 5.9+20140118-1ubuntu1 > ( libs )\r\n  Considering libtinfo5:amd64 1 as a solution to powershell:amd64 9998\r\n  Re-Instated libtinfo5:amd64\r\nBroken powershell:amd64 Depends on libunwind8 [ amd64 ] < none -> 1.1-2.2ubuntu3 > ( libs )\r\n  Considering libunwind8:amd64 1 as a solution to powershell:amd64 9998\r\n  Re-Instated libunwind8:amd64\r\nBroken powershell:amd64 Depends on libuuid1 [ amd64 ] < none -> 2.20.1-5.1ubuntu20 > ( libs )\r\n  Considering libuuid1:amd64 1 as a solution to powershell:amd64 9998\r\n  Re-Instated libaudit-common:amd64\r\n  Re-Instated libaudit1:amd64\r\n  Re-Instated libpam0g:amd64\r\n  Re-Instated libsemanage-common:amd64\r\n  Re-Instated libsepol1:amd64\r\n  Re-Instated libustr-1.0-1:amd64\r\n  Re-Instated libsemanage1:amd64\r\n  Re-Instated libpam-modules-bin:amd64\r\n  Re-Instated libpam-modules:amd64\r\n  Re-Instated sensible-utils:amd64\r\n  Re-Instated debianutils:amd64\r\n  Re-Instated passwd:amd64\r\n  Re-Instated libuuid1:amd64\r\nBroken powershell:amd64 Depends on libicu55 [ amd64 ] < none ->  > ( none )\r\nDone\r\nE: Unable to correct problems, you have held broken packages.\r\nwget: missing URL\r\nUsage: wget [OPTION]... [URL]...\r\n\r\nTry `wget --help' for more options.\r\ncp: cannot stat '../../assets/Powershell_256.png': No such file or directory\r\ncp: cannot stat '../../assets/AppImageThirdPartyNotices.txt': No such file or directory\r\n'./lib64/' -> './usr/./lib64'\r\nmv: cannot stat './usr/lib/x86_64-linux-gnu/*': No such file or directory\r\nmv: cannot stat './usr/lib/pulseaudio/*.so': No such file or directory\r\nlibc.so.6 libdl.so.2 libstdc++.so.6 libm.so.6 libpthread.so.0 libresolv.so.2 libGL.so.1 libdrm.so.2 libxcb.so.1 libX11.so.6 libgio-2.0.so.0 libgdk-x11-2.0.so.0 libgtk-x11-2.0.so.0 libasound.so.2 libgdk_pixbuf-2.0.so.0 libfontconfig.so.1 libselinux.so.1 libcom_err.so.2 libcrypt.so.1 libexpat.so.1 libgcc_s.so.1 libglib-2.0.so.0 libgpg-error.so.0 libgssapi_krb5.so.2 libhcrypto.so.4 libhx509.so.5 libICE.so.6 libidn.so.11 libk5crypto.so.3 libkeyutils.so.1 libkrb5.so.26 libkrb5.so.3 libkrb5support.so.0 libm.so.6 libp11-kit.so.0 libpthread.so.0 libresolv.so.2 libroken.so.18 librt.so.1 libSM.so.6 libusb-1.0.so.0 libuuid.so.1 libwind.so.0 libz.so.1 libGL.so.1 libdrm.so.2 libgobject-2.0.so.0 libgpg-error.so.0 libxcb.so.1\r\nrm: cannot remove 'usr/lib/x86_64-linux-gnu/': No such file or directory\r\n6.0.0-alpha.9\r\n--2017-02-27 13:36:18--  https://psgithub.blob.core.windows.net/files/appimagetool-x86_64.AppImage\r\nResolving psgithub.blob.core.windows.net (psgithub.blob.core.windows.net)... 52.239.160.100\r\nConnecting to psgithub.blob.core.windows.net (psgithub.blob.core.windows.net)|52.239.160.100|:443... connected.\r\nHTTP request sent, awaiting response... 200 OK\r\n\r\n    The file is already fully retrieved; nothing to do.\r\n\r\nArch: 86_64\r\nDESTINATION not specified, so assuming PowerShell-x86_64.AppImage\r\n/home/steve/repos/probonopd/tools/powershell/powershell.AppDir should be packaged as PowerShell-x86_64.AppImage\r\npowershell{.png,.svg,.svgz,.xpm} not present but defined in desktop file\r\ncp: cannot stat './PowerShell*AppImage': No such file or directory\r\n```",
      "created_at": "2017-02-27T21:39:19Z",
      "updated_at": "2017-02-27T21:39:19Z"
    },
    {
      "author": "probonopd",
      "author_association": "CONTRIBUTOR",
      "body": "The `WARNING: Building for Ubuntu 16.04!` looks suspicious, can you build for 14.04?",
      "created_at": "2017-02-27T21:56:36Z",
      "updated_at": "2017-02-27T21:56:36Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@probonopd sorry was in meetings rest of day and then we got hit by snow over here, working on this today",
      "created_at": "2017-02-28T16:41:56Z",
      "updated_at": "2017-02-28T16:41:56Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@probonopd still not working on ubuntu 14.04\r\n\r\n```\r\ncp: cannot stat \u2018../powershell_*_amd64.deb\u2019: No such file or directory\r\n./appimage.sh: line 416: dpkg-scanpackages: command not found\r\nIgn file: ./ InRelease\r\nIgn file: ./ Release.gpg\r\nIgn file: ./ Release\r\nIgn file: ./ Translation-en_US        \r\nIgn file: ./ Translation-en           \r\nIgn http://archive.ubuntu.com trusty InRelease            \r\nHit http://archive.ubuntu.com trusty Release.gpg\r\nHit http://archive.ubuntu.com trusty Release\r\nHit http://archive.ubuntu.com trusty/main amd64 Packages\r\nHit http://archive.ubuntu.com trusty/universe amd64 Packages\r\nHit http://archive.ubuntu.com trusty/main i386 Packages\r\nHit http://archive.ubuntu.com trusty/universe i386 Packages\r\nHit http://archive.ubuntu.com trusty/main Translation-en\r\nHit http://archive.ubuntu.com trusty/universe Translation-en\r\nIgn http://archive.ubuntu.com trusty/main Translation-en_US\r\nIgn http://archive.ubuntu.com trusty/universe Translation-en_US\r\nReading package lists... Done \r\nE: Unable to locate package powershell\r\nwget: missing URL\r\nUsage: wget [OPTION]... [URL]...\r\n\r\nTry `wget --help' for more options.\r\nfind: `../*.deb': No such file or directory\r\nrm: cannot remove \u2018usr/bin/powershell\u2019: No such file or directory\r\nmv: cannot stat \u2018opt/microsoft/powershell/*/*\u2019: No such file or directory\r\ncp: cannot stat \u2018../../assets/Powershell_256.png\u2019: No such file or directory\r\ncp: cannot stat \u2018../../assets/AppImageThirdPartyNotices.txt\u2019: No such file or directory\r\n\u2018./lib64/\u2019 -> \u2018./usr/./lib64\u2019\r\nmv: cannot stat \u2018./usr/lib/x86_64-linux-gnu/*\u2019: No such file or directory\r\nmv: cannot stat \u2018./usr/lib/pulseaudio/*.so\u2019: No such file or directory\r\nmv: cannot stat \u2018usr/local/share/man\u2019: No such file or directory\r\nlibc.so.6 libdl.so.2 libstdc++.so.6 libm.so.6 libpthread.so.0 libresolv.so.2 libGL.so.1 libdrm.so.2 libxcb.so.1 libX11.so.6 libgio-2.0.so.0 libgdk-x11-2.0.so.0 libgtk-x11-2.0.so.0 libasound.so.2 libgdk_pixbuf-2.0.so.0 libfontconfig.so.1 libselinux.so.1 libcom_err.so.2 libcrypt.so.1 libexpat.so.1 libgcc_s.so.1 libglib-2.0.so.0 libgpg-error.so.0 libgssapi_krb5.so.2 libhcrypto.so.4 libhx509.so.5 libICE.so.6 libidn.so.11 libk5crypto.so.3 libkeyutils.so.1 libkrb5.so.26 libkrb5.so.3 libkrb5support.so.0 libm.so.6 libp11-kit.so.0 libpthread.so.0 libresolv.so.2 libroken.so.18 librt.so.1 libSM.so.6 libusb-1.0.so.0 libuuid.so.1 libwind.so.0 libz.so.1 libGL.so.1 libdrm.so.2 libgobject-2.0.so.0 libgpg-error.so.0 libxcb.so.1\r\nrm: cannot remove \u2018opt/\u2019: No such file or directory\r\nrm: cannot remove \u2018usr/lib/x86_64-linux-gnu/\u2019: No such file or directory\r\nrm: cannot remove \u2018usr/share/\u2019: No such file or directory\r\nfind: `../*.deb': No such file or directory\r\n\r\n./appimage.sh: line 76: ./usr/bin/powershell.wrapper: No such file or directory\r\nchmod: cannot access \u2018./usr/bin/powershell.wrapper\u2019: No such file or directory\r\nsed: can't read usr/bin/powershell.wrapper: No such file or directory\r\n--2017-02-28 10:46:52--  https://psgithub.blob.core.windows.net/files/appimagetool-x86_64.AppImage\r\nResolving psgithub.blob.core.windows.net (psgithub.blob.core.windows.net)... 52.239.160.100\r\nConnecting to psgithub.blob.core.windows.net (psgithub.blob.core.windows.net)|52.239.160.100|:443... connected.\r\nHTTP request sent, awaiting response... 200 OK\r\n\r\n    The file is already fully retrieved; nothing to do.\r\n\r\nWARNING: appstreamcli is missing, please install it if you want to use AppStream metadata\r\nWARNING: gpg2 is missing, please install it if you want to create digital signatures\r\nArch: 86_64\r\nDESTINATION not specified, so assuming PowerShell-x86_64.AppImage\r\n/home/steve/repos/probonopd/tools/powershell/powershell.AppDir should be packaged as PowerShell-x86_64.AppImage\r\npowershell{.png,.svg,.svgz,.xpm} not present but defined in desktop file\r\ncp: cannot stat \u2018./PowerShell*AppImage\u2019: No such file or directory\r\n```",
      "created_at": "2017-02-28T18:51:45Z",
      "updated_at": "2017-02-28T18:51:45Z"
    },
    {
      "author": "probonopd",
      "author_association": "CONTRIBUTOR",
      "body": "This time `cp: cannot stat \u2018../powershell_*_amd64.deb\u2019: No such file or directory` means that you are missing the PowerShell deb to begin with...",
      "created_at": "2017-02-28T21:28:43Z",
      "updated_at": "2017-02-28T21:28:43Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Ok, got it working by running tool/appimage.sh from root of repo folder rather than inside the tools folder.   Tested the AppImage and worked fine on 14.04.  Thanks @probonopd ",
      "created_at": "2017-02-28T21:35:32Z",
      "updated_at": "2017-02-28T21:35:32Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Worked on 16.04 after running script from root of repo.  ",
      "created_at": "2017-02-28T21:39:44Z",
      "updated_at": "2017-02-28T21:39:44Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@andschwa anything else you need before we merge this?",
      "created_at": "2017-03-03T01:44:21Z",
      "updated_at": "2017-03-03T01:44:21Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@SteveL-MSFT not that I know of!",
      "created_at": "2017-03-03T18:32:03Z",
      "updated_at": "2017-03-03T18:32:03Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@andschwa since you're the maintainer assigned to this, can you merge :)",
      "created_at": "2017-03-03T18:33:06Z",
      "updated_at": "2017-03-03T18:33:06Z"
    }
  ],
  "created_at": "2017-02-26T22:41:35Z",
  "number": 3211,
  "state": "closed",
  "title": "Do not download from external sources",
  "updated_at": "2017-03-03T18:43:25Z"
}