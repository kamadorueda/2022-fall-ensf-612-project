{
  "_url": "https://github.com/PowerShell/PowerShell/issues/4494",
  "author": "markekraus",
  "body": "Fixes #4467\r\n\r\n`System.Net.Http.HttpResponseMessage` has split the Content headers from the Response headers. This split appears to be intentional and permanent. This split results in the `Content-Type` and `Content-Length` headers to be missing from the `WebResponseObject.Headers` dictionary and from the `RawContent` property of `BasicHtmlWebResponseObject` and `HtmlWebResponseObject`.\r\n\r\nThis adds the Content headers back to those locations to make it similar to 5.1.\r\n\r\nThis also adds support to `RawContent` for multiple response headers with the same field name. `System.Net.Http.Headers.HttpContentHeaders` and `System.Net.Http.Headers.HttpResponseHeaders` implement values as arrays.",
  "closed_at": "2017-08-21T17:48:26Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "\r\n@markekraus,\nThanks for having already signed the Contribution License Agreement. Your agreement was validated by Microsoft. We will now review your pull request.\n_Thanks,\nMicrosoft Pull Request Bot_",
      "created_at": "2017-08-04T10:54:44Z",
      "updated_at": "2017-08-04T10:54:44Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@markekraus Could you please add tests?",
      "created_at": "2017-08-05T17:50:08Z",
      "updated_at": "2017-08-05T17:50:08Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov Tests Added. I wasn't exactly sure what tests to add. There is already significant validation being done on the `Headers` and `RawContent` properties. If I need more than these 2 tests please let me know.",
      "created_at": "2017-08-05T19:33:28Z",
      "updated_at": "2017-08-05T19:33:28Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov doh... corrected.",
      "created_at": "2017-08-05T20:19:44Z",
      "updated_at": "2017-08-05T20:19:44Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "I agree with @iSazonov .  The tests in the issue look like a good starting point.",
      "created_at": "2017-08-05T21:13:12Z",
      "updated_at": "2017-08-05T21:13:12Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 Thanks. I added the 2 test that make sense. The other tests from the issue won't ever work unless CoreFX drastically changes their approach in `System.Net.Http.HttpResponseMessage`.",
      "created_at": "2017-08-05T21:32:46Z",
      "updated_at": "2017-08-05T21:32:46Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 @SteveL-MSFT Rebased PR on master to add test fixes from #4512. The new tests are passing. Let me know if I need to make any other changes.",
      "created_at": "2017-08-08T09:53:31Z",
      "updated_at": "2017-08-08T09:53:31Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@dantraMSFT I have added the requested test changes and httplistener now supports a `headers` option with a JSON object containing response header name/value pairs on the `response` test.",
      "created_at": "2017-08-18T12:23:32Z",
      "updated_at": "2017-08-18T12:23:32Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "LGTM",
      "created_at": "2017-08-18T19:57:06Z",
      "updated_at": "2017-08-18T19:57:06Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "@markekraus Can you trigger of feature tests? They seems to have failed last time on Travis CI.",
      "created_at": "2017-08-18T20:49:09Z",
      "updated_at": "2017-08-18T20:49:09Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@adityapatwardhan feature tag added. ",
      "created_at": "2017-08-18T21:06:30Z",
      "updated_at": "2017-08-18T21:06:30Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@adityapatwardhan all tests passed this time. (last time an unrelated test hung accessing a 3rd party website).",
      "created_at": "2017-08-19T16:48:01Z",
      "updated_at": "2017-08-19T16:48:01Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "LGTM.\r\n\r\nThanks for great work!",
      "created_at": "2017-08-19T19:17:24Z",
      "updated_at": "2017-08-19T19:17:24Z"
    }
  ],
  "created_at": "2017-08-04T10:54:40Z",
  "number": 4494,
  "state": "closed",
  "title": "Add support for Content Headers to BasicHtmlWebResponseObject and HtmlWebResponseObject",
  "updated_at": "2017-08-25T00:17:47Z"
}