{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6691",
  "author": "iSazonov",
  "body": "## PR Summary\r\n\r\nFix #6681.\r\n\r\nWell format Export-FormatData XML output.\r\n\r\nRefactor  Export-FormatData tests, remove duplications.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [x] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-04-24T05:04:43Z",
  "comments": [
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "I'm curious if this would have any significant impact with regards to storage and memory usage. I havne't used this command much myself, but something tells me we should include a way to revert to the previous settings at the same time as changing the default to pretty print. It's technically not a breaking change, but it may suddenly increase disk space and ram usage if users have this  used in some great capacity. Perhaps `-Compress`?",
      "created_at": "2018-04-20T17:17:15Z",
      "updated_at": "2018-04-20T17:17:15Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@markekraus In Issue discussion a conclusion was that it is not a breaking change and the cmdlet is commonly used for more human and not for scripts. If we want address script scenarios we could add `-AsXML` or/and `-AsXMLString` parameters. If you agree we could open new Issue to track this.",
      "created_at": "2018-04-21T10:33:23Z",
      "updated_at": "2018-04-21T10:33:23Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Since this was agreed not to be a breaking change, I think we can defer adding a `-Compress` type switch until someone actually needs it.  In the future, I want to replace ps1xml with a DSL anyways.",
      "created_at": "2018-04-21T11:26:59Z",
      "updated_at": "2018-04-21T11:26:59Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov I am well aware that this is technically not a breaking change. However, this change does have an impact on the size of the output. Making such a change without allowing for the previous format is something that should be challenged. When developers make changes that result in increased memory and disk usage, such a change can have a significant impact on the user's environment even though the change doesn't impact operation of the application. It would be irresponsible for us not to at least consider the `-Compress` option to allow for the previous behavior.\r\n\r\n@SteveL-MSFT There is no RFC in on that and no hard written commitment to move forward with a DSL that I have seen. Until such time as there is a hard commitment, we should not be making changes that increase consumption of user's resources without providing a way to revert to the previous behavior. This is especially true when doing so is, as far as I can tell, trivial.",
      "created_at": "2018-04-21T11:40:38Z",
      "updated_at": "2018-04-21T11:40:38Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I discovered duplicate file `formatdata.tests.ps1` and I moved tests in one file.",
      "created_at": "2018-04-21T18:02:20Z",
      "updated_at": "2018-04-21T18:02:20Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@markekraus in general, I would agree with you.  However, this is specifically about `Export-FormatData` which seems to be only used to produce something that one would modify to create their own format.ps1xml file which is why we agreed that defaulting to pretty print makes sense.  ",
      "created_at": "2018-04-23T20:16:01Z",
      "updated_at": "2018-04-23T20:16:01Z"
    },
    {
      "author": "BrucePay",
      "author_association": "COLLABORATOR",
      "body": "@markekraus @SteveL-MSFT Being cautious about resource consumption is certainly a worthy goal, but in this case, taking something that is pretty much useless and making it work at a small cost of additional disk space caused by explicit user action seems worthwhile. But resource consumption is definitely something we need to keep track of. Historically it was a non-goal and the user experience trumped any concern about resources (the cmdlet cache being a good example of additional hidden resource consumption.) So thank-you for thanking the time to express your concerns.",
      "created_at": "2018-04-23T21:54:32Z",
      "updated_at": "2018-04-23T21:54:32Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "All good then! I just wanted to to ensure the this was addressed and reasoned through.",
      "created_at": "2018-04-23T22:18:50Z",
      "updated_at": "2018-04-23T22:18:50Z"
    }
  ],
  "created_at": "2018-04-20T15:51:39Z",
  "number": 6691,
  "state": "closed",
  "title": "Pretty print Export-FormatData XML output",
  "updated_at": "2018-04-24T05:05:23Z"
}