{
  "_url": "https://github.com/PowerShell/PowerShell/issues/16810",
  "author": "daxian-dbw",
  "body": "### Prerequisites\n\n- [X] Write a descriptive title.\n- [X] Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\n- [X] Search the existing issues.\n- [X] Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\n- [X] Refer to [Differences between Windows PowerShell 5.1 and PowerShell](https://docs.microsoft.com/powershell/scripting/whats-new/differences-from-windows-powershell).\n\n### Steps to reproduce\n\nRun `[System.Collections.Generic.List[blah]]` in PowerShell.\r\n`blah` is obviously a non-existing type, so an error should be thrown with the message like \"`blah` cannot be resolved\".\r\n\r\nThe culprit should be at\r\nhttps://github.com/PowerShell/PowerShell/blob/d45ff6a20ab2bac98f1088b90284f8e24a8b5d40/src/System.Management.Automation/engine/runtime/Operations/MiscOps.cs#L2145\r\nbecause the following call in `GenericTypeName.GetReflectionType()` successfully get the generic type of `System.Collections.Generic.List`\r\nhttps://github.com/PowerShell/PowerShell/blob/d45ff6a20ab2bac98f1088b90284f8e24a8b5d40/src/System.Management.Automation/engine/parser/ast.cs#L8752\n\n### Expected behavior\n\n```console\nAn error should be thrown with the message like \"`blah` cannot be resolved\".\n```\n\n\n### Actual behavior\n\n```console\nInstead, the error says `System.Collections.Generic.List` cannot be resolved.\r\n\r\nPS:2> [System.Collections.Generic.List[blah]]\r\nInvalidOperation: Unable to find type [System.Collections.Generic.List].\r\n```\n```\n\n\n### Error details\n\n```console\nPS:7> get-error\r\n\r\nException             :\r\n    Type        : System.Management.Automation.RuntimeException\r\n    ErrorRecord :\r\n        Exception             :\r\n            Type    : System.Management.Automation.ParentContainsErrorRecordException\r\n            Message : Unable to find type [System.Collections.Generic.List].\r\n            HResult : -2146233087\r\n        TargetObject          : System.Collections.Generic.List\r\n        CategoryInfo          : InvalidOperation: (System.Collections.Generic.List:TypeName) [], ParentContainsErrorRecordException\r\n        FullyQualifiedErrorId : TypeNotFound\r\n        InvocationInfo        :\r\n            ScriptLineNumber : 1\r\n            OffsetInLine     : 1\r\n            HistoryId        : -1\r\n            Line             : [System.Collections.Generic.List[blah]]\r\n            PositionMessage  : At line:1 char:1\r\n                               + [System.Collections.Generic.List[blah]]\r\n                               + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n            CommandOrigin    : Internal\r\n        ScriptStackTrace      : at <ScriptBlock>, <No file>: line 1\r\n    TargetSite  :\r\n        Name          : ResolveTypeName\r\n        DeclaringType : System.Management.Automation.TypeOps, System.Management.Automation, Version=7.2.0.0, Culture=neutral,\r\nPublicKeyToken=31bf3856ad364e35\r\n        MemberType    : Method\r\n        Module        : System.Management.Automation.dll\r\n    Message     : Unable to find type [System.Collections.Generic.List].\r\n    Data        : System.Collections.ListDictionaryInternal\r\n    Source      : System.Management.Automation\r\n    HResult     : -2146233087\r\n    StackTrace  :\r\n   at System.Management.Automation.TypeOps.ResolveTypeName(ITypeName typeName, IScriptExtent errorPos) in\r\nC:\\arena\\source\\PowerShell\\src\\System.Management.Automation\\engine\\runtime\\Operations\\MiscOps.cs:line 2159\r\n   at System.Management.Automation.TypeOps.ResolveTypeName(ITypeName typeName, IScriptExtent errorPos) in\r\nC:\\arena\\source\\PowerShell\\src\\System.Management.Automation\\engine\\runtime\\Operations\\MiscOps.cs:line 2135\r\n   at System.Management.Automation.Interpreter.FuncCallInstruction`3.Run(InterpretedFrame frame) in\r\nC:\\arena\\source\\PowerShell\\src\\System.Management.Automation\\engine\\interpreter\\CallInstruction.Generated.cs:line 761\r\n   at System.Management.Automation.Interpreter.EnterTryCatchFinallyInstruction.Run(InterpretedFrame frame) in\r\nC:\\arena\\source\\PowerShell\\src\\System.Management.Automation\\engine\\interpreter\\ControlFlowInstructions.cs:line 358\r\nTargetObject          : System.Collections.Generic.List\r\nCategoryInfo          : InvalidOperation: (System.Collections.Generic.List:TypeName) [], RuntimeException\r\nFullyQualifiedErrorId : TypeNotFound\r\nInvocationInfo        :\r\n    ScriptLineNumber : 1\r\n    OffsetInLine     : 1\r\n    HistoryId        : -1\r\n    Line             : [System.Collections.Generic.List[blah]]\r\n    PositionMessage  : At line:1 char:1\r\n                       + [System.Collections.Generic.List[blah]]\r\n                       + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    CommandOrigin    : Internal\r\nScriptStackTrace      : at <ScriptBlock>, <No file>: line 1\n```\n\n\n### Environment data\n\n```powershell\nPS:2> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.2.0\r\nPSEdition                      Core\r\nGitCommitId                    7.2.0\r\nOS                             Microsoft Windows 10.0.19043\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\n```\n\n\n### Visuals\n\n![image](https://user-images.githubusercontent.com/127450/151264111-6149df03-e90d-479c-bd32-a30d9cecd370.png)\r\n",
  "closed_at": null,
  "comments": [],
  "created_at": "2022-01-26T23:31:43Z",
  "number": 16810,
  "state": "open",
  "title": "Error report is wrong when the generic argument of a generic type cannot be resolved",
  "updated_at": "2022-01-26T23:39:15Z"
}