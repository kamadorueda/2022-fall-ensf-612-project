{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3885",
  "author": "dantraMSFT",
  "body": "Fix #2227\r\n\r\nUpdate Invoke-WebRequest and Invoke-RestMethod cmdlets to strip an Authorization header on redirect.\r\n\r\nThe FullCLR implementation uses WebRequest to perform the request which silently strips the Authorization header when a redirect occurs. The CoreCLR implementation uses HttpClient to perform the request which does not strip the authorization header. The change explicitly handles the initial redirect, removes the authorization header and submits the request to location in the response.\r\nA new switch, PreserveAuthorizationOnRedirect, disables this handling.\r\n\r\nSee https://github.com/PowerShell/PowerShell-Docs/pull/1269 for the doc change to document the new switch -PerserveAuthorizationOnRedirect.",
  "closed_at": "2017-06-15T22:52:08Z",
  "comments": [
    {
      "author": "PaulHigin",
      "author_association": "COLLABORATOR",
      "body": "This seems to have a lot of unrelated changes (26 files now changed) now.",
      "created_at": "2017-06-05T16:06:56Z",
      "updated_at": "2017-06-05T16:06:56Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@dantraMSFT looks like you accidentally pulled in other commits, you need to do a `rebase -i` to clean this up.  Let me know if you need help with this.",
      "created_at": "2017-06-05T19:40:19Z",
      "updated_at": "2017-06-05T19:40:19Z"
    },
    {
      "author": "dantraMSFT",
      "author_association": "CONTRIBUTOR",
      "body": "Please squash when merged.",
      "created_at": "2017-06-12T18:06:01Z",
      "updated_at": "2017-06-12T18:06:01Z"
    },
    {
      "author": "dantraMSFT",
      "author_association": "CONTRIBUTOR",
      "body": "@lzybkr Would you review my changes so I can get this merged before I go OOF.\r\nThanks.",
      "created_at": "2017-06-15T17:02:33Z",
      "updated_at": "2017-06-15T17:02:33Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "I'll squash, but I'll ask you to write the commit message that follows our [guidelines](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#common-engineering-practices) - you can just comment here or squash the changes yourself and update the PR, either way is fine.",
      "created_at": "2017-06-15T17:24:09Z",
      "updated_at": "2017-06-15T17:24:09Z"
    },
    {
      "author": "dantraMSFT",
      "author_association": "CONTRIBUTOR",
      "body": "@lzybkr   Description updated. I think this is good now; can we get it merged.",
      "created_at": "2017-06-15T17:28:59Z",
      "updated_at": "2017-06-15T22:29:44Z"
    }
  ],
  "created_at": "2017-05-30T19:55:19Z",
  "number": 3885,
  "state": "closed",
  "title": "Automatically strip Authorization header on redirects",
  "updated_at": "2017-06-15T22:52:08Z"
}