{
  "_url": "https://github.com/PowerShell/PowerShell/issues/15129",
  "author": "agr",
  "body": "<!--\r\n\r\nFor Windows PowerShell 5.1 issues, suggestions, or feature requests please use the following link instead:\r\nWindows PowerShell [UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell)\r\n\r\nThis repository is **ONLY** for PowerShell Core 6 and PowerShell 7+ issues.\r\n\r\n- Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\r\n- Search the existing issues.\r\n- Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\r\n- Refer to the [known issues](https://docs.microsoft.com/powershell/scripting/whats-new/known-issues-ps6).\r\n\r\n-->\r\n\r\n## Steps to reproduce\r\n\r\n```powershell\r\n\"Hello, World\" | Out-File -LiteralPath \"[foo]bar.txt\"\r\nGet-Item [foo<tab>\r\nGet-Item `[foo<tab>\r\nGet-Item ``[foo<tab>\r\n```\r\n\r\n`<tab>` above denotes user pressing the Tab key trying to invoke tab expansion.\r\n\r\n## Expected behavior\r\n\r\nAfter pressing the Tab key entered string expands to a `[foo]bar.txt` filename, potentially properly escaped.\r\n\r\n## Actual behavior\r\n\r\nNothing happens\r\n\r\n## Environment data\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n\r\n```none\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.1.3\r\nPSEdition                      Core\r\nGitCommitId                    7.1.3\r\nOS                             Microsoft Windows 10.0.19041\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n\r\n## Additional details\r\n\r\nIf I type `Get-Item *.txt` and press tab, the command expands to \r\n```\r\nGet-Item '.\\`[foo`]bar.txt'\r\n```\r\nhowever, if I immediately delete some characters in the expanded filename with escaping and press Tab (which, I imagine, would restore deleted characters), again, nothing happens.\r\n\r\nIf I type `Get-Item \"*.txt\"` and press Tab, it expands to `Get-Item \".\\``[foo``]bar.txt\"`, but if I delete some characters and press Tab, nothing happens.\r\n\r\nIf I type `Get-Item '``[` and press Tab, it expands to \r\n```\r\nGet-Item '.\\`[foo`]bar.txt'\r\n```\r\ni.e. it seems to work, but that's totally unexpected and unintuitive: why do I have to type two backticks and have the expansion immediately remove one, yet when there is one, expansion does not work?\r\n\r\nSimilar, with double quotes: `Get-Item \"````[` gets expanded to `Get-Item \".\\``[foo``]bar.txt\"`. Same concern as above. I would expect some consistency.\r\n\r\n`Get-Item ````[` also works.\r\n",
  "closed_at": null,
  "comments": [],
  "created_at": "2021-03-31T05:56:09Z",
  "labels": [
    "WG-Interactive-IntelliSense",
    "Needs-Triage"
  ],
  "number": 15129,
  "state": "open",
  "title": "Tab expansion works unexpectedly for files containing [square brackets] in the name",
  "updated_at": "2021-03-31T08:19:46Z"
}