{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2806",
  "author": "daxian-dbw",
  "body": "There are two fixes:\r\n1. Revert timer changes in `ConsoleHostUserInterfaceProgress.cs` to avoid race conditions. Fix #2800 and #2756. Re-open issue #2138\r\n2. Skip `Update-Help` and `Save-Help` tests in CI builds since the HelpInfo URIs for powershell modules are broken. Address #2807, but need to keep the issue open to track reverting this test change once the URIs are fixed.\r\n\r\n@SteveL-MSFT @Francisco-Gamino, can you please review this PR?",
  "closed_at": "2016-11-30T21:02:32Z",
  "comments": [
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "OK, HelpInfoUri for `Microsoft.PowerShell.Utility` is also broken ... I will disable the `Update-Help` and `Save-Help` tests in CI builds.",
      "created_at": "2016-11-29T23:50:45Z",
      "updated_at": "2016-11-29T23:50:45Z"
    },
    {
      "author": "Francisco-Gamino",
      "author_association": "CONTRIBUTOR",
      "body": "The update-help tests changes LGTM. Thanks @daxian-dbw  for making the change.",
      "created_at": "2016-11-30T00:58:53Z",
      "updated_at": "2016-11-30T00:58:53Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw \r\nMaybe:\r\n1. The timer set up a new `_progPaneUpdateFlag`\r\n2. `HandleIncomingProgressRecord` check ``_progPaneUpdateFlag` then call `_progPane.Show(_pendingProgress)` and reset the `_progPaneUpdateFlag`\r\n\r\nIt seems that we can simply control the time delta in `HandleIncomingProgressRecord` , but my earlier tests showed that is significantly slower.",
      "created_at": "2016-11-30T03:16:40Z",
      "updated_at": "2016-11-30T03:16:40Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@Francisco-Gamino @SteveL-MSFT Thanks for the review. I have updated the test change to use `-Pending`. I chose to directly comment out those 2 tests because I thought the change was simpler so it would be less possible to leave anything behind when we revert the change. But it may be better to stick to the testing guidelines.\r\n\r\n@iSazonov That is an interesting proposal -- by doing all the work in the same thread we certainly can avoid all race conditions. However, if `Write-Progress` is not called very frequently, then it's possible that the progress bar will not be updated (`Show` will not be called) for a long time.\r\nLet's move this discussion to the issue, so more people can jump in \ud83d\ude04 ",
      "created_at": "2016-11-30T05:06:29Z",
      "updated_at": "2016-11-30T05:06:29Z"
    }
  ],
  "created_at": "2016-11-29T23:30:12Z",
  "number": 2806,
  "state": "closed",
  "title": "Fix the CI build break",
  "updated_at": "2016-11-30T21:02:32Z"
}