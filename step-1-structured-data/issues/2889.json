{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2889",
  "author": "rjmholt",
  "body": "Since [#942](https://github.com/PowerShell/PowerShell/issues/942), `New-PSSession` causes a `NullReferenceException` due to dependency on PSRP. A test in the `Start-PSPester` suite invokes this unconditionally, crashing the test suite on Linux builds.\r\n\r\nThis adds a condition to skip the test on non-Windows builds of PowerShell, just like in [SessionOption.Tests](https://github.com/PowerShell/PowerShell/blob/master/test/powershell/engine/Remoting/SessionOption.Tests.ps1). The other natural alternative is to encase the test in a `try` block to count it as \"failed\" until PSRP is supported.",
  "closed_at": "2016-12-19T22:47:42Z",
  "comments": [
    {
      "author": "msftclas",
      "author_association": "NONE",
      "body": "Hi __@rjmholt__, I'm your friendly neighborhood Microsoft Pull Request Bot (You can call me MSBOT). Thanks for your contribution!\r\n    <span>\r\n        This seems like a small (but important) contribution, so no Contribution License Agreement is required at this point. Real humans will now evaluate your PR.\r\n    </span>\r\n\r\nTTYL, MSBOT;\r\n",
      "created_at": "2016-12-15T03:31:20Z",
      "updated_at": "2016-12-15T03:31:20Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@rjmholt The client side PSRP on Linux and OS X was enabled by #2844, and this test is to make sure no crash will occur when running `New-PSSession` on Linux. The test passed in our Linux CI builds, for example, https://travis-ci.org/PowerShell/PowerShell/jobs/184169663#L1367. Did it fail on your Linux machine?",
      "created_at": "2016-12-15T18:42:04Z",
      "updated_at": "2016-12-15T18:42:04Z"
    },
    {
      "author": "rjmholt",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw Yes, I built on Ubuntu 16.04 and 14.04.5 following the prescribed Linux build process for PowerShell [here](https://github.com/PowerShell/PowerShell/blob/master/docs/building/linux.md). I tried again after installing the relevant binaries for [pspr](https://github.com/PowerShell/psl-omi-provider#get-psrp-server ) and [omi](https://github.com/Microsoft/omi#get-omi), but still produced the `NullReferenceException`.\r\n\r\nI'm sure this is a flaw in my build process, but am trying to pinpoint what I need to change.",
      "created_at": "2016-12-15T19:46:39Z",
      "updated_at": "2016-12-15T19:47:59Z"
    }
  ],
  "created_at": "2016-12-15T03:31:16Z",
  "number": 2889,
  "state": "closed",
  "title": "Skip PSSession test on Linux to avoid NullReferenceException",
  "updated_at": "2016-12-19T22:47:42Z"
}