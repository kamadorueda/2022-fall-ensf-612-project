{
  "_url": "https://github.com/PowerShell/PowerShell/issues/5344",
  "author": "bergmeister",
  "body": "I recently got a new machine and therefore found out that `Start-PsBuild` hangs on `dotnet restore` when being executed the first time. I could repro this also a 2nd time when doing it in the WSL system. Simplest workaround is to cancel it using `Ctrl+C` and then executing `Start-PsBuild` again works fine then. I am wondering if this is an issue with the recent move to `.NET Core SDK 2.0.2` since doing it afterwards again in a fresh new clone works fine.\r\n\r\nSteps to reproduce\r\n------------------\r\n\r\n```powershell\r\ngit clone https://github.com/PowerShell/PowerShell.git pwsh_start_build_hangs\r\ncd .\\pwsh_start_build_hangs\r\nImport-Module .\\build.psm1\r\nStart-PSBootStrap\r\nStart-PsBuild\r\n\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\n\r\nIt builds and does not hang.\r\n\r\nActual behavior\r\n---------------\r\n\r\nIt starts hanging after the dotnet cache has been initialized. Here is the console log:\r\n```powershell\r\n> Start-PSBuild\r\nWARNING: Could not find 'dotnet', appending /home/chris/.dotnet to PATH.\r\nVERBOSE: Using configuration 'Linux'\r\nVERBOSE: Top project directory is /mnt/c/Users/chris/git/pwsh_linux/src/powershell-unix\r\nVERBOSE: Using framework 'netcoreapp2.0'\r\nVERBOSE: Using runtime 'linux-x64'\r\nRun dotnet restore\r\n\r\nWelcome to .NET Core!\r\n---------------------\r\nLearn more about .NET Core @ https://aka.ms/dotnet-docs. Use dotnet --help to see available commands or go to https://aka.ms/dotnet-cli-docs.\r\n\r\nTelemetry\r\n--------------\r\nThe .NET Core tools collect usage data in order to improve your experience. The data is anonymous and does not include command-line arguments. The data is collected by Microsoft and shared with the community.\r\nYou can opt out of telemetry by setting a DOTNET_CLI_TELEMETRY_OPTOUT environment variable to 1 using your favorite shell.\r\nYou can read more about .NET Core tools telemetry @ https://aka.ms/dotnet-cli-telemetry.\r\n\r\nConfiguring...\r\n-------------------\r\nA command is running to initially populate your local package cache, to improve restore speed and enable offline access. This command will take up to a minute to complete and will only happen once.\r\nDecompressing 100% 5733 ms\r\nExpanding 100% 71111 ms\r\n```\r\n\r\nEnvironment data\r\n----------------\r\n\r\n- Windows 10 Creators Fall Update\r\n- WSL (Ubuntu 16) of the above\r\n\r\n```powershell\r\n> $PSVersionTable\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.0.0-beta.9\r\nPSEdition                      Core\r\nGitCommitId                    v6.0.0-beta.9\r\nOS                             Microsoft Windows 10.0.16299\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n\r\n```powershell\r\n> $PSVersionTable\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.0.0-beta.9\r\nPSEdition                      Core\r\nGitCommitId                    v6.0.0-beta.9\r\nOS                             Linux 4.4.0-43-Microsoft #1-Microsoft Wed Dec 31 14:42:53 PST 2014\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n",
  "closed_at": null,
  "comments": [],
  "created_at": "2017-11-05T16:18:06Z",
  "labels": [
    "Area-Maintainers-Build"
  ],
  "number": 5344,
  "state": "open",
  "title": "Start-PsBuild hangs for the first time",
  "updated_at": "2017-11-05T19:01:32Z"
}