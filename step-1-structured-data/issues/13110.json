{
  "_url": "https://github.com/PowerShell/PowerShell/issues/13110",
  "author": "necrose99",
  "body": "## Details of the Distribution\r\n\r\n- Name of the Distribution: generic rpm/s \r\n    **- [ X] RPM** \r\n**[tar2rpm ](https://github.com/linuxlefty/tar2rpm)**  more advanced options ie -a aaarch64 etc.. \r\nmost distros  if at all has very STALE versions..  for arm32/arm64 \r\nfor the time being , this is merely a workaround. \r\n\r\nGentoo ebuild uses rpm to turn into a gentoo tarball with metadata.. curently  amd64 is only supported. \r\nas more manual handling of tarballs so its just a tad bit easier and less scripting to use rpm ... \r\n\r\n```\r\npi64 /usr/src/tar2rpm # tar2rpm  powershell-7.0.2-linux-arm64.tar --target /opt/microsoft/powershell/7\r\nWrote: /root/rpmbuild/RPMS/aarch64/powershell-7.0.2-linux-arm64-1-2020.07.05+17.aarch64.rpm\r\n```\r\n```\r\npi64 /usr/src/tar2rpm # tar2rpm  powershell-7.0.2-linux-arm32.tar --target /opt/microsoft/powershell/7\r\nWrote: /root/rpmbuild/RPMS/aarch64/powershell-7.0.2-linux-arm32-1-2020.07.05+15.aarch64.rpm\r\n```\r\n**https://www.dropbox.com/sh/2mrh0iubgh1cj8q/AACLPXASoCLYBNYPzEaqaXSta?dl=0 results \r\nhowever arm32 went to aaarch64 folder..  so metadata flags :-(**\r\n\r\nPOC ,  small victories.   i could try another gentoo-arm7hf-32 bit chroot ,  so metadata is generated correctly \r\n\r\n```\r\npowershell-7.0.2-linux-arm32-1-2020.07.05+15.aarch64.rpm  powershell-7.0.2-linux-arm64-1-2020.07.05+17.aarch64.rpm\r\npi64 ~/rpmbuild/RPMS/aarch64 # mv powershell-7.0.2-linux-arm32-1-2020.07.05+15.aarch64.rpm  powershell-7.0.2-linux-arm32-1-2020.07.05+15.arm32.rpm\r\n```\r\n\r\n\r\n\r\n\r\n[output-logs2.txt](https://github.com/PowerShell/PowerShell/files/4875120/output-logs2.txt)\r\n\r\nhttps://github.com/pentoo/pentoo-overlay/issues/651\r\n\r\n\r\npi64 /usr/src/dnf # ACCEPT_KEYWORDS=\"**\" USE=\"libmd lua python zstd caps\" emerge -avgkb alien\r\n\r\nLocal copy of remote index is up-to-date and will be used.\r\n\r\n * IMPORTANT: 2 news items need reading for repository 'gentoo'.\r\n * Use eselect news read to view new items.\r\n\r\n\r\nLocal copy of remote index is up-to-date and will be used.\r\n\r\nThese are the packages that would be merged, in order:\r\n\r\n```\r\nCalculating dependencies... done!\r\n[ebuild  N     ] app-crypt/libmd-99999::gentoo  USE=\"-static-libs\" 0 KiB\r\n[ebuild  N     ] app-arch/dpkg-1.20.2::gentoo  USE=\"bzip2 libmd lzma nls unicode update-alternatives zlib (-selinux) -static-libs -test\" 4,600 KiB\r\n[ebuild  N     ] app-arch/rpm-4.14.2.1-r1::gentoo  USE=\"acl caps dbus lua nls python zstd -doc (-selinux) -test\" PYTHON_SINGLE_TARGET=\"python3_7 -python3_6 -python3_8\" 4,060 KiB\r\n[ebuild  N     ] dev-util/debhelper-13.1::gentoo  USE=\"-test\" L10N=\"-de -es -fr\" 519 KiB\r\n[ebuild  N     ] app-arch/alien-8.95-r1::gentoo  USE=\"bzip2\" 56 KiB\r\n\r\nTotal: 5 packages (5 new), Size of downloads: 9,234 KiB\r\n\r\n!!! The following binary packages have been ignored due to non matching USE:\r\n\r\n    =app-arch/bzip2-1.0.8-r1 multilib_abi_arm64 -static static-libs\r\n    =sys-devel/gettext-0.21_rc1 multilib_abi_arm64\r\n\r\nNOTE: The --binpkg-respect-use=n option will prevent emerge\r\n      from ignoring these binary packages if possible.\r\n      Using --binpkg-respect-use=y will silence this warning.\r\n\r\nWould you like to merge these packages? [Yes/No] yes\r\n>>> Verifying ebuild manifests\r\n>>> Emerging (1 of 5) app-crypt/libmd-99999::gentoo\r\n>>> Emerging (2 of 5) app-arch/rpm-4.14.2.1-r1::gentoo\r\n>>> Installing (1 of 5) app-crypt/libmd-99999::gentoo\r\n>>> Emerging (3 of 5) app-arch/dpkg-1.20.2::gentoo\r\n>>> Installing (2 of 5) app-arch/rpm-4.14.2.1-r1::gentoo\r\n>>> Installing (3 of 5) app-arch/dpkg-1.20.2::gentoo\r\n>>> Emerging (4 of 5) dev-util/debhelper-13.1::gentoo\r\n>>> Installing (4 of 5) dev-util/debhelper-13.1::gentoo\r\n>>> Emerging (5 of 5) app-arch/alien-8.95-r1::gentoo\r\n>>> Installing (5 of 5) app-arch/alien-8.95-r1::gentoo\r\n>>> Recording app-arch/alien in \"world\" favorites file...\r\n>>> Jobs: 5 of 5 complete                           Load avg: 2.09, 2.49, 1.60\r\n>>> Auto-cleaning packages...\r\n\r\n>>> No outdated packages were found on your system.\r\n\r\n * GNU info directory index is up-to-date.\r\n\r\n * IMPORTANT: 2 config files in '/etc' need updating.\r\n * See the CONFIGURATION FILES and CONFIGURATION FILES UPDATE TOOLS\r\n * sections of the emerge man page to learn how to update config files.\r\n\r\n * IMPORTANT: 2 news items need reading for repository 'gentoo'.\r\n * Use eselect news read to view new items.\r\n\r\npi64 /usr/src/dnf # uname -a\r\nLinux pi64 5.4.45-v8-3b41649ff96d-p4-bis+ #2 SMP PREEMPT Tue Jun 16 14:11:43 GMT 2020 aarch64 GNU/Linux\r\n```",
  "closed_at": null,
  "comments": [],
  "created_at": "2020-07-05T15:28:07Z",
  "labels": [
    "Distribution-Request"
  ],
  "number": 13110,
  "state": "open",
  "title": "Distribution Support Request for arm/arm64 ",
  "updated_at": "2020-07-05T15:34:07Z"
}