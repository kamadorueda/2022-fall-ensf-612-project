{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6686",
  "author": "MaximoTrinidad",
  "body": "<!--\r\n\r\nFor Windows PowerShell 5.1 issues, suggestions, or feature requests please use the following link instead:\r\n- Windows PowerShell [UserVoice](https://windowsserver.uservoice.com/forums/301869-powershell)\r\n\r\nIf it is a bug report:\r\n- make sure you are able to repro it on the latest released version. \r\nYou can install the latest version from https://github.com/PowerShell/PowerShell/releases\r\n- Search the existing issues.\r\n- Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\r\n- Refer to the [known issues](https://github.com/PowerShell/PowerShell/blob/master/docs/KNOWNISSUES.md).\r\n- Fill out the following repro template:\r\n\r\nIf it's not a bug, please remove the template and elaborate the issue in your own words.\r\n-->\r\n\r\nVariables splatting for creating a hash table to pass parameters in a certain order is not working in Linux PowerShell Core 6.1.0-preview.1.\r\n\r\nI wonder if this could impact people using this technique in DSC in PowerShell Core, which that's my next challenge. \r\n\r\nSteps to reproduce\r\n------------------\r\nUsing a AzureRM cmdlet which use positional parameters and the following code won't work because the hash table order was change.\r\n\r\n```powershell\r\n\t$Params1 = @{\r\n\tResourceGroupName = 'GlobalAzureBootCampResources'\r\n\tName = 'glbazbootcampstoreast01'\r\n\tLocation = 'EastUS'\r\n\tSkuName = 'Standard_GRS'\r\n\t};\r\n\tNew-AzureRmStorageAccount $Params1;\r\n\r\n```\r\n\r\nExpected behavior\r\n-----------------\r\nIn Windows PowerShell, the hash table create is retaining the order of the parameters:\r\n\r\n```none\r\nPS [3] > $Params1 = @{\r\n>> ResourceGroupName = 'GlobalAzureBootCampResources'\r\n>> Name = 'glbazbootcampstoreast01'\r\n>> Location = 'EastUS'\r\n>> SkuName = 'Standard_GRS'\r\n>> };\r\nPS [9] >\r\nPS [10] > $Params1\r\n\r\nName                           Value\r\n----                           -----\r\nName                           glbazbootcampstoreast01\r\nResourceGroupName              GlobalAzureBootCampResources\r\nLocation                       EastUS\r\nSkuName                        Standard_GRS\r\n\r\n```\r\n\r\nActual behavior\r\n---------------\r\nIn Bash PowerShell Core the hash table name order has change. So the cmdlet complains:\r\n\r\n```powershell\r\nPS Azure:\\> $Params1\r\n\r\nName                           Value\r\n----                           -----\r\nLocation                       EastUS\r\nName                           glbazbootcampstoreast01\r\nResourceGroupName              GlobalAzureBootCampResources\r\nSkuName                        Standard_GRS\r\n\r\n\r\nAzure:/\r\nPS Azure:\\> New-AzureRmStorageAccount $Params1;\r\n\r\ncmdlet New-AzureRmStorageAccount at command pipeline position 1\r\nSupply values for the following parameters:\r\n(Type !? for Help.)\r\nName:\r\nAzure:/\r\nPS Azure:\\>\r\n```\r\n\r\nEnvironment data\r\n----------------\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n\r\n```powershell\r\nPS Azure:\\> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.1.0-preview.1\r\nPSEdition                      Core\r\nGitCommitId                    v6.1.0-preview.1\r\nOS                             Linux 4.4.0-119-generic #143-Ubuntu SMP Mon Apr 2 16:08:24 UTC 2018\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0...}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n\r\n```\r\n![variable_splatting_01_2018-04-19_19-03-32](https://user-images.githubusercontent.com/19892435/39022681-aa788282-4404-11e8-9c99-5950f21fafc6.jpg)\r\n\r\n![variable_splatting_02_2018-04-19_19-03-32](https://user-images.githubusercontent.com/19892435/39022710-d6b77916-4404-11e8-98cf-6b49acabef0a.jpg)\r\n",
  "closed_at": "2018-04-20T00:33:36Z",
  "comments": [
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "Hum!! In PowerShell Core, I'm know about the [ordered] type and found out that it will keep the order of my variable splatting in the hash table.\r\n\r\nSo, is this correct??  Is this the new way now?\r\n\r\n```\r\nPS /home/maxt> $Params1 = @{                                                                                                        >> ResourceGroupName = 'GlobalAzureBootCampResources'                                                                               >> Name = 'glbazbootcampstoreast01'                                                                                                 >> Location = 'EastUS'                                                                                                              >> SkuName = 'Standard_GRS'                                                                                                         >> };                                                                                                                               \r\nPS /home/maxt> \r\nPS /home/maxt> $Params1                                                                                                                                                                                                                                                 Name                           Value                                                                                                ----                           -----                                                                                                Location                       EastUS                                                                                               SkuName                        Standard_GRS                                                                                         \r\nName                           glbazbootcampstoreast01\r\nResourceGroupName              GlobalAzureBootCampResources\r\n\r\n\r\nPS /home/maxt> \r\nPS /home/maxt> $Params1 = [ordered] @{                                                                                              >> ResourceGroupName = 'GlobalAzureBootCampResources'                                                                               >> Name = 'glbazbootcampstoreast01'                                                                                                 >> Location = 'EastUS'                                                                                                              >> SkuName = 'Standard_GRS'                                                                                                         >> };                                                                                                                               \r\nPS /home/maxt> \r\nPS /home/maxt> $Params1                                                                                                                                                                                                                                                 Name                           Value                                                                                                ----                           -----                                                                                                ResourceGroupName              GlobalAzureBootCampResources                                                                         Name                           glbazbootcampstoreast01                                                                              \r\nLocation                       EastUS\r\nSkuName                        Standard_GRS\r\n\r\n\r\nPS /home/maxt> \r\n```\r\n![variable_splatting_03_2018-04-19_19-03-32](https://user-images.githubusercontent.com/19892435/39022983-1b709596-4406-11e8-95a8-5e26b1fdec50.jpg)\r\n\r\n",
      "created_at": "2018-04-19T23:16:23Z",
      "updated_at": "2018-04-19T23:16:23Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "Ah! Let me look into this deeper..  I think I got something else here. Let me get back to this in a little bit.\r\nI need to run and get something from the store.",
      "created_at": "2018-04-19T23:30:03Z",
      "updated_at": "2018-04-19T23:30:03Z"
    },
    {
      "author": "MaximoTrinidad",
      "author_association": "NONE",
      "body": "I was going in circles... I caught myself applying the wrong technique. I was using the $Param1 instead of @Param1 in the Cmdlet.\r\n\r\nSo, I'm going to close this issue because the variable splatting work in PSCore.\r\n\r\n:)\r\n\r\n![variable_splatting_04_2018-04-19_19-03-32](https://user-images.githubusercontent.com/19892435/39024783-11dbda58-4411-11e8-9670-b271980e7f0d.jpg)\r\n",
      "created_at": "2018-04-20T00:33:36Z",
      "updated_at": "2018-04-20T00:34:35Z"
    }
  ],
  "created_at": "2018-04-19T23:07:11Z",
  "number": 6686,
  "state": "closed",
  "title": "PSCore6 - Can't use variables splatting for cmdlet positional parameters.",
  "updated_at": "2018-05-26T18:37:28Z"
}