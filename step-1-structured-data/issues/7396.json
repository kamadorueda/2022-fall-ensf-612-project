{
  "_url": "https://github.com/PowerShell/PowerShell/issues/7396",
  "author": "kwkam",
  "body": "## PR Summary\r\n\r\n_*System.Management.Automation/engine/CommandCompletion/CompletionCompleters:_\r\nUse WildcardPattern::Escape to escape completion text of filename.\r\n\r\n_*System.Management.Automation/engine/SessionStateContainer:_\r\n@Get-ChildItem\r\nUnescape non-literal, non-glob path before existence checking.\r\nThis solve the issue where Get-GhildItem does not behave correctly\r\nwhen -Path contains special characters. For example,\r\n```pwsh\r\nGet-ChildItem -Path './`[dir`]'\r\n```\r\nwill complain with error \"Cannot find path ...\" while\r\n```pwsh\r\nGet-ChildItem -Path './`[dir`]' -Depth 0\r\n```\r\nwill work fine.\r\n\r\n@New-Item\r\nUnescape non-literal path when -Name is not set.\r\nThis works around for New-Item treating -Path as literal path while\r\nit can also be globbable. For example, assuming there is ```\"[file]1\"```\r\nin current directory, and tab completion suggests ```'./`[file`]1'```\r\nfor the -Path argument, but\r\n```pwsh\r\nNew-Item -Path './`[file`]2'\r\n```\r\nwill create a file named ```\"`[file`]2\"``` instead of ```\"[file]2\"```.\r\n\r\n_*System.Management.Automation/engine/regex:_\r\nWildcardPattern::Escape should also escape ```\"`\"``` since\r\nWildcardPattern::Unescape would unescape it,\r\nand the matcher parse it as escape character.\r\n\r\n_*System.Management.Automation/namespaces/LocationGlobber:_\r\nDo not escape CWD when LiteralPath is used. This causes issues when\r\nboth -LiteralPath and CWD contains special characters.\r\nDo not pass regex escaped string to WildcardPattern::Get. This fails\r\ntab completion when doing ```\"./path/to/`[f\"<TAB>```.\r\n\r\n_*System.Management.Automation/utils/PathUtils:_\r\nUnescape non-literal, non-glob path before calling\r\nGetUnresolvedProviderPathFromPSPath since it only accepts literal path.\r\nThis solve the issue where some commands depending on that method\r\nwill treat -Path as literal unintentionally. For example,\r\n```pwsh\r\nOut-File -Path './`[out`].txt' -Append\r\n```\r\nwill create a new file named ```\"`[out`].txt\"``` instead of writing to ```\"[out].txt\"```.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [ ] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [x] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-07-30T13:12:00Z",
  "comments": [
    {
      "author": "kwkam",
      "author_association": "CONTRIBUTOR",
      "body": "Further split into #7403 #7404 #7405 #7406 #7407 ",
      "created_at": "2018-07-30T13:12:00Z",
      "updated_at": "2018-07-30T13:12:00Z"
    }
  ],
  "created_at": "2018-07-29T04:09:30Z",
  "number": 7396,
  "state": "closed",
  "title": "[Feature] Fix path handling with wildcard char",
  "updated_at": "2018-08-13T15:06:03Z"
}