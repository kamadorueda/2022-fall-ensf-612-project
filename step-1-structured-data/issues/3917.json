{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3917",
  "author": "iSazonov",
  "body": "Related #3400\r\n\r\nMotivation\r\n---\r\nWe inherited old assembly file versions from Windows PowerShell.\r\nCurrently we shouldn't set versions of assemblies statically in `AssemblyInfo.cs` files, we should set versions of assemblies dynamically by MSBuild as discussed in #3690.\r\n\r\nFix\r\n---\r\n1. Remove `AssemblyVersion` and `AssemblyFileVersionAttribute` attributes from `AssemblyInfo.cs` files.\r\n2. Put all common properties in PowerShellCommon.props including version related properties.\r\n3. Import `PowerShellCommon.props` in all csproj files.\r\n\r\nFollow-Up Work\r\n---\r\nIn the PR we temporarily hard code assembly versions as \"6.0.0-beta.2\".\r\nLater we should set a dll version based on GitCommitId.",
  "closed_at": "2017-06-23T01:21:37Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@mirichmo @daxian-dbw Could you please continue with the PR?",
      "created_at": "2017-06-14T06:43:34Z",
      "updated_at": "2017-06-14T06:43:34Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@mirichmo I don't think this PR is ready to merge yet. Please revert this merge.\r\n@PowerShell/powershell-maintainers I didn't get the time to thoroughly review all PRs related to .csproj changes. Let's hold on merging them.",
      "created_at": "2017-06-23T15:54:02Z",
      "updated_at": "2017-06-23T15:54:02Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@mirichmo hold on the revert. Let's see if we can quickly fix the issues.",
      "created_at": "2017-06-23T16:07:35Z",
      "updated_at": "2017-06-23T16:07:35Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@mirichmo I don't have a quick fix. I suggest reverting this merge for now and submit another PR later.\r\n@SteveL-MSFT what do you think?\r\n",
      "created_at": "2017-06-23T16:18:23Z",
      "updated_at": "2017-06-23T16:22:35Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "This merge has been reverted via #4091. Thanks @mirichmo for the quick turnaround.\r\n@iSazonov Sorry for the troubles \u2639\ufe0f Lesson learned: if you think a PR is risky but don't yet have the time to thoroughly review, leave a comment to point out that you need more time so that everyone is on the same page. I will open a new PR for this change.",
      "created_at": "2017-06-23T17:26:30Z",
      "updated_at": "2017-06-23T17:26:54Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "\ud83d\ude15 It's a very strange side effect. I thought PowerShell Core assembles is not Windows PowerShell assemblies, and we could be free in the change. CoreFX assemblies don't keep old versions too. Maybe a right way is to be based on packages versions?",
      "created_at": "2017-06-23T17:40:19Z",
      "updated_at": "2017-06-23T17:40:19Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@iSazonov With `netstandard2.0` we expect most of the existing Windows powershell modules to work on powershell core without change. They were built against 3.0.0.0 S.M.A.dll, so we want to make sure nothing will break there.\r\n\r\nBy the way, I think you have to submit a new PR for this. If I submit it, it will be from my fork and thus you won't be able to make changes. It's very easy to check out a PR with the tool [`hub`](https://github.com/github/hub/releases). Once you get that tool, you can do things like this to get the changes from this PR:\r\n```\r\n## It will get the changes from this PR to a local branch named iSazonov-csproj-common-props\r\nhub checkout https://github.com/PowerShell/PowerShell/pull/3917\r\n## Then rebase this branch and push it to your fork\r\n## Then submit a new PR with that remote branch\r\n```\r\nAgain, sorry for the troubles and thanks for your understanding.",
      "created_at": "2017-06-23T17:53:23Z",
      "updated_at": "2017-06-23T17:53:23Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw Should I restore the branch for you?",
      "created_at": "2017-06-23T17:58:03Z",
      "updated_at": "2017-06-23T17:58:03Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> I think you have to submit a new PR for this.\r\n\r\nOk!\r\n",
      "created_at": "2017-06-23T18:00:59Z",
      "updated_at": "2017-06-23T18:00:59Z"
    }
  ],
  "created_at": "2017-06-02T11:59:03Z",
  "number": 3917,
  "state": "closed",
  "title": "Set assembly versions by MSBuild",
  "updated_at": "2017-06-23T18:01:54Z"
}