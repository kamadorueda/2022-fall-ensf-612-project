{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6839",
  "author": "iSazonov",
  "body": "## PR Summary\r\n\r\nFix #5322.\r\n\r\nNow working:\r\n- Get-Date | Sort-Object @{Expression=\\<tab>\r\n- Get-Date | Sort-Object @{Expression=...;\\<tab>\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [x] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-05-21T04:06:00Z",
  "comments": [
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT @daxian-dbw Could you please review too?",
      "created_at": "2018-05-14T06:41:19Z",
      "updated_at": "2018-05-14T06:41:19Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "The while code is very tricky and sensetive :confused: and crush PowerShell if something wrong. Maybe we should make it more robust.",
      "created_at": "2018-05-16T14:08:54Z",
      "updated_at": "2018-05-16T14:08:54Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I means our Completion code - if I return wrong index PowerShell is crashed. Asts can be combined in many ways. Can we be sure that we tested all their? The code is complex and tricky - can we create simple algorithm? Using visitors?",
      "created_at": "2018-05-16T17:41:28Z",
      "updated_at": "2018-05-16T17:41:28Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@lzybkr @SteveL-MSFT Do you have any comments?",
      "created_at": "2018-05-17T06:15:38Z",
      "updated_at": "2018-05-17T06:15:38Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@iSazonov Sorry for the late reply. I agree the tab completion code is a bit hard to organize now. Many changes have been made that are very specific to the scenarios they try to solve, so you can see checks in `CompletionAnalysis` that are tied to one particular scenario which is hard to understand just by reading the code.\r\n\r\nHowever, the crash is possibly not related to tab completion, but the code rending results to console. If you mess up the index, the rendering code might do weird bad things. I don't think a visitor can help much here, as many checks need to inspect ancestors of an ast.",
      "created_at": "2018-05-21T23:08:55Z",
      "updated_at": "2018-05-21T23:08:55Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@daxian-dbw Thanks for great comment!",
      "created_at": "2018-05-22T03:05:26Z",
      "updated_at": "2018-05-22T03:05:26Z"
    }
  ],
  "created_at": "2018-05-08T15:02:48Z",
  "number": 6839,
  "state": "closed",
  "title": "Fix tab completions for a hash table",
  "updated_at": "2018-05-22T03:05:27Z"
}