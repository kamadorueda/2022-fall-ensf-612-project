{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6055",
  "author": "markekraus",
  "body": "## PR Summary\r\n\r\nTimeouts were originally used in many tests because they relied on unreliable external sites. WebListener may be a bit slow inside CI, but it is reliable in that it is always present. This PR removes the `-TimeOutSec` option from tests where `-TimeOutSec` is not required. the remaining instances either it or would be unaffected (such as testing immediate parameter validation errors). \r\n\r\n## PR Checklist\r\n\r\nNote: Please mark anything not applicable to this PR `NA`.\r\n\r\n- [X] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - [X] Use the present tense and imperative mood when describing your changes\r\n- [X] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [NA] User facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - [NA] Issue filed - Issue link:\r\n- [X] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [NA] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n    - [X] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n- [X] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n",
  "closed_at": "2018-02-02T19:56:07Z",
  "comments": [
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "/cc @iSazonov ",
      "created_at": "2018-01-28T19:09:17Z",
      "updated_at": "2018-01-28T19:09:17Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "The timeouts look useful.\r\nThe timeouts in web tests helped us to identify the problem #6069 with long running tests.\r\nIf we remove the timeouts we can catch silent test hang.\r\nMaybe it doesn't matter while we use WebListener with local Kestrel but once we can be forced to use another tool for some reason.\r\nI'd rather leave the timeouts as is.\r\n\r\n/cc @adityapatwardhan @JamesWTruher Could you please make conclusion?",
      "created_at": "2018-01-31T10:20:33Z",
      "updated_at": "2018-01-31T10:20:33Z"
    },
    {
      "author": "markekraus",
      "author_association": "CONTRIBUTOR",
      "body": "The problem is that -TimeOutSec option affects the internal logic of the cmdlets and can pollute the results. Sure they are helpful in this one-off instance.. but.. in the case where someone messes with the logic we could suffer a regression and miss it.\r\n\r\nIf we want to timeout the cmdlets, we need to do it outside the cmdltes and not with the internal logic of the cmdlets.",
      "created_at": "2018-01-31T10:29:08Z",
      "updated_at": "2018-01-31T10:29:46Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "I think both of you have good points. Ideally, the timeout mechanism should be supported by the test framework (Pester here).",
      "created_at": "2018-02-01T17:45:46Z",
      "updated_at": "2018-02-01T17:45:46Z"
    },
    {
      "author": "dantraMSFT",
      "author_association": "CONTRIBUTOR",
      "body": "The only suggestion I have is to query the history of these tests since the weblistener was introduced and determine if there are cases where the timeout was hit; otherwise, LGTM.",
      "created_at": "2018-02-01T18:19:45Z",
      "updated_at": "2018-02-01T18:19:45Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Created https://github.com/pester/Pester/issues/983 to have them support `-Timeout`",
      "created_at": "2018-02-01T19:13:14Z",
      "updated_at": "2018-02-01T19:13:14Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@dantraMSFT This PR, #6069 and #6013 is just the result of the fact that these tests have recently started to get timeouts.\r\n",
      "created_at": "2018-02-02T04:05:52Z",
      "updated_at": "2018-02-02T04:05:52Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I agree that it is better to have timeout support in Pester.",
      "created_at": "2018-02-02T04:07:45Z",
      "updated_at": "2018-02-02T04:07:45Z"
    }
  ],
  "created_at": "2018-01-28T19:08:39Z",
  "number": 6055,
  "state": "closed",
  "title": "Remove -TimeOutSec from non timeout related Web Cmdlets Tests",
  "updated_at": "2018-02-02T19:56:07Z"
}