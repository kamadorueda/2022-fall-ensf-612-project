{
  "_url": "https://github.com/PowerShell/PowerShell/issues/9397",
  "author": "iSazonov",
  "body": "<!-- Anything that looks like this is a comment and can't be seen after the Pull Request is created. -->\r\n\r\n# PR Summary\r\n\r\nFix formatting issues in LocalAccounts module.\r\nNote: the code is excluded from compiling.\r\n\r\n## PR Context\r\n\r\n<!-- Provide a little reasoning as to why this Pull Request helps and why you have opened it. -->\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` or `[ WIP ]` to the beginning of the title (the `WIP` bot will keep its status check at `Pending` while the prefix is present) and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed: <!-- Number/link of that issue here -->\r\n- **Testing - New and feature**\r\n    - [x] N/A or can only be tested interactively\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n",
  "closed_at": "2019-04-20T17:32:12Z",
  "comments": [
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "This is unused code",
      "created_at": "2019-04-18T18:49:15Z",
      "updated_at": "2019-04-18T18:49:15Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13 Yes, there a note about this in the PR description. We have a plan to migrate this code to the public API so that good formatting will not be superfluous.",
      "created_at": "2019-04-18T18:59:27Z",
      "updated_at": "2019-04-18T18:59:27Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "When we looked at this, the best way to do this would be to use `net.exe` . Identifying the APIs was not immediately obvious.  \r\n\r\nI don't particularly like making changes to code that isn't currently compiling, as we could unknowingly break the code.",
      "created_at": "2019-04-18T19:53:51Z",
      "updated_at": "2019-04-18T19:53:51Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13 This code will _never_ compile in the repo. Using another API also makes the relevant tests useless.\r\nIf you still disagree I will close this PR.",
      "created_at": "2019-04-19T03:42:27Z",
      "updated_at": "2019-04-19T03:42:27Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Since this code isn't currently being built and used, I don't think it make sense to spend time reviewing the changes.  I would suggest closing this PR.  I don't expect this module will be built out of this repo, but it's something we'll have working with PS7, but in Windows.",
      "created_at": "2019-04-19T04:12:35Z",
      "updated_at": "2019-04-19T04:12:35Z"
    },
    {
      "author": "jeffbi",
      "author_association": "CONTRIBUTOR",
      "body": "Converting this code to use a public API is not a _huge_ undertaking, but it would still be Windows-only and with a fair amount of P/Invoke code. Unless there are new APIs in .NET that would allow it to be cross-platform.",
      "created_at": "2019-04-19T04:24:09Z",
      "updated_at": "2019-04-19T04:24:09Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@jeffbi I don't think there's value in porting this to use public APIs (which currently means using net.exe...) unless also making it cross platform at the same time.",
      "created_at": "2019-04-19T05:08:16Z",
      "updated_at": "2019-04-19T05:08:16Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "There is a public API. Example https://github.com/PowerShell/PowerShell/issues/2996#issuecomment-388333943",
      "created_at": "2019-04-19T05:37:12Z",
      "updated_at": "2019-04-19T05:37:12Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov if that namespace supports the current cmdlet and is cross-platform, that would solve this completely",
      "created_at": "2019-04-19T16:59:24Z",
      "updated_at": "2019-04-19T16:59:24Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT We haven't cross-platform API/package for account management. It seems System.DirectoryServices is only partially ported.\r\nSystem.DirectoryServices is part of Windows Compatibility Pack. We already added it in the repo.\r\n\r\nSystem.DirectoryServices.AccountManagement is very power. From docs:\r\n```\r\nThe System.DirectoryServices.AccountManagement namespace provides uniform access and manipulation of user, computer, and group security principals across the multiple principal stores: Active Directory Domain Services (AD DS), Active Directory Lightweight Directory Services (AD LDS), and Machine SAM (MSAM).\r\n```",
      "created_at": "2019-04-19T18:14:29Z",
      "updated_at": "2019-04-19T18:14:29Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov tried a few things with that namespace and only got `not supported on this platform` on my macBook.  It might be sufficient to remove the private apis, but not for cross platform.  The LocalAccounts module that ships in Windows already works with PSCore6.  I don't think we'd ever ship that module with PS7, but PS7 can just use the one that we ship with PS5.1.",
      "created_at": "2019-04-19T18:19:36Z",
      "updated_at": "2019-04-19T18:19:36Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I see your point. The only problem is that this module will be closed for public development. An alternative is still to make a new module based on System.DirectoryServices.AccountManagement.",
      "created_at": "2019-04-19T18:42:56Z",
      "updated_at": "2019-04-19T18:42:56Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "With the new module we could get portable solution calling useradd/groupadd/userdel/groupdel/\u2026 utilites on Unixes.",
      "created_at": "2019-04-19T18:55:45Z",
      "updated_at": "2019-04-19T18:55:45Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov you are correct that LocalAccounts module would not be open to external contribution.  My recommendation would be to leave LocalAccounts as it exists today as-is for backwards compatibility and perhaps have a new module that intends to be cross platform.  Maybe call it `AccountManagement`.",
      "created_at": "2019-04-19T19:31:18Z",
      "updated_at": "2019-04-19T19:31:18Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "> Maybe call it AccountManagement.\r\n\r\nI think the same.",
      "created_at": "2019-04-20T17:32:12Z",
      "updated_at": "2019-04-20T17:32:12Z"
    }
  ],
  "created_at": "2019-04-18T05:21:34Z",
  "number": 9397,
  "state": "closed",
  "title": "Run CodeFormatter for LocalAccounts",
  "updated_at": "2019-04-20T17:32:20Z"
}