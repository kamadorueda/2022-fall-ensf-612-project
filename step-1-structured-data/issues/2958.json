{
  "_url": "https://github.com/PowerShell/PowerShell/issues/2958",
  "author": "JamesWTruher",
  "body": "enable daily test run support in travis\r\n\r\nThis also includes a number of test changes which need to be reviewed by the test owners\r\n@lzybkr I've made changes in parser tests to support async execution to avoid test run hangs which have sporadically appeared. Now, if one of those tests hang, it (the test) will fail rather than the entire run.\r\n@Francisco-Gamino, I've made changes to the help tests, counter and management tests\r\n\r\nonce this is merged, I'll have an addition PR to put the test run badge in the ReadMe.md (after I create the cron job to actually run the tests)",
  "closed_at": "2017-01-10T22:42:28Z",
  "comments": [
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "@lzybkr I don't seem to be able to follow up on your question about the timeout in place.\r\n\r\nCurrently, when one of the parser tests hang, the entire test run is killed after about 10 minutes of inactivity. The timeout code enables us to fail a single test and have the rest of the run continue. I agree that capturing a dump at that point would be fantastic, but I don't know how to do that. Can you provide instructions? I'll be very happy to add it.\r\n #Resolved",
      "created_at": "2017-01-06T23:50:14Z",
      "updated_at": "2017-01-08T22:25:35Z"
    },
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "@TravisEz13 an issue has already been created for the hanging behavior. https://github.com/PowerShell/PowerShell/issues/2748 #Resolved",
      "created_at": "2017-01-06T23:52:21Z",
      "updated_at": "2017-01-08T22:25:31Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "I don't know, but a search of 'create linux core dump' suggests that `gcore` or `kill` may be capable of creating the core dump.",
      "created_at": "2017-01-07T00:03:46Z",
      "updated_at": "2017-01-07T00:03:46Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "It seems it is impossible that _hung_ process killed himself and unloaded a dump.\r\nAs I mentioned above the best way to get the dump is to ask Travis team add the new option to travis.yml They already control session timeout and may at this point easily take a dump and upload it in the specified (in travis.yml) location. This can be useful in the future to solve other problems.\r\n\r\nPossible workarround http://jsteemann.github.io/blog/2014/10/30/getting-core-dumps-of-failed-travisci-builds/",
      "created_at": "2017-01-07T07:53:37Z",
      "updated_at": "2017-01-07T07:53:37Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "We don't know if the process is hung, but clearly a thread is hung, so Jim's change may help in creating the dump. But I agree the CI system should provide a way to debug of they don't already. Appveyor definitely does provide rdp access, maybe Travis already has something similar.",
      "created_at": "2017-01-07T16:53:59Z",
      "updated_at": "2017-01-07T16:53:59Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I found nothing in Travis help but I discovered long discussion about travis dumps travis-ci/travis-ci#3754\r\n",
      "created_at": "2017-01-07T19:23:32Z",
      "updated_at": "2017-01-07T19:23:32Z"
    },
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "will that provide you with what you need, given managed code? As you're the author/owner of these particular tests, shall I just open an issue for you to track?\r\n\r\n---\r\nIn reply to: [271043086](https://github.com/PowerShell/PowerShell/pull/2958#issuecomment-271043086) [](ancestors = 271043086)",
      "created_at": "2017-01-08T22:28:32Z",
      "updated_at": "2017-01-08T22:28:32Z"
    },
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "@Francisco-Gamino, @TravisEz13 my last commit should have addressed your request",
      "created_at": "2017-01-09T19:29:35Z",
      "updated_at": "2017-01-09T19:29:35Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "@JamesWTruher\r\n\r\nIf I'm reading the logs correctly, the async changes didn't help at all, and most likely are a net negative right now.  See these logs:\r\n\r\nhttps://travis-ci.org/PowerShell/PowerShell/jobs/195355364\r\n\r\nNotice 10 minutes with no output - so we failed to kill the async test and did not get further results.\r\nAlso notice the error tests take ~250ms when they should really take about ~1ms or less.",
      "created_at": "2017-01-25T23:17:20Z",
      "updated_at": "2017-01-25T23:17:20Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "The same https://travis-ci.org/PowerShell/PowerShell/jobs/195856711 ",
      "created_at": "2017-01-27T13:24:53Z",
      "updated_at": "2017-01-27T13:24:53Z"
    }
  ],
  "created_at": "2017-01-05T22:25:18Z",
  "number": 2958,
  "state": "closed",
  "title": "Jameswtruher/travisdailybuild",
  "updated_at": "2017-03-27T06:38:18Z"
}