{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6034",
  "author": "stknohg",
  "body": "## PR Summary\r\n\r\nFix #3099\r\n\r\nCurrently `Set-Date.Tests.ps1` dose not have `RequireAdminOnWindows` tag, so CI tests requiring elevated privilege are always skipped.\r\nUsing `RequireAdminOnWindows` tag instead of `Test-Elevated` function, I fix the problem.\r\n\r\n## PR Checklist\r\n\r\nNote: Please mark anything not applicable to this PR `NA`.\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - [x] Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] User facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - [x] Issue filed - Issue link: [Set-Date don't work and admin-elevated test is silently skipped](https://github.com/PowerShell/PowerShell/issues/3099)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n    - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n- [ ] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n",
  "closed_at": "2018-02-06T17:31:31Z",
  "comments": [
    {
      "author": "stknohg",
      "author_association": "CONTRIBUTOR",
      "body": "I've heard that CI tests on Linux/macOS are always run as sudo.\r\nBut it seems to be that CI tests on Linux/macOS are run as normal user.",
      "created_at": "2018-01-26T03:39:02Z",
      "updated_at": "2018-01-26T03:53:28Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@TravisEz13 Could you please clarify - do we run Unix tests under sudo?",
      "created_at": "2018-01-26T04:25:38Z",
      "updated_at": "2018-01-26T04:25:38Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "Currently, yes all Linux tests run with access to `sudo`, but this is not the same as running in `sudo`  you actually have to use `sudo` to get that access.",
      "created_at": "2018-01-26T21:11:36Z",
      "updated_at": "2018-01-26T21:13:26Z"
    },
    {
      "author": "stknohg",
      "author_association": "CONTRIBUTOR",
      "body": "@TravisEz13 @iSazonov Thank you. I will correct and push the code.",
      "created_at": "2018-01-26T21:30:43Z",
      "updated_at": "2018-01-26T21:30:43Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "I mentioned this in #5645 as a test case to fix when a similar tag is added for Linux.",
      "created_at": "2018-01-27T00:41:15Z",
      "updated_at": "2018-01-27T00:41:15Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "Oh, I was sure we automatically under sudo on Unix.",
      "created_at": "2018-01-27T09:35:09Z",
      "updated_at": "2018-01-27T09:35:09Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "Please use WIP in the title of the PR if we are waiting for the author to update the PR.  Blocked should be used for issue where progress cannot be made (for example, we are waiting for another project.)",
      "created_at": "2018-01-29T03:56:56Z",
      "updated_at": "2018-01-29T03:56:56Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "The Linux tests should probably be skipped until a similar tag is added for Linux.  Add a comment with a link to the issue to say why.  https://github.com/PowerShell/PowerShell/issues/5645",
      "created_at": "2018-01-29T03:59:15Z",
      "updated_at": "2018-01-29T03:59:15Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "I suppose it should be pending not skip.",
      "created_at": "2018-01-29T04:46:41Z",
      "updated_at": "2018-01-29T04:46:41Z"
    },
    {
      "author": "stknohg",
      "author_association": "CONTRIBUTOR",
      "body": "@iSazonov I don't think so.\r\n\r\nIt will take some time to fix #5645.  \r\nThis Pull Request improves all tests on Windows, improves partially on Linux/macOS immediately.\r\nThe rest correction should be done with #5645.",
      "created_at": "2018-01-29T07:24:42Z",
      "updated_at": "2018-01-29T07:24:42Z"
    },
    {
      "author": "TravisEz13",
      "author_association": "MEMBER",
      "body": "skip is appropriate where a test works on one platform and not another.  Pending is where a test just doesn't work.",
      "created_at": "2018-01-29T17:06:22Z",
      "updated_at": "2018-01-29T17:06:22Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "Skip is appropriate for tests which _normally_ shouldn't be executed.\r\nPending is appropriate for tests which _we should fix_.",
      "created_at": "2018-01-29T18:31:38Z",
      "updated_at": "2018-01-29T18:31:38Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "@stknohg Thank you for your contribution. ",
      "created_at": "2018-02-06T17:32:02Z",
      "updated_at": "2018-02-06T17:32:02Z"
    }
  ],
  "created_at": "2018-01-26T03:03:44Z",
  "number": 6034,
  "state": "closed",
  "title": "Use 'RequireAdminOnWindows' tag in Set-Date tests",
  "updated_at": "2018-02-07T06:44:49Z"
}