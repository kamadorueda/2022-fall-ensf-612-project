{
  "_url": "https://github.com/PowerShell/PowerShell/issues/7120",
  "author": "SteveL-MSFT",
  "body": "## PR Summary\r\n\r\nWe've been seeing some AppVeyor failures after publishing new version of pwrshplugin.dll.  The cache name wasn't changed and suspicion is that the cache is invalid and needs to be updated.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [x] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [ ] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-06-19T22:31:12Z",
  "comments": [
    {
      "author": "bergmeister",
      "author_association": "CONTRIBUTOR",
      "body": "@steveL-msft\r\nCan you please provide links to the build failures? Can you also please explain how/why this PR would help? Only NuGet packages are being cached and I cannot see how this can be a problem (even if there are newer versions of the package, it should not be a problem)?\r\nIs it related to #7038 ?",
      "created_at": "2018-06-19T20:59:25Z",
      "updated_at": "2018-06-19T21:00:58Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "This should not be related to #7038.  Pwrshplugin.dll is published as psrp.windows nupkg.  Failure was first noticed in our nightly (https://ci.appveyor.com/project/PowerShell/powershell-f975h), but I also see it in my PRs.",
      "created_at": "2018-06-19T21:02:54Z",
      "updated_at": "2018-06-19T21:02:54Z"
    },
    {
      "author": "bergmeister",
      "author_association": "CONTRIBUTOR",
      "body": "Ok. Thanks for the info. However, if you really suspect that the presence of an older NuGet package is really the culprit then there seems to be an underlying issue (in general or in the test) that should be solved rather than being swept under the carpet by flushing the cache. It might be OK as a quick workaround to get it back to work to unblock things but understanding the failure would still be essential IMHO. I cannot believe that this is the case (although I haven't looked into what the test does) and even if so having a pre or post build event with a specific cleanup action would still be a better solution and one could even prove more specifically that this NuGet package is the culprit",
      "created_at": "2018-06-19T21:14:59Z",
      "updated_at": "2018-06-19T21:18:33Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "That binary is pulled into the build from myget as a nupkg and required for WSMan remoting endpoint for PSCore6.  The test that's failing is trying to setup a remoting endpoint and that is failing because of that binary.  The cache needs to be updated everytime we update the nuget dependencies which is the case here.  I don't think anything is being swept under the carpet.",
      "created_at": "2018-06-19T21:23:06Z",
      "updated_at": "2018-06-19T21:23:06Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Ok, just looked at the nupkg and it was published incorrectly.  May not need this cache change.",
      "created_at": "2018-06-19T21:35:46Z",
      "updated_at": "2018-06-19T21:35:46Z"
    }
  ],
  "created_at": "2018-06-19T20:46:52Z",
  "number": 7120,
  "state": "closed",
  "title": "Update AppVeyor cache",
  "updated_at": "2018-06-20T02:53:12Z"
}