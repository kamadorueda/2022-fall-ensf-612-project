{
  "_url": "https://github.com/PowerShell/PowerShell/issues/6998",
  "author": "SteveL-MSFT",
  "body": "## PR Summary\r\n\r\nRemoved building PSReadLine from repo.  Changed to downloading from PSGallery.\r\n\r\nAddresses part of https://github.com/PowerShell/PowerShell/issues/1979\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [ ] Issue filed - Issue link:\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively\r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-06-06T16:42:20Z",
  "comments": [
    {
      "author": "kilasuit",
      "author_association": "COLLABORATOR",
      "body": "Whilst I am **delighted** that you are following up on #1979 and finally getting some traction on it, my only small concern is that the is a preview version of PSReadline. \r\n\r\nWould I be right in thinking that this is would be changed for the next non-preview release of pwsh to include the non-preview version of PSReadline with a future PR up the line?",
      "created_at": "2018-06-05T14:21:12Z",
      "updated_at": "2018-06-05T14:21:12Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@kilasuit Yes, PSCore6.1 would ship with non-preview versions of assemblies.  Getting PSReadLine 2.0.0-beta2 in now is a great way to get more usage and find issues.",
      "created_at": "2018-06-05T14:25:36Z",
      "updated_at": "2018-06-05T14:25:36Z"
    },
    {
      "author": "daxian-dbw",
      "author_association": "MEMBER",
      "body": "@SteveL-MSFT Console host tests are failing. I could be some recent changes broke them.",
      "created_at": "2018-06-05T17:57:24Z",
      "updated_at": "2018-06-05T17:57:24Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@daxian-dbw my suspicion is that AppVeyor has PSReadLine 2.0.0-beta1 installed which is getting loaded first which has the bug that causes these tests to fail.  I added a test to check the path of where PSReadLine is imported from to validate this.  Not sure yet how to fix if this is the case since the semver string of the version gets dropped.",
      "created_at": "2018-06-05T20:13:12Z",
      "updated_at": "2018-06-05T20:13:12Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "My experiment shows that it is in fact 2.0.0-beta2 being used in AppVeyor.  So not sure why the test is failing in AppVeyor, but passes locally other than the console is probably different.  I think we still want to get 2.0.0-beta2 into Preview3 so we can get more feedback on PSReadLine 2.0.  I propose we make these tests pending for now on Windows.\r\n\r\nCreated https://github.com/PowerShell/PowerShell/issues/7009",
      "created_at": "2018-06-05T23:21:33Z",
      "updated_at": "2018-06-05T23:56:20Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "Therefore, these scripts will not work in environments without a console. What are these scenarios? Task Scheduler?",
      "created_at": "2018-06-06T04:34:28Z",
      "updated_at": "2018-06-06T04:34:28Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "@iSazonov Not entirely sure about the root cause yet, but just hypothesizing that it's due to console.  If so, Task Scheduler would have similar issue, but redirecting stdin isn't a common scenario.",
      "created_at": "2018-06-06T14:16:53Z",
      "updated_at": "2018-06-06T14:16:53Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@SteveL-MSFT Thanks! If we plan to release next Preview I agree to merge the PR.",
      "created_at": "2018-06-06T16:34:16Z",
      "updated_at": "2018-06-06T16:34:16Z"
    }
  ],
  "created_at": "2018-06-05T00:26:42Z",
  "number": 6998,
  "state": "closed",
  "title": "Use PSReadLine 2.0.0-beta2 from PSGallery",
  "updated_at": "2018-06-08T00:59:39Z"
}