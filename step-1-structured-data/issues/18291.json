{
  "_url": "https://github.com/PowerShell/PowerShell/issues/18291",
  "author": "4P0st",
  "body": "### Prerequisites\n\n- [X] Write a descriptive title.\n- [X] Make sure you are able to repro it on the [latest released version](https://github.com/PowerShell/PowerShell/releases)\n- [X] Search the existing issues.\n- [X] Refer to the [FAQ](https://github.com/PowerShell/PowerShell/blob/master/docs/FAQ.md).\n- [X] Refer to [Differences between Windows PowerShell 5.1 and PowerShell](https://docs.microsoft.com/powershell/scripting/whats-new/differences-from-windows-powershell).\n\n### Steps to reproduce\n\nWhen a single DNS TXT record contain multiple strings, `Resolve-DnsName \"domain\" -Type TXT` add comma `,` to concatenate strings.\r\nMultiple strings in a single DNS record - normal situation, defined in RFC7208 (section 3.3) and RFC1035 (sections 3.3 and 3.3.14)\r\nCmdLet result for domain `aeroflot.ru`:\r\n```\r\nResolve-DnsName \"aeroflot.ru\" -Type TXT\r\n\r\nName                                     Type   TTL   Section    Strings\r\n----                                     ----   ---   -------    -------\r\naeroflot.ru                              TXT    202   Answer     {ca3-f2bbba5b43ae45328abc29931f1cb07e}\r\naeroflot.ru                              TXT    202   Answer     {yandex-verification: 5ecffa2e9a312726}\r\naeroflot.ru                              TXT    202   Answer     {v=spf1 ip4:185.69.83.20 ip4:185.69.80.10\r\n                                                                  ip4:185.69.80.20 ip4:185.69.81.10 ip4:18\r\n                                                                 5.69.81.20 ip4:185.69.83.50 ip4:185.22.60\r\n                                                                 .2 ip4:5.8.180.34 ip4:37.18.91.24 ip4:5.2\r\n                                                                 00.57.130 ip4:92.53.70.116 ip4:91.234.188\r\n                                                                 .98 ip4:91.234.188.146 ip4:78.155.201.0/2\r\n                                                                 7 ip4, :84.201.190.197 ip4:151.193.224.24\r\n                                                                 4 ip4:151.193.224.245 ip4:151.193.65.92 i\r\n                                                                 p4:151.193.65.93 ip4:151.193.220.18 ip4:1\r\n                                                                 51.193.220.20 +mx -all}\r\n```\r\nOutput result for `nslookup`:\r\n```\r\nnslookup -type=txt aeroflot.ru\r\n...\r\naeroflot.ru     text =\r\n\r\n        \"v=spf1 ip4:185.69.83.20 ip4:185.69.80.10 ip4:185.69.80.20 ip4:185.69.81.10 ip4:185.69.81.20 ip4:185.69.83.50 ip4:185.22.60.2 ip4:5.8.180.34 ip4:37.18.91.24 ip4:5.200.57.130 ip4:92.53.70.116 ip4:91.234.188.98 ip4:91.234.188.146 ip4:78.155.201.0/27 ip4\"\r\n        \":84.201.190.197 ip4:151.193.224.244 ip4:151.193.224.245 ip4:151.193.65.92 ip4:151.193.65.93 ip4:151.193.220.18 ip4:151.193.220.20 +mx -all\"\r\naeroflot.ru     text =\r\n\r\n        \"yandex-verification: 5ecffa2e9a312726\"\r\naeroflot.ru     text =\r\n\r\n        \"ca3-f2bbba5b43ae45328abc29931f1cb07e\"\r\n```\n\n### Expected behavior\n\n```console\n{v=spf1 ip4:185.69.83.20 ip4:185.69.80.10 ip4:185.69.80.20 ip4:185.69.81.10 ip4:185.69.81.20 ip4:185.69.83.50 ip4:185.22.60.2 ip4:5.8.180.34 ip4:37.18.91.24 ip4:5.200.57.130 ip4:92.53.70.116 ip4:91.234.188.98 ip4:91.234.188.146 ip4:78.155.201.0/27 ip4:84.201.190.197 ip4:151.193.224.244 ip4:151.193.224.245 ip4:151.193.65.92 ip4:151.193.65.93 ip4:151.193.220.18 ip4:151.193.220.20 +mx -all}\n```\n\n\n### Actual behavior\n\n```console\n{v=spf1 ip4:185.69.83.20 ip4:185.69.80.10 ip4:185.69.80.20 ip4:185.69.81.10 ip4:185.69.81.20 ip4:185.69.83.50 ip4:185.22.60.2 ip4:5.8.180.34 ip4:37.18.91.24 ip4:5.200.57.130 ip4:92.53.70.116 ip4:91.234.188.98 ip4:91.234.188.146 ip4:78.155.201.0/27 ip4, :84.201.190.197 ip4:151.193.224.244 ip4:151.193.224.245 ip4:151.193.65.92 ip4:151.193.65.93 ip4:151.193.220.18 ip4:151.193.220.20 +mx -all}\n```\n\n\n### Error details\n\n_No response_\n\n### Environment data\n\n```powershell\nName                           Value\r\n----                           -----\r\nPSVersion                      7.2.6\r\nPSEdition                      Core\r\nGitCommitId                    7.2.6\r\nOS                             Microsoft Windows 10.0.19044\r\nPlatform                       Win32NT\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\n```\n\n\n### Visuals\n\n_No response_",
  "closed_at": "2022-10-16T00:01:18Z",
  "comments": [
    {
      "author": "jhoneill",
      "author_association": "NONE",
      "body": "\r\n> When a single DNS TXT record contain multiple strings, `Resolve-DnsName \"domain\" -Type TXT` add comma `,` to concatenate strings.\r\n\r\nActually it doesn't . It returns a  `Microsoft.DnsClient.Commands.DnsRecord_TXT` object with a strings property which is an array\r\n\r\nWhen the object is formatted as a table the array is formatted as `{  Strings[0], Strings[1], Strings[2] } `\r\n\r\nIn other words, if one record contains many strings they are kept as separate items which are then joined to print a table\r\n```\r\n\r\nPS>  $t = Resolve-DnsName \"aeroflot.ru\" -Type TXT\r\n\r\nPS>  $t.count\r\n3\r\n\r\nPS>  $t[1]\r\n\r\nName                                     Type   TTL   Section    Strings\r\n----                                     ----   ---   -------    -------\r\naeroflot.ru                              TXT    270   Answer     {v=spf1 ip4:185.69.83.20\r\n                                                                 ip4:185.69.80.10 ip4:185.69.80.20\r\n                                                                 ip4:185.69.81.10 ip4:185.69.81.20\r\n                                                                 ip4:185.69.83.50 ip4:185.22.60.2\r\n                                                                 ip4:5.8.180.34 ip4:37.18.91.24\r\n                                                                 ip4:5.200.57.130 ip4:92.53.70.116\r\n                                                                 ip4:91.234.188.98 ip4:91.234.188.146\r\n                                                                 ip4:78.155.201.0/27 ip4, :84.201.190.197\r\n                                                                 ip4:151.193.224.244 ip4:151.193.224.245\r\n                                                                 ip4:151.193.65.92 ip4:151.193.65.93\r\n                                                                 ip4:151.193.220.18 ip4:151.193.220.20\r\n                                                                 +mx -all}\r\n\r\n\r\nPS>  $t[1].strings.count\r\n2\r\n\r\nPS>  $t[1].strings\r\nv=spf1 ip4:185.69.83.20 ip4:185.69.80.10 ip4:185.69.80.20 ip4:185.69.81.10 ip4:185.69.81.20 ip4:185.69.83.50 ip4:185.22.60.2 ip4:5.8.180.34 ip4:37.18.91.24 ip4:5.200.57.130 ip4:92.53.70.116 ip4:91.234.188.98 ip4:91.234.188.146 ip4:78.155.201.0/27 ip4\r\n:84.201.190.197 ip4:151.193.224.244 ip4:151.193.224.245 ip4:151.193.65.92 ip4:151.193.65.93 ip4:151.193.220.18 ip4:151.193.220.20 +mx -all\r\n\r\n\r\n\r\n```",
      "created_at": "2022-10-14T09:09:06Z",
      "updated_at": "2022-10-14T09:09:06Z"
    },
    {
      "author": "237dmitry",
      "author_association": "NONE",
      "body": "`Strings` property is an array (perhaps the server gives in this form, long line splits in parts). If you want just plain output you have to format it. For example:\r\n```powershell\r\nResolve-DnsName aeroflot.ru -Type TXT | Format-Table Name, Type, TTL, @{ label = 'Strings'; expression = { $_.Strings -join '' }} -Wrap\r\n``` \r\nor\r\n```powershell\r\nResolve-DnsName aeroflot.ru -Type TXT | Format-List Name, Type, TTL, @{ label = 'Strings'; expression = { $_.Strings -join '' }}\r\n```",
      "created_at": "2022-10-14T09:34:21Z",
      "updated_at": "2022-10-14T09:42:11Z"
    },
    {
      "author": "msftbot[bot]",
      "author_association": "NONE",
      "body": "This issue has been marked as answered and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
      "created_at": "2022-10-16T00:01:17Z",
      "updated_at": "2022-10-16T00:01:17Z"
    }
  ],
  "created_at": "2022-10-14T03:15:48Z",
  "number": 18291,
  "state": "closed",
  "title": "Resolve-DnsName incorrect recognize multiple strings in a single DNS TXT record",
  "updated_at": "2022-10-16T00:01:18Z"
}