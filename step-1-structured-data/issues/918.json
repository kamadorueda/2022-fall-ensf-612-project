{
  "_url": "https://github.com/PowerShell/PowerShell/issues/918",
  "author": "JumpingYang001",
  "body": "@andschwa can you help to assign to somebody to review? thank you!\n\n<!-- Reviewable:start -->\n\n---\n\nThis change is [<img src=\"https://reviewable.io/review_button.svg\" height=\"35\" align=\"absmiddle\" alt=\"Reviewable\"/>](https://reviewable.io/reviews/powershell/powershell/918)\n\n<!-- Reviewable:end -->\n",
  "closed_at": "2016-05-23T20:27:18Z",
  "comments": [
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@SteveL-MSFT, I don't know what these fall under. If it's CDXML, it belongs to Sandeep, but I can't find his GitHub alias.\n",
      "created_at": "2016-04-27T19:34:54Z",
      "updated_at": "2016-04-27T19:34:54Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 3 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 18 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTaMFg6jqxaqHvWFdt:-KGTaMFg6jqxaqHvWFdu:-2126763322) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L18)):_\nI'd prefer seeing $TestDrive used instead of $tmpDirectory - it's easier to reason about the test if you don't introduce this alias for a well known variable.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 98 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTcloLasHTnor2GD6d:-KGTcloLasHTnor2GD6e:553561826) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L98)):_\nI'm not a fan of this pattern - it's harder to understand the error in the logs.\nI think it would be easier if you used:\n    Update-TypeData -AppendPath $filelist -EA Stop; Throw \"Error expected from previous command\"\nThis way - the error line for the throw will contain the command that was supposed to throw, and the actual text of the exception will be less confusing.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 115 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTdGKCx3-0pWKqFN_w:-KGTdGKCx3-0pWKqFN_x:-753955703) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L115)):_\nI don't think we should be adding members to System.String in a test - this could have unfortunate side effects with too many things because everything uses a string. I think it would be better to create a type specifically for these sorts of tests.\n\nAnother option is to run in another runspace, look at admin\\monad\\tests\\ci\\PowerShell\\tests\\Commands\\Cmdlets\\pester.utility.typedata.tests.ps1\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-04-28T20:56:40Z",
      "updated_at": "2016-04-28T20:56:40Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 3 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 18 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTaMFg6jqxaqHvWFdt:-KGUuEUk0ekXe4M__dUx:-499146009) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L18)):_\nDone.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 98 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTcloLasHTnor2GD6d:-KGUv-tn6z4gQ-q9V6kL:250938881) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L98)):_\nbut try catch will verify more detail things like CategoryInfo and FullyQualifiedErrorId.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 115 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTdGKCx3-0pWKqFN_w:-KGUyKjrZvVq0CkyQLLP:-505823388) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L115)):_\nI will \"Remove-TypeData System.String \"after each update-typedata, then it will not effect.\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-04-29T03:14:20Z",
      "updated_at": "2016-04-29T03:14:20Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "@lzybkr I have fixed the comments, can you help to merge to master? thank you!\n",
      "created_at": "2016-04-29T05:44:48Z",
      "updated_at": "2016-04-29T05:44:48Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 2 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 98 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTcloLasHTnor2GD6d:-KGY3p1tdaPfUfogJLER:1106752734) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L98)):_\nI wasn't suggesting removing try/catch - just moving the throw to the same line and change the text of the message.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 115 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTdGKCx3-0pWKqFN_w:-KGY3QZ0oXGdzjzJ2DSM:-1956555134) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L115)):_\nPester has AfterEach for exactly this sort of thing.  But I have other reasons why I don't like adding something to string - it will negatively affect performance of all string operations in PowerShell - possibly slowing down test runs.\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-04-29T17:32:37Z",
      "updated_at": "2016-04-29T17:32:37Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 2 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 115 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTdGKCx3-0pWKqFN_w:-KGorUz0aKkPuW2J47Gh:482413142) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L115)):_\nWe still need system.string to test Length for many property verification.\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-05-03T04:27:33Z",
      "updated_at": "2016-05-03T04:27:33Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 2 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 98 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTcloLasHTnor2GD6d:-KGorsJMBptv19uBkyla:-386867180) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L98)):_\nwill update to try\n        {\n            Update-TypeData -AppendPath $filelist -EA Stop; Throw \"We expect TypesXmlUpdateException, but it didn't throw!\"\n        }\n        catch \n            $_.CategoryInfo | Should Match \"RuntimeException\"\n            $_.FullyQualifiedErrorId | Should be \"TypesXmlUpdateException,Microsoft.PowerShell.Commands.UpdateTypeDataCommand\"\n        }\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-05-03T04:28:46Z",
      "updated_at": "2016-05-03T04:28:46Z"
    },
    {
      "author": "lzybkr",
      "author_association": "MEMBER",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 2 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 115 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTdGKCx3-0pWKqFN_w:-KGrd6IZf3FVI2U-cMDg:-1009278876) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L115)):_\nYes, of course - I'm just saying I don't want to see Update-TypeData -TypeName System.String ...\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-05-03T17:22:59Z",
      "updated_at": "2016-05-03T17:22:59Z"
    },
    {
      "author": "TingLiu6",
      "author_association": "CONTRIBUTOR",
      "body": "Review status: 0 of 2 files reviewed at latest revision, 2 unresolved discussions.\n\n---\n\n_[test/powershell/Update-TypeData.Tests.ps1, line 98 [r1]](https://reviewable.io:443/reviews/powershell/powershell/918#-KGTcloLasHTnor2GD6d:-KH4NH26IFPKH69n2I0S:676635175) ([raw file](https://github.com/powershell/powershell/blob/e7315666a50512508e13dbd0d179ddd3c4b16cc6/test/powershell/Update-TypeData.Tests.ps1#L98)):_\nDone\n\n---\n\n_Comments from [Reviewable](https://reviewable.io:443/reviews/powershell/powershell/918)_\n\n<!-- Sent from Reviewable.io -->\n",
      "created_at": "2016-05-06T09:23:56Z",
      "updated_at": "2016-05-06T09:23:56Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "Rebased on master to fix xUnit tests.\n",
      "created_at": "2016-05-06T16:57:51Z",
      "updated_at": "2016-05-06T16:57:51Z"
    },
    {
      "author": "TingLiu6",
      "author_association": "CONTRIBUTOR",
      "body": "@andschwa Fixed CR issues, could you please help to merge to master?\n",
      "created_at": "2016-05-12T02:55:59Z",
      "updated_at": "2016-05-12T02:55:59Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "@lzybkr can you help to merge to master? thank you very much!\nI come back from my Paternity Leave vocation today.\n",
      "created_at": "2016-05-16T04:26:51Z",
      "updated_at": "2016-05-16T04:26:51Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "@lzybkr I have fixed the comments, please help to merge to master, thank you!\n",
      "created_at": "2016-05-17T03:11:58Z",
      "updated_at": "2016-05-17T03:11:58Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "@andschwa @lzybkr can you help to merge to master? thank you!\n",
      "created_at": "2016-05-18T03:01:45Z",
      "updated_at": "2016-05-18T03:01:45Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "@vors is this good to merge?\n",
      "created_at": "2016-05-19T03:08:45Z",
      "updated_at": "2016-05-19T03:08:45Z"
    },
    {
      "author": "andschwa",
      "author_association": "MEMBER",
      "body": "I mean, it looks good to me, but this way beyond my knowledge of PowerShell internals. This may have to wait until tomorrow for @lzybkr or @JamesWTruher to get back to it.\n",
      "created_at": "2016-05-19T03:13:58Z",
      "updated_at": "2016-05-19T03:13:58Z"
    },
    {
      "author": "JumpingYang001",
      "author_association": "CONTRIBUTOR",
      "body": "@lzybkr  @JamesWTruher can you help to merge to master? thank you!\n",
      "created_at": "2016-05-20T04:31:26Z",
      "updated_at": "2016-05-20T04:31:26Z"
    }
  ],
  "created_at": "2016-04-26T06:49:28Z",
  "number": 918,
  "state": "closed",
  "title": "Add Update-TypeData and Update-FormatData Pester Unit Test",
  "updated_at": "2016-05-23T20:27:22Z"
}