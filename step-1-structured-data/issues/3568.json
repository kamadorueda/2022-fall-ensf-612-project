{
  "_url": "https://github.com/PowerShell/PowerShell/issues/3568",
  "author": "SteveL-MSFT",
  "body": "$error is actually $global:error, however, internally it's updated as ExecutionContext.DollarErrorVariable even though an `error` variable is in the variable table of the session state (however it's not writable).  During CommandCompletion this `error` variable is found before getting to global scope, but is empty so tab-complete returns no results.  Fix is to transform CommandCompletion calls to $error as $global:error so that it is found in the correct global scope.\r\n\r\nAlso fixed some hardcoded strings to use already defined consts for variable names related to Error.\r\n\r\nAddresses https://github.com/PowerShell/PowerShell/issues/3373\r\n",
  "closed_at": "2017-04-16T17:08:05Z",
  "comments": [
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "AppVeyor failure is due to regression in ExecutionPolicy tests.  Investigating.",
      "created_at": "2017-04-15T23:01:06Z",
      "updated_at": "2017-04-15T23:01:06Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "The original fix I made had a bad assumption as there is a valid $script:error variable.  Coming up with a new solution.",
      "created_at": "2017-04-16T14:33:36Z",
      "updated_at": "2017-04-16T14:33:36Z"
    },
    {
      "author": "SteveL-MSFT",
      "author_association": "MEMBER",
      "body": "Closing this until I come up with a better solution",
      "created_at": "2017-04-16T17:08:05Z",
      "updated_at": "2017-04-16T17:08:05Z"
    }
  ],
  "created_at": "2017-04-15T03:49:50Z",
  "number": 3568,
  "state": "closed",
  "title": "Fixed ability to tab-complete on $error[0]",
  "updated_at": "2017-04-16T17:08:05Z"
}