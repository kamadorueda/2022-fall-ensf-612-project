{
  "_url": "https://github.com/PowerShell/PowerShell/issues/7240",
  "author": "JamesWTruher",
  "body": "## PR Summary\r\n\r\nFix #5752.\r\n\r\nIf you attempt to start pwsh in a directory like `/tmp/[T]est` the shell will default to $PSHOME\r\n\r\nThe issue was that we attempted to glob against the string returned by `Directory.GetCurrentDirectory()` which we should not do.\r\n\r\nTechnically, this is a breaking change - anyone that relies on starting in $PSHOME under these circumstances may be surprised by this behavior.\r\n\r\n## PR Checklist\r\n\r\n- [x] [PR has a meaningful title](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n    - Use the present tense and imperative mood when describing your changes\r\n- [x] [Summarized changes](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [ ] [Change is not breaking](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#making-breaking-changes)\r\n- [x] [Make sure all `.h`, `.cpp`, `.cs`, `.ps1` and `.psm1` files have the correct copyright header](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n- [x] This PR is ready to merge and is not [Work in Progress](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---work-in-progress).\r\n    - If the PR is work in progress, please add the prefix `WIP:` to the beginning of the title and remove the prefix when the PR is ready.\r\n- **User-facing changes**\r\n    - [x] Not Applicable\r\n    - **OR**\r\n    - [ ] User-facing [Documentation needed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#pull-request---submission)\r\n        - [x] Issue filed - Issue link: https://github.com/PowerShell/PowerShell/issues/5752\r\n- **Testing - New and feature**\r\n    - [ ] Not Applicable or can only be tested interactively \r\n    - **OR**\r\n    - [x] [Make sure you've added a new test if existing tests do not effectively test the code changed](https://github.com/PowerShell/PowerShell/blob/master/.github/CONTRIBUTING.md#before-submitting)\r\n        - [ ] [Add `[feature]` if the change is significant or affects feature tests](https://github.com/PowerShell/PowerShell/blob/master/docs/testing-guidelines/testing-guidelines.md#requesting-additional-tests-for-a-pr)\r\n",
  "closed_at": "2018-07-12T22:10:32Z",
  "comments": [
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "it looks like the test that failed is unrelated to my change. In reviewing the threadjob test failure, there looks to be a timing issue. I'll follow up with @PaulHigin.",
      "created_at": "2018-07-07T19:06:23Z",
      "updated_at": "2018-07-07T19:06:23Z"
    },
    {
      "author": "JamesWTruher",
      "author_association": "MEMBER",
      "body": "@adityapatwardhan using the API approach will fail in some circumstances where `${TESTDRIVE}/...` in PowerShell is `/tmp/<guid>/...` but the API may return `/private/tmp/<guid>/...` as it follows the symlink. Testing the name of the directory is the easiest way to avoid the necessity of recognizing/constructing the \"real\" path. What I've done proves the behavior well enough.",
      "created_at": "2018-07-09T23:45:52Z",
      "updated_at": "2018-07-09T23:45:52Z"
    },
    {
      "author": "adityapatwardhan",
      "author_association": "MEMBER",
      "body": "@JamesWTruher Is the thread jobs test fix intended to be in this PR? If so could you update the title and description.",
      "created_at": "2018-07-10T00:03:29Z",
      "updated_at": "2018-07-10T00:03:29Z"
    },
    {
      "author": "anmenaga",
      "author_association": "CONTRIBUTOR",
      "body": "@JamesWTruher it looks like job test fix was moved to a separate PR #7270 (with some additions), so they can be excluded from this one.",
      "created_at": "2018-07-11T17:49:31Z",
      "updated_at": "2018-07-11T17:49:31Z"
    },
    {
      "author": "ZeppLu",
      "author_association": "NONE",
      "body": "Sorry to bother, but when will this fix be in Windows? I'm using PowerShell 5.1.17763.134 on Windows 1809, and issue 5752 still exists.",
      "created_at": "2018-12-10T10:40:18Z",
      "updated_at": "2018-12-10T10:40:18Z"
    },
    {
      "author": "vexx32",
      "author_association": "COLLABORATOR",
      "body": "@ZeppLu the PS team have mentioned in previous issues and PRs that no more fixes are being backported to Windows PowerShell.\r\n\r\nYou are, however, free to download, install, and use PowerShell Core on Windows. \ud83d\ude04 ",
      "created_at": "2018-12-10T10:48:26Z",
      "updated_at": "2018-12-10T22:02:39Z"
    },
    {
      "author": "KillyMXI",
      "author_association": "NONE",
      "body": "This fix was included into the version v6.1.0-preview.4 - 2018-07-19.\r\nThe question is, when the fresh enough version of PowerShell will be shipped with Windows.\r\n",
      "created_at": "2018-12-10T21:59:24Z",
      "updated_at": "2018-12-10T21:59:24Z"
    },
    {
      "author": "ZeppLu",
      "author_association": "NONE",
      "body": "@vexx32 Installing PowerShell Core does not seem a good solution for me, I'll try out other workarounds. Anyway, thanks for your explanation and advice.",
      "created_at": "2018-12-11T05:37:00Z",
      "updated_at": "2018-12-11T05:37:00Z"
    }
  ],
  "created_at": "2018-07-06T19:16:25Z",
  "number": 7240,
  "state": "closed",
  "title": "Fix for issue 5752: pwsh cannot start in a directory with a name that includes a wildcard",
  "updated_at": "2018-12-11T22:47:09Z"
}