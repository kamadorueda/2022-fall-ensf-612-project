{
  "_url": "https://github.com/PowerShell/PowerShell/issues/11740",
  "author": "chrpinedo",
  "body": "# Steps to reproduce\r\nInvoke-RestMethod fails to validate a SSL certification path which is valid in my RHEL 7 updated servers (check that openssl validates the certificate chain).\r\n\r\nIt seems to happen only in RHEL, I have powershell in ArchLinux and the same test works perfectly on it.\r\n\r\n```powershell\r\n> Invoke-RestMethod -Uri https://www.ehu.eus     \r\nInvoke-RestMethod : The remote certificate is invalid according to the validation procedure.\r\nAt line:1 char:1\r\n+ Invoke-RestMethod -Uri https://www.ehu.eus\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : InvalidOperation: (Method: GET, Reques\\u2026PowerShell/6.2.4\r\n}:HttpRequestMessage) [Invoke-RestMethod], HttpRequestException\r\n+ FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeRestMethodCommand\r\n```\r\n```bash\r\n$ openssl s_client -connect www.ehu.eus:443\r\nCONNECTED(00000003)\r\ndepth=2 C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert Assured ID Root CA\r\nverify return:1\r\ndepth=1 C = NL, ST = Noord-Holland, L = Amsterdam, O = TERENA, CN = TERENA SSL CA 3\r\nverify return:1\r\ndepth=0 C = ES, L = Elexalde, O = Universidad del Pa\\C3\\ADs Vasco / Euskal Herriko Unibertsitatea, CN = *.ehu.eus\r\nverify return:1\r\n---\r\nCertificate chain\r\n 0 s:/C=ES/L=Elexalde/O=Universidad del Pa\\xC3\\xADs Vasco / Euskal Herriko Unibertsitatea/CN=*.ehu.eus\r\n   i:/C=NL/ST=Noord-Holland/L=Amsterdam/O=TERENA/CN=TERENA SSL CA 3\r\n 1 s:/C=NL/ST=Noord-Holland/L=Amsterdam/O=TERENA/CN=TERENA SSL CA 3\r\n   i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert Assured ID Root CA\r\n 2 s:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert Assured ID Root CA\r\n   i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert Assured ID Root CA\r\n---\r\nServer certificate\r\n-----BEGIN CERTIFICATE-----\r\nMIIGyDCCBbCgAwIBAgIQD5Yz98hjt0gASbWfSyhoFTANBgkqhkiG9w0BAQsFADBk\r\nMQswCQYDVQQGEwJOTDEWMBQGA1UECBMNTm9vcmQtSG9sbGFuZDESMBAGA1UEBxMJ\r\nQW1zdGVyZGFtMQ8wDQYDVQQKEwZURVJFTkExGDAWBgNVBAMTD1RFUkVOQSBTU0wg\r\nQ0EgMzAeFw0xOTEwMzEwMDAwMDBaFw0yMTExMDQxMjAwMDBaMHoxCzAJBgNVBAYT\r\nAkVTMREwDwYDVQQHEwhFbGV4YWxkZTFEMEIGA1UECgw7VW5pdmVyc2lkYWQgZGVs\r\nIFBhw61zIFZhc2NvIC8gRXVza2FsIEhlcnJpa28gVW5pYmVydHNpdGF0ZWExEjAQ\r\nBgNVBAMMCSouZWh1LmV1czCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEB\r\nALkhLB8IesGzC8KF5xvB6s/z/szx6cx5tg0cu5DtN29au13D3y9mOLe+z39R4p2j\r\n+x1bQ9Ynbxh04dZmroY0+bgPCO8CzQvDOPQneG2S5gAT/vvXtKhFPVvu0wRS/0Ot\r\nISHHnjk/9M1Y3kPk5FCAd2fax5RWEJoDhRNFoxXQFRTHn8ekkKtYHd4C6DrtFZ2N\r\n0WQ1omF/TDMrl1pjaD9sn/Zr2GQHp26Ogwet1ocQfAUw6ikBJGxSpAXOeu/b1X7l\r\nF2uSjSxQeX5zY3Kj63mxGbMLuXyI7ShC+jfp2Et826VQO2iWDIQnn0eOVlc9IlsG\r\nToRWTEImufb2NRPv5xfRyzUCAwEAAaOCA14wggNaMB8GA1UdIwQYMBaAFGf9iCAU\r\nJ5jHCdIlGbvpURFjdVBiMB0GA1UdDgQWBBQXaC0qEeWpoL6POaA72k+4hHui4jAv\r\nBgNVHREEKDAmggkqLmVodS5ldXOCCCouZWh1LmVzggdlaHUuZXVzggZlaHUuZXMw\r\nDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBr\r\nBgNVHR8EZDBiMC+gLaArhilodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vVEVSRU5B\r\nU1NMQ0EzLmNybDAvoC2gK4YpaHR0cDovL2NybDQuZGlnaWNlcnQuY29tL1RFUkVO\r\nQVNTTENBMy5jcmwwTAYDVR0gBEUwQzA3BglghkgBhv1sAQEwKjAoBggrBgEFBQcC\r\nARYcaHR0cHM6Ly93d3cuZGlnaWNlcnQuY29tL0NQUzAIBgZngQwBAgIwbgYIKwYB\r\nBQUHAQEEYjBgMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20w\r\nOAYIKwYBBQUHMAKGLGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9URVJFTkFT\r\nU0xDQTMuY3J0MAwGA1UdEwEB/wQCMAAwggF9BgorBgEEAdZ5AgQCBIIBbQSCAWkB\r\nZwB2AKS5CZC0GFgUh7sTosxncAo8NZgE+RvfuON3zQ7IDdwQAAABbiFb5ZEAAAQD\r\nAEcwRQIhALPuXNBOfNrAqUaSYhiaBX4NTxEZWMLx1PwmL8WVtkSPAiAyqP9ffELI\r\nU/7uBV8bcdcHXhBdKWcIkrpQUWNn07gpsQB2AId1v+dZfPiMQ5lfvfNu/1aNR1Y2\r\n/0q1YMG06v9eoIMPAAABbiFb5foAAAQDAEcwRQIhAOYjMxZrfaxFvWqbAGKeIbZg\r\ncS1QLx6cqW8cQNZrifTyAiBYiSh0oBdi8qrTjTySVXoEDS5smjv5QlvryroHLK18\r\nJAB1AESUZS6w7s6vxEAH2Kj+KMDa5oK+2MsxtT/TM5a1toGoAAABbiFb5SAAAAQD\r\nAEYwRAIgKN7vytDFi/eTZaKdQFYfzoYffrSWvC+1rMpCvPOxSycCIHUlQV2/Nsg6\r\nvLNos8KU4GxKWwgJG2MK76wt8OXOyX6TMA0GCSqGSIb3DQEBCwUAA4IBAQCWMYMY\r\nCZyMIfQnvnMvaNWC/2AOQI8E1cs/2Teh2jpv7NNjwaqsXMCDBxWB3cVcl+J7VlXK\r\nJBZUd8RUrRGI1nhMVSUTBfT99v/Tz1mrMN7kbYobLOelRy+FfB9ec0YhQkYfEGHN\r\nuEPQuDwHD3NIFSKbOwCOpt8JwUYSshGZSLIdwTCxRm4Nh0376yrJ7RkPiC2IoXzu\r\ne4PBtYIwX1iArgEekDyW71Q+AAkcxZ6Rh6rodEr9Dt2aqimfTL5ayjjQjpAoyJU2\r\nL59MgSUrSjwDi52Sw4d0fq/z8RqtXgodjNePzsRrbjkmCi/kKhGaIFvpYthWts0W\r\nVpdo+hpfdZuzR/Rr\r\n-----END CERTIFICATE-----\r\nsubject=/C=ES/L=Elexalde/O=Universidad del Pa\\xC3\\xADs Vasco / Euskal Herriko Unibertsitatea/CN=*.ehu.eus\r\nissuer=/C=NL/ST=Noord-Holland/L=Amsterdam/O=TERENA/CN=TERENA SSL CA 3\r\n---\r\nNo client certificate CA names sent\r\nPeer signing digest: SHA512\r\nServer Temp Key: ECDH, P-256, 256 bits\r\n---\r\nSSL handshake has read 4889 bytes and written 415 bytes\r\n---\r\nNew, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES256-GCM-SHA384\r\nServer public key is 2048 bit\r\nSecure Renegotiation IS supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1.2\r\n    Cipher    : ECDHE-RSA-AES256-GCM-SHA384\r\n    Session-ID: 5FF36741F5B368F651260F46B6E19B39900FCF8450AC5079FE6F3BE95DBFFE87\r\n    Session-ID-ctx: \r\n    Master-Key: 209447C47452FC1C9BA5AB61837F0368B203E83E7228EC83A3AA5F3946C3416951C2F92E26DBFBEAC6CA7407260A70BC\r\n    Key-Arg   : None\r\n    Krb5 Principal: None\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    TLS session ticket lifetime hint: 300 (seconds)\r\n    TLS session ticket:\r\n    0000 - 22 a7 b9 d7 71 f1 83 23-66 d6 85 b3 1a ed e9 50   \"...q..#f......P\r\n    0010 - 39 a3 a5 0d ba 07 6b 79-ee dc 25 3f 8d 92 45 16   9.....ky..%?..E.\r\n    0020 - 5a 51 f5 c7 80 60 ab 4f-3f a3 fc 37 ef 86 c6 5e   ZQ...`.O?..7...^\r\n    0030 - 7e 71 84 b0 09 32 a9 1a-75 cd e7 7e 2f 95 97 3f   ~q...2..u..~/..?\r\n    0040 - cd 3e 51 63 59 ee 86 b0-90 f7 28 bc b3 bc 7f a3   .>QcY.....(.....\r\n    0050 - a5 bc 0f 0c 79 c3 a2 6e-b7 2b 36 b6 bb d5 bc 08   ....y..n.+6.....\r\n    0060 - e9 d4 fa 8e c9 ea 84 96-a3 82 22 b7 b8 43 85 d3   ..........\"..C..\r\n    0070 - c7 d1 99 82 33 e7 89 05-fc c3 82 c4 d3 37 ef 4a   ....3........7.J\r\n    0080 - 02 46 a5 d9 37 89 9f 37-bf b8 c8 cd cc 9f 40 0c   .F..7..7......@.\r\n    0090 - 89 20 fb 6b 28 e3 1f 8b-00 2e e3 d6 2d 83 6f eb   . .k(.......-.o.\r\n    00a0 - a3 04 da 04 6f 00 e9 68-c4 2b ca 9b 9a 23 9e 99   ....o..h.+...#..\r\n    00b0 - 5f a0 c7 dc ae 03 7a e3-46 2e c5 23 4e 01 22 b8   _.....z.F..#N.\".\r\n    00c0 - 98 c3 58 c6 52 16 43 5b-a7 52 17 46 e2 b1 c4 cd   ..X.R.C[.R.F....\r\n    00d0 - 52 c5 50 04 6b 24 e5 98-ff a4 9b 27 10 ce d5 c9   R.P.k$.....'....\r\n    00e0 - 6c a8 30 0d 1f d9 0a 10-6b bd 54 46 78 97 05 f0   l.0.....k.TFx...\r\n    00f0 - 57 63 df 48 87 21 03 bc-b9 9e 98 88 2a 13 a4 31   Wc.H.!......*..1\r\n    0100 - dc 90 2e f8 04 0d 15 cd-84 d1 7f 9c d7 f3 b0 70   ...............p\r\n    0110 - 88 76 ff 7a af cf ff a6-dc 69 89 85 16 5b 5b 94   .v.z.....i...[[.\r\n    0120 - f7 5f eb 89 72 c7 d7 2c-78 f2 e1 f5 39 9c c1 b2   ._..r..,x...9...\r\n    0130 - 39 36 a4 d2 f7 9c 38 48-c8 14 ad d8 ab 7c d4 92   96....8H.....|..\r\n    0140 - d3 20 84 c1 5b 0e 22 aa-cd 82 3c 0f 06 16 8f 2c   . ..[.\"...<....,\r\n    0150 - 1f f7 ca 54 40 da 51 72-4a 78 61 9c ff 99 94 d9   ...T@.QrJxa.....\r\n    0160 - 1c 59 f0 91 7a 69 b7 e3-b3 ec fe 40 9e 33 cb bd   .Y..zi.....@.3..\r\n    0170 - 24 33 69 dd 52 af fa 58-52 79 a8 e1 7b c8 31 73   $3i.R..XRy..{.1s\r\n    0180 - b4 f5 c1 b8 f1 06 39 d6-3e 84 13 14 1e 23 02 c1   ......9.>....#..\r\n    0190 - 02 d7 50 67 cf d2 0f 1e-45 ff d0 d0 d1 17 4f 7e   ..Pg....E.....O~\r\n    01a0 - 5a 73 63 8e d8 ef 53 07-a2 77 4d 5c 4b 88 fa 42   Zsc...S..wM\\K..B\r\n\r\n    Start Time: 1580464520\r\n    Timeout   : 300 (sec)\r\n    Verify return code: 0 (ok)\r\n---\r\n\r\n```\r\n\r\n# Expected behavior\r\n\r\n```none\r\nValidation of the SSL certificate chain.\r\n```\r\n\r\n# Actual behavior\r\n\r\n```none\r\nFails to validate the SSL certificate chain in RHEL 7\r\n```\r\n\r\n# Environment data\r\n\r\n<!-- provide the output of $PSVersionTable -->\r\n\r\n```none\r\n> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      6.2.4\r\nPSEdition                      Core\r\nGitCommitId                    6.2.4\r\nOS                             Linux 3.10.0-1062.9.1.el7.x86_64 #1 SMP Mon Dec 2 08:31:54 EST 2019\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```\r\n",
  "closed_at": "2020-02-11T12:00:13Z",
  "comments": [
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "I have another problem that might be related to this SSL problem: I can't install/update modules, because I don't have PSRepositories:\r\n\r\n```powershell\r\n> Get-PSRepository\r\nWARNING: Unable to find module repositories.\r\n``` \r\n\r\nDebug output:\r\n\r\n```powershell\r\n> Register-PSRepository -Default -Debug\r\nDEBUG: 00:00:00.0000002 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0001604 Name: PSGallery\r\nDEBUG: 00:00:00.0002479 Debug: True\r\nDEBUG: 00:00:00.0014184 INVOKING PowerShell Fn Get-DynamicOptions with args Provider that has length 1\r\nDEBUG: 00:00:00.0027398 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0048138 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0099243 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0100024 Name: PSGallery\r\nDEBUG: 00:00:00.0100581 Debug: True\r\nDEBUG: 00:00:00.0108302 INVOKING PowerShell Fn Get-DynamicOptions with args Source that has length 1\r\nDEBUG: 00:00:00.0116065 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0163990 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0269443 Calling New() : MethodName = 'ResolvePackageSources'\r\nDEBUG: 00:00:00.0275649 MessageResolver: Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:00.0283427 Name: PSGallery\r\nDEBUG: 00:00:00.0289261 ProviderName: PowerShellGet\r\nDEBUG: 00:00:00.0295154 Debug: True\r\nDEBUG: 00:00:00.0309215 INVOKING PowerShell Fn Resolve-PackageSource with args  that has length 0\r\nDEBUG: 00:00:00.0324688 In PowerShellGet Provider - 'Resolve-PackageSource'.\r\nDEBUG: 00:00:00.0350781 PowerShell Script 'PSModule' Function 'Resolve-PackageSource' returns null.\r\nDEBUG: 00:00:00.0363404 Done calling powershell \u00abResolve-PackageSource\u00bb \u00abPSModule\u00bb\r\n\r\nConfirm\r\nAre you sure you want to perform this action?\r\nPerforming the operation \"Register Module Repository.\" on target \"Module Repository 'PSGallery' ()\r\n in provider 'PowerShellGet'.\".\r\n[Y] Yes  [A] Yes to All  [N] No  [L] No to All  [S] Suspend  [?] Help (default is \"Y\"): A\r\nDEBUG: 00:00:01.6365937 Calling New() : MethodName = 'AddPackageSource'\r\nDEBUG: 00:00:01.6371360 MessageResolver: Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:01.6376794 Name: PSGallery\r\nDEBUG: 00:00:01.6381989 ProviderName: PowerShellGet\r\nDEBUG: 00:00:01.6386867 Debug: True\r\nDEBUG: 00:00:01.6400904 INVOKING PowerShell Fn Add-PackageSource with args PSGallery, , False that has length 3\r\nDEBUG: 00:00:01.6873401 In PowerShellGet Provider - 'Add-PackageSource'.\r\nDEBUG: 00:00:01.6966352 OPTION: MessageResolver => Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:01.6975070 OPTION: Name => PSGallery\r\nDEBUG: 00:00:01.6986378 OPTION: ProviderName => PowerShellGet\r\nDEBUG: 00:00:01.7000166 OPTION: Debug => True\r\nDEBUG: 00:00:02.2649708 Ping-Endpoint: location=https://www.powershellgallery.com/api/v2, statuscode=, resolvedLocation=\r\nDEBUG: 00:00:02.6598076 Ping-Endpoint: location=https://www.powershellgallery.com/api/v2/items/psscript, statuscode=, resolvedLocation=\r\nDEBUG: 00:00:02.6616143 PowerShell Script 'PSModule' Function 'Add-PackageSource' returns null.\r\nDEBUG: 00:00:02.6629816 Done calling powershell \u00abAdd-PackageSource\u00bb \u00abPSModule\u00bb\r\n> Get-PSRepository -Debug              \r\nDEBUG: 00:00:00.0000001 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0001539 Debug: True\r\nDEBUG: 00:00:00.0011116 INVOKING PowerShell Fn Get-DynamicOptions with args Provider that has length 1\r\nDEBUG: 00:00:00.0022495 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0042702 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0092765 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0093374 Debug: True\r\nDEBUG: 00:00:00.0101571 INVOKING PowerShell Fn Get-DynamicOptions with args Source that has length 1\r\nDEBUG: 00:00:00.0110929 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0154922 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0235401 Calling New() : MethodName = 'ResolvePackageSources'\r\nDEBUG: 00:00:00.0240469 MessageResolver: Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:00.0245333 ProviderName: PowerShellGet\r\nDEBUG: 00:00:00.0249952 Debug: True\r\nDEBUG: 00:00:00.0263824 INVOKING PowerShell Fn Resolve-PackageSource with args  that has length 0\r\nDEBUG: 00:00:00.0275979 In PowerShellGet Provider - 'Resolve-PackageSource'.\r\nDEBUG: 00:00:00.0322805 PowerShell Script 'PSModule' Function 'Resolve-PackageSource' returns null.\r\nDEBUG: 00:00:00.0334156 Done calling powershell \u00abResolve-PackageSource\u00bb \u00abPSModule\u00bb\r\nWARNING: Unable to find module repositories.\r\n\r\nConfirm\r\nContinue with this operation?\r\n[Y] Yes  [A] Yes to All  [H] Halt Command  [S] Suspend  [?] Help (default is \"Y\"): A\r\n```\r\n\r\nIf I try to Invoke-RestMethod against https://www.powershellgallery.com/api/v2, I get again the SSL validation error:\r\n\r\n```powershell\r\n> Invoke-RestMethod -Uri https://www.powershellgallery.com/api/v2\r\nInvoke-RestMethod : The remote certificate is invalid according to the validation procedure.\r\nAt line:1 char:1\r\n+ Invoke-RestMethod -Uri https://www.powershellgallery.com/api/v2\r\n+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n+ CategoryInfo          : InvalidOperation: (Method: GET, Reques\\u2026PowerShell/6.2.4\r\n}:HttpRequestMessage) [Invoke-RestMethod], HttpRequestException\r\n+ FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeRestMethodCommand\r\n```\r\nOpenssl of the RHEL 7 host does validate the SSL certificate:\r\n```bash\r\n$ openssl s_client -connect www.powershellgallery.com:443\r\nCONNECTED(00000003)\r\ndepth=2 C = IE, O = Baltimore, OU = CyberTrust, CN = Baltimore CyberTrust Root\r\nverify return:1\r\ndepth=1 C = US, ST = Washington, L = Redmond, O = Microsoft Corporation, OU = Microsoft IT, CN = Microsoft IT TLS CA 1\r\nverify return:1\r\ndepth=0 CN = www.powershellgallery.com\r\nverify return:1\r\n---\r\nCertificate chain\r\n 0 s:/CN=www.powershellgallery.com\r\n   i:/C=US/ST=Washington/L=Redmond/O=Microsoft Corporation/OU=Microsoft IT/CN=Microsoft IT TLS CA 1\r\n 1 s:/C=US/ST=Washington/L=Redmond/O=Microsoft Corporation/OU=Microsoft IT/CN=Microsoft IT TLS CA 1\r\n   i:/C=IE/O=Baltimore/OU=CyberTrust/CN=Baltimore CyberTrust Root\r\n---\r\nServer certificate\r\n-----BEGIN CERTIFICATE-----\r\nMIIJlzCCB3+gAwIBAgITewACwf4qfxOIsjFRJAAAAALB/jANBgkqhkiG9w0BAQsF\r\nADCBizELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0b24xEDAOBgNVBAcT\r\nB1JlZG1vbmQxHjAcBgNVBAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEVMBMGA1UE\r\nCxMMTWljcm9zb2Z0IElUMR4wHAYDVQQDExVNaWNyb3NvZnQgSVQgVExTIENBIDEw\r\nHhcNMTgwOTA1MjM0NTM4WhcNMjAwOTA1MjM0NTM4WjAkMSIwIAYDVQQDExl3d3cu\r\ncG93ZXJzaGVsbGdhbGxlcnkuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB\r\nCgKCAQEAwxqMleiwp+uho3PvWuRwg2cQxIL/nLRzrcbUHlGoBgQPaOiIpJgn6w7y\r\nc7i0IFljrrptBZ4+SB23QpVShjplF1JhpIlXD0fdP0PRKWaBzndgtUZuAxe3n3hJ\r\n1r0bl1Prz7UVYtBc3ct2s59e6UTWHiBwLjQhfhIMJxTbxo8xhv9vXp6cFFQczm2s\r\nkzMRqf/APAATNVrJzybH7Bz/q8qVfgC2FkJ3n/j29YZy6tgeK+uN5Wnfa3b6mvdC\r\nWyQeVPko0u4kRHH4cUBB/onvvdYOa8dFp/e0+qLlhWbjPGptItkrQPwufSO0nZSa\r\ncnwIrc835lqsLbKSEi1pvQpvE6KjYQIDAQABo4IFWDCCBVQwggH3BgorBgEEAdZ5\r\nAgQCBIIB5wSCAeMB4QB2AO5Lvbd1zmC64UJpH6vhnmajD35fsHLYgwDEe4l6qP3L\r\nAAABZawpxiUAAAQDAEcwRQIgFxZmw3IlfYtaD0Us4itsBF3UP4tnLM3LajZ/JEVc\r\nli8CIQD00H+c4JR+uIkgM8uJZZAXz3QKyxON4yMzBq93Ea533QB3ALvZ37wfinG1\r\nk5Qjl6qSe0c4V5UKq1LoGpCWZDaOHtGFAAABZawpxbAAAAQDAEgwRgIhANcrta/M\r\n9A72JO0u+5T/K5gZeBgayr/3cdVjA2gEjjMTAiEAwNRUlfRrS4i7MooRIy77veY2\r\nCNXyW1Yh+enEi2NvzbsAdgCkuQmQtBhYFIe7E6LMZ3AKPDWYBPkb37jjd80OyA3c\r\nEAAAAWWsKcYOAAAEAwBHMEUCIFpz7rD0uyI66ia+5dAIObBt/mjRAJ5wuI6nVQq7\r\nyQo3AiEAnskHnzwYuza+QZ9RNqP8LE93SURybhChFxWQjt19tW0AdgDwlaRZ8gDR\r\ngkAQLS+TiI6tS/4dR+OZ4dA0prCoqo6ycwAAAWWsKcYHAAAEAwBHMEUCIQCoXwpv\r\nV6BwEQb6Ac3Y/O9L73FTM455l+XPcGQnWuaQOgIgUpIkRxpW4v/AZUBVmo32WGXG\r\nvEE6RkVVV4gqkckjsrYwJwYJKwYBBAGCNxUKBBowGDAKBggrBgEFBQcDAjAKBggr\r\nBgEFBQcDATA+BgkrBgEEAYI3FQcEMTAvBicrBgEEAYI3FQiH2oZ1g+7ZAYLJhRuB\r\ntZ5hhfTrYIFdhNLfQoLnk3oCAWQCAR0wgYUGCCsGAQUFBwEBBHkwdzBRBggrBgEF\r\nBQcwAoZFaHR0cDovL3d3dy5taWNyb3NvZnQuY29tL3BraS9tc2NvcnAvTWljcm9z\r\nb2Z0JTIwSVQlMjBUTFMlMjBDQSUyMDEuY3J0MCIGCCsGAQUFBzABhhZodHRwOi8v\r\nb2NzcC5tc29jc3AuY29tMB0GA1UdDgQWBBS/uqvbnvOtGW02MBwull2+vhh6YTAL\r\nBgNVHQ8EBAMCBLAwgfsGA1UdEQSB8zCB8IIdcHJldmlldy5wb3dlcnNoZWxsZ2Fs\r\nbGVyeS5jb22CH3BzZy1wcm9kLWNlbnRyYWx1cy5jbG91ZGFwcC5uZXSCHHBzZy1w\r\ncm9kLWVhc3R1cy5jbG91ZGFwcC5uZXSCIXd3dy5wcmV2aWV3LnBvd2Vyc2hlbGxn\r\nYWxsZXJ5LmNvbYIcbXNjb25maWdnYWxsZXJ5LmNsb3VkYXBwLm5ldIIdbXNjb25m\r\naWdnYWxsZXJ5Mi5jbG91ZGFwcC5uZXSCFXBvd2Vyc2hlbGxnYWxsZXJ5LmNvbYIZ\r\nd3d3LnBvd2Vyc2hlbGxnYWxsZXJ5LmNvbTCBrAYDVR0fBIGkMIGhMIGeoIGboIGY\r\nhktodHRwOi8vbXNjcmwubWljcm9zb2Z0LmNvbS9wa2kvbXNjb3JwL2NybC9NaWNy\r\nb3NvZnQlMjBJVCUyMFRMUyUyMENBJTIwMS5jcmyGSWh0dHA6Ly9jcmwubWljcm9z\r\nb2Z0LmNvbS9wa2kvbXNjb3JwL2NybC9NaWNyb3NvZnQlMjBJVCUyMFRMUyUyMENB\r\nJTIwMS5jcmwwTQYDVR0gBEYwRDBCBgkrBgEEAYI3KgEwNTAzBggrBgEFBQcCARYn\r\naHR0cDovL3d3dy5taWNyb3NvZnQuY29tL3BraS9tc2NvcnAvY3BzMB8GA1UdIwQY\r\nMBaAFFiIn9bcnEgitxQ+/4SI6OaF//p9MB0GA1UdJQQWMBQGCCsGAQUFBwMCBggr\r\nBgEFBQcDATANBgkqhkiG9w0BAQsFAAOCAgEAWI/uANYMYQTyOpLWVp7svNFyGrR3\r\nqjC4ym6vEm8S/d0IV+TfycsUg1L75bM1/g7xqKHxAzmyI2kaJwt1NOoyVGXjQh12\r\nowU880V2Hx+L+K0CQCBUBNghppgRSfjzvv1PFmc8U3e7eCgBP0Z5bK4xHeQtYnvw\r\nuzhxdz8y87dAWyN2qP7d29Jq01rNv5oDvmk8EvlIHAXdgD/N2OfCAIch4IveVozS\r\nQDqlCrwLrC3h3lLeXzWfvgG0QYEG4XoUYGCBLneQNnJlruIccb+Nsh6z9cFxSn9Q\r\nvGhbE3C8SGWuBdQq5lvt/uTK2FuBINpE4XPIXvJpeALE5B/mqhHPQjzy6xDnUwOU\r\nRFVCZLQ4RoHjA/AT8PsQuCZYqHR3jX0GQtRpdirnI3QBaBKb1fnOR0uDTXynC5ap\r\nmzeS4w+I0hu/yIX5Fe03cqVXJ4CncP0h1Lrke3h0i9vywT9fFRCnmpgId5QY13ZY\r\nXSKBpMfwnRwXJCs2KZpnENtXneOIpYC1I28pLJYolRgU0taY5rGqyVxu4Rpc9m8j\r\n/38pOU76qrwnG/rtmU5zVWuSG033Kagwu2uIWsk1cit1b7AP+svEn08zsPC374cn\r\neFXZoXW3HxhrXyJJu8hn0EAV16r1GY99+LTbC8ReKkFW2P0ks/fVRYAmCx//6tYT\r\nj0VADbSUDY/QvWs=\r\n-----END CERTIFICATE-----\r\nsubject=/CN=www.powershellgallery.com\r\nissuer=/C=US/ST=Washington/L=Redmond/O=Microsoft Corporation/OU=Microsoft IT/CN=Microsoft IT TLS CA 1\r\n---\r\nNo client certificate CA names sent\r\nPeer signing digest: SHA256\r\nServer Temp Key: ECDH, P-256, 256 bits\r\n---\r\nSSL handshake has read 4410 bytes and written 415 bytes\r\n---\r\nNew, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES256-GCM-SHA384\r\nServer public key is 2048 bit\r\nSecure Renegotiation IS supported\r\nCompression: NONE\r\nExpansion: NONE\r\nNo ALPN negotiated\r\nSSL-Session:\r\n    Protocol  : TLSv1.2\r\n    Cipher    : ECDHE-RSA-AES256-GCM-SHA384\r\n    Session-ID: 210C0000E78293EB51752502A2C3C5D3CBCE4714ACD59B56CEEA4F5183673C3A\r\n    Session-ID-ctx: \r\n    Master-Key: 6B8126E2D6555B938A6338398C9F9A3B76BF2497672BFEAF9DE783686266C7CD40C69DBA0D405010A44006C3D78937E0\r\n    Key-Arg   : None\r\n    Krb5 Principal: None\r\n    PSK identity: None\r\n    PSK identity hint: None\r\n    Start Time: 1580465938\r\n    Timeout   : 300 (sec)\r\n    Verify return code: 0 (ok)\r\n---\r\n```\r\n\r\nIn my ArchLinux OS, this problem doesn't happen:\r\n\r\n```powershell\r\n> Invoke-RestMethod https://www.powershellgallery.com/api/v2\r\n\r\nxml                            service\r\n---                            -------\r\nversion=\"1.0\" encoding=\"utf-8\" service\r\n```\r\n\r\nOpenSSL version RHEL 7.7:\r\n```bash\r\n$ rpm -qa | grep openssl\r\nopenssl-1.0.2k-19.el7.x86_64\r\nopenssl-libs-1.0.2k-19.el7.x86_64\r\nopenssl-devel-1.0.2k-19.el7.x86_64\r\nxmlsec1-openssl-1.2.20-7.el7_4.x86_64\r\n```\r\nOpenSSL version ArchLinux:\r\n```bash\r\n yay -Qi openssl\r\nNombre                    : openssl\r\nVersi\u00f3n                   : 1.1.1.d-2\r\nDescripci\u00f3n               : The Open Source toolkit for Secure Sockets Layer and Transport Layer\r\n                            Security\r\nArquitectura              : x86_64\r\nURL                       : https://www.openssl.org\r\nLicencias                 : custom:BSD\r\nGrupos                    : Nada\r\nProvee                    : Nada\r\nDepende de                : perl\r\nDependencias opcionales   : ca-certificates [instalado]\r\nExigido por               : apache  arch-audit  bind-tools  borg  coreutils  cryptsetup  curl\r\n                            freerdp  git  gwenhywfar  ipmitool  iputils  kmod  ldns  libarchive\r\n                            libevent  libgda  libgit2  libsasl  libshout  libsrtp  libssh  libssh2\r\n                            libvirt  libvncserver  nextcloud-client  nmap  nodejs  openssh\r\n                            openvpn  opusfile  ostree  perl-net-ssleay  pkcs11-helper\r\n                            postgresql-libs  ppp  python  python2  ruby  s-nail  spotify  srt\r\n                            tcpdump  tpm2-tss  vde2  virtualbox  vmware-vcli  wpa_supplicant\r\n                            x11vnc  xmlsec\r\nOpcional para             : apr-util  glib-networking\r\nEn conflicto con          : Nada\r\nRemplaza a                : Nada\r\nTama\u00f1o de la instalaci\u00f3n  : 7,22 MiB\r\nEncargado                 : Felix Yan <felixonmars@archlinux.org>\r\nFecha de creaci\u00f3n         : mi\u00e9 13 nov 2019 17:09:29 CET\r\nFecha de instalaci\u00f3n      : mar 19 nov 2019 09:06:28 CET\r\nMotivo de la instalaci\u00f3n  : Instalado como dependencia de otro paquete\r\nGuion de instalaci\u00f3n      : No\r\nValidado por              : Firma\r\n```\r\n\n\n<blockquote></blockquote>",
      "created_at": "2020-01-31T10:36:09Z",
      "updated_at": "2020-01-31T10:36:12Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@chrpinedo Please check with latest PowerShell 7.0 build.",
      "created_at": "2020-01-31T19:24:59Z",
      "updated_at": "2020-01-31T19:24:59Z"
    },
    {
      "author": "mikeTWC1984",
      "author_association": "CONTRIBUTOR",
      "body": "@chrpinedo  You can also check if your url works with curl.  System might not like the certificate because key size is too small or something else (I had such issue on Centos8)",
      "created_at": "2020-02-03T22:14:04Z",
      "updated_at": "2020-02-03T22:14:04Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@mikeTWC1984 curl is able to validate the SSL certificate of www.powershellgallery.com as \"openssl connect\". However, powershell fails to validate this SSL certificate as shown before.\r\n\r\n```bash\r\n$ curl https://www.powershellgallery.com\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"utf-8\" />\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n    \r\n    \r\n\r\n    <title>\r\n        PowerShell Gallery\r\n        | Home\r\n    </title>\r\n.......\r\n```\r\n\r\n",
      "created_at": "2020-02-04T12:24:20Z",
      "updated_at": "2020-02-04T12:24:20Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@iSazonov I have the problem also with 7.0.0-rc.2 in my updated RHEL7:\r\n\r\n```powershell\r\n> Get-PSRepository -Debug\r\nDEBUG: 00:00:00.0000042 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0001577 Debug: True\r\nDEBUG: 00:00:00.0010587 INVOKING PowerShell Fn Get-DynamicOptions with args Provider that has length 1\r\nDEBUG: 00:00:00.0019188 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0040819 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0090412 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0090915 Debug: True\r\nDEBUG: 00:00:00.0098674 INVOKING PowerShell Fn Get-DynamicOptions with args Source that has length 1\r\nDEBUG: 00:00:00.0105656 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0141681 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0206838 Calling New() : MethodName = 'ResolvePackageSources'\r\nDEBUG: 00:00:00.0212659 MessageResolver: Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:00.0217356 Debug: True\r\nDEBUG: 00:00:00.0221881 ProviderName: PowerShellGet\r\nDEBUG: 00:00:00.0233144 INVOKING PowerShell Fn Resolve-PackageSource with args  that has length 0\r\nDEBUG: 00:00:00.0244794 In PowerShellGet Provider - 'Resolve-PackageSource'.\r\nDEBUG: 00:00:00.0269885 PowerShell Script 'PSModule' Function 'Resolve-PackageSource' returns null.\r\nDEBUG: 00:00:00.0281375 Done calling powershell \u00abResolve-PackageSource\u00bb \u00abPSModule\u00bb\r\nWARNING: Unable to find module repositories.\r\n\r\nConfirm\r\nContinue with this operation?\r\n[Y] Yes  [A] Yes to All  [H] Halt Command  [S] Suspend  [?] Help (default is \"Y\"): Y\r\nPS /home/bcppizac> Register-PSRepository -Default -Debug\r\nDEBUG: 00:00:00.0000004 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0001240 Debug: True\r\nDEBUG: 00:00:00.0002118 Name: PSGallery\r\nDEBUG: 00:00:00.0010565 INVOKING PowerShell Fn Get-DynamicOptions with args Provider that has length 1\r\nDEBUG: 00:00:00.0018672 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0036184 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0083508 Calling New() : MethodName = 'GetDynamicOptions'\r\nDEBUG: 00:00:00.0084423 Debug: True\r\nDEBUG: 00:00:00.0085496 Name: PSGallery\r\nDEBUG: 00:00:00.0126694 INVOKING PowerShell Fn Get-DynamicOptions with args Source that has length 1\r\nDEBUG: 00:00:00.0135221 In PowerShellGet Provider - 'Get-DynamicOptions'.\r\nDEBUG: 00:00:00.0180395 Done calling powershell \u00abGet-DynamicOptions\u00bb \u00abPSModule\u00bb\r\nDEBUG: 00:00:00.0243393 Calling New() : MethodName = 'ResolvePackageSources'\r\nDEBUG: 00:00:00.0248943 MessageResolver: Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:00.0253656 Name: PSGallery\r\nDEBUG: 00:00:00.0258681 Debug: True\r\nDEBUG: 00:00:00.0263338 ProviderName: PowerShellGet\r\nDEBUG: 00:00:00.0274900 INVOKING PowerShell Fn Resolve-PackageSource with args  that has length 0\r\nDEBUG: 00:00:00.0285415 In PowerShellGet Provider - 'Resolve-PackageSource'.\r\nDEBUG: 00:00:00.0307811 PowerShell Script 'PSModule' Function 'Resolve-PackageSource' returns null.\r\nDEBUG: 00:00:00.0316369 Done calling powershell \u00abResolve-PackageSource\u00bb \u00abPSModule\u00bb\r\n\r\nConfirm\r\nAre you sure you want to perform this action?\r\nPerforming the operation \"Register Module Repository.\" on target \"Module Repository 'PSGallery' () in provider 'PowerShellGet'.\".\r\n[Y] Yes  [A] Yes to All  [N] No  [L] No to All  [S] Suspend  [?] Help (default is \"Y\"): Y\r\nDEBUG: 00:00:01.2893492 Calling New() : MethodName = 'AddPackageSource'\r\nDEBUG: 00:00:01.2898985 MessageResolver: Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:01.2903879 Name: PSGallery\r\nDEBUG: 00:00:01.2909031 Debug: True\r\nDEBUG: 00:00:01.2913619 ProviderName: PowerShellGet\r\nDEBUG: 00:00:01.2926575 INVOKING PowerShell Fn Add-PackageSource with args PSGallery, , False that has length 3\r\nDEBUG: 00:00:01.2939667 In PowerShellGet Provider - 'Add-PackageSource'.\r\nDEBUG: 00:00:01.2953471 OPTION: MessageResolver => Microsoft.PowerShell.PackageManagement.Cmdlets.GetMessageString\r\nDEBUG: 00:00:01.3064241 OPTION: Name => PSGallery\r\nDEBUG: 00:00:01.3074574 OPTION: Debug => True\r\nDEBUG: 00:00:01.3081877 OPTION: ProviderName => PowerShellGet\r\nDEBUG: 00:00:01.6987864 Ping-Endpoint: location=https://www.powershellgallery.com/api/v2, statuscode=, resolvedLocation=\r\nDEBUG: 00:00:02.0873502 Ping-Endpoint: location=https://www.powershellgallery.com/api/v2/items/psscript, statuscode=, resolvedLocation=\r\nDEBUG: 00:00:02.4776804 Ping-Endpoint: location=https://www.powershellgallery.com/api/v2, statuscode=, resolvedLocation=\r\nDEBUG: 00:00:02.8719651 Ping-Endpoint: location=https://www.powershellgallery.com/api/v2/items/psscript, statuscode=, resolvedLocation=\r\nDEBUG: 00:00:02.8727988 PowerShell Script 'PSModule' Function 'Add-PackageSource' returns null.\r\nDEBUG: 00:00:02.8740907 Done calling powershell \u00abAdd-PackageSource\u00bb \u00abPSModule\u00bb\r\nPS /home/bcppizac> Get-PSRepository\r\nWARNING: Unable to find module repositories.\r\nPS /home/bcppizac> Invoke-RestMethod -Uri https://www.powershellgallery.com/api/v2\r\nInvoke-RestMethod: The remote certificate is invalid according to the validation procedure.\r\nPS /home/bcppizac> Invoke-RestMethod -Uri https://www.powershellgallery.com/api/v2 -Debug\r\nVERBOSE: GET https://www.powershellgallery.com/api/v2 with 0-byte payload\r\n\r\nConfirm\r\nContinue with this operation?\r\n[Y] Yes  [A] Yes to All  [H] Halt Command  [S] Suspend  [?] Help (default is \"Y\"): Y\r\nInvoke-RestMethod: The remote certificate is invalid according to the validation procedure.\r\nPS /home/bcppizac> $PSVersionTable\r\n\r\nName                           Value\r\n----                           -----\r\nPSVersion                      7.0.0-rc.2\r\nPSEdition                      Core\r\nGitCommitId                    7.0.0-rc.2\r\nOS                             Linux 3.10.0-1062.9.1.el7.x86_64 #1 SMP Mon Dec 2 08:31:54 EST 2019\r\nPlatform                       Unix\r\nPSCompatibleVersions           {1.0, 2.0, 3.0, 4.0\u2026}\r\nPSRemotingProtocolVersion      2.3\r\nSerializationVersion           1.1.0.1\r\nWSManStackVersion              3.0\r\n```",
      "created_at": "2020-02-04T12:29:54Z",
      "updated_at": "2020-02-04T12:29:54Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "PowerShell uses .Net Core API and does not directly check certificates. I guess it is either local issue or .Net Core issue\r\nYou could try to manually check the certificate with Verify() method https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate2.verify?view=netcore-3.1\n\n<blockquote><img src=\"https://docs.microsoft.com/en-us/media/logos/logo-ms-social.png\" width=\"48\" align=\"right\"><div><strong><a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.x509certificates.x509certificate2.verify\">X509Certificate2.Verify Method (System.Security.Cryptography.X509Certificates)</a></strong></div><div><p sourcefile=\"api/System.Security.Cryptography.X509Certificates.X509Certificate2.Verify.yml\" sourcestartlinenumber=\"1\" jsonPath=\"/members/0/summary\">Performs a X.509 chain validation using basic validation policy.</p>\n</div></blockquote>",
      "created_at": "2020-02-04T13:49:25Z",
      "updated_at": "2020-02-04T13:49:27Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@iSazonov sorry but i think this is too much advanced for a user as me... xD",
      "created_at": "2020-02-05T13:30:53Z",
      "updated_at": "2020-02-05T13:30:53Z"
    },
    {
      "author": "mikeTWC1984",
      "author_association": "CONTRIBUTOR",
      "body": "@chrpinedo  are you running your rhel as container on windows host?",
      "created_at": "2020-02-07T15:51:49Z",
      "updated_at": "2020-02-07T15:51:49Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@mikeTWC1984 no, I am running RHEL 7.7 in VMware (6.5) virtual machines.",
      "created_at": "2020-02-08T16:37:13Z",
      "updated_at": "2020-02-08T16:37:13Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "This weekend I downloaded a Centos 7 image from osboxes.org for Virtualbox. I updated the OS and installed Powershell preview 7.0.0-rc2 and it works right, this problem doesn't exist in Centos 7.",
      "created_at": "2020-02-09T19:32:09Z",
      "updated_at": "2020-02-09T19:32:09Z"
    },
    {
      "author": "msftbot[bot]",
      "author_association": "NONE",
      "body": "This issue has been marked as answered and has not had any activity for **1 day**. It has been closed for housekeeping purposes.",
      "created_at": "2020-02-11T12:00:11Z",
      "updated_at": "2020-02-11T12:00:11Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@iSazonov answered? You probably have a problem with RHEL 7 ... what is the solution?? I must have missed something...",
      "created_at": "2020-02-11T12:32:44Z",
      "updated_at": "2020-02-11T12:33:07Z"
    },
    {
      "author": "iSazonov",
      "author_association": "COLLABORATOR",
      "body": "@chrpinedo PowerShell does not check certificates directly, it uses .Net Core and then OS API. So it is not PowerShell issue. Perhaps it is local issue, .Net Core issue or OS issue. I agree PowerShell should works on RHEL 7 so I ping @SteveL-MSFT to make a conclusion.   ",
      "created_at": "2020-02-11T12:58:28Z",
      "updated_at": "2020-02-11T12:58:28Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "thank you @iSazonov for your explanation, I didn't understand why the ticket was closed :)",
      "created_at": "2020-02-11T13:22:15Z",
      "updated_at": "2020-02-11T13:22:25Z"
    },
    {
      "author": "mikeTWC1984",
      "author_association": "CONTRIBUTOR",
      "body": "@chrpinedo Check this issue: https://github.com/dotnet/runtime/issues/31325\r\n",
      "created_at": "2020-02-11T15:28:13Z",
      "updated_at": "2020-02-11T15:28:13Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@mikeTWC1984 I am a bit confused... I installed powershell RPM package and I followed the instructions for [RHEL 7](https://docs.microsoft.com/es-es/powershell/scripting/install/installing-powershell-core-on-linux?view=powershell-6#red-hat-enterprise-linux-rhel-7). There is no mention to install dotnet packages.\r\n\r\nThe powershell rpm package has no dependency with dotnet packages:\r\n\r\n```bash\r\n$ sudo rpm -qR powershell\r\n[sudo] password for bcppizac: \r\nopenssl-libs\r\nlibicu\r\n/bin/sh\r\n/bin/sh\r\nrpmlib(PayloadFilesHavePrefix) <= 4.0-1\r\nrpmlib(CompressedFileNames) <= 3.0.4-1\r\n$ sudo rpm -qpR powershell-preview-7.0.0_rc.2-1.rhel.7.x86_64.rpm \r\nopenssl-libs\r\nlibicu\r\n/bin/sh\r\n/bin/sh\r\nrpmlib(PayloadFilesHavePrefix) <= 4.0-1\r\nrpmlib(CompressedFileNames) <= 3.0.4-1\r\n```\r\n\r\nIn my RHEL 7 there is no \"dotnet\" package installed:\r\n\r\n```bash\r\n$ rpm -qa | grep dotnet\r\n$ \r\n```\r\nAlthough I can install them with yum:\r\n\r\n```bash\r\n$ yum search dotnet\r\nComplementos cargados:product-id, rhnplugin, search-disabled-repos, subscription-manager\r\n*Note* Spacewalk repositories are not listed below. You must run this command as root to access Spacewalk repositories.\r\n========================================================================================= N/S matched: dotnet =========================================================================================\r\ndotnet-runtime-deps-2.1.x86_64 : dotnet-runtime-deps-2.1 2.1.15\r\ndotnet-runtime-deps-2.2.x86_64 : dotnet-runtime-deps-2.2 2.2.8\r\ndotnet-runtime-deps-3.0.x86_64 : dotnet-runtime-deps-3.0 3.0.2\r\ndotnet-runtime-deps-3.1.x86_64 : dotnet-runtime-deps-3.1 3.1.1\r\nmicrosoft-mlserver-dotnet-9.2.x86_64 : dotnet\r\ndotnet-apphost-pack-3.0.x86_64 : Microsoft.NETCore.App.Host 3.0.2\r\ndotnet-apphost-pack-3.1.x86_64 : Microsoft.NETCore.App.Host 3.1.1\r\n......\r\n```",
      "created_at": "2020-02-12T11:11:32Z",
      "updated_at": "2020-02-12T11:11:32Z"
    },
    {
      "author": "mikeTWC1984",
      "author_association": "CONTRIBUTOR",
      "body": "@chrpinedo  I mean try the workaround they mentioned ( create env variable  CLR_OPENSSL_VERSION_OVERRIDE=10) or try to update openssl to 1.1.1.  ",
      "created_at": "2020-02-12T15:23:18Z",
      "updated_at": "2020-02-12T15:23:18Z"
    },
    {
      "author": "chrpinedo",
      "author_association": "NONE",
      "body": "@mikeTWC1984 I can confirm that \"CLR_OPENSSL_VERSION_OVERRIDE=10) solved the problem in RHEL 7:\r\n\r\n```bash\r\n$ CLR_OPENSSL_VERSION_OVERRIDE=10 pwsh\r\nPowerShell 6.2.4\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\n\r\nhttps://aka.ms/pscore6-docs\r\nType 'help' to get help.\r\n\r\nPS /home/bcppizac> Invoke-RestMethod https://www.powershellgallery.com/api/v2\r\n\r\nxml                            service\r\n---                            -------\r\nversion=\"1.0\" encoding=\"utf-8\" service\r\n\r\nPS /home/bcppizac> Get-PSRepository\r\n\r\nName                      InstallationPolicy   SourceLocation\r\n----                      ------------------   --------------\r\nPSGallery                 Untrusted            https://www.powershellgallery.c\u2026\r\n```\r\n\r\nPerhaps this should documented in the installation instructions for RHEL 7....\r\n\r\nThank you!!",
      "created_at": "2020-02-14T09:00:57Z",
      "updated_at": "2020-02-14T09:00:57Z"
    }
  ],
  "created_at": "2020-01-31T10:04:40Z",
  "number": 11740,
  "state": "closed",
  "title": "Invoke-RestMethod fails to validate SSL certificates in RHEL7",
  "updated_at": "2020-02-14T09:00:57Z"
}